"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[217],{4217:(hT,zs,D)=>{D.r(zs),D.d(zs,{EvaluationModule:()=>lT});var Wt=D(177),p=D(4438),yn=D(8499),Ks=D(467),$g=D(5312),ie=D(6677),Ws=D(1626);let ua=(()=>{class i{constructor(e){this.http=e,this.baseUrl=$g.c.API_URL+"evaluation/";let a=localStorage.getItem("token"),n=new Headers;n.append("Content-Type","application/json"),n.append("Accept","application/json"),n.append("Access-Control-Allow-Headers","Content-Type, X-XSRF-TOKEN"),n.append("Authorization",`Bearer ${a}`),this.headers=n}callGet(e,a){var n=this;return(0,Ks.A)(function*(){let r={params:a,headers:n.headers};try{return yield n.http.get(n.baseUrl+e,r).toPromise()}catch(s){ie.w.notify(3==s.type?"Request header field X-XSRF-TOKEN is not allowed by Access-Control-Allow-Headers in preflight response.":s,"error")}})()}callPost(e,a){let n=new URLSearchParams;return n.append("method","add"),this.http.post(this.baseUrl+e,a,{headers:this.headers,search:n}).pipe(s=>s)}static#e=this.\u0275fac=function(a){return new(a||i)(p.KVO(Ws.Qq))};static#t=this.\u0275prov=p.jDH({token:i,factory:i.\u0275fac})}return i})();var Gt=D(8498);let Gs=(()=>{class i{constructor(e,a,n){this.HttpService=e,this.apiservice=a,this.route=n}setGroup(e){this.Group=e}getGroup(){return this.Group}static#e=this.\u0275fac=function(a){return new(a||i)(p.KVO(yn.k),p.KVO(ua),p.KVO(Gt.Ix))};static#t=this.\u0275prov=p.jDH({token:i,factory:i.\u0275fac})}return i})();var Us=D(1620),He=D(9417);let $s=(()=>{class i{constructor(e,a,n,r){this.HttpService=e,this.apiservice=a,this.route=n,this.datepipe=r}set Evaluation(e){this._evaluation=e}get Evaluation(){return this._evaluation}set MultipleChoice(e){this._multiplechoice=e}get MultipleChoice(){return this._multiplechoice}set Evaluationlist(e){this._evaluationlist=e}get Evaluationlist(){return this._evaluationlist}set Guide(e){this._guide=e}get Guide(){return this._guide}setMultipleChoice(e){return this.MultipleChoice=e}getMultipleChoice(){return this.MultipleChoice}setLoadlist(e){return this.Loadlist=e}getLoadlist(){return this.Loadlist}delete(e,a){ie.w.showloading(),this.HttpService.postMethods("multiplechoice/deletes",e).subscribe(n=>{n.success?(ie.w.notify(n.message,"success"),a.loadList()):ie.w.notify(n.message,"error"),ie.w.hideloading()},n=>{ie.w.hideloading(),ie.w.notify(n,"error")})}update(e,a){ie.w.showloading(),this.HttpService.postMethods("multiplechoice/update",e).subscribe(n=>{if(ie.w.hideloading(),n.success){ie.w.notify(n.message,"success");let r="";r="/system/multiple_choice/list_standard"==this.route.url?"/system/multiple_choice/list_standards":"/system/multiple_choice/list_standard",this.route.navigate([r]),a.hide()}else ie.w.notify(n.message,"error")})}update_inputdata(e,a){ie.w.showloading(),this.HttpService.postMethods("multiplechoice/update",e).subscribe(n=>{if(ie.w.hideloading(),n.success){ie.w.notify(n.message,"success");let r="";r="/system/multiple_choice/inputdata"==this.route.url?"/system/multiple_choice/inputdatas":"/system/multiple_choice/inputdata",this.route.navigate([r]),a.hide()}else ie.w.notify(n.message,"error")})}getdatapermission(e,a){e.id=this._evaluation.id,this.HttpService.postMethods("multiplechoice/getdatapermission",e).subscribe(n=>{a.users=n.user,a.list=n.list,a.permission=n.permission,ie.w.hideloading()})}getDanhmuc(e){this.HttpService.getMethods("multiplechoice/getDanhmuc",e).subscribe(a=>this.listdanhmuc=a.data,a=>{ie.w.hideloading()})}deleteGuide(e,a){ie.w.showloading(),this.HttpService.postMethods("multiplechoice/deleteGuide",e).subscribe(n=>{n.success?(ie.w.notify(n.message,"success"),a.loadListHD()):ie.w.notify(n.message,"error"),ie.w.hideloading()},n=>{ie.w.hideloading(),ie.w.notify(n,"error")})}static#e=this.\u0275fac=function(a){return new(a||i)(p.KVO(yn.k),p.KVO(ua),p.KVO(Gt.Ix),p.KVO(Wt.vh))};static#t=this.\u0275prov=p.jDH({token:i,factory:i.\u0275fac})}return i})();var he=D(345),_e=D(2839),E=D(7283);const Xg=["*"];let Yg=(()=>{class i extends E.ic{constructor(e,a,n,r,s,o,l){super(e,a,n,r,o,l),this._createEventEmitters([{subscribe:"click",emit:"onClick"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"disabledChange"},{emit:"elementAttrChange"},{emit:"focusStateEnabledChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"iconChange"},{emit:"rtlEnabledChange"},{emit:"stylingModeChange"},{emit:"tabIndexChange"},{emit:"templateChange"},{emit:"textChange"},{emit:"typeChange"},{emit:"useSubmitBehaviorChange"},{emit:"validationGroupChange"},{emit:"visibleChange"},{emit:"widthChange"}]),s.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(e){this._setOption("accessKey",e)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(e){this._setOption("activeStateEnabled",e)}get disabled(){return this._getOption("disabled")}set disabled(e){this._setOption("disabled",e)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(e){this._setOption("elementAttr",e)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(e){this._setOption("focusStateEnabled",e)}get height(){return this._getOption("height")}set height(e){this._setOption("height",e)}get hint(){return this._getOption("hint")}set hint(e){this._setOption("hint",e)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(e){this._setOption("hoverStateEnabled",e)}get icon(){return this._getOption("icon")}set icon(e){this._setOption("icon",e)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(e){this._setOption("rtlEnabled",e)}get stylingMode(){return this._getOption("stylingMode")}set stylingMode(e){this._setOption("stylingMode",e)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(e){this._setOption("tabIndex",e)}get template(){return this._getOption("template")}set template(e){this._setOption("template",e)}get text(){return this._getOption("text")}set text(e){this._setOption("text",e)}get type(){return this._getOption("type")}set type(e){this._setOption("type",e)}get useSubmitBehavior(){return this._getOption("useSubmitBehavior")}set useSubmitBehavior(e){this._setOption("useSubmitBehavior",e)}get validationGroup(){return this._getOption("validationGroup")}set validationGroup(e){this._setOption("validationGroup",e)}get visible(){return this._getOption("visible")}set visible(e){this._setOption("visible",e)}get width(){return this._getOption("width")}set width(e){this._setOption("width",e)}_createInstance(e,a){return new _e.A(e,a)}ngOnDestroy(){this._destroyWidget()}}return i.\u0275fac=function(e){return new(e||i)(p.rXU(p.aKT),p.rXU(p.SKi),p.rXU(E.zF),p.rXU(E.jS),p.rXU(E.fH),p.rXU(he.pJ),p.rXU(p.Agw))},i.\u0275cmp=p.VBU({type:i,selectors:[["dx-button"]],inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",disabled:"disabled",elementAttr:"elementAttr",focusStateEnabled:"focusStateEnabled",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",icon:"icon",rtlEnabled:"rtlEnabled",stylingMode:"stylingMode",tabIndex:"tabIndex",template:"template",text:"text",type:"type",useSubmitBehavior:"useSubmitBehavior",validationGroup:"validationGroup",visible:"visible",width:"width"},outputs:{onClick:"onClick",onContentReady:"onContentReady",onDisposing:"onDisposing",onInitialized:"onInitialized",onOptionChanged:"onOptionChanged",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",disabledChange:"disabledChange",elementAttrChange:"elementAttrChange",focusStateEnabledChange:"focusStateEnabledChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",iconChange:"iconChange",rtlEnabledChange:"rtlEnabledChange",stylingModeChange:"stylingModeChange",tabIndexChange:"tabIndexChange",templateChange:"templateChange",textChange:"textChange",typeChange:"typeChange",useSubmitBehaviorChange:"useSubmitBehaviorChange",validationGroupChange:"validationGroupChange",visibleChange:"visibleChange",widthChange:"widthChange"},features:[p.Jv_([E.zF,E.jS,E.fH]),p.Vt3],ngContentSelectors:Xg,decls:1,vars:0,template:function(e,a){1&e&&(p.NAR(),p.SdG(0))},encapsulation:2}),i})(),jg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[E.p_,E.xZ],E.xZ]}),i})();function Qg(i,t){if(1&i){const e=p.RV6();p.j41(0,"div",14)(1,"div",15)(2,"div",3)(3,"div",16)(4,"div",7)(5,"div",17)(6,"div",18),p.nrm(7,"i",19),p.j41(8,"span"),p.EFF(9),p.k0s()()(),p.j41(10,"div",20)(11,"div",18)(12,"span"),p.EFF(13),p.k0s()()()()()()(),p.j41(14,"div",21)(15,"div",3)(16,"div",16)(17,"div",7)(18,"div",22)(19,"div",23),p.nrm(20,"div",24),p.k0s(),p.nrm(21,"br"),p.j41(22,"div")(23,"div",25),p.EFF(24,"K\u1ebft lu\u1eadn: "),p.j41(25,"span",11),p.EFF(26),p.k0s()(),p.nrm(27,"br"),p.j41(28,"div",25),p.EFF(29,"Khuy\u1ebfn ngh\u1ecb: "),p.j41(30,"span",11),p.EFF(31),p.k0s()(),p.nrm(32,"br"),p.j41(33,"div",25),p.EFF(34,"Th\u1eddi gian th\u1ef1c hi\u1ec7n: "),p.j41(35,"span",11),p.EFF(36),p.k0s()(),p.nrm(37,"br"),p.j41(38,"div",25),p.EFF(39,"B\xe1c s\u0129 ch\u1ec9 \u0111\u1ecbnh: "),p.j41(40,"span",11),p.EFF(41),p.k0s()(),p.nrm(42,"br"),p.j41(43,"div",25),p.EFF(44,"Th\u1eddi gian duy\u1ec7t: "),p.j41(45,"span",11),p.EFF(46),p.k0s()(),p.nrm(47,"br"),p.j41(48,"div",25),p.EFF(49,"B\xe1c s\u0129 duy\u1ec7t: "),p.j41(50,"span",11),p.EFF(51),p.k0s()(),p.nrm(52,"br"),p.j41(53,"div",25),p.EFF(54,"B\xe1c s\u0129 \u0111\u1ecdc: "),p.j41(55,"span",11),p.EFF(56),p.k0s()(),p.nrm(57,"br"),p.j41(58,"div",25),p.EFF(59,"K\u1ef9 thu\u1eadt vi\xean: "),p.j41(60,"span",11),p.EFF(61),p.k0s()(),p.nrm(62,"br"),p.k0s()(),p.nrm(63,"div",20),p.j41(64,"div",20)(65,"div",26)(66,"dx-button",27),p.bIt("onClick",function(){p.eBV(e);const n=p.XpG();return p.Njj(n.xemketqua())}),p.k0s(),p.j41(67,"dx-button",28),p.bIt("onClick",function(){p.eBV(e);const n=p.XpG();return p.Njj(n.xemanh())}),p.k0s()()()()()()()()}if(2&i){const e=t.$implicit;p.R7$(9),p.SpI(" ",e.tendichvu,""),p.R7$(4),p.JRh(e.ngaychidinh),p.R7$(7),p.Y8G("innerHTML",e.noidunghtml,p.npT),p.R7$(6),p.JRh(e.ketluan),p.R7$(5),p.JRh(e.denghi),p.R7$(5),p.JRh(e.ngaychidinh),p.R7$(5),p.JRh(e.bschidinh),p.R7$(5),p.JRh(e.ngayduyetketqua),p.R7$(5),p.JRh(e.bsduyetketqua),p.R7$(5),p.JRh(e.bsdocketqua),p.R7$(5),p.JRh(e.ktvthuchien)}}let Xs=(()=>{class i{constructor(e,a,n,r,s,o,l){this.HttpService=e,this.EvaluationModel=a,this.MultipleChoiceModel=n,this.modalService=r,this.route=s,this.router=o,this.apiService=l,this.txt_search="",this.pageEnabled=!1}ngOnInit(){this.loadList()}loadList(){var e=this;return(0,Ks.A)(function*(){ie.w.showloading(),e.getAll(),ie.w.hideloading()})()}getAll(){let e={mabn:JSON.parse(localStorage.getItem("username"))};this.HttpService.getMethods("getTKQ",e).subscribe(a=>{this.benhnhan=a.results.benhnhan,this.chidinhct=a.results.chidinhct},a=>{ie.w.hideloading()})}xemketqua(){}xemanh(){}tab(e){console.log(e),e="block"}static#e=this.\u0275fac=function(a){return new(a||i)(p.rXU(yn.k),p.rXU(Gs),p.rXU($s),p.rXU(Us.I8),p.rXU(Gt.Ix),p.rXU(Gt.nX),p.rXU(ua))};static#t=this.\u0275cmp=p.VBU({type:i,selectors:[["app-index"]],decls:59,vars:8,consts:[[1,"panel","panel-default","panel-wrapper","body-content"],[1,"bg-light","w-100"],[1,""],[1,"row","d-flex","align-items-center"],[1,"col-lg-12","text-start",2,"padding-top","30px"],[1,"card-title",2,"font-weight","600",";padding","10px","font-size","15px !important","font-family","auto","font-size","20px !important"],[1,"fas","fa-dollar-sign"],[1,"row","g-lg-5"],[1,"col-md-4"],[1,"recent-work-content","text-start","text-dark",2,"border-radius","5px"],[1,"card-title",2,"padding","10px","font-size","15px !important","font-family","auto","font-size","18px !important"],[2,"font-weight","600"],[1,"col-md-12"],["style","width: 100%;height: 100%;border-color: #000 !important;border: 1px solid #ccc !important;",4,"ngFor","ngForOf"],[2,"width","100%","height","100%","border-color","#000 !important","border","1px solid #ccc !important"],[2,"width","100%","height","50px","background","#12dc51"],[1,"col-lg-12","text-start"],[1,"col-md-9"],[1,"recent-work-content","text-start",2,"border-radius","5px","padding","16px","font-size","16px","font-weight","700","color","white"],["aria-hidden","true",1,"fa","fa-plus-square-o"],[1,"col-md-3"],[2,"color","rgba(0, 0, 0, .85)","display","block"],[1,"col-md-6",2,"padding-left","40px","padding-bottom","25px"],[1,"recent-work-content","text-start","text-dark",2,"border-radius","5px","padding","10px"],[3,"innerHTML"],[2,"padding","5px"],[1,"recent-work-content",2,"border-radius","5px"],["id","define","icon","fa fa-sitemap","text","Xem k\u1ebft qu\u1ea3 th\u1ef1c t\u1ebf \u1ea3o",2,"opacity","1 !important",3,"onClick"],["id","define","icon","fa fa-user","text","Xem \u1ea3nh",2,"opacity","1 !important",3,"onClick"]],template:function(a,n){1&a&&(p.j41(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),p.nrm(6,"i",6),p.EFF(7," TH\xd4NG TIN KH\xc1CH H\xc0NG:"),p.k0s(),p.j41(8,"div",7)(9,"div",8)(10,"div",9)(11,"h3",10),p.nrm(12,"i",6),p.EFF(13," H\u1ecd t\xean: "),p.j41(14,"span",11),p.EFF(15),p.k0s()()()(),p.j41(16,"div",8)(17,"div",9)(18,"h3",10),p.nrm(19,"i",6),p.EFF(20," Gi\u1edbi t\xednh: "),p.j41(21,"span",11),p.EFF(22),p.k0s()()()(),p.j41(23,"div",8)(24,"div",9)(25,"h3",10),p.nrm(26,"i",6),p.EFF(27," Ng\xe0y sinh: "),p.j41(28,"span",11),p.EFF(29),p.k0s()()()(),p.j41(30,"div",8)(31,"div",9)(32,"h3",10),p.nrm(33,"i",6),p.EFF(34," M\xe3 s\u1ed1 PID: "),p.j41(35,"span",11),p.EFF(36),p.k0s()()()(),p.j41(37,"div",8)(38,"div",9)(39,"h3",10),p.nrm(40,"i",6),p.EFF(41," M\xe3 BHYT : "),p.j41(42,"span",11),p.EFF(43),p.k0s()()()(),p.j41(44,"div",8)(45,"div",9)(46,"h3",10),p.nrm(47,"i",6),p.EFF(48," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),p.j41(49,"span",11),p.EFF(50),p.k0s()()()(),p.j41(51,"div",12)(52,"div",9)(53,"h3",10),p.nrm(54,"i",6),p.EFF(55," \u0110\u1ecba ch\u1ec9: "),p.j41(56,"span",11),p.EFF(57),p.k0s()()()()()()()()(),p.DNE(58,Qg,68,11,"div",13),p.k0s()),2&a&&(p.R7$(15),p.JRh(n.benhnhan.tenbn),p.R7$(7),p.JRh(n.benhnhan.gioitinh),p.R7$(7),p.JRh(n.benhnhan.namsinh),p.R7$(7),p.JRh(n.benhnhan.mabn),p.R7$(7),p.JRh(n.benhnhan.mabhyt),p.R7$(7),p.JRh(n.benhnhan.dienthoai),p.R7$(7),p.JRh(n.benhnhan.diachi),p.R7$(),p.Y8G("ngForOf",n.chidinhct))},dependencies:[Wt.Sq,Yg],styles:[".dx-field-label[_ngcontent-%COMP%]{font-size:14px}[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:13px;font-family:inherit}.btn-primary[_ngcontent-%COMP%]{background-color:#337ab7;border-color:#337ab7}#txt_search[_ngcontent-%COMP%]:focus{border-color:#337ab7}  .dx-datagrid .dx-column-lines>td{border-top:1px solid #ddd}  .dx-datagrid-rowsview{border:none}  .dx-datagrid-borders>.dx-datagrid-headers{border-top:none}  .app-footer{border:none}#table[_ngcontent-%COMP%], #table-container1[_ngcontent-%COMP%]{border:none}.collapsible[_ngcontent-%COMP%]{background-color:#777;color:#fff;cursor:pointer;padding:18px;width:100%;border:none;text-align:left;outline:none;font-size:15px}.active[_ngcontent-%COMP%], .collapsible[_ngcontent-%COMP%]:hover{background-color:#555}.content[_ngcontent-%COMP%]{padding:0 18px;display:none;overflow:hidden;background-color:#f1f1f1}"]})}return i})();const qg=[{path:"",component:Xs,data:{title:"Qu\u1ea3n tr\u1ecb c\xe1c ti\xeau ch\xed \u0111\xe1nh gi\xe1"}},{path:"index",component:Xs}];let Zg=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275mod=p.$C({type:i});static#i=this.\u0275inj=p.G2t({imports:[Gt.iI.forChild(qg),Gt.iI]})}return i})();var _=D(4292),Pe=D(3992),le=D(4905),y=D(7951),R=D(186),Q=D(4435),Y=D(181),U=D(7669),O=D(1269),Ee=D(2824),Se=D(4441),v=D(2463),Jg=D(2209),P=D(9104),J=D(7310),ze=D(4633),se=D(448),de=D(1299),N=D(8168),xe=D(8587),V=D(5042),Ys={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},tp=D(7420),ip=["shading","target","$arrow"],Qe={left:-1,top:-1,center:0,right:1,bottom:1},Qs={top:{my:"bottom center",at:"top center",collision:"fit flip"},bottom:{my:"top center",at:"bottom center",collision:"fit flip"},right:{my:"left center",at:"right center",collision:"flip fit"},left:{my:"right center",at:"left center",collision:"flip fit"}},ap={h:10,v:10};class np extends tp.A{constructor(t){var{shading:e,target:a,$arrow:n}=t;super((0,xe.A)(t,ip)),this._props=(0,N.A)({},this._props,{shading:e,target:a}),this._$arrow=n,this._positionSide=void 0,this.updatePosition(this._props.position)}positionWrapper(){this._props.shading&&this._$wrapper.css({top:0,left:0})}updateTarget(t){this._props.target=t,this.updatePosition(this._props.position)}_renderBoundaryOffset(){}_getContainerPosition(){var t=(0,V.Li)(this._position.offset||""),{h:e,v:a}=t,n=this._isVerticalSide(),r=this._isHorizontalSide();if(n||r){var h=(this._isPopoverInside()?-1:1)*Qe[this._positionSide]*((n?(0,R.Oq)(this._$arrow):(0,R.RG)(this._$arrow))-this._getContentBorderWidth(this._positionSide));n?a+=h:e+=h}return(0,y.X)({},this._position,{offset:e+" "+a})}_getContentBorderWidth(t){var e=this._$content.css(Ys[t]);return parseInt(e)||0}_isPopoverInside(){var t=Se.A.setup.normalizeAlign(this._position.my),e=Se.A.setup.normalizeAlign(this._position.at);return t.h===e.h&&t.v===e.v}_isVerticalSide(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._positionSide;return"top"===t||"bottom"===t}_isHorizontalSide(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._positionSide;return"left"===t||"right"===t}_getDisplaySide(t){var e=Se.A.setup.normalizeAlign(t.my),a=Se.A.setup.normalizeAlign(t.at),n=Qe[e.h]===Qe[a.h]&&Qe[e.v]===Qe[a.v]?-1:1;return Math.abs(Qe[e.h]-n*Qe[a.h])>Math.abs(Qe[e.v]-n*Qe[a.v])?a.h:a.v}_normalizePosition(t){var a,e={of:this._props.target,boundaryOffset:ap};return a=(0,v.O9)(t)?(0,y.X)(!0,{},e,this._positionToObject(t)):e,this._positionSide=this._getDisplaySide(a),a}_positionToObject(t){return(0,v.Kg)(t)?(0,y.X)({},Qs[t]):t}}var qs={left:"right",top:"bottom",right:"left",bottom:"top",center:"center"},Zs=function(i){return(0,v.Gv)(i)?i.name:i},Js=function(i,t){var e=i.option(t);return Zs(e)},Sn=function(i,t){var{target:e,shading:a,disabled:n,hideEvent:r}=i.option(),s=(0,v.Kg)(e),o=a&&"hide"===t,l=o?null:Js(i,"".concat(t,"Event"));if(o&&r&&J.A.log("W1020"),l&&!n){var d=(0,P.b4)(l,i.NAME),h=i._createAction(function(){var m=function(i,t){var e=i.option(t);return(0,v.Gv)(e)&&e.delay}(i,t+"Event");this._clearEventsTimeouts(),m?this._timeouts[t]=setTimeout(function(){i[t]()},m):i[t]()}.bind(i),{validatingTargetName:"target"}),u=function(m){h({event:m,target:(0,_.A)(m.currentTarget)})},c="_"+t+"EventHandler";if(s)i[c]=u,O.A.on(U.A.getDocument(),d,e,u);else{var g=(0,Y.c)((0,_.A)(e));i[c]=void 0,O.A.on(g,d,u)}}},On=function(i,t,e,a){var n=a||Js(i,e+"Event");if(n){n=(0,P.b4)(n,i.NAME);var r="_"+e+"EventHandler";i[r]?O.A.off(U.A.getDocument(),n,t,i[r]):O.A.off((0,Y.c)((0,_.A)(t)),n)}},eo=ze.A.inherit({_getDefaultOptions:function(){return(0,y.X)(this.callBase(),{target:void 0,shading:!1,position:(0,y.X)({},Qs.bottom),hideOnOutsideClick:!0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",from:1,to:0}},showTitle:!1,width:"auto",height:"auto",dragEnabled:!1,resizeEnabled:!1,fullScreen:!1,hideOnParentScroll:!0,arrowPosition:"",arrowOffset:0,_fixWrapperPosition:!0})},_defaultOptionsRules:function(){return[{device:{platform:"ios"},options:{arrowPosition:{boundaryOffset:{h:20,v:-10},collision:"fit"}}},{device:function(){return!(0,Q.Vd)()},options:{animation:null}},{device:function(){return(0,de.Nt)()},options:{useFlatToolbarButtons:!0}},{device:function(){return(0,de.gx)()},options:{useDefaultToolbarButtons:!0,showCloseButton:!1}}]},_init:function(){var i;this.callBase(),this._renderArrow(),this._timeouts={},this.$element().addClass("dx-popover"),this.$wrapper().addClass("dx-popover-wrapper");var t=null===(i=this.option("toolbarItems"))||void 0===i?void 0:i.length;this.setAria("role",t?"dialog":"tooltip")},_render:function(){this.callBase.apply(this,arguments),this._detachEvents(this.option("target")),this._attachEvents()},_detachEvents:function(i){On(this,i,"show"),On(this,i,"hide")},_attachEvents:function(){Sn(this,"show"),Sn(this,"hide")},_renderArrow:function(){this._$arrow=(0,_.A)("<div>").addClass("dx-popover-arrow").prependTo(this.$overlayContent())},_documentDownHandler:function(i){return!this._isOutsideClick(i)||this.callBase(i)},_isOutsideClick:function(i){return!(0,_.A)(i.target).closest(this.option("target")).length},_animate:function(i){i&&i.to&&"object"==typeof i.to&&(0,y.X)(i.to,{position:this._getContainerPosition()}),this.callBase.apply(this,arguments)},_stopAnimation:function(){this.callBase.apply(this,arguments)},_renderTitle:function(){this.$wrapper().toggleClass("dx-popover-without-title",!this.option("showTitle")),this.callBase()},_renderPosition:function(){var i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.callBase(),this._renderOverlayPosition(i),this._actions.onPositioned()},_renderOverlayPosition:function(i){this._resetOverlayPosition(i),this._updateContentSize(i);var t=this._getContainerPosition(),e=Se.A.setup(this.$overlayContent(),t),a=this._getSideByLocation(e);this._togglePositionClass("dx-position-"+a),this._toggleFlippedClass(e.h.flip,e.v.flip),(this._isHorizontalSide()||this._isVerticalSide())&&this._renderArrowPosition(a)},_resetOverlayPosition:function(i){this._setContentHeight(i),this._togglePositionClass("dx-position-"+this._positionController._positionSide),(0,Ee.Cy)(this.$overlayContent(),{left:0,top:0}),this._$arrow.css({top:"auto",right:"auto",bottom:"auto",left:"auto"})},_updateContentSize:function(i){if(this.$content()&&i){var t=Se.A.calculate(this.$overlayContent(),this._getContainerPosition());if(t.h.oversize>0&&this._isHorizontalSide()&&!t.h.fit){var e=(0,R.RG)(this.$overlayContent())-t.h.oversize;(0,R.zj)(this.$overlayContent(),e)}if(t.v.oversize>0&&this._isVerticalSide()&&!t.v.fit){var a=(0,R.Oq)(this.$overlayContent())-t.v.oversize,n=(0,R.Oq)(this.$content())-t.v.oversize;(0,R.k$)(this.$overlayContent(),a),(0,R.k$)(this.$content(),n)}}},_getContainerPosition:function(){return this._positionController._getContainerPosition()},_hideOnParentScrollTarget:function(){return(0,_.A)(this._positionController._position.of||this.callBase())},_getSideByLocation:function(i){var t=i.v.flip,e=i.h.flip;return this._isVerticalSide()&&t||this._isHorizontalSide()&&e||this._isPopoverInside()?qs[this._positionController._positionSide]:this._positionController._positionSide},_togglePositionClass:function(i){this.$wrapper().removeClass("dx-position-left dx-position-right dx-position-top dx-position-bottom").addClass(i)},_toggleFlippedClass:function(i,t){this.$wrapper().toggleClass("dx-popover-flipped-horizontal",i).toggleClass("dx-popover-flipped-vertical",t)},_renderArrowPosition:function(i){var t=(0,se.N)(this._$arrow.get(0)),e=-(this._isVerticalSide(i)?t.height:t.width);this._$arrow.css(qs[i],e);var x,a=this._isVerticalSide(i)?"left":"top",n=this._isVerticalSide(i)?"width":"height",r=(0,_.A)(this._positionController._position.of),s=Se.A.offset(r)||{top:0,left:0},o=Se.A.offset(this.$overlayContent()),l=t[n],d=o[a],h=(0,se.N)(this.$overlayContent().get(0))[n],u=s[a],c=r.get(0),g=c&&!c.preventDefault?(0,se.N)(c)[n]:0,m=Math.max(d,u),f=Math.min(d+h,u+g);x="start"===this.option("arrowPosition")?m-d:"end"===this.option("arrowPosition")?f-d-l:(m+f)/2-d-l/2;var b=this._positionController._getContentBorderWidth(i),S=(0,Jg.df)(x-b+this.option("arrowOffset"),b,h-l-2*b);this._$arrow.css(a,S)},_isPopoverInside:function(){return this._positionController._isPopoverInside()},_setContentHeight:function(i){i&&this.callBase()},_getPositionControllerConfig(){var{shading:i,target:t}=this.option();return(0,y.X)({},this.callBase(),{target:t,shading:i,$arrow:this._$arrow})},_initPositionController(){this._positionController=new np(this._getPositionControllerConfig())},_renderWrapperDimensions:function(){this.option("shading")&&this.$wrapper().css({width:"100%",height:"100%"})},_isVerticalSide:function(i){return this._positionController._isVerticalSide(i)},_isHorizontalSide:function(i){return this._positionController._isHorizontalSide(i)},_clearEventTimeout:function(i){clearTimeout(this._timeouts[i])},_clearEventsTimeouts:function(){this._clearEventTimeout("show"),this._clearEventTimeout("hide")},_clean:function(){this._detachEvents(this.option("target")),this.callBase.apply(this,arguments)},_optionChanged:function(i){switch(i.name){case"arrowPosition":case"arrowOffset":this._renderGeometry();break;case"fullScreen":i.value&&this.option("fullScreen",!1);break;case"target":i.previousValue&&this._detachEvents(i.previousValue),this._positionController.updateTarget(i.value),this._invalidate();break;case"showEvent":case"hideEvent":var t=i.name.substring(0,4),e=Zs(i.previousValue);this.hide(),On(this,this.option("target"),t,e),Sn(this,t);break;case"visible":this._clearEventTimeout(i.value?"show":"hide"),this.callBase(i);break;default:this.callBase(i)}},show:function(i){return i&&this.option("target",i),this.callBase()}});(0,le.A)("dxPopover",eo);const to=eo;var io=to.inherit({_getDefaultOptions:function(){return(0,y.X)(this.callBase(),{toolbarItems:[],showCloseButton:!1,enableBodyScroll:!0,showTitle:!1,title:null,titleTemplate:null,onTitleRendered:null,bottomTemplate:null,preventScrollEvents:!1,propagateOutsideClick:!0})},_render:function(){this.$element().addClass("dx-tooltip"),this.$wrapper().addClass("dx-tooltip-wrapper"),this.callBase()},_renderContent:function(){this.callBase(),this._toggleAriaAttributes()},_toggleAriaDescription:function(i){var t=(0,_.A)(this.option("target")),e=i?this._contentId:void 0;(0,v.l6)(t.get(0))||this.setAria("describedby",e,t)},_toggleAriaAttributes:function(){this._contentId="dx-".concat(new Pe.A),this.$overlayContent().attr({id:this._contentId}),this._toggleAriaDescription(!0)}});(0,le.A)("dxTooltip",io);var C=D(1837);let pp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.YLo,C.YaD,C.eNx,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C.Tob,C.$Ql,C.i9t,C.TBD,E.p_,E.xZ],C.YLo,C.YaD,C.eNx,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C.Tob,C.$Ql,C.i9t,C.TBD,E.xZ]}),i})();var ne=D(3862),ao=D(8332),_p=D(6830),w=D(2984),ht=D(7963),I=D(2101),Ut=D(9518),A=D(736),ae=D(8060),vp=D(9264),vi=D(1076),In=D(2379),ga=D(6311),An=function(i,t,e){var a=(0,_.A)(i),n=e?a.scrollLeft():a.scrollTop(),r=e?"Width":"Height",l=a.prop("scroll".concat(r))-a.prop("client".concat(r))-n|0;return(0!==n||0!==l)&&(!!(0===n&&t>=0||0===l&&t<=0||n>0&&l>0)||void 0)},mi="dxTagData",Ci="dx-tag",no="dx-tagbox-multi-tag",ro="dx-tag-custom",so="dx-tag-remove-button",oo="dx-tagbox-single-line",lo=In.A.inherit({_supportedKeys:function(){var i=this.callBase(),t=a=>this._list._keyboardHandler(a),e=this.option("rtlEnabled");return(0,y.X)({},i,{backspace:function(a){if(this._isCaretAtTheStart()){this._processKeyboardEvent(a),this._isTagRemoved=!0;var n=this._$focusedTag||this._tagElements().last();this._$focusedTag&&this._moveTagFocus("prev",!0),0!==n.length&&(this._preserveFocusedTag=!0,this._removeTagElement(n),delete this._preserveFocusedTag)}},upArrow:(a,n)=>a.altKey||!this._list?i.upArrow.call(this,a):t(n),downArrow:(a,n)=>a.altKey||!this._list?i.downArrow.call(this,a):t(n),del:function(a){if(this._$focusedTag&&this._isCaretAtTheStart()){this._processKeyboardEvent(a),this._isTagRemoved=!0;var n=this._$focusedTag;this._moveTagFocus("next",!0),this._preserveFocusedTag=!0,this._removeTagElement(n),delete this._preserveFocusedTag}},enter:function(a,n){var r=this._list&&null!==this._list.option("focusedElement");if(this.option("acceptCustomValue")&&!r)return a.preventDefault(),void(""!==this._searchValue()&&this._customItemAddedHandler(a));this.option("opened")&&(this._saveValueChangeEvent(a),t(n),a.preventDefault())},space:function(a,n){var r=this.option("opened"),s=this._shouldRenderSearchEvent();r&&!s&&(this._saveValueChangeEvent(a),t(n),a.preventDefault())},leftArrow:function(a){if(!(!this._isCaretAtTheStart()||this._isEmpty()||this._isEditable()&&e&&!this._$focusedTag)){a.preventDefault();var n=e?"next":"prev";this._moveTagFocus(n),!this.option("multiline")&&this._scrollContainer(n)}},rightArrow:function(a){if(this._isCaretAtTheStart()&&!this._isEmpty()&&(!this._isEditable()||e||this._$focusedTag)){a.preventDefault();var n=e?"prev":"next";this._moveTagFocus(n),!this.option("multiline")&&this._scrollContainer(n)}}})},_processKeyboardEvent:function(i){i.preventDefault(),i.stopPropagation(),this._saveValueChangeEvent(i)},_isEmpty:function(){return 0===this._getValue().length},_updateTagsContainer:function(i){this._$tagsContainer=i.addClass("dx-tag-container")},_allowSelectItemByTab:function(){return!1},_isCaretAtTheStart:function(){var i=(0,vp.A)(this._input());return 0===i.start&&0===i.end},_updateInputAriaActiveDescendant(i){this.setAria("activedescendant",i,this._input())},_moveTagFocus:function(i,t){if(!this._$focusedTag){var e=this._tagElements();return this._$focusedTag="next"===i?e.first():e.last(),this._toggleFocusClass(!0,this._$focusedTag),void this._updateInputAriaActiveDescendant(this._$focusedTag.attr("id"))}var a=this._$focusedTag[i](".".concat(Ci));a.length>0?(this._replaceFocusedTag(a),this._updateInputAriaActiveDescendant(a.attr("id"))):(t||"next"===i&&this._isEditable())&&(this._clearTagFocus(),this._updateInputAriaActiveDescendant())},_replaceFocusedTag:function(i){this._toggleFocusClass(!1,this._$focusedTag),this._$focusedTag=i,this._toggleFocusClass(!0,this._$focusedTag)},_clearTagFocus:function(){this._$focusedTag&&(this._toggleFocusClass(!1,this._$focusedTag),this._updateInputAriaActiveDescendant(),delete this._$focusedTag)},_focusClassTarget:function(i){return i&&i.length&&i[0]!==this._focusTarget()[0]?i:this.callBase()},_getLabelContainer:function(){return this._$tagsContainer},_getFieldElement(){return this._input()},_scrollContainer:function(i){if(!this.option("multiline")&&(0,Q.Vd)()&&this._$tagsContainer){var t=this._getScrollPosition(i);this._$tagsContainer.scrollLeft(t)}},_getScrollPosition:function(i){return"start"===i||"end"===i?this._getBorderPosition(i):this._$focusedTag?this._getFocusedTagPosition(i):this._getBorderPosition("end")},_getBorderPosition:function(i){var t=this.option("rtlEnabled");return"end"===i^t^!t?0:(t?-1:1)*(this._$tagsContainer.get(0).scrollWidth-(0,R.Ot)(this._$tagsContainer))},_getFocusedTagPosition:function(i){var e="next"===i^this.option("rtlEnabled"),{left:a}=this._$focusedTag.position(),n=this._$tagsContainer.scrollLeft();return e&&(a+=(0,R.Ot)(this._$focusedTag,!0)-(0,R.Ot)(this._$tagsContainer)),e^a<0&&(n+=a),n},_setNextValue:V.lQ,_getDefaultOptions:function(){return(0,y.X)(this.callBase(),{value:[],showDropDownButton:!1,maxFilterQueryLength:1500,tagTemplate:"tag",selectAllText:A.A.format("dxList-selectAll"),hideSelectedItems:!1,selectedItems:[],selectAllMode:"page",onSelectAllValueChanged:null,maxDisplayedTags:void 0,showMultiTagOnly:!0,onMultiTagPreparing:null,multiline:!0,useSubmitBehavior:!0})},_init:function(){this.callBase(),this._selectedItems=[],this._initSelectAllValueChangedAction()},_initActions:function(){this.callBase(),this._initMultiTagPreparingAction()},_initMultiTagPreparingAction:function(){this._multiTagPreparingAction=this._createActionByOption("onMultiTagPreparing",{beforeExecute:function(i){this._multiTagPreparingHandler(i.args[0])}.bind(this),excludeValidators:["disabled","readOnly"]})},_multiTagPreparingHandler:function(i){var{length:t}=this._getValue();i.text=this.option("showMultiTagOnly")?A.A.getFormatter("dxTagBox-selected")(t):A.A.getFormatter("dxTagBox-moreSelected")(t-this.option("maxDisplayedTags")+1)},_initDynamicTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({tag:new ga.U((i,t)=>{var e,a=(0,_.A)("<div>").addClass("dx-tag-content");(0,_.A)("<span>").text(null!==(e=t.text)&&void 0!==e?e:t).appendTo(a),(0,_.A)("<div>").addClass(so).appendTo(a),i.append(a)},["text"],this.option("integrationOptions.watchMethod"),{text:this._displayGetter})})},_toggleSubmitElement:function(i){i?(this._renderSubmitElement(),this._setSubmitValue()):(this._$submitElement&&this._$submitElement.remove(),delete this._$submitElement)},_renderSubmitElement:function(){this.option("useSubmitBehavior")&&(this._$submitElement=(0,_.A)("<select>").attr({multiple:"multiple","aria-label":"Selected items"}).css("display","none").appendTo(this.$element()))},_setSubmitValue:function(){if(this.option("useSubmitBehavior")){for(var i=this._getValue(),t=[],e=0,a=i.length;e<a;e++){var n=this._shouldUseDisplayValue(i[e]);t.push((0,_.A)("<option>").val(n?this._displayGetter(i[e]):i[e]).attr("selected","selected"))}this._getSubmitElement().empty().append(t)}},_initMarkup:function(){this._tagElementsCache=(0,_.A)();var i=!this.option("multiline");this.$element().addClass("dx-tagbox").toggleClass("dx-tagbox-only-select",!(this.option("searchEnabled")||this.option("acceptCustomValue"))).toggleClass(oo,i),this.setAria({role:"group",roledescription:"tagbox"},this.$element()),this._initTagTemplate(),this.callBase()},_getNewLabelId:(i,t,e)=>i?e?i===t?void 0:i.split(" ").filter(a=>a!==t).join(" "):"".concat(i," ").concat(t):t,_updateElementAria(i,t){if(i){var a=this.$element().attr("aria-labelledby"),n=this._getNewLabelId(a,i,t);this.setAria("labelledby",n,this.$element())}else this.setAria("labelledby",void 0,this.$element())},_render:function(){this.callBase(),this._renderTagRemoveAction(),this._renderSingleLineScroll(),this._scrollContainer("start")},_initTagTemplate:function(){this._tagTemplate=this._getTemplateByOption("tagTemplate")},_renderField:function(){var i=!(0,v.O9)(this.option("fieldTemplate"));this.$element().toggleClass("dx-tagbox-default-template",i).toggleClass("dx-tagbox-custom-template",!i),this.callBase()},_renderTagRemoveAction:function(){var i=this._createAction(this._removeTagHandler.bind(this)),t=(0,P.b4)(ae.U,"dxTagBoxTagRemove");O.A.off(this._$tagsContainer,t),O.A.on(this._$tagsContainer,t,".".concat(so),e=>{i({event:e})})},_renderSingleLineScroll:function(){var i=(0,P.b4)("dxmousewheel",this.NAME),t=this.$element(),e=this.option("multiline");O.A.off(t,i),"desktop"===ne.A.real().deviceType?e||O.A.on(t,i,this._tagContainerMouseWheelHandler.bind(this)):this._$tagsContainer&&this._$tagsContainer.css("overflowX",e?"":"auto")},_tagContainerMouseWheelHandler:function(i){var t=this._$tagsContainer.scrollLeft(),e=-.3*i.delta;if(!(0,P.By)(i)&&An(this._$tagsContainer,e,!0))return this._$tagsContainer.scrollLeft(t+e),!1},_renderEvents:function(){this.callBase();var i=this._input(),t=(0,P.b4)("keydown",this.NAME);O.A.on(i,t,e=>{var a=(0,P.YD)(e);!this._isControlKey(a)&&this._isEditable()&&this._clearTagFocus()})},_popupWrapperClass:function(){return this.callBase()+" dx-tagbox-popup-wrapper"},_renderInput:function(){this.callBase(),this._renderPreventBlurOnInputClick()},_renderPreventBlurOnInputClick:function(){var i=(0,P.b4)("mousedown","dxTagBox");O.A.off(this._inputWrapper(),i),O.A.on(this._inputWrapper(),i,t=>{t.target!==this._input()[0]&&this._isFocused()&&t.preventDefault()})},_renderInputValueImpl:function(){return this._renderMultiSelect()},_loadInputValue:function(){return(0,w.z7)()},_clearTextValue:function(){this._input().val(""),this._toggleEmptinessEventHandler(),this.option("text","")},_focusInHandler:function(i){this._preventNestedFocusEvent(i)||this._scrollContainer("end"),this.callBase(i)},_renderInputValue:function(){return this.option("displayValue",this._searchValue()),this.callBase()},_restoreInputText:function(i){i||this._clearTextValue()},_focusOutHandler:function(i){this._preventNestedFocusEvent(i)||(this._clearTagFocus(),this._scrollContainer("start")),this.callBase(i)},_initSelectAllValueChangedAction:function(){this._selectAllValueChangeAction=this._createActionByOption("onSelectAllValueChanged")},_renderList:function(){this.callBase(),this._setListDataSourceFilter()},_canListHaveFocus:function(){return"useButtons"===this.option("applyValueMode")},_listConfig:function(){var i=this.option("showSelectionControls")?"all":"multiple";return(0,y.X)(this.callBase(),{maxFilterLengthInRequest:this.option("maxFilterQueryLength"),selectionMode:i,selectAllText:this.option("selectAllText"),onSelectAllValueChanged:t=>{var{value:e}=t;this._selectAllValueChangeAction({value:e})},selectAllMode:this.option("selectAllMode"),selectedItems:this._selectedItems,onFocusedItemChanged:null})},_renderMultiSelect:function(){var i=new w.cY;return this._updateTagsContainer(this._$textEditorInputContainer),this._renderInputSize(),this._renderTags().done(()=>{this._popup&&this._popup.refreshPosition(),i.resolve()}).fail(i.reject),i.promise()},_listItemClickHandler:function(i){!this.option("showSelectionControls")&&this._clearTextValue(),"useButtons"!==this.option("applyValueMode")&&(this.callBase(i),this._saveValueChangeEvent(void 0))},_shouldClearFilter:function(){var i=this.callBase();return!this.option("showSelectionControls")&&i},_renderInputSize:function(){var i=this._input(),t=i.val(),e=(0,v.Kg)(t)&&t,a="",n="",r=this.option("searchEnabled")||this.option("acceptCustomValue");if(e&&r){var s=(0,ht.D2)(i,t,{includePaddings:!0});s.insertAfter(i),a=(0,R.Ot)(s)+5,s.remove()}else t||(n=1);i.css("width",a),i.attr("size",n)},_renderInputSubstitution:function(){this.callBase(),this._updateWidgetHeight()},_getValue:function(){return this.option("value")||[]},_multiTagRequired:function(){var i=this._getValue(),t=this.option("maxDisplayedTags");return(0,v.O9)(t)&&i.length>t},_renderMultiTag:function(i){var t=(0,_.A)("<div>").addClass(Ci).addClass(no),e={multiTagElement:(0,Y.c)(t),selectedItems:this.option("selectedItems")};return this._multiTagPreparingAction(e),!e.cancel&&(t.data(mi,e.text),t.insertBefore(i),this._tagTemplate.render({model:e.text,container:(0,Y.c)(t)}),t)},_getFilter:function(i){var t=this._dataController.filter(),e=i.getCombinedFilter(this.option("valueExpr"),t),a=encodeURI(JSON.stringify(e)).length,n=this.option("maxFilterQueryLength");if(a<=n)return e;J.A.log("W1019",n)},_getFilteredItems:function(i){var t,e;null===(t=this._loadFilteredItemsPromise)||void 0===t||t.reject();var a=new _p.H(i),n=null===(e=this._list)||void 0===e?void 0:e.option("selectedItems"),r=!!n&&this._list._dataController.isLoaded(),s=n||this.option("selectedItems"),o=a.getLocalFilter(this._valueGetter),l=s.filter(o),d=l.length===i.length,h=new w.cY,u=this._dataController;if((!this._isDataSourceChanged||r)&&d)return h.resolve(l).promise();var{customQueryParams:c,expand:g,select:m}=u.loadOptions(),f=this._getFilter(a);return u.loadFromStore({filter:f,customQueryParams:c,expand:g,select:m}).done((x,b)=>{if(this._isDataSourceChanged=!1,this._disposed)h.reject();else{var{data:S}=(0,vi.Xp)(x,b),T=u.applyMapFunction(S);h.resolve(T.filter(o))}}).fail(h.reject),this._loadFilteredItemsPromise=h,h.promise()},_createTagsData:function(i,t){var e=[],a={},n="this"===this._valueGetterExpr(),r={};t.forEach(l=>{var d=n?JSON.stringify(l):this._valueGetter(l);r[d]=l});var s=[];i.forEach((l,d)=>{var h=r[n?JSON.stringify(l):l];if(n&&!(0,v.O9)(h))s.push(this._loadItem(l,a).always(c=>{var g=this._createTagData(e,c,l,d);e.splice(d,0,g)}));else{var u=this._createTagData(e,h,l,d);e.splice(d,0,u)}});var o=new w.cY;return w.z7.apply(this,s).always(function(){o.resolve(e)}),o.promise()},_createTagData:function(i,t,e,a){if((0,v.O9)(t))return this._selectedItems.push(t),t;var n=this.option("selectedItem");return this._valueGetter(n)===e?n:e},_isGroupedData:function(){return this.option("grouped")&&!this._dataController.group()},_getItemsByValues:function(i){var t=[];return i.forEach(function(e){var a=this._getItemFromPlain(e);(0,v.O9)(a)&&t.push(a)}.bind(this)),t},_getFilteredGroupedItems:function(i){var t=new w.cY;return this._filteredGroupedItemsLoadPromise&&this._dataController.cancel(this._filteredGroupedItemsLoadPromise.operationId),this._dataController.items().length?t.resolve(this._getItemsByValues(i)):this._filteredGroupedItemsLoadPromise=this._dataController.load().done(()=>{t.resolve(this._getItemsByValues(i))}).fail(()=>{t.resolve([])}).always(()=>{this._filteredGroupedItemsLoadPromise=void 0}),t.promise()},_loadTagsData:function(){var i=this._getValue(),t=new w.cY;return this._selectedItems=[],(this._isGroupedData()?this._getFilteredGroupedItems(i):this._getFilteredItems(i)).done(a=>{this._createTagsData(i,a).always(function(r){t.resolve(r)})}).fail(t.reject.bind(this)),t.promise()},_renderTags:function(){var i=new w.cY,t=!1;return this._shouldGetItemsFromPlain(this._valuesToUpdate)&&(this._selectedItems=this._getItemsFromPlain(this._valuesToUpdate),this._selectedItems.length===this._valuesToUpdate.length&&(this._renderTagsImpl(this._selectedItems),t=!0,i.resolve())),t||this._loadTagsData().done(e=>{this._disposed?i.reject():(this._renderTagsImpl(e),i.resolve())}).fail(i.reject),i.promise()},_renderTagsImpl:function(i){this._renderTagsCore(i),this._renderEmptyState(),this._preserveFocusedTag||this._clearTagFocus()},_shouldGetItemsFromPlain:function(i){return i&&this._dataController.isLoaded()&&i.length<=this._getPlainItems().length},_getItemsFromPlain:function(i){var t=this._getSelectedItemsFromList(i);if(0===t.length&&i.length>0||t.length<i.length){var a=this._getPlainItems();t=this._filterSelectedItems(a,i)}return t},_getSelectedItemsFromList:function(i){var t,e=null===(t=this._list)||void 0===t?void 0:t.option("selectedItems"),a=[];return i.length===e?.length&&(a=this._filterSelectedItems(e,i)),a},_filterSelectedItems:function(i,t){return i.filter(a=>{for(var n,r=0;r<t.length;r++)if((0,v.Gv)(n=t[r])){if(this._isValueEquals(a,n))return!0}else if(this._isValueEquals(this._valueGetter(a),n))return!0;return!1},this)},_integrateInput:function(){this._isInputReady.resolve(),this.callBase();var i=this.$element().find(".".concat("dx-texteditor-input-container"));this._updateTagsContainer(i),this._renderTagRemoveAction()},_renderTagsCore:function(i){var t;null===(t=this._isInputReady)||void 0===t||t.reject(),this._isInputReady=new w.cY,this._renderField(),this.option("selectedItems",this._selectedItems.slice()),this._cleanTags(),this._input().length>0&&this._isInputReady.resolve(),(0,w.z7)(this._isInputReady).done(()=>{this._renderTagsElements(i)})},_renderTagsElements(i){var t=this._multiTagRequired()&&this._renderMultiTag(this._input()),e=this.option("showMultiTagOnly"),a=this.option("maxDisplayedTags");i.forEach((n,r)=>{if(t&&e||t&&!e&&r-a>=-1)return!1;this._renderTag(n,t||this._input())}),this._isFocused()&&this._scrollContainer("end"),this._refreshTagElements()},_cleanTags:function(){if(this._multiTagRequired())this._tagElements().remove();else{var i=this._tagElements(),t=this._getValue();(0,I.__)(i,function(e,a){var n=(0,_.A)(a),r=n.data(mi);null!=t&&t.includes(r)||n.remove()})}this._updateElementAria()},_renderEmptyState:function(){var i=!(this._getValue().length||this._selectedItems.length||this._searchValue());this._toggleEmptiness(i),this._renderDisplayText()},_renderDisplayText:function(){this._renderInputSize()},_refreshTagElements:function(){this._tagElementsCache=this.$element().find(".".concat(Ci))},_tagElements:function(){return this._tagElementsCache},_applyTagTemplate:function(i,t){this._tagTemplate.render({model:i,container:(0,Y.c)(t)})},_renderTag:function(i,t){var e=this._valueGetter(i);if((0,v.O9)(e)){var a=this._getTag(e),n=this._displayGetter(i),r=this._getItemModel(i,n);if(a)(0,v.O9)(n)&&(a.empty(),this._applyTagTemplate(r,a)),a.removeClass(ro),this._updateElementAria(a.attr("id"));else{var s="dx-".concat(new Pe.A);a=this._createTag(e,t,s),(0,v.O9)(i)?this._applyTagTemplate(r,a):(a.addClass(ro),this._applyTagTemplate(e,a)),this._updateElementAria(s)}}},_getItemModel:function(i,t){return(0,v.Gv)(i)&&(0,v.O9)(t)?i:(0,V.YD)(t,"")},_getTag:function(i){for(var t=this._tagElements(),e=t.length,a=!1,n=0;n<e;n++){var r=t[n],s=(0,ao.p)(r,mi);if(i===s||(0,V.RL)(i,s)){a=(0,_.A)(r);break}}return a},_createTag:function(i,t,e){return(0,_.A)("<div>").attr("id",e).addClass(Ci).data(mi,i).insertBefore(t)},_toggleEmptinessEventHandler:function(){this._toggleEmptiness(!this._getValue().length&&!this._searchValue().length)},_customItemAddedHandler:function(i){this.callBase(i),this._clearTextValue()},_removeTagHandler:function(i){var t=i.event;t.stopPropagation(),this._saveValueChangeEvent(t);var e=(0,_.A)(t.target).closest(".".concat(Ci));this._removeTagElement(e)},_removeTagElement:function(i){if(i.hasClass(no))this.option("showMultiTagOnly")?this.clear():this.option("value",this._getValue().slice(0,this.option("maxDisplayedTags")));else{var t=i.data(mi),e=i.attr("id");this._removeTagWithUpdate(t),this._updateElementAria(e,!0),this._refreshTagElements()}},_updateField:V.lQ,_removeTagWithUpdate:function(i){var t=this._getValue().slice();this._removeTag(t,i),this.option("value",t),0===t.length&&this._clearTagFocus()},_getCurrentValue:function(){return this._lastValue()},_selectionChangeHandler:function(i){if("useButtons"!==this.option("applyValueMode")){var t=this._getValue().slice();if((0,I.__)(i.removedItems||[],(a,n)=>{this._removeTag(t,this._valueGetter(n))}),(0,I.__)(i.addedItems||[],(a,n)=>{this._addTag(t,this._valueGetter(n))}),this._updateWidgetHeight(),!(0,V.RL)(this._list.option("selectedItemKeys"),this.option("value"))){var e=this._list._getSelectionChangeEvent();e&&this._saveValueChangeEvent(e),this.option("value",t)}this._list._saveSelectionChangeEvent(void 0)}},_removeTag:function(i,t){var e=this._valueIndex(t,i);e>=0&&i.splice(e,1)},_addTag:function(i,t){this._valueIndex(t)<0&&i.push(t)},_fieldRenderData:function(){return this._selectedItems.slice()},_completeSelection:function(i){this.option("showSelectionControls")||this._setValue(i)},_setValue:function(i){if(null!==i){var t="useButtons"===this.option("applyValueMode"),e=this._valueIndex(i),a=(t?this._list.option("selectedItemKeys"):this._getValue()).slice();e>=0?a.splice(e,1):a.push(i),"useButtons"===this.option("applyValueMode")?this._list.option("selectedItemKeys",a):this.option("value",a)}},_isSelectedValue:function(i,t){return this._valueIndex(i,null,t)>-1},_valueIndex:function(i,t,e){var a=-1;return e&&"object"!=typeof i&&(e.indexByValues||(e.indexByValues={},(t=t||this._getValue()).forEach(function(n,r){e.indexByValues[n]=r})),i in e.indexByValues)?e.indexByValues[i]:(t=t||this._getValue(),(0,I.__)(t,(n,r)=>{if(this._isValueEquals(i,r))return a=n,!1}),a)},_lastValue:function(){var i=this._getValue();return i[i.length-1]??null},_shouldRenderSearchEvent:function(){return this.option("searchEnabled")||this.option("acceptCustomValue")},_searchHandler:function(i){this.option("searchEnabled")&&i&&!this._isTagRemoved&&(this.callBase(arguments),this._setListDataSourceFilter()),this._updateWidgetHeight(),delete this._isTagRemoved},_updateWidgetHeight:function(){var i=this.$element(),t=(0,R.Oq)(i);this._renderInputSize();var e=(0,R.Oq)(i);this._popup&&this.option("opened")&&this._isEditable()&&e!==t&&this._popup.repaint()},_refreshSelected:function(){var i;null!==(i=this._list)&&void 0!==i&&i.getDataSource()&&this._list.option("selectedItems",this._selectedItems)},_resetListDataSourceFilter:function(){var i=this._dataController;delete this._userFilter,i.filter(null),i.reload()},_setListDataSourceFilter:function(){if(this.option("hideSelectedItems")&&this._list){var i=this._dataController,t=this._valueGetterExpr();if((0,v.Kg)(t)&&"this"!==t){var e=this._dataSourceFilterExpr();void 0===this._userFilter&&(this._userFilter=i.filter()||null),this._userFilter&&e.push(this._userFilter),i.filter(e.length?e:null)}else i.filter(this._dataSourceFilterFunction.bind(this));i.load()}},_dataSourceFilterExpr:function(){var i=[];return this._getValue().forEach(t=>i.push(["!",[this._valueGetterExpr(),t]])),i},_dataSourceFilterFunction:function(i){var t=this._valueGetter(i),e=!0;return(0,I.__)(this._getValue(),(a,n)=>{if(this._isValueEquals(n,t))return e=!1,!1}),e},_dataSourceChangedHandler:function(){this._isDataSourceChanged=!0,this.callBase.apply(this,arguments)},_applyButtonHandler:function(i){this._saveValueChangeEvent(i.event),this.option("value",this._getSortedListValues()),this._clearTextValue(),this.callBase(),this._cancelSearchIfNeed()},_getSortedListValues:function(){var i=this._getListValues(),t=this.option("value")||[],e=i.length?(0,Ut._N)(t,i):[],a=e.length?(0,Ut.R3)(i,t):i;return e.concat(a)},_getListValues:function(){return this._list?this._getPlainItems(this._list.option("selectedItems")).map(i=>this._valueGetter(i)):[]},_setListDataSource:function(){var i=this._getValue();this.callBase(),i!==this.option("value")&&this.option("value",i),this._refreshSelected()},_renderOpenedState:function(){this.callBase(),"useButtons"===this.option("applyValueMode")&&!this.option("opened")&&this._refreshSelected()},clear:function(){this._restoreInputText();var i=this._getDefaultOptions().value,t=this.option("value");i&&0===i.length&&t&&i.length===t.length||this.callBase()},_clean:function(){this.callBase(),delete this._defaultTagTemplate,delete this._valuesToUpdate,delete this._tagTemplate},_getSelectedItemsDifference(i,t){if(!i.length)return{addedItems:[],removedItems:t.slice()};if(!t.length)return{addedItems:i.slice(),removedItems:[]};var e=t.reduce((n,r)=>(n[this._valueGetter(r)]=r,n),{}),a=[];return i.forEach(n=>{var r=this._valueGetter(n);e[r]||a.push(n),delete e[r]}),{addedItems:a,removedItems:Object.values(e)}},_optionChanged:function(i){var{name:t,value:e,previousValue:a}=i;switch(t){case"onSelectAllValueChanged":this._initSelectAllValueChangedAction();break;case"onMultiTagPreparing":this._initMultiTagPreparingAction(),this._renderTags();break;case"hideSelectedItems":e?this._setListDataSourceFilter():this._resetListDataSourceFilter();break;case"useSubmitBehavior":this._toggleSubmitElement(e);break;case"displayExpr":this.callBase(i),this._initTemplates(),this._invalidate();break;case"tagTemplate":this._initTagTemplate(),this._invalidate();break;case"selectAllText":this._setListOption("selectAllText",this.option("selectAllText"));break;case"readOnly":case"disabled":this.callBase(i),!e&&this._refreshEvents();break;case"value":this._valuesToUpdate=e,this.callBase(i),this._valuesToUpdate=void 0,this._setListDataSourceFilter();break;case"maxDisplayedTags":case"showMultiTagOnly":this._renderTags();break;case"selectAllMode":this._setListOption(t,e);break;case"selectedItem":case"maxFilterQueryLength":break;case"selectedItems":this._selectionChangedAction(this._getSelectedItemsDifference(e,a));break;case"multiline":this.$element().toggleClass(oo,!e),this._renderSingleLineScroll();break;default:this.callBase(i)}},_getActualSearchValue:function(){return this.callBase()||this._searchValue()},_popupHidingHandler:function(){this.callBase(),this._clearFilter()}});(0,le.A)("dxTagBox",lo);const Ip=lo,Ap={provide:He.kq,useExisting:(0,p.Rfq)(()=>Tp),multi:!0};let Tp=(()=>{class i extends E.ic{constructor(e,a,n,r,s,o,l,d){super(e,a,n,r,l,d),this._watcherHelper=r,this._idh=s,this.touched=h=>{},this._createEventEmitters([{subscribe:"change",emit:"onChange"},{subscribe:"closed",emit:"onClosed"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"customItemCreating",emit:"onCustomItemCreating"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"enterKey",emit:"onEnterKey"},{subscribe:"focusIn",emit:"onFocusIn"},{subscribe:"focusOut",emit:"onFocusOut"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"input",emit:"onInput"},{subscribe:"itemClick",emit:"onItemClick"},{subscribe:"keyDown",emit:"onKeyDown"},{subscribe:"keyUp",emit:"onKeyUp"},{subscribe:"multiTagPreparing",emit:"onMultiTagPreparing"},{subscribe:"opened",emit:"onOpened"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"selectAllValueChanged",emit:"onSelectAllValueChanged"},{subscribe:"selectionChanged",emit:"onSelectionChanged"},{subscribe:"valueChanged",emit:"onValueChanged"},{emit:"acceptCustomValueChange"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"applyValueModeChange"},{emit:"buttonsChange"},{emit:"customItemCreateEventChange"},{emit:"dataSourceChange"},{emit:"deferRenderingChange"},{emit:"disabledChange"},{emit:"displayExprChange"},{emit:"dropDownButtonTemplateChange"},{emit:"dropDownOptionsChange"},{emit:"elementAttrChange"},{emit:"fieldTemplateChange"},{emit:"focusStateEnabledChange"},{emit:"groupedChange"},{emit:"groupTemplateChange"},{emit:"heightChange"},{emit:"hideSelectedItemsChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"inputAttrChange"},{emit:"isDirtyChange"},{emit:"isValidChange"},{emit:"itemsChange"},{emit:"itemTemplateChange"},{emit:"labelChange"},{emit:"labelModeChange"},{emit:"maxDisplayedTagsChange"},{emit:"maxFilterQueryLengthChange"},{emit:"maxLengthChange"},{emit:"minSearchLengthChange"},{emit:"multilineChange"},{emit:"nameChange"},{emit:"noDataTextChange"},{emit:"openedChange"},{emit:"openOnFieldClickChange"},{emit:"placeholderChange"},{emit:"readOnlyChange"},{emit:"rtlEnabledChange"},{emit:"searchEnabledChange"},{emit:"searchExprChange"},{emit:"searchModeChange"},{emit:"searchTimeoutChange"},{emit:"selectAllModeChange"},{emit:"selectAllTextChange"},{emit:"selectedItemsChange"},{emit:"showClearButtonChange"},{emit:"showDataBeforeSearchChange"},{emit:"showDropDownButtonChange"},{emit:"showMultiTagOnlyChange"},{emit:"showSelectionControlsChange"},{emit:"stylingModeChange"},{emit:"tabIndexChange"},{emit:"tagTemplateChange"},{emit:"textChange"},{emit:"useItemTextAsTitleChange"},{emit:"validationErrorChange"},{emit:"validationErrorsChange"},{emit:"validationMessageModeChange"},{emit:"validationMessagePositionChange"},{emit:"validationStatusChange"},{emit:"valueChange"},{emit:"valueChangeEventChange"},{emit:"valueExprChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"wrapItemTextChange"},{emit:"onBlur"}]),this._idh.setHost(this),o.setHost(this)}get acceptCustomValue(){return this._getOption("acceptCustomValue")}set acceptCustomValue(e){this._setOption("acceptCustomValue",e)}get accessKey(){return this._getOption("accessKey")}set accessKey(e){this._setOption("accessKey",e)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(e){this._setOption("activeStateEnabled",e)}get applyValueMode(){return this._getOption("applyValueMode")}set applyValueMode(e){this._setOption("applyValueMode",e)}get buttons(){return this._getOption("buttons")}set buttons(e){this._setOption("buttons",e)}get customItemCreateEvent(){return this._getOption("customItemCreateEvent")}set customItemCreateEvent(e){this._setOption("customItemCreateEvent",e)}get dataSource(){return this._getOption("dataSource")}set dataSource(e){this._setOption("dataSource",e)}get deferRendering(){return this._getOption("deferRendering")}set deferRendering(e){this._setOption("deferRendering",e)}get disabled(){return this._getOption("disabled")}set disabled(e){this._setOption("disabled",e)}get displayExpr(){return this._getOption("displayExpr")}set displayExpr(e){this._setOption("displayExpr",e)}get dropDownButtonTemplate(){return this._getOption("dropDownButtonTemplate")}set dropDownButtonTemplate(e){this._setOption("dropDownButtonTemplate",e)}get dropDownOptions(){return this._getOption("dropDownOptions")}set dropDownOptions(e){this._setOption("dropDownOptions",e)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(e){this._setOption("elementAttr",e)}get fieldTemplate(){return this._getOption("fieldTemplate")}set fieldTemplate(e){this._setOption("fieldTemplate",e)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(e){this._setOption("focusStateEnabled",e)}get grouped(){return this._getOption("grouped")}set grouped(e){this._setOption("grouped",e)}get groupTemplate(){return this._getOption("groupTemplate")}set groupTemplate(e){this._setOption("groupTemplate",e)}get height(){return this._getOption("height")}set height(e){this._setOption("height",e)}get hideSelectedItems(){return this._getOption("hideSelectedItems")}set hideSelectedItems(e){this._setOption("hideSelectedItems",e)}get hint(){return this._getOption("hint")}set hint(e){this._setOption("hint",e)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(e){this._setOption("hoverStateEnabled",e)}get inputAttr(){return this._getOption("inputAttr")}set inputAttr(e){this._setOption("inputAttr",e)}get isDirty(){return this._getOption("isDirty")}set isDirty(e){this._setOption("isDirty",e)}get isValid(){return this._getOption("isValid")}set isValid(e){this._setOption("isValid",e)}get items(){return this._getOption("items")}set items(e){this._setOption("items",e)}get itemTemplate(){return this._getOption("itemTemplate")}set itemTemplate(e){this._setOption("itemTemplate",e)}get label(){return this._getOption("label")}set label(e){this._setOption("label",e)}get labelMode(){return this._getOption("labelMode")}set labelMode(e){this._setOption("labelMode",e)}get maxDisplayedTags(){return this._getOption("maxDisplayedTags")}set maxDisplayedTags(e){this._setOption("maxDisplayedTags",e)}get maxFilterQueryLength(){return this._getOption("maxFilterQueryLength")}set maxFilterQueryLength(e){this._setOption("maxFilterQueryLength",e)}get maxLength(){return this._getOption("maxLength")}set maxLength(e){this._setOption("maxLength",e)}get minSearchLength(){return this._getOption("minSearchLength")}set minSearchLength(e){this._setOption("minSearchLength",e)}get multiline(){return this._getOption("multiline")}set multiline(e){this._setOption("multiline",e)}get name(){return this._getOption("name")}set name(e){this._setOption("name",e)}get noDataText(){return this._getOption("noDataText")}set noDataText(e){this._setOption("noDataText",e)}get opened(){return this._getOption("opened")}set opened(e){this._setOption("opened",e)}get openOnFieldClick(){return this._getOption("openOnFieldClick")}set openOnFieldClick(e){this._setOption("openOnFieldClick",e)}get placeholder(){return this._getOption("placeholder")}set placeholder(e){this._setOption("placeholder",e)}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOption("readOnly",e)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(e){this._setOption("rtlEnabled",e)}get searchEnabled(){return this._getOption("searchEnabled")}set searchEnabled(e){this._setOption("searchEnabled",e)}get searchExpr(){return this._getOption("searchExpr")}set searchExpr(e){this._setOption("searchExpr",e)}get searchMode(){return this._getOption("searchMode")}set searchMode(e){this._setOption("searchMode",e)}get searchTimeout(){return this._getOption("searchTimeout")}set searchTimeout(e){this._setOption("searchTimeout",e)}get selectAllMode(){return this._getOption("selectAllMode")}set selectAllMode(e){this._setOption("selectAllMode",e)}get selectAllText(){return this._getOption("selectAllText")}set selectAllText(e){this._setOption("selectAllText",e)}get selectedItems(){return this._getOption("selectedItems")}set selectedItems(e){this._setOption("selectedItems",e)}get showClearButton(){return this._getOption("showClearButton")}set showClearButton(e){this._setOption("showClearButton",e)}get showDataBeforeSearch(){return this._getOption("showDataBeforeSearch")}set showDataBeforeSearch(e){this._setOption("showDataBeforeSearch",e)}get showDropDownButton(){return this._getOption("showDropDownButton")}set showDropDownButton(e){this._setOption("showDropDownButton",e)}get showMultiTagOnly(){return this._getOption("showMultiTagOnly")}set showMultiTagOnly(e){this._setOption("showMultiTagOnly",e)}get showSelectionControls(){return this._getOption("showSelectionControls")}set showSelectionControls(e){this._setOption("showSelectionControls",e)}get stylingMode(){return this._getOption("stylingMode")}set stylingMode(e){this._setOption("stylingMode",e)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(e){this._setOption("tabIndex",e)}get tagTemplate(){return this._getOption("tagTemplate")}set tagTemplate(e){this._setOption("tagTemplate",e)}get text(){return this._getOption("text")}set text(e){this._setOption("text",e)}get useItemTextAsTitle(){return this._getOption("useItemTextAsTitle")}set useItemTextAsTitle(e){this._setOption("useItemTextAsTitle",e)}get validationError(){return this._getOption("validationError")}set validationError(e){this._setOption("validationError",e)}get validationErrors(){return this._getOption("validationErrors")}set validationErrors(e){this._setOption("validationErrors",e)}get validationMessageMode(){return this._getOption("validationMessageMode")}set validationMessageMode(e){this._setOption("validationMessageMode",e)}get validationMessagePosition(){return this._getOption("validationMessagePosition")}set validationMessagePosition(e){this._setOption("validationMessagePosition",e)}get validationStatus(){return this._getOption("validationStatus")}set validationStatus(e){this._setOption("validationStatus",e)}get value(){return this._getOption("value")}set value(e){this._setOption("value",e)}get valueChangeEvent(){return this._getOption("valueChangeEvent")}set valueChangeEvent(e){this._setOption("valueChangeEvent",e)}get valueExpr(){return this._getOption("valueExpr")}set valueExpr(e){this._setOption("valueExpr",e)}get visible(){return this._getOption("visible")}set visible(e){this._setOption("visible",e)}get width(){return this._getOption("width")}set width(e){this._setOption("width",e)}get wrapItemText(){return this._getOption("wrapItemText")}set wrapItemText(e){this._setOption("wrapItemText",e)}change(e){}get buttonsChildren(){return this._getOption("buttons")}set buttonsChildren(e){this.setChildren("buttons",e)}get itemsChildren(){return this._getOption("items")}set itemsChildren(e){this.setChildren("items",e)}_createInstance(e,a){return new Ip(e,a)}writeValue(e){this.eventHelper.lockedValueChangeEvent=!0,this.value=e,this.eventHelper.lockedValueChangeEvent=!1}setDisabledState(e){this.disabled=e}registerOnChange(e){this.change=e}registerOnTouched(e){this.touched=e}_createWidget(e){super._createWidget(e),this.instance.on("focusOut",a=>{this.eventHelper.fireNgEvent("onBlur",[a])})}ngOnDestroy(){this._destroyWidget()}ngOnChanges(e){super.ngOnChanges(e),this.setupChanges("buttons",e),this.setupChanges("dataSource",e),this.setupChanges("items",e),this.setupChanges("searchExpr",e),this.setupChanges("selectedItems",e),this.setupChanges("validationErrors",e),this.setupChanges("value",e)}setupChanges(e,a){e in this._optionsToUpdate||this._idh.setup(e,a)}ngDoCheck(){this._idh.doCheck("buttons"),this._idh.doCheck("dataSource"),this._idh.doCheck("items"),this._idh.doCheck("searchExpr"),this._idh.doCheck("selectedItems"),this._idh.doCheck("validationErrors"),this._idh.doCheck("value"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(e,a){let n=this._idh.setupSingle(e,a),r=null!==this._idh.getChanges(e,a);(n||r)&&super._setOption(e,a)}}return i.\u0275fac=function(e){return new(e||i)(p.rXU(p.aKT),p.rXU(p.SKi),p.rXU(E.zF),p.rXU(E.jS),p.rXU(E.$M),p.rXU(E.fH),p.rXU(he.pJ),p.rXU(p.Agw))},i.\u0275cmp=p.VBU({type:i,selectors:[["dx-tag-box"]],contentQueries:function(e,a,n){if(1&e&&(p.wni(n,C.BrI,4),p.wni(n,C.CVf,4)),2&e){let r;p.mGM(r=p.lsd())&&(a.buttonsChildren=r),p.mGM(r=p.lsd())&&(a.itemsChildren=r)}},hostBindings:function(e,a){1&e&&p.bIt("valueChange",function(r){return a.change(r)})("onBlur",function(r){return a.touched(r)})},inputs:{acceptCustomValue:"acceptCustomValue",accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",applyValueMode:"applyValueMode",buttons:"buttons",customItemCreateEvent:"customItemCreateEvent",dataSource:"dataSource",deferRendering:"deferRendering",disabled:"disabled",displayExpr:"displayExpr",dropDownButtonTemplate:"dropDownButtonTemplate",dropDownOptions:"dropDownOptions",elementAttr:"elementAttr",fieldTemplate:"fieldTemplate",focusStateEnabled:"focusStateEnabled",grouped:"grouped",groupTemplate:"groupTemplate",height:"height",hideSelectedItems:"hideSelectedItems",hint:"hint",hoverStateEnabled:"hoverStateEnabled",inputAttr:"inputAttr",isDirty:"isDirty",isValid:"isValid",items:"items",itemTemplate:"itemTemplate",label:"label",labelMode:"labelMode",maxDisplayedTags:"maxDisplayedTags",maxFilterQueryLength:"maxFilterQueryLength",maxLength:"maxLength",minSearchLength:"minSearchLength",multiline:"multiline",name:"name",noDataText:"noDataText",opened:"opened",openOnFieldClick:"openOnFieldClick",placeholder:"placeholder",readOnly:"readOnly",rtlEnabled:"rtlEnabled",searchEnabled:"searchEnabled",searchExpr:"searchExpr",searchMode:"searchMode",searchTimeout:"searchTimeout",selectAllMode:"selectAllMode",selectAllText:"selectAllText",selectedItems:"selectedItems",showClearButton:"showClearButton",showDataBeforeSearch:"showDataBeforeSearch",showDropDownButton:"showDropDownButton",showMultiTagOnly:"showMultiTagOnly",showSelectionControls:"showSelectionControls",stylingMode:"stylingMode",tabIndex:"tabIndex",tagTemplate:"tagTemplate",text:"text",useItemTextAsTitle:"useItemTextAsTitle",validationError:"validationError",validationErrors:"validationErrors",validationMessageMode:"validationMessageMode",validationMessagePosition:"validationMessagePosition",validationStatus:"validationStatus",value:"value",valueChangeEvent:"valueChangeEvent",valueExpr:"valueExpr",visible:"visible",width:"width",wrapItemText:"wrapItemText"},outputs:{onChange:"onChange",onClosed:"onClosed",onContentReady:"onContentReady",onCustomItemCreating:"onCustomItemCreating",onDisposing:"onDisposing",onEnterKey:"onEnterKey",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onInitialized:"onInitialized",onInput:"onInput",onItemClick:"onItemClick",onKeyDown:"onKeyDown",onKeyUp:"onKeyUp",onMultiTagPreparing:"onMultiTagPreparing",onOpened:"onOpened",onOptionChanged:"onOptionChanged",onSelectAllValueChanged:"onSelectAllValueChanged",onSelectionChanged:"onSelectionChanged",onValueChanged:"onValueChanged",acceptCustomValueChange:"acceptCustomValueChange",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",applyValueModeChange:"applyValueModeChange",buttonsChange:"buttonsChange",customItemCreateEventChange:"customItemCreateEventChange",dataSourceChange:"dataSourceChange",deferRenderingChange:"deferRenderingChange",disabledChange:"disabledChange",displayExprChange:"displayExprChange",dropDownButtonTemplateChange:"dropDownButtonTemplateChange",dropDownOptionsChange:"dropDownOptionsChange",elementAttrChange:"elementAttrChange",fieldTemplateChange:"fieldTemplateChange",focusStateEnabledChange:"focusStateEnabledChange",groupedChange:"groupedChange",groupTemplateChange:"groupTemplateChange",heightChange:"heightChange",hideSelectedItemsChange:"hideSelectedItemsChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",inputAttrChange:"inputAttrChange",isDirtyChange:"isDirtyChange",isValidChange:"isValidChange",itemsChange:"itemsChange",itemTemplateChange:"itemTemplateChange",labelChange:"labelChange",labelModeChange:"labelModeChange",maxDisplayedTagsChange:"maxDisplayedTagsChange",maxFilterQueryLengthChange:"maxFilterQueryLengthChange",maxLengthChange:"maxLengthChange",minSearchLengthChange:"minSearchLengthChange",multilineChange:"multilineChange",nameChange:"nameChange",noDataTextChange:"noDataTextChange",openedChange:"openedChange",openOnFieldClickChange:"openOnFieldClickChange",placeholderChange:"placeholderChange",readOnlyChange:"readOnlyChange",rtlEnabledChange:"rtlEnabledChange",searchEnabledChange:"searchEnabledChange",searchExprChange:"searchExprChange",searchModeChange:"searchModeChange",searchTimeoutChange:"searchTimeoutChange",selectAllModeChange:"selectAllModeChange",selectAllTextChange:"selectAllTextChange",selectedItemsChange:"selectedItemsChange",showClearButtonChange:"showClearButtonChange",showDataBeforeSearchChange:"showDataBeforeSearchChange",showDropDownButtonChange:"showDropDownButtonChange",showMultiTagOnlyChange:"showMultiTagOnlyChange",showSelectionControlsChange:"showSelectionControlsChange",stylingModeChange:"stylingModeChange",tabIndexChange:"tabIndexChange",tagTemplateChange:"tagTemplateChange",textChange:"textChange",useItemTextAsTitleChange:"useItemTextAsTitleChange",validationErrorChange:"validationErrorChange",validationErrorsChange:"validationErrorsChange",validationMessageModeChange:"validationMessageModeChange",validationMessagePositionChange:"validationMessagePositionChange",validationStatusChange:"validationStatusChange",valueChange:"valueChange",valueChangeEventChange:"valueChangeEventChange",valueExprChange:"valueExprChange",visibleChange:"visibleChange",widthChange:"widthChange",wrapItemTextChange:"wrapItemTextChange",onBlur:"onBlur"},features:[p.Jv_([E.zF,E.jS,Ap,E.fH,E.$M]),p.Vt3,p.OA$],decls:0,vars:0,template:function(e,a){},encapsulation:2}),i})(),Rp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.GIV,C.u4t,C.df_,C.YLo,C.YaD,C.eNx,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C.Tob,C.$Ql,C.isg,C.POb,E.p_,E.xZ],C.GIV,C.u4t,C.df_,C.YLo,C.YaD,C.eNx,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C.Tob,C.$Ql,C.isg,C.POb,E.xZ]}),i})();var fi=D(638),xi=D(2934),pa=D(9454),q=D(9407),bt=D(6018),ut=D(6221),Le=D(9845),$t=D(7514),Dp=ut.A.inherit({ctor:function(){this._dataStructure=[],this._itemsCount=0,this._visibleItemsCount=0},_indexByKey:{},_convertItemsToNodes:function(i,t){var e=this;(0,I.__)(i,function(a,n){var r=(0,v.O9)(t)?t:e._getParentId(n),s=e._convertItemToNode(n,r);e._dataStructure.push(s),e._checkForDuplicateId(s.internalFields.key),e._indexByKey[s.internalFields.key]=e._dataStructure.length-1,e._itemHasChildren(n)&&e._convertItemsToNodes(e._dataAccessors.getters.items(n),s.internalFields.key)})},_checkForDuplicateId:function(i){if((0,v.O9)(this._indexByKey[i]))throw J.A.Error("E1040",i)},_getParentId:function(i){return"plain"===this._dataType?this._dataAccessors.getters.parentKey(i):void 0},_itemHasChildren:function(i){if("plain"!==this._dataType){var t=this._dataAccessors.getters.items(i);return t&&t.length}},_getUniqueKey:function(i){var t=this._dataAccessors.getters.key,e=t(i);return t&&(e||0===e)&&(0,v.sO)(e)?e:this.getItemsCount()},_convertItemToNode:function(i,t){this._itemsCount++,!1!==i.visible&&this._visibleItemsCount++;var e={internalFields:{disabled:this._dataAccessors.getters.disabled(i,{defaultValue:!1}),expanded:this._dataAccessors.getters.expanded(i,{defaultValue:!1}),selected:this._dataAccessors.getters.selected(i,{defaultValue:!1}),key:this._getUniqueKey(i),parentKey:(0,v.O9)(t)?t:this._rootValue,item:this._makeObjectFromPrimitive(i),childrenKeys:[]}};return(0,y.X)(e,i),delete e.items,e},setChildrenKeys:function(){var i=this;(0,I.__)(this._dataStructure,function(t,e){if(e.internalFields.parentKey!==i._rootValue){var a=i.getParentNode(e);a&&a.internalFields.childrenKeys.push(e.internalFields.key)}})},_makeObjectFromPrimitive:function(i){if((0,v.sO)(i)){var t=i;this._dataAccessors.setters.key(i={},t)}return i},_convertToPublicNode:function(i,t){if(!i)return null;var e={text:this._dataAccessors.getters.display(i),key:i.internalFields.key,selected:i.internalFields.selected,expanded:i.internalFields.expanded,disabled:i.internalFields.disabled,parent:t||null,itemData:i.internalFields.item,children:[],items:[]};return e.parent&&(e.parent.children.push(e),e.parent.items.push(e)),e},convertToPublicNodes:function(i,t){if(!i.length)return[];var e=this,a=[];return(0,I.__)(i,function(n,r){r=(0,v.sO)(r)?e._getByKey(r):r;var s=e._convertToPublicNode(r,t);s.children=e.convertToPublicNodes(r.internalFields.childrenKeys,s),a.push(s),r.internalFields.publicNode=s}),a},setDataAccessors:function(i){this._dataAccessors=i},_getByKey:function(i){return this._dataStructure[this.getIndexByKey(i)]||null},getParentNode:function(i){return this._getByKey(i.internalFields.parentKey)},getByKey:function(i,t){if(null==t)return null;var s,e=null,a=this;return s=t,(0,I.__)(i,function(o,l){if((l.internalFields&&l.internalFields.key||a._dataAccessors.getters.key(l)).toString()===s.toString())return e=l,!1}),e},getItemsCount:function(){return this._itemsCount},getVisibleItemsCount:function(){return this._visibleItemsCount},updateIndexByKey:function(){var i=this;this._indexByKey={},(0,I.__)(this._dataStructure,function(t,e){i._checkForDuplicateId(e.internalFields.key),i._indexByKey[e.internalFields.key]=t})},updateChildrenKeys:function(){this._indexByKey={},this.removeChildrenKeys(),this.updateIndexByKey(),this.setChildrenKeys()},removeChildrenKeys:function(){this._indexByKey={},(0,I.__)(this._dataStructure,function(i,t){t.internalFields.childrenKeys=[]})},getIndexByKey:function(i){return this._indexByKey[i]},createPlainStructure:function(i,t,e){return this._itemsCount=0,this._visibleItemsCount=0,this._rootValue=t,this._dataType=e,this._indexByKey={},this._convertItemsToNodes(i),this.setChildrenKeys(),this._dataStructure}});const Bp=Dp;var Xt="expanded",Et="selected";fi.A.setEditorClass(xi.A);var Mp=ut.A.inherit({ctor:function(i){this.options={},(0,y.X)(this.options,this._defaultOptions(),i),this.options.dataConverter.setDataAccessors(this.options.dataAccessors),this._selectedNodesKeys=[],this._expandedNodesKeys=[],this._dataStructure=[],this._createInternalDataStructure(),this.getTreeNodes()},setOption:function(i,t){this.options[i]=t,"recursiveSelection"===i&&this._updateSelection()},_defaultOptions:function(){return{dataAccessors:void 0,items:[],multipleSelection:!0,recursiveSelection:!1,recursiveExpansion:!1,rootValue:0,searchValue:"",dataType:"tree",searchMode:"contains",dataConverter:new Bp,onNodeChanged:V.lQ,sort:null}},_createInternalDataStructure:function(){this._initialDataStructure=this.options.dataConverter.createPlainStructure(this.options.items,this.options.rootValue,this.options.dataType),this._dataStructure=this.options.searchValue.length?this.search(this.options.searchValue):this._initialDataStructure,this.options.dataConverter._dataStructure=this._dataStructure,this._updateSelection(),this._updateExpansion()},_updateSelection:function(){this.options.recursiveSelection&&(this._setChildrenSelection(),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(Et)},_updateExpansion:function(i){this.options.recursiveExpansion&&(i?this._updateOneBranch(i):this._setParentExpansion()),this._expandedNodesKeys=this._updateNodesKeysArray(Xt)},_updateNodesKeysArray:function(i){var t=this,e=[];return(0,I.__)(t._getDataBySelectionMode(),function(a,n){t._isNodeVisible(n)&&n.internalFields[i]&&(i===Xt||t.options.multipleSelection?e.push(n.internalFields.key):(e.length&&t.toggleSelection(e[0],!1,!0),e=[n.internalFields.key]))}),e},_getDataBySelectionMode:function(){return this.options.multipleSelection?this.getData():this.getFullData()},_isNodeVisible:function(i){return!1!==i.internalFields.item.visible},_getByKey:function(i,t){return i===this._dataStructure?this.options.dataConverter._getByKey(t):this.options.dataConverter.getByKey(i,t)},_setChildrenSelection:function(){var i=this;(0,I.__)(this._dataStructure,function(t,e){if(e.internalFields.childrenKeys.length){var a=e.internalFields.selected;!0===a&&i._toggleChildrenSelection(e,a)}})},_setParentSelection:function(){var i=this;(0,I.__)(this._dataStructure,function(t,e){i.options.dataConverter.getParentNode(e)&&e.internalFields.parentKey!==i.options.rootValue&&i._iterateParents(e,function(n){var r=i._calculateSelectedState(n);i._setFieldState(n,Et,r)})})},_setParentExpansion:function(){var i=this;(0,I.__)(this._dataStructure,function(t,e){e.internalFields.expanded&&i._updateOneBranch(e.internalFields.key)})},_updateOneBranch:function(i){var t=this,e=this.getNodeByKey(i);t._iterateParents(e,function(a){t._setFieldState(a,Xt,!0)})},_iterateChildren:function(i,t,e,a){if((0,v.Tn)(e)){var n=this,r=i.internalFields.key;-1===(a=a||[]).indexOf(r)&&(a.push(r),(0,I.__)(i.internalFields.childrenKeys,function(s,o){var l=n.getNodeByKey(o);e(l),l.internalFields.childrenKeys.length&&t&&n._iterateChildren(l,t,e,a)}))}},_iterateParents:function(i,t,e){if(i.internalFields.parentKey!==this.options.rootValue&&(0,v.Tn)(t)){var a=i.internalFields.key;if(-1===(e=e||[]).indexOf(a)){e.push(a);var n=this.options.dataConverter.getParentNode(i);n&&(t(n),n.internalFields.parentKey!==this.options.rootValue&&this._iterateParents(n,t,e))}}},_calculateSelectedState:function(i){for(var t=i.internalFields.childrenKeys.length,e=0,a=0,n=!1,r=0;r<=t-1;r++){var s=this.getNodeByKey(i.internalFields.childrenKeys[r]),l=s.internalFields.selected;!1===s.internalFields.item.visible?a++:l?e++:void 0===l&&(e+=.5)}return e&&(n=e===t-a||void 0),n},_toggleChildrenSelection:function(i,t){var e=this;this._iterateChildren(i,!0,function(a){e._isNodeVisible(a)&&e._setFieldState(a,Et,t)})},_setFieldState:function(i,t,e){i.internalFields[t]!==e&&(i.internalFields[t]=e,i.internalFields.publicNode&&(i.internalFields.publicNode[t]=e),this.options.dataAccessors.setters[t](i.internalFields.item,e),this.options.onNodeChanged(i))},_markChildren:function(i){var t=this;(0,I.__)(i,function(e,a){var n=t.getIndexByKey(a),r=t.getNodeByKey(a);t._dataStructure[n]=0,r.internalFields.childrenKeys.length&&t._markChildren(r.internalFields.childrenKeys)})},_removeNode:function(i){var t=this.getNodeByKey(i);this._dataStructure[this.getIndexByKey(i)]=0,this._markChildren(t.internalFields.childrenKeys);var e=this,a=0,n=(0,y.X)([],this._dataStructure);(0,I.__)(n,function(r,s){s||(e._dataStructure.splice(r-a,1),a++)})},_addNode:function(i){var t=this.options.dataConverter,e=t._convertItemToNode(i,this.options.dataAccessors.getters.parentKey(i));this._dataStructure=this._dataStructure.concat(e),this._initialDataStructure=this._initialDataStructure.concat(e),t._dataStructure=t._dataStructure.concat(e)},_updateFields:function(){this.options.dataConverter.updateChildrenKeys(),this._updateSelection(),this._updateExpansion()},getSelectedNodesKeys:function(){return this._selectedNodesKeys},getExpandedNodesKeys:function(){return this._expandedNodesKeys},getData:function(){return this._dataStructure},getFullData:function(){return this._initialDataStructure},getNodeByItem:function(i){var t=null;return(0,I.__)(this._dataStructure,function(e,a){if(a.internalFields.item===i)return t=a,!1}),t},getNodesByItems:function(i){var t=this,e=[];return(0,I.__)(i,function(a,n){var r=t.getNodeByItem(n);r&&e.push(r)}),e},getNodeByKey:function(i,t){return this._getByKey(t||this._getDataBySelectionMode(),i)},getTreeNodes:function(){return this.options.dataConverter.convertToPublicNodes(this.getRootNodes())},getItemsCount:function(){return this.options.dataConverter.getItemsCount()},getVisibleItemsCount:function(){return this.options.dataConverter.getVisibleItemsCount()},getPublicNode:function(i){return i.internalFields.publicNode},getRootNodes:function(){return this.getChildrenNodes(this.options.rootValue)},getChildrenNodes:function(i){return(0,Le.A)(this._dataStructure,{langParams:this.options.langParams}).filter(["internalFields.parentKey",i]).toArray()},getIndexByKey:function(i){return this.options.dataConverter.getIndexByKey(i)},addItem:function(i){this._addNode(i),this._updateFields()},removeItem:function(i){this._removeNode(i),this._updateFields()},toggleSelection:function(i,t,e){var a=this._isSingleModeUnselect(t),n=this._getByKey(e||a?this._initialDataStructure:this._dataStructure,i);this._setFieldState(n,Et,t),this.options.recursiveSelection&&!e&&(t?this._setChildrenSelection():this._toggleChildrenSelection(n,t),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(Et)},_isSingleModeUnselect:function(i){return!this.options.multipleSelection&&!i},toggleNodeDisabledState:function(i,t){var e=this.getNodeByKey(i);this._setFieldState(e,"disabled",t)},toggleSelectAll:function(i){if((0,v.O9)(i)){var t=this,e=t._selectedNodesKeys[t._selectedNodesKeys.length-1],a=t._isSingleModeUnselect(i)?this._initialDataStructure:this._dataStructure;(0,I.__)(a,function(n,r){t._isNodeVisible(r)&&t._setFieldState(r,Et,i)}),t._selectedNodesKeys=t._updateNodesKeysArray(Et),!i&&t.options.selectionRequired&&t.toggleSelection(e,!0)}},isAllSelected:function(){return!!this.getSelectedNodesKeys().length&&(this.getSelectedNodesKeys().length===this.getVisibleItemsCount()||void 0)},toggleExpansion:function(i,t){var e=this.getNodeByKey(i);this._setFieldState(e,Xt,t),t&&this._updateExpansion(i),this._expandedNodesKeys=this._updateNodesKeysArray(Xt)},isFiltered:function(i){return!this.options.searchValue.length||!!this._filterDataStructure(this.options.searchValue,[i]).length},_createCriteria:function(i,t,e){var a=[];return Array.isArray(i)?((0,I.__)(i,function(n,r){a.push([r,e,t],"or")}),a.pop(),a):[i,e,t]},_filterDataStructure:function(i,t){var e=this.options.searchExpr||this.options.dataAccessors.getters.display,a=fi.A.getOperationBySearchMode(this.options.searchMode),n=this._createCriteria(e,i,a);return(0,Le.A)(t=t||this._initialDataStructure,{langParams:this.options.langParams}).filter(n).toArray()},search:function(i){var t=this,e=this._filterDataStructure(i),a=this.options.dataConverter;return function n(r,s){for(var o=r.length;s<o;){var l=r[s];if(l.internalFields.parentKey!==t.options.rootValue){var d=a.getParentNode(l);d?(d.internalFields.expanded||t._setFieldState(d,Xt,!0),r.includes(d)?s++:(r.splice(s,0,d),n(r,s))):(J.A.log("W1007",l.internalFields.parentKey,l.internalFields.key),s++)}else s++}}(e,0),this.options.sort&&(e=$t.A.queryByOptions((0,Le.A)(e),{sort:this.options.sort,langParams:this.options.langParams}).toArray()),a._indexByKey={},(0,I.__)(e,function(n,r){r.internalFields.childrenKeys=[],a._indexByKey[r.internalFields.key]=n}),a._dataStructure=e,a.setChildrenKeys(),a._dataStructure}});const Vp=Mp;var _a=D(4874),kp=_a.A.inherit({_getDefaultOptions:function(){return(0,y.X)(this.callBase(),{keyExpr:"id",displayExpr:"text",selectedExpr:"selected",disabledExpr:"disabled",itemsExpr:"items",hoverStateEnabled:!0,parentIdExpr:"parentId",expandedExpr:"expanded"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===ne.A.real().deviceType&&!ne.A.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this._initAccessors(),this._initDataAdapter(),this._initDynamicTemplates()},_initDataSource:function(){this.callBase(),this._dataSource&&this._dataSource.paginate(!1)},_initDataAdapter:function(){var i=this._createDataAdapterAccessors();this._dataAdapter=new Vp((0,y.X)({dataAccessors:{getters:i.getters,setters:i.setters},items:this.option("items")},this._getDataAdapterOptions()))},_getDataAdapterOptions:V.lQ,_getItemExtraPropNames:V.lQ,_initDynamicTemplates:function(){var i=["text","html","items","icon"].concat(this._getItemExtraPropNames());this._templateManager.addDefaultTemplates({item:new ga.U(this._addContent.bind(this),i,this.option("integrationOptions.watchMethod"),{text:this._displayGetter,items:this._itemsGetter})})},_addContent:function(i,t){i.html(t.html).append(this._getIconContainer(t)).append(this._getTextContainer(t))},_getLinkContainer:function(i,t,e){var{linkAttr:a,url:n}=e,r=(0,v.Gv)(a)?a:{};return(0,_.A)("<a>").addClass("dx-item-url").attr((0,N.A)({},r,{href:n})).append(i).append(t)},_getIconContainer:function(i){if(i.icon){var e,t=(0,bt.N)(i.icon);return t.is("img")&&t.attr("alt",null!==(e=i.text)&&void 0!==e?e:"".concat(this.NAME," item icon")),t}},_getTextContainer:function(i){return(0,_.A)("<span>").text(i.text)},_initAccessors:function(){var i=this;(0,I.__)(this._getAccessors(),function(t,e){i._compileAccessor(e)}),this._compileDisplayGetter()},_getAccessors:function(){return["key","selected","items","disabled","parentId","expanded"]},_getChildNodes:function(i){var t=this,e=[];return(0,I.__)(i.internalFields.childrenKeys,function(a,n){var r=t._dataAdapter.getNodeByKey(n);e.push(r)}),e},_hasChildren:function(i){return i&&i.internalFields.childrenKeys.length},_compileAccessor:function(i){var t="_"+i+"Getter",e="_"+i+"Setter",a=this.option(i+"Expr");return a?(0,v.Tn)(a)?(this[e]=function(n,r){n[a()]=r},void(this[t]=function(n){return n[a()]})):(this[t]=(0,q.Hz)(a),void(this[e]=(0,q.vL)(a))):(this[t]=V.lQ,void(this[e]=V.lQ))},_createDataAdapterAccessors:function(){var i=this,t={getters:{},setters:{}};return(0,I.__)(this._getAccessors(),function(e,a){var r="_"+a+"Setter",s="parentId"===a?"parentKey":a;t.getters[s]=i["_"+a+"Getter"],t.setters[s]=i[r]}),t.getters.display=this._displayGetter?this._displayGetter:e=>e.text,t},_initMarkup:function(){this.callBase(),this._addWidgetClass()},_addWidgetClass:function(){this._focusTarget().addClass(this._widgetClass())},_widgetClass:V.lQ,_renderItemFrame:function(i,t){var e=this.callBase.apply(this,arguments);return e.toggleClass("dx-state-disabled",!!this._disabledGetter(t)),e},_optionChanged:function(i){switch(i.name){case"displayExpr":case"keyExpr":this._initAccessors(),this._initDynamicTemplates(),this.repaint();break;case"itemsExpr":case"selectedExpr":case"disabledExpr":case"expandedExpr":case"parentIdExpr":this._initAccessors(),this._initDataAdapter(),this.repaint();break;case"items":this._initDataAdapter(),this.callBase(i);break;default:this.callBase(i)}}});const ho=kp;var te=D(4159),Np=D(396),bi="dxdblclick",uo=(0,P.b4)(ae.U,"dxDblClick"),zp=ut.A.inherit({ctor:function(){this._handlerCount=0,this._forgetLastClick()},_forgetLastClick:function(){this._firstClickTarget=null,this._lastClickTimeStamp=-300},add:function(){this._handlerCount<=0&&O.A.on(U.A.getDocument(),uo,this._clickHandler.bind(this)),this._handlerCount++},_clickHandler:function(i){var t=i.timeStamp||Date.now(),e=t-this._lastClickTimeStamp;!(e<0)&&e<300?((0,P.rC)({type:bi,target:(0,ht.tc)(this._firstClickTarget,i.target),originalEvent:i}),this._forgetLastClick()):(this._firstClickTarget=i.target,this._lastClickTimeStamp=t)},remove:function(){this._handlerCount--,this._handlerCount<=0&&(this._forgetLastClick(),O.A.off(U.A.getDocument(),uo))}});(0,Np.A)(bi,new zp);var ce=D(3930),wt=D(9057),yt=D(1100),Tn=D(9900),Kp=D(8221),Rn=D(8500),Re="dx-treeview",we="".concat(Re,"-node"),qe="".concat(we,"-container"),Dn="".concat(we,"-loadindicator"),ct="".concat(we,"-container-opened"),Ei="".concat(we,"-is-leaf"),ve="".concat(Re,"-item"),Wp="".concat(ve,"-with-checkbox"),Gp="".concat(ve,"-with-custom-expander-icon"),Up="".concat(Re,"-custom-expander-icon-item-container"),$p="".concat(ve,"-without-checkbox"),Xp="".concat(ve,"-data"),wi="".concat(Re,"-toggle-item-visibility"),Bn="".concat(Re,"-custom-collapse-icon"),Fn="".concat(Re,"-custom-expand-icon"),Yp="".concat(Re,"-loadindicator"),jp="".concat(Re,"-loadindicator-wrapper"),go="".concat(Re,"-toggle-item-visibility-opened"),va="".concat(Re,"-select-all-item"),po="dx-state-invisible",yi="dx-state-disabled",Mn="dxTreeView_expand",ma="data-item-id",_o="dx-checkbox",Jp="".concat(Re,"-root-node"),e_="".concat(Re,"-expander-icon-stub"),t_=ho.inherit({_supportedKeys:function(i){var t=n=>{var r=(0,_.A)(this.option("focusedElement"));r.length&&(n.target=r,n.currentTarget=r,this._itemClickHandler(n,r.children("."+ve)),this._getEventNameByOption(this.option("expandEvent"))===(0,P.b4)(ae.U,Mn)&&this._expandEventHandler(n))},e=n=>{n.preventDefault();var r=(0,_.A)(this.option("focusedElement")),s=this._getCheckBoxInstance(r);if(!s.option("disabled")){var o=s.option("value");this._updateItemSelection(!o,r.find("."+ve).get(0),!0)}},a=function(n,r){if(this.option("expandAllEnabled")){r.preventDefault();var s=(0,_.A)(this.option("focusedElement"));if(s.length){var o=this._getItemData(s.find(".".concat(ve)));this._toggleExpandedNestedItems([o],n)}}};return(0,y.X)(this.callBase(),{enter:this._showCheckboxes()?e:t,space:this._showCheckboxes()?e:t,asterisk:a.bind(this,!0),minus:a.bind(this,!1)})},_toggleExpandedNestedItems:function(i,t){if(i)for(var e=0,a=i.length;e<a;e++){var n=i[e],r=this._dataAdapter.getNodeByItem(n);this._toggleExpandedState(r,t),this._toggleExpandedNestedItems(n.items,t)}},_getNodeElement:function(i,t){var e=this._encodeString(i.internalFields.key);if(t)return t.$nodeByKey||(t.$nodeByKey={},this.$element().find(".".concat(we)).each(function(){var n=(0,_.A)(this),r=n.attr(ma);t.$nodeByKey[r]=n})),t.$nodeByKey[e]||(0,_.A)();var a=this.$element().get(0).querySelector("[".concat(ma,'="').concat(e,'"]'));return(0,_.A)(a)},_activeStateUnit:"."+ve,_widgetClass:function(){return Re},_getDefaultOptions:function(){var i=(0,y.X)(this.callBase(),{animationEnabled:!0,dataStructure:"tree",deferRendering:!0,expandAllEnabled:!1,hasItemsExpr:"hasItems",selectNodesRecursive:!0,expandNodesRecursive:!0,showCheckBoxesMode:"none",expandIcon:null,collapseIcon:null,selectAllText:A.A.format("dxList-selectAll"),onItemSelectionChanged:null,onItemExpanded:null,onItemCollapsed:null,scrollDirection:"vertical",useNativeScrolling:!0,virtualModeEnabled:!1,rootValue:0,focusStateEnabled:!1,selectionMode:"multiple",expandEvent:"dblclick",selectByClick:!1,createChildren:null,onSelectAllValueChanged:null});return(0,y.X)(!0,i,{integrationOptions:{useDeferUpdateForTemplates:!1}})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return!Tn.nativeScrolling},options:{useNativeScrolling:!1}}])},_initSelectedItems:V.lQ,_syncSelectionOptions:V.TA,_fireSelectionChanged:function(){(0,w.z7)(this._selectionChangePromise).done(function(){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})()}.bind(this))},_createSelectAllValueChangedAction:function(){this._selectAllValueChangedAction=this._createActionByOption("onSelectAllValueChanged",{excludeValidators:["disabled","readOnly"]})},_fireSelectAllValueChanged:function(i){this._selectAllValueChangedAction({value:i})},_checkBoxModeChange:function(i,t){var e=this.option("searchEnabled"),a=this._selectAllEnabled(t),n=this._itemContainer(e,a);if(this._detachClickEvent(n),this._detachExpandEvent(n),"none"!==t&&"none"!==i){var r=this._$selectAllItem&&this._$selectAllItem.length;switch(i){case"selectAll":r||(this._createSelectAllValueChangedAction(),this._renderSelectAllItem());break;case"normal":r&&(this._$selectAllItem.remove(),delete this._$selectAllItem)}}},_removeSelection:function(){var i=this;(0,I.__)(this._dataAdapter.getFullData(),function(t,e){i._hasChildren(e)&&i._dataAdapter.toggleSelection(e.internalFields.key,!1,!0)})},_optionChanged:function(i){var{name:t,value:e,previousValue:a}=i;switch(t){case"selectAllText":this._$selectAllItem&&this._$selectAllItem.dxCheckBox("instance").option("text",e);break;case"showCheckBoxesMode":this._checkBoxModeChange(e,a),this._invalidate();break;case"scrollDirection":this.getScrollable().option("direction",e);break;case"useNativeScrolling":this.getScrollable().option("useNative",e);break;case"items":delete this._$selectAllItem,this.callBase(i);break;case"dataSource":this.callBase(i),this._initDataAdapter(),this._filter={};break;case"hasItemsExpr":this._initAccessors(),this.repaint();break;case"expandEvent":this._attachExpandEvent();break;case"deferRendering":case"dataStructure":case"rootValue":case"createChildren":case"expandNodesRecursive":case"onItemSelectionChanged":case"onItemExpanded":case"onItemCollapsed":case"expandAllEnabled":case"animationEnabled":case"virtualModeEnabled":case"selectByClick":break;case"selectionMode":this._initDataAdapter(),this.callBase(i);break;case"onSelectAllValueChanged":this._createSelectAllValueChangedAction();break;case"selectNodesRecursive":this._dataAdapter.setOption("recursiveSelection",i.value),this.repaint();break;case"expandIcon":case"collapseIcon":this.repaint();break;default:this.callBase(i)}},_initDataSource:function(){this._useCustomChildrenLoader()?this._loadChildrenByCustomLoader(null).done(function(i){i&&i.length&&this.option("items",i)}.bind(this)):(this.callBase(),this._isVirtualMode()&&this._initVirtualMode())},_initVirtualMode:function(){var i=this._filter;i.custom||(i.custom=this._dataSource.filter()),i.internal||(i.internal=[this.option("parentIdExpr"),this.option("rootValue")])},_useCustomChildrenLoader:function(){return(0,v.Tn)(this.option("createChildren"))&&this._isDataStructurePlain()},_loadChildrenByCustomLoader:function(i){var t=this.option("createChildren").call(this,i);return Array.isArray(t)?(new w.cY).resolve(t).promise():t&&(0,v.Tn)(t.then)?(0,w.Sx)(t):(new w.cY).resolve([]).promise()},_combineFilter:function(){return this._filter.custom&&this._filter.custom.length?[this._filter.custom,this._filter.internal]:this._filter.internal},_dataSourceLoadErrorHandler:function(){this._renderEmptyMessage()},_init:function(){this._filter={},this.callBase(),this._initStoreChangeHandlers()},_dataSourceChangedHandler:function(i){var t=this.option("items");this._initialized&&this._isVirtualMode()&&t.length||this.option("items",i)},_removeTreeViewLoadIndicator:function(){this._treeViewLoadIndicator&&(this._treeViewLoadIndicator.remove(),this._treeViewLoadIndicator=null)},_createTreeViewLoadIndicator:function(){return this._treeViewLoadIndicator=(0,_.A)("<div>").addClass(Yp),this._createComponent(this._treeViewLoadIndicator,yt.A,{}),this._treeViewLoadIndicator},_dataSourceLoadingChangedHandler:function(i){var t;if(this._isVirtualMode()&&(t=this._combineFilter(),this._dataSource.filter(t)),i&&!this._dataSource.isLoaded()){this.option("items",[]);var e=(0,_.A)("<div>").addClass(jp);this._createTreeViewLoadIndicator().appendTo(e),this.itemsContainer().append(e),this._isVirtualMode()&&this._dataSource.filter()!==t&&this._dataSource.filter([])}else this._removeTreeViewLoadIndicator()},_initStoreChangeHandlers:function(){"plain"===this.option("dataStructure")&&this._dataSource&&this._dataSource.store().on("inserted",i=>{this.option().items=this.option("items").concat(i),this._dataAdapter.addItem(i),this._dataAdapter.isFiltered(i)&&this._updateLevel(this._parentIdGetter(i))}).on("removed",i=>{var t=this._dataAdapter.getNodeByKey(i);(0,v.O9)(t)&&(this.option("items")[this._dataAdapter.getIndexByKey(t.internalFields.key)]=0,this._markChildrenItemsToRemove(t),this._removeItems(),this._dataAdapter.removeItem(i),this._updateLevel(this._parentIdGetter(t)))})},_markChildrenItemsToRemove:function(i){(0,I.__)(i.internalFields.childrenKeys,(e,a)=>{this.option("items")[this._dataAdapter.getIndexByKey(a)]=0,this._markChildrenItemsToRemove(this._dataAdapter.getNodeByKey(a))})},_removeItems:function(){var i=(0,y.X)(!0,[],this.option("items")),t=0;(0,I.__)(i,(e,a)=>{a||(this.option("items").splice(e-t,1),t++)})},_updateLevel:function(i){var t=this._getContainerByParentKey(i);this._renderItems(t,this._dataAdapter.getChildrenNodes(i))},_getOldContainer:function(i){if(i.length)return i.children(".".concat(qe));var t=this.getScrollable();return t?(0,_.A)(t.content()).children():(0,_.A)()},_getContainerByParentKey:function(i){var t=this._dataAdapter.getNodeByKey(i),e=t?this._getNodeElement(t):[];this._getOldContainer(e).remove();var a=this._renderNodeContainer(e);if(this._isRootLevel(i)){var n=this.getScrollable();n||this._renderScrollableContainer(),(0,_.A)(n.content()).append(a)}return a},_isRootLevel:function(i){return i===this.option("rootValue")},_getAccessors:function(){var i=this.callBase();return i.push("hasItems"),i},_getDataAdapterOptions:function(){var i,t,e;return{rootValue:this.option("rootValue"),multipleSelection:!this._isSingleSelection(),recursiveSelection:this._isRecursiveSelection(),recursiveExpansion:this.option("expandNodesRecursive"),selectionRequired:this.option("selectionRequired"),dataType:this.option("dataStructure"),sort:this._dataSource&&this._dataSource.sort(),langParams:null===(i=this._dataSource)||void 0===i||null===(t=i.loadOptions)||void 0===t||null===(e=t.call(i))||void 0===e?void 0:e.langParams}},_initMarkup:function(){this._renderScrollableContainer(),this._renderEmptyMessage(this._dataAdapter.getRootNodes()),this.callBase(),this.setAria("role","tree")},_renderContentImpl:function(){var i=this._renderNodeContainer();(0,_.A)(this.getScrollable().content()).append(i),this.option("items")&&this.option("items").length&&(this._renderItems(i,this._dataAdapter.getRootNodes()),this._attachExpandEvent(),this._selectAllEnabled()&&(this._createSelectAllValueChangedAction(),this._renderSelectAllItem(i)))},_isVirtualMode:function(){return this.option("virtualModeEnabled")&&this._isDataStructurePlain()&&!!this.option("dataSource")},_isDataStructurePlain:function(){return"plain"===this.option("dataStructure")},_fireContentReadyAction:function(){var i=this.getDataSource(),t=i&&!i.isLoaded()||this._skipContentReadyAndItemExpanded,e=this.getScrollable();e&&(0,Q.Vd)()&&e.update(),t||this.callBase(),e&&(0,Q.Vd)()&&e.update()},_renderScrollableContainer:function(){this._scrollable=this._createComponent((0,_.A)("<div>").appendTo(this.$element()),wt.A,{useNative:this.option("useNativeScrolling"),direction:this.option("scrollDirection"),useKeyboard:!1}),this.setAria("role","treeitem",this._scrollable.$element())},_renderNodeContainer:function(i){var t=(0,_.A)("<ul>").addClass(qe);if(this.setAria("role","group",t),i&&i.length){var e=this._getItemData(i.children("."+ve));this._expandedGetter(e)&&t.addClass(ct),t.appendTo(i)}return t},_createDOMElement:function(i,t){var e,a,n=(0,_.A)("<li>").addClass(we).attr(ma,this._encodeString(t.internalFields.key)).prependTo(i),r={role:"treeitem",label:this._displayGetter(t.internalFields.item)||"",level:this._getLevel(i)};return!(null==t||null===(e=t.internalFields)||void 0===e||null===(a=e.childrenKeys)||void 0===a||!a.length)&&(r.expanded=t.internalFields.expanded||!1),this.setAria(r,n),n},_getLevel:function(i){var t=i.parent();return t.hasClass("dx-scrollable-content")?1:parseInt(t.attr("aria-level"))+1},_showCheckboxes:function(){return"none"!==this.option("showCheckBoxesMode")},_hasCustomExpanderIcons:function(){return this.option("expandIcon")||this.option("collapseIcon")},_selectAllEnabled:function(i){return"selectAll"===(i??this.option("showCheckBoxesMode"))&&!this._isSingleSelection()},_renderItems:function(i,t){for(var a=t.length-1;a>=0;a--)this._renderItem(a,t[a],i);this._renderedItemsCount+=t.length},_renderItem:function(i,t,e){var a=this._createDOMElement(e,t),n=t.internalFields,r=this._showCheckboxes();a.addClass(r?Wp:$p),a.toggleClass(po,!1===n.item.visible),this._hasCustomExpanderIcons()&&(a.addClass(Gp),e.addClass(Up)),this.setAria("selected",n.selected,a),this._toggleSelectedClass(a,n.selected),n.disabled&&this.setAria("disabled",n.disabled,a),this.callBase(this._renderedItemsCount+i,n.item,a),this._getNode(t.internalFields.parentKey)||a.addClass(Jp),!1!==n.item.visible&&this._renderChildren(a,t)},_setAriaSelectionAttribute:V.lQ,_renderChildren:function(i,t){if(!this._hasChildren(t))return this._addLeafClass(i),void(0,_.A)("<div>").addClass(e_).appendTo(this._getItem(i));this._hasCustomExpanderIcons()?this._renderCustomExpanderIcons(i,t):this._renderDefaultExpanderIcons(i,t),this._shouldRenderSublevel(t.internalFields.expanded)&&this._loadSublevel(t).done(e=>{this._renderSublevel(i,this._getActualNode(t),e)})},_shouldRenderSublevel:function(i){return i||!this.option("deferRendering")},_getActualNode:function(i){return this._dataAdapter.getNodeByKey(i.internalFields.key)},_hasChildren:function(i){return this._isVirtualMode()||this._useCustomChildrenLoader()?!1!==this._hasItemsGetter(i.internalFields.item):this.callBase(i)},_loadSublevel:function(i){var t=new w.cY,e=this._getChildNodes(i);return e.length?t.resolve(e):this._loadNestedItems(i).done(a=>{t.resolve(this._dataAdapter.getNodesByItems(a))}),t.promise()},_getItemExtraPropNames:()=>["url","linkAttr"],_addContent:function(i,t){var{html:e,url:a}=t;if(a){i.html(e);var n=this._getLinkContainer(this._getIconContainer(t),this._getTextContainer(t),t);i.append(n)}else this.callBase(i,t)},_postprocessRenderItem(i){var{itemData:t,itemElement:e}=i;this._showCheckboxes()&&this._renderCheckBox(e,this._getNode(t)),this.callBase(i)},_renderSublevel:function(i,t,e){var a=this._renderNodeContainer(i,t),n=e.filter(s=>-1!==t.internalFields.childrenKeys.indexOf(s.internalFields.key));if(this._renderItems(a,n),n.length&&!t.internalFields.selected){var r=n[0];this._updateParentsState(r,this._getNodeElement(r))}this._normalizeIconState(i,n.length),t.internalFields.expanded&&a.addClass(ct)},_executeItemRenderAction:function(i,t,e){var a=this._getNode(e);this._getItemRenderAction()({itemElement:e,itemIndex:i,itemData:t,node:this._dataAdapter.getPublicNode(a)})},_addLeafClass:function(i){i.addClass(Ei)},_expandEventHandler:function(i){(0,_.A)(i.currentTarget.parentNode).hasClass(Ei)||this._toggleExpandedState(i.currentTarget,void 0,i)},_attachExpandEvent:function(){var i=this._getEventNameByOption(this.option("expandEvent")),t=this._itemContainer();this._detachExpandEvent(t),O.A.on(t,i,this._itemSelector(),this._expandEventHandler.bind(this))},_detachExpandEvent(i){O.A.off(i,".".concat(Mn),this._itemSelector())},_getEventNameByOption:function(i){return(0,P.b4)("click"===i?ae.U:bi,Mn)},_getNode:function(i){if(!(0,v.O9)(i))return null;if(i.internalFields)return i;if((0,v.sO)(i))return this._dataAdapter.getNodeByKey(i);var t=(0,_.A)(i).get(0);return t?U.A.isElementNode(t)?this._getNodeByElement(t):this._dataAdapter.getNodeByItem(t):null},_getNodeByElement:function(i){var t=(0,_.A)(i).closest("."+we),e=this._decodeString(t.attr(ma));return this._dataAdapter.getNodeByKey(e)},_toggleExpandedState:function(i,t,e){var a=this._getNode(i);if(!a)return(new w.cY).reject().promise();if(a.internalFields.disabled)return(new w.cY).reject().promise();var n=a.internalFields.expanded;if(n===t)return(new w.cY).resolve().promise();if(this._hasChildren(a)){var r=this._getNodeElement(a);if(r.find(".".concat(Dn,":not(.").concat(po,")")).length)return(new w.cY).reject().promise();!n&&!this._nodeHasRenderedChildren(r)&&this._createLoadIndicator(r)}return(0,v.O9)(t)||(t=!n),this._dataAdapter.toggleExpansion(a.internalFields.key,t),this._updateExpandedItemsUI(a,t,e)},_nodeHasRenderedChildren:i=>i.children(".".concat(qe)).not(":empty").length,_getItem:function(i){return i.children(".".concat(ve)).eq(0)},_createLoadIndicator:function(i){var t=this._getItem(i);this._createComponent((0,_.A)("<div>").addClass(Dn),yt.A,{}).$element().appendTo(t),t.children(".".concat(wi,",.").concat(Fn)).hide()},_renderExpanderIcon:function(i,t,e,a){e.appendTo(this._getItem(i)),e.addClass(a),t.internalFields.disabled&&e.addClass(yi),this._renderToggleItemVisibilityIconClick(e,t)},_renderDefaultExpanderIcons:function(i,t){var e=this._getItem(i),a=(0,_.A)("<div>").addClass(wi).appendTo(e);t.internalFields.expanded&&(a.addClass(go),i.parent().addClass(ct)),t.internalFields.disabled&&a.addClass(yi),this._renderToggleItemVisibilityIconClick(a,t)},_renderCustomExpanderIcons:function(i,t){var{expandIcon:e,collapseIcon:a}=this.option(),n=(0,bt.N)(e??a),r=(0,bt.N)(a??e);this._renderExpanderIcon(i,t,n,Fn),this._renderExpanderIcon(i,t,r,Bn);var s=t.internalFields.expanded;s&&i.parent().addClass(ct),this._toggleCustomExpanderIcons(n,r,s)},_renderToggleItemVisibilityIconClick:function(i,t){var e=(0,P.b4)(ae.U,this.NAME);O.A.off(i,e),O.A.on(i,e,a=>(this._toggleExpandedState(t.internalFields.key,void 0,a),!1))},_toggleCustomExpanderIcons:function(i,t,e){t.toggle(e),i.toggle(!e)},_updateExpandedItemsUI:function(i,t,e){var a=this._getNodeElement(i),n=!a.length||t&&a.is(":hidden");if(this.option("expandNodesRecursive")&&n){var r=this._getNode(i.internalFields.parentKey);r&&this._updateExpandedItemsUI(r,t,e)}if(this._hasCustomExpanderIcons()){if(this._nodeHasRenderedChildren(a)){var o=this._getItem(a),l=o.children(".".concat(Fn)),d=o.children(".".concat(Bn));this._toggleCustomExpanderIcons(l,d,t)}}else this._getItem(a).children(".".concat(wi)).toggleClass(go,t);var h=a.children(".".concat(qe)),u=h.length>0,c=new w.cY;return!t||u&&!h.is(":empty")?(this._animateNodeContainer(i,t,e,c),c.promise()):0===i.internalFields.childrenKeys.length&&(this._isVirtualMode()||this._useCustomChildrenLoader())?(this._loadNestedItemsWithUpdate(i,t,e,c),c.promise()):(this._renderSublevel(a,i,this._getChildNodes(i)),this._fireContentReadyAction(),this._animateNodeContainer(i,t,e,c),c.promise())},_loadNestedItemsWithUpdate:function(i,t,e,a){var n=this._getNodeElement(i);this._loadNestedItems(i).done(r=>{var s=this._getActualNode(i);this._renderSublevel(n,s,this._dataAdapter.getNodesByItems(r)),r&&r.length?(this._fireContentReadyAction(),this._animateNodeContainer(s,t,e,a)):a.resolve()})},_loadNestedItems:function(i){if(this._useCustomChildrenLoader()){var t=this._dataAdapter.getPublicNode(i);return this._loadChildrenByCustomLoader(t).done(e=>{this._areNodesExists(e)||this._appendItems(e)})}return this._isVirtualMode()?(this._filter.internal=[this.option("parentIdExpr"),i.internalFields.key],this._dataSource.filter(this._combineFilter()),this._dataSource.load().done(e=>{this._areNodesExists(e)||this._appendItems(e)})):(new w.cY).resolve([]).promise()},_areNodesExists:function(i,t){var e=this.keyOf(i[0]),a=this._dataAdapter.getFullData();return!!this._dataAdapter.getNodeByKey(e,a)},_appendItems:function(i){this.option().items=this.option("items").concat(i),this._initDataAdapter()},_animateNodeContainer:function(i,t,e,a){var n=this._getNodeElement(i),r=n.children(".".concat(qe));i&&a&&0===r.length&&a.resolve(),r.addClass(ct);var s=(0,R.Oq)(r);ce.A.stop(r,!0),ce.A.animate(r,{type:"custom",duration:this.option("animationEnabled")?400:0,from:{maxHeight:t?0:s},to:{maxHeight:t?s:0},complete:function(){r.css("maxHeight","none"),r.toggleClass(ct,t),this.setAria("expanded",t,n),this.getScrollable().update(),this._fireExpandedStateUpdatedEvent(t,i,e),a&&a.resolve()}.bind(this)})},_fireExpandedStateUpdatedEvent:function(i,t,e){if(this._hasChildren(t)&&!this._skipContentReadyAndItemExpanded){var a=i?"onItemExpanded":"onItemCollapsed";if((0,v.O9)(e))this._itemDXEventHandler(e,a,{node:this._dataAdapter.getPublicNode(t)});else{var n=this._getNodeElement(t);this._itemEventHandler(n,a,{event:e,node:this._dataAdapter.getPublicNode(t)})}}},_normalizeIconState:function(i,t){var a,e=i.find(".".concat(Dn));e.length&&(null===(a=yt.A.getInstance(e))||void 0===a||a.option("visible",!1));var r=this._getItem(i).children(".".concat(Bn,",.").concat(wi));t?r.show():(r.removeClass(wi),i.addClass(Ei))},_emptyMessageContainer:function(){var i=this.getScrollable();return i?(0,_.A)(i.content()):this.callBase()},_renderContent:function(){var i=this.option("items");i&&i.length&&(this._contentAlreadyRendered=!0),this.callBase()},_renderSelectAllItem:function(i){i=i||this.$element().find(".".concat(qe)).first(),this._$selectAllItem=(0,_.A)("<div>").addClass(va);var t=this._dataAdapter.isAllSelected();this._createComponent(this._$selectAllItem,pa.A,{value:t,elementAttr:{"aria-label":"Select All"},text:this.option("selectAllText"),onValueChanged:this._onSelectAllCheckboxValueChanged.bind(this)}),this._toggleSelectedClass(this._$selectAllItem,t),i.before(this._$selectAllItem)},_onSelectAllCheckboxValueChanged:function(i){this._toggleSelectAll(i),this._fireSelectAllValueChanged(i.value)},_toggleSelectAll:function(i){this._dataAdapter.toggleSelectAll(i.value),this._updateItemsUI(),this._fireSelectionChanged()},_renderCheckBox:function(i,t){var e=(0,_.A)("<div>").appendTo(i);this._createComponent(e,pa.A,{value:t.internalFields.selected,onValueChanged:this._changeCheckboxValue.bind(this),focusStateEnabled:!1,elementAttr:{"aria-label":"Check State"},disabled:this._disabledGetter(t)})},_toggleSelectedClass:function(i,t){i.toggleClass("dx-state-selected",!!t)},_toggleNodeDisabledState:function(i,t){var e=this._getNodeElement(i),a=e.find("."+ve).eq(0);this._dataAdapter.toggleNodeDisabledState(i.internalFields.key,t),a.toggleClass(yi,!!t),this._showCheckboxes()&&this._getCheckBoxInstance(e).option("disabled",!!t)},_itemOptionChanged:function(i,t,e){var a=this._dataAdapter.getNodeByItem(i);t===this.option("disabledExpr")&&this._toggleNodeDisabledState(a,e)},_changeCheckboxValue:function(i){var t=(0,_.A)(i.element).closest(".".concat(we)),e=this._getItem(t),a=this._getItemData(e),n=this._getNodeByElement(e),r=i.value;n&&n.internalFields.selected===r||this._updateItemSelection(r,a,i.event)},_isSingleSelection:function(){return"single"===this.option("selectionMode")},_isRecursiveSelection:function(){return this.option("selectNodesRecursive")&&"single"!==this.option("selectionMode")},_isLastSelectedBranch:function(i,t,e){var a=t.indexOf(i.key);return a>=0&&t.splice(a,1),e&&(0,I.__)(i.children,function(n,r){this._isLastSelectedBranch(r,t,!0)}.bind(this)),i.parent&&this._isLastSelectedBranch(i.parent,t),0===t.length},_isLastRequired:function(i){var t=this.option("selectionRequired"),e=this._isSingleSelection(),a=this.getSelectedNodeKeys();if(t)return e?1===a.length:this._isLastSelectedBranch(i.internalFields.publicNode,a.slice(),!0)},_updateItemSelection:function(i,t,e){var a=this._getNode(t);if(!a||!1===a.visible)return!1;if(a.internalFields.selected===i)return!0;if(!i&&this._isLastRequired(a)){if(this._showCheckboxes()){var n=this._getNodeElement(a);this._getCheckBoxInstance(n).option("value",!0)}return!1}if(i&&this._isSingleSelection()){var r=this.getSelectedNodeKeys();(0,I.__)(r,(l,d)=>{this._dataAdapter.toggleSelection(d,!1),this._updateItemsUI(),this._fireItemSelectionChanged(this._getNode(d))})}this._dataAdapter.toggleSelection(a.internalFields.key,i);var s=this._dataAdapter.isAllSelected(),o=this._selectAllEnabled()&&this._$selectAllItem.dxCheckBox("instance").option("value")!==s;return this._updateItemsUI(),this._fireItemSelectionChanged(a,e),this._fireSelectionChanged(),o&&this._fireSelectAllValueChanged(s),!0},_fireItemSelectionChanged:function(i,t){var e=t||this._findItemElementByItem(i.internalFields.item);(t?this._itemDXEventHandler:this._itemEventHandler).call(this,e,"onItemSelectionChanged",{node:this._dataAdapter.getPublicNode(i),itemData:i.internalFields.item})},_getCheckBoxInstance:function(i){return this._getItem(i).children(".".concat(_o)).dxCheckBox("instance")},_updateItemsUI:function(){var i={};if((0,I.__)(this._dataAdapter.getData(),(e,a)=>{var n=this._getNodeElement(a,i),r=a.internalFields.selected;n.length&&(this._toggleSelectedClass(n,r),this.setAria("selected",r,n),this._showCheckboxes()&&this._getCheckBoxInstance(n).option("value",r))}),this._selectAllEnabled()){var t=this._$selectAllItem.dxCheckBox("instance");t.option("onValueChanged",void 0),t.option("value",this._dataAdapter.isAllSelected()),t.option("onValueChanged",this._onSelectAllCheckboxValueChanged.bind(this))}},_updateParentsState:function(i,t){if(t){var e=this._dataAdapter.getNodeByKey(i.internalFields.parentKey),a=(0,_.A)(t.parents("."+we)[0]);if(this._showCheckboxes()){var n=e.internalFields.selected;this._getCheckBoxInstance(a).option("value",n),this._toggleSelectedClass(a,n)}e.internalFields.parentKey!==this.option("rootValue")&&this._updateParentsState(e,a)}},_itemEventHandlerImpl:function(i,t,e){var a=(0,_.A)(i).closest("."+we).children("."+ve);return t((0,y.X)(this._extendActionArgs(a),e))},_itemContextMenuHandler:function(i){this._createEventHandler("onItemContextMenu",i)},_itemHoldHandler:function(i){this._createEventHandler("onItemHold",i)},_createEventHandler:function(i,t){var e=this._getNodeByElement(t.currentTarget);this._itemDXEventHandler(t,i,{node:this._dataAdapter.getPublicNode(e)})},_itemClass:function(){return ve},_itemDataKey:function(){return Xp},_attachClickEvent:function(){var i=this._itemContainer();this._detachClickEvent(i);var{clickEventNamespace:t,itemSelector:e,pointerDownEventNamespace:a,nodeSelector:n}=this._getItemClickEventData();O.A.on(i,t,e,r=>{(0,_.A)(r.target).hasClass("dx-checkbox-icon")||(0,_.A)(r.target).hasClass(_o)||this._itemClickHandler(r,(0,_.A)(r.currentTarget))}),O.A.on(i,a,n,r=>{this._itemPointerDownHandler(r)})},_detachClickEvent:function(i){var{clickEventNamespace:t,itemSelector:e,pointerDownEventNamespace:a,nodeSelector:n}=this._getItemClickEventData();O.A.off(i,t,e),O.A.off(i,a,n)},_getItemClickEventData:function(){var i=".".concat(this._itemClass()),t=".".concat(we,", .").concat(va);return{clickEventNamespace:(0,P.b4)(ae.U,this.NAME),itemSelector:i,pointerDownEventNamespace:(0,P.b4)(te.A.down,this.NAME),nodeSelector:t}},_itemClick:function(i){var t=i.args[0],a=(t.event.target[0]||t.event.target).getElementsByClassName("dx-item-url")[0];t.itemData.url&&a&&a.click()},_itemClickHandler:function(i,t){var e=this._getItemData(t),a=this._getNodeByElement(t);this._itemDXEventHandler(i,"onItemClick",{node:this._dataAdapter.getPublicNode(a)},{beforeExecute:this._itemClick}),this.option("selectByClick")&&!i.isDefaultPrevented()&&this._updateItemSelection(!a.internalFields.selected,e,i)},_updateSelectionToFirstItem:function(i,t){for(var e=t;e>=0;){var a=(0,_.A)(i[e]);this._updateItemSelection(!0,a.find("."+ve).get(0)),e--}},_updateSelectionToLastItem:function(i,t){for(var e=i.length,a=t;a<e;){var n=(0,_.A)(i[a]);this._updateItemSelection(!0,n.find("."+ve).get(0)),a++}},focus:function(){this._selectAllEnabled()?O.A.trigger(this._$selectAllItem,"focus"):this.callBase()},_focusInHandler:function(i){this._updateFocusState(i,!0);var t=(0,_.A)(i.target).hasClass(va);if(t||this.option("focusedElement"))return clearTimeout(this._setFocusedItemTimeout),void(this._setFocusedItemTimeout=setTimeout(()=>{var a=t?(0,Y.c)(this._$selectAllItem):(0,_.A)(this.option("focusedElement"));this._setFocusedItem(a)}));var e=this._getActiveItem();this.option("focusedElement",(0,Y.c)(e.closest("."+we)))},_itemPointerDownHandler:function(i){if(this.option("focusStateEnabled")){var t=(0,_.A)(i.target).closest("."+we+", ."+va);if(t.length){var e=t.hasClass(yi)?null:t;this.option("focusedElement",(0,Y.c)(e))}}},_findNonDisabledNodes:function(i){return i.not(function(){return(0,_.A)(this).children("."+ve).hasClass(yi)})},_moveFocus:function(i,t){var s=this.option("rtlEnabled")?"right":"left",o=this.option("rtlEnabled")?"left":"right";this.$element().find(".".concat(qe)).each(function(){ce.A.stop(this,!0)});var l=this._nodeElements();if(l&&l.length)switch(i){case"up":var d=this._prevItem(l);this.option("focusedElement",(0,Y.c)(d));var h=this._getNodeItemElement(d);this.getScrollable().scrollToElement(h),t.shiftKey&&this._showCheckboxes()&&this._updateItemSelection(!0,h);break;case"down":var u=this._nextItem(l);this.option("focusedElement",(0,Y.c)(u));var c=this._getNodeItemElement(u);this.getScrollable().scrollToElement(c),t.shiftKey&&this._showCheckboxes()&&this._updateItemSelection(!0,c);break;case"first":var g=l.first();t.shiftKey&&this._showCheckboxes()&&this._updateSelectionToFirstItem(l,l.index(this._prevItem(l))),this.option("focusedElement",(0,Y.c)(g)),this.getScrollable().scrollToElement(this._getNodeItemElement(g));break;case"last":var m=l.last();t.shiftKey&&this._showCheckboxes()&&this._updateSelectionToLastItem(l,l.index(this._nextItem(l))),this.option("focusedElement",(0,Y.c)(m)),this.getScrollable().scrollToElement(this._getNodeItemElement(m));break;case o:this._expandFocusedContainer();break;case s:this._collapseFocusedContainer();break;default:return void this.callBase.apply(this,arguments)}},_getNodeItemElement:function(i){return i.find("."+ve).get(0)},_nodeElements:function(){return this.$element().find("."+we).not(":hidden")},_expandFocusedContainer:function(){var i=(0,_.A)(this.option("focusedElement"));if(i.length&&!i.hasClass(Ei)){if(i.find(".".concat(qe)).eq(0).hasClass(ct)){var e=this._nextItem(this._findNonDisabledNodes(this._nodeElements()));return this.option("focusedElement",(0,Y.c)(e)),void this.getScrollable().scrollToElement(this._getNodeItemElement(e))}var a=this._getNodeByElement(this._getItem(i));this._toggleExpandedState(a,!0)}},_getClosestNonDisabledNode:function(i){do{i=i.parent().closest("."+we)}while(i.children(".dx-treeview-item.dx-state-disabled").length);return i},_collapseFocusedContainer:function(){var i=(0,_.A)(this.option("focusedElement"));if(i.length){var t=i.find(".".concat(qe)).eq(0);if(!i.hasClass(Ei)&&t.hasClass(ct)){var e=this._getNodeByElement(this._getItem(i));this._toggleExpandedState(e,!1)}else{var a=this._getClosestNonDisabledNode(i);a.length&&this.option("focusedElement",(0,Y.c)(a)),this.getScrollable().scrollToElement(this._getNodeItemElement(a))}}},_encodeString:function(i){return(0,v.Kg)(i)?encodeURI(i):i},_decodeString:function(i){return(0,v.Kg)(i)?decodeURI(i):i},getScrollable:function(){return this._scrollable},updateDimensions:function(){var i=new w.cY,t=this.getScrollable();return t?t.update().done(()=>{i.resolveWith(this)}):i.resolveWith(this),i.promise()},selectItem:function(i){return this._updateItemSelection(!0,i)},unselectItem:function(i){return this._updateItemSelection(!1,i)},expandItem:function(i){return this._toggleExpandedState(i,!0)},collapseItem:function(i){return this._toggleExpandedState(i,!1)},getNodes:function(){return this._dataAdapter.getTreeNodes()},getSelectedNodes:function(){return this.getSelectedNodeKeys().map(i=>{var t=this._dataAdapter.getNodeByKey(i);return this._dataAdapter.getPublicNode(t)})},getSelectedNodeKeys:function(){return this._dataAdapter.getSelectedNodesKeys()},selectAll:function(){this._selectAllEnabled()?this._$selectAllItem.dxCheckBox("instance").option("value",!0):this._toggleSelectAll({value:!0})},unselectAll:function(){this._selectAllEnabled()?this._$selectAllItem.dxCheckBox("instance").option("value",!1):this._toggleSelectAll({value:!1})},_allItemsExpandedHandler:function(){this._skipContentReadyAndItemExpanded=!1,this._fireContentReadyAction()},expandAll:function(){var i=this._dataAdapter.getData(),t=[];this._skipContentReadyAndItemExpanded=!0,i.forEach(e=>t.push(this._toggleExpandedState(e.internalFields.key,!0))),Promise.allSettled(t).then(()=>{var e;return null===(e=this._allItemsExpanded)||void 0===e?void 0:e.call(this)})},collapseAll:function(){(0,I.__)(this._dataAdapter.getExpandedNodesKeys(),function(i,t){this._toggleExpandedState(t,!1)}.bind(this))},scrollToItem:function(i){var t=this._getNode(i);if(!t)return(new w.cY).reject().promise();for(var e=[],a=t.internalFields.publicNode.parent;null!=a;)a.expanded||e.push(a.key),a=a.parent;var n=new w.cY;return this._expandNodes(e.reverse()).always(()=>{var r=this._getNodeElement(t);r&&r.length?(this.scrollToElementTopLeft(r.get(0)),n.resolve()):n.reject()}),n.promise()},scrollToElementTopLeft:function(i){var t=this.getScrollable(),{scrollDirection:e,rtlEnabled:a}=this.option(),n={top:0,left:0},r=(0,Kp.Y)(Rn.JU,i);if(e!==Rn.lm){var s=(0,_.A)(t.container()).get(0);n.left=a?r.left+i.offsetWidth-s.clientWidth:r.left}e!==Rn.fK&&(n.top=r.top),t.scrollTo(n)},_expandNodes:function(i){if(!i||0===i.length)return(new w.cY).resolve().promise();var t=new w.cY,e=i.map(a=>this.expandItem(a));return w.z7.apply(_.A,e).done(()=>t.resolve()).fail(()=>t.reject()),t.promise()},_dispose:function(){this.callBase(),clearTimeout(this._setFocusedItemTimeout),this._allItemsExpandedHandler=null}});const i_=t_;fi.A.setEditorClass(xi.A);var vo="dx-treeview",a_="".concat(vo,"-node-container"),mo=i_.inherit(fi.A).inherit({_addWidgetPrefix:function(i){return"".concat(vo,"-").concat(i)},_optionChanged:function(i){switch(i.name){case"searchValue":this._showCheckboxes()&&this._isRecursiveSelection()&&this._removeSelection(),this._initDataAdapter(),this._updateSearch(),this._repaintContainer(),this.option("focusedElement",null);break;case"searchExpr":this._initDataAdapter(),this.repaint();break;case"searchMode":this.option("expandNodesRecursive")?this._updateDataAdapter():this._initDataAdapter(),this.repaint();break;default:this.callBase(i)}},_updateDataAdapter:function(){this._setOptionWithoutOptionChange("expandNodesRecursive",!1),this._initDataAdapter(),this._setOptionWithoutOptionChange("expandNodesRecursive",!0)},_getDataAdapterOptions:function(){return(0,y.X)(this.callBase(),{searchValue:this.option("searchValue"),searchMode:this.option("searchMode")||"contains",searchExpr:this.option("searchExpr")})},_getNodeContainer:function(){return this.$element().find(".".concat(a_)).first()},_updateSearch:function(){if(this._searchEditor){var i=this._getSearchEditorOptions();this._searchEditor.option(i)}},_repaintContainer:function(){var t,i=this._getNodeContainer();i.length&&(i.empty(),t=this._dataAdapter.getRootNodes(),this._renderEmptyMessage(t),this._renderItems(i,t),this._fireContentReadyAction())},_focusTarget:function(){return this._itemContainer(this.option("searchEnabled"))},_cleanItemContainer:function(){this.$element().empty()},_itemContainer:function(i,t){var e;return null!==(e=t)&&void 0!==e||(t=this._selectAllEnabled()),t?this._getNodeContainer():this._scrollable&&i?(0,_.A)(this._scrollable.content()):this.callBase()},_addWidgetClass:function(){this.$element().addClass(this._widgetClass())},_clean:function(){this.callBase(),this._removeSearchBox()}});(0,le.A)("dxTreeView",mo);const Si=mo;let n_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.POb,C.B9H,C.GIV,C.u4t,E.p_,E.xZ],C.POb,C.B9H,C.GIV,C.u4t,E.xZ]}),i})();var Ca=D(6536);D(9700);const Co={_menuEnabled:function(){return!!this._menuItems().length},_menuItems:function(){return this._list.option("menuItems")},_deleteEnabled:function(){return this._list.option("allowItemDeleting")},_fireMenuAction:function(i,t){this._list._itemEventHandlerByHandler(i,t,{},{excludeValidators:["disabled","readOnly"]})}};var St=D(2836),Yt=D(8180),jt=D(6022),fo=D(1207),xo="dx-list-context-menu";(0,St.k)("menu","context",Yt.A.inherit({_init:function(){var i=(0,_.A)("<div>").addClass(xo);this._list.$element().append(i),this._menu=this._renderOverlay(i)},_renderOverlay:function(i){return this._list._createComponent(i,jt.A,{shading:!1,deferRendering:!0,hideOnParentScroll:!0,hideOnOutsideClick:function(t){return!(0,_.A)(t.target).closest("."+xo).length},animation:{show:{type:"slide",duration:300,from:{height:0,opacity:1},to:{height:function(){return(0,R.P$)(this._$menuList)}.bind(this),opacity:1}},hide:{type:"slide",duration:0,from:{opacity:1},to:{opacity:0}}},_ignoreFunctionValueDeprecation:!0,height:function(){return this._$menuList?(0,R.P$)(this._$menuList):0}.bind(this),width:function(){return(0,R.Ot)(this._list.$element())}.bind(this),onContentReady:this._renderMenuContent.bind(this)})},_renderMenuContent:function(i){var t=i.component.$content(),e=this._menuItems().slice();this._deleteEnabled()&&e.push({text:A.A.format("dxListEditDecorator-delete"),action:this._deleteItem.bind(this)}),this._$menuList=(0,_.A)("<div>"),this._list._createComponent(this._$menuList,fo.i,{items:e,onItemClick:this._menuItemClickHandler.bind(this),height:"auto",integrationOptions:{}}),t.addClass("dx-list-context-menucontent"),t.append(this._$menuList)},_menuItemClickHandler:function(i){this._menu.hide(),this._fireMenuAction(this._$itemWithMenu,i.itemData.action)},_deleteItem:function(){this._list.deleteItem(this._$itemWithMenu)},handleContextMenu:function(i){return this._$itemWithMenu=i,this._menu.option({position:{my:"top",at:"bottom",of:i,collision:"flip"}}),this._menu.show(),!0},dispose:function(){this._menu&&this._menu.$element().remove(),this.callBase.apply(this,arguments)}}).include(Co));var bo=D(5424),Eo=Yt.A.abstract,wo="dxListEditDecorator",yo=(0,P.b4)(te.A.down,wo),So=(0,P.b4)(bo.vu,wo),Vn="dx-list-switchable-delete-ready",Oo="dx-list-switchable-menu-item-shield-positioning",g_=Yt.A.inherit({_init:function(){this._$topShield=(0,_.A)("<div>").addClass("dx-list-switchable-delete-top-shield"),this._$bottomShield=(0,_.A)("<div>").addClass("dx-list-switchable-delete-bottom-shield"),this._$itemContentShield=(0,_.A)("<div>").addClass("dx-list-switchable-delete-item-content-shield"),O.A.on(this._$topShield,yo,this._cancelDeleteReadyItem.bind(this)),O.A.on(this._$bottomShield,yo,this._cancelDeleteReadyItem.bind(this)),this._list.$element().append(this._$topShield.toggle(!1)).append(this._$bottomShield.toggle(!1))},handleClick:function(){return this._cancelDeleteReadyItem()},_cancelDeleteReadyItem:function(){return!!this._$readyToDeleteItem&&(this._cancelDelete(this._$readyToDeleteItem),!0)},_cancelDelete:function(i){this._toggleDeleteReady(i,!1)},_toggleDeleteReady:function(i,t){void 0===t&&(t=!this._isReadyToDelete(i)),this._toggleShields(i,t),this._toggleScrolling(t),this._cacheReadyToDeleteItem(i,t),this._animateToggleDelete(i,t)},_isReadyToDelete:function(i){return i.hasClass(Vn)},_toggleShields:function(i,t){this._list.$element().toggleClass("dx-list-switchable-menu-shield-positioning",t),this._$topShield.toggle(t),this._$bottomShield.toggle(t),t&&this._updateShieldsHeight(i),this._toggleContentShield(i,t)},_updateShieldsHeight:function(i){var t=this._list.$element(),e=t.offset().top,a=(0,R.P$)(t),s=i.offset().top-e,o=a-(0,R.P$)(i)-s;(0,R.k$)(this._$topShield,Math.max(s,0)),(0,R.k$)(this._$bottomShield,Math.max(o,0))},_toggleContentShield:function(i,t){t?i.find(".dx-list-item-content").first().append(this._$itemContentShield):this._$itemContentShield.detach()},_toggleScrolling:function(i){var t=this._list.$element().dxScrollView("instance");i?t.on("start",this._cancelScrolling):t.off("start",this._cancelScrolling)},_cancelScrolling:function(i){i.event.cancel=!0},_cacheReadyToDeleteItem:function(i,t){t?this._$readyToDeleteItem=i:delete this._$readyToDeleteItem},_animateToggleDelete:function(i,t){t?(this._enablePositioning(i),this._prepareDeleteReady(i),this._animatePrepareDeleteReady(i),O.A.off(i,te.A.up)):(this._forgetDeleteReady(i),this._animateForgetDeleteReady(i).done(this._disablePositioning.bind(this,i)))},_enablePositioning:function(i){i.addClass(Oo),O.A.on(i,So,V.lQ),O.A.one(i,te.A.up,this._disablePositioning.bind(this,i))},_disablePositioning:function(i){i.removeClass(Oo),O.A.off(i,So)},_prepareDeleteReady:function(i){i.addClass(Vn)},_forgetDeleteReady:function(i){i.removeClass(Vn)},_animatePrepareDeleteReady:Eo,_animateForgetDeleteReady:Eo,_getDeleteButtonContainer:function(i){return(i=i||this._$readyToDeleteItem).children(".dx-list-switchable-delete-button-container")},_deleteItem:function(i){this._getDeleteButtonContainer(i=i||this._$readyToDeleteItem).detach(),!i.is(".dx-state-disabled, .dx-state-disabled *")&&this._list.deleteItem(i).always(this._cancelDelete.bind(this,i))},_isRtlEnabled:function(){return this._list.option("rtlEnabled")},dispose:function(){this._$topShield&&this._$topShield.remove(),this._$bottomShield&&this._$bottomShield.remove(),this.callBase.apply(this,arguments)}});const Io=g_;var To=Io.inherit({_init:function(){this.callBase.apply(this,arguments);var i=(0,_.A)("<div>").addClass("dx-list-switchable-delete-button-container"),t=(0,_.A)("<div>").addClass("dx-list-switchable-delete-button-wrapper"),e=(0,_.A)("<div>").addClass("dx-list-switchable-delete-button-inner-wrapper"),a=(0,_.A)("<div>").addClass("dx-list-switchable-delete-button");this._list._createComponent(a,_e.A,{text:A.A.format("dxListEditDecorator-delete"),type:"danger",stylingMode:(0,de.Nt)()?"text":"contained",onClick:function(n){this._deleteItem(),n.event.stopPropagation()}.bind(this),integrationOptions:{}}),i.append(t),t.append(e),e.append(a),this._$buttonContainer=i},_enablePositioning:function(i){this.callBase.apply(this,arguments),ce.A.stop(this._$buttonContainer,!0),this._$buttonContainer.appendTo(i)},_disablePositioning:function(){this.callBase.apply(this,arguments),this._$buttonContainer.detach()},_animatePrepareDeleteReady:function(){var i=this._isRtlEnabled(),t=(0,R.RG)(this._list.$element()),e=this._buttonWidth();return ce.A.animate(this._$buttonContainer,{type:"custom",duration:200,from:{right:i?t:-e},to:{right:i?t-e:0}})},_animateForgetDeleteReady:function(){var i=this._isRtlEnabled(),t=(0,R.RG)(this._list.$element()),e=this._buttonWidth();return ce.A.animate(this._$buttonContainer,{type:"custom",duration:200,from:{right:i?t-e:0},to:{right:i?t:-e}})},_buttonWidth:function(){return this._buttonContainerWidth||(this._buttonContainerWidth=(0,R.Ot)(this._$buttonContainer)),this._buttonContainerWidth},dispose:function(){this._$buttonContainer&&this._$buttonContainer.remove(),this.callBase.apply(this,arguments)}});(0,St.k)("delete","toggle",To.inherit({beforeBag:function(i){var t=i.$itemElement,e=i.$container,a=(0,_.A)("<div>").addClass("dx-list-toggle-delete-switch");this._list._createComponent(a,_e.A,{icon:"toggle-delete",onClick:function(n){ce.A.stop(this._$buttonContainer,!1),this._toggleDeleteReady(t),n.event.stopPropagation()}.bind(this),integrationOptions:{}}),e.addClass("dx-list-toggle-delete-switch-container"),e.append(a)}})),(0,St.k)("delete","slideButton",To.inherit({_shouldHandleSwipe:!0,_swipeEndHandler:function(i,t){return 0!==t.targetOffset&&(ce.A.stop(this._$buttonContainer,!1),this._toggleDeleteReady(i)),!0}}));var Qt=(0,Q.zk)(),Ro="outlined",Do=_a.A.inherit({_getDefaultOptions:function(){return(0,y.X)(this.callBase(),{usePopover:!1,target:null,title:"",showTitle:!0,showCancelButton:!0,cancelText:A.A.format("Cancel"),onCancelClick:null,visible:!1,noDataText:"",focusStateEnabled:!1,selectByClick:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios",tablet:!0},options:{usePopover:!0}}])},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new ga.U(function(i,t){var e=new _e.A((0,_.A)("<div>"),(0,y.X)({onClick:t&&t.click,stylingMode:t&&t.stylingMode||Ro},t));i.append(e.$element())},["disabled","icon","text","type","onClick","click","stylingMode"],this.option("integrationOptions.watchMethod"))})},_itemContainer:function(){return this._$itemContainer},_itemClass:function(){return"dx-actionsheet-item"},_itemDataKey:function(){return"dxActionSheetItemData"},_toggleVisibility:V.lQ,_renderDimensions:V.lQ,_initMarkup:function(){this.callBase(),this.$element().addClass("dx-actionsheet"),this._createItemContainer()},_render:function(){this._renderPopup()},_createItemContainer:function(){this._$itemContainer=(0,_.A)("<div>").addClass("dx-actionsheet-container"),this._renderDisabled()},_renderDisabled:function(){this._$itemContainer.toggleClass("dx-state-disabled",this.option("disabled"))},_renderPopup:function(){this._$popup=(0,_.A)("<div>").appendTo(this.$element()),this._isPopoverMode()?this._createPopover():this._createPopup(),this._renderPopupTitle(),this._mapPopupOption("visible")},_mapPopupOption:function(i){this._popup&&this._popup.option(i,this.option(i))},_isPopoverMode:function(){return this.option("usePopover")&&this.option("target")},_renderPopupTitle:function(){this._mapPopupOption("showTitle"),this._popup&&this._popup.$wrapper().toggleClass("dx-actionsheet-without-title",!this.option("showTitle"))},_clean:function(){this._$popup&&this._$popup.remove(),this.callBase()},_overlayConfig:function(){return{onInitialized:function(i){this._popup=i.component}.bind(this),disabled:!1,showTitle:!0,title:this.option("title"),deferRendering:!Qt.angular,onContentReady:this._popupContentReadyAction.bind(this),onHidden:this.hide.bind(this)}},_createPopover:function(){this._createComponent(this._$popup,to,(0,y.X)(this._overlayConfig(),{width:this.option("width")||200,height:this.option("height")||"auto",target:this.option("target")})),this._popup.$overlayContent().attr("role","dialog"),this._popup.$wrapper().addClass("dx-actionsheet-popover-wrapper")},_createPopup:function(){this._createComponent(this._$popup,ze.A,(0,y.X)(this._overlayConfig(),{dragEnabled:!1,width:this.option("width")||"100%",height:this.option("height")||"auto",showCloseButton:!1,position:{my:"bottom",at:"bottom",of:Qt},animation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom",of:Qt}},to:{position:{my:"bottom",at:"bottom",of:Qt}}},hide:{type:"slide",duration:400,from:{position:{my:"bottom",at:"bottom",of:Qt}},to:{position:{my:"top",at:"bottom",of:Qt}}}}})),this._popup.$wrapper().addClass("dx-actionsheet-popup-wrapper")},_popupContentReadyAction:function(){this._popup.$content().append(this._$itemContainer),this._attachClickEvent(),this._attachHoldEvent(),this._prepareContent(),this._renderContent(),this._renderCancelButton()},_renderCancelButton:function(){if(!this._isPopoverMode()&&(this._$cancelButton&&this._$cancelButton.remove(),this.option("showCancelButton"))){var i=this._createActionByOption("onCancelClick")||V.lQ,t=this;this._$cancelButton=(0,_.A)("<div>").addClass("dx-actionsheet-cancel").appendTo(this._popup&&this._popup.$content()),this._createComponent(this._$cancelButton,_e.A,{disabled:!1,stylingMode:Ro,text:this.option("cancelText"),onClick:function(e){var a={event:e,cancel:!1};i(a),a.cancel||t.hide()},integrationOptions:{}})}},_attachItemClickEvent:V.lQ,_itemClickHandler:function(i){this.callBase(i),(0,_.A)(i.target).is(".dx-state-disabled, .dx-state-disabled *")||this.hide()},_itemHoldHandler:function(i){this.callBase(i),(0,_.A)(i.target).is(".dx-state-disabled, .dx-state-disabled *")||this.hide()},_optionChanged:function(i){switch(i.name){case"width":case"height":case"visible":case"title":this._mapPopupOption(i.name);break;case"disabled":this._renderDisabled();break;case"showTitle":this._renderPopupTitle();break;case"showCancelButton":case"onCancelClick":case"cancelText":this._renderCancelButton();break;case"target":case"usePopover":case"items":this._invalidate();break;default:this.callBase(i)}},toggle:function(i){var t=this,e=new w.cY;return t._popup.toggle(i).done(function(){t.option("visible",i),e.resolveWith(t)}),e.promise()},show:function(){return this.toggle(!0)},hide:function(){return this.toggle(!1)}});(0,le.A)("dxActionSheet",Do);const A_=Do;var Bo="dxListEditDecorator",Fo=(0,P.b4)(ae.U,Bo),T_=(0,P.b4)(bo.vu,Bo),Pn="dx-list-slide-menu-content",Mo="dx-list-slide-menu-button";(0,St.k)("menu","slide",Io.inherit({_shouldHandleSwipe:!0,_init:function(){this.callBase.apply(this,arguments),this._$buttonsContainer=(0,_.A)("<div>").addClass("dx-list-slide-menu-buttons-container"),O.A.on(this._$buttonsContainer,T_,V.lQ),this._$buttons=(0,_.A)("<div>").addClass("dx-list-slide-menu-buttons").appendTo(this._$buttonsContainer),this._renderMenu(),this._renderDeleteButton()},_renderMenu:function(){if(this._menuEnabled()){var i=this._menuItems();if(1===i.length){var t=i[0];this._renderMenuButton(t.text,function(n){n.stopPropagation(),this._fireAction(t)}.bind(this))}else{var e=(0,_.A)("<div>").addClass("dx-list-slide-menu");this._menu=this._list._createComponent(e,A_,{showTitle:!1,items:i,onItemClick:function(n){this._fireAction(n.itemData)}.bind(this),integrationOptions:{}}),e.appendTo(this._list.$element());var a=this._renderMenuButton(A.A.format("dxListEditDecorator-more"),function(n){n.stopPropagation(),this._menu.show()}.bind(this));this._menu.option("target",a)}}},_renderMenuButton:function(i,t){var e=(0,_.A)("<div>").addClass(Mo).addClass("dx-list-slide-menu-button-menu").text(i);return this._$buttons.append(e),O.A.on(e,Fo,t),e},_renderDeleteButton:function(){if(this._deleteEnabled()){var i=(0,_.A)("<div>").addClass(Mo).addClass("dx-list-slide-menu-button-delete").text((0,de.Nt)()?"":A.A.format("dxListEditDecorator-delete"));O.A.on(i,Fo,function(t){t.stopPropagation(),this._deleteItem()}.bind(this)),this._$buttons.append(i)}},_fireAction:function(i){this._fireMenuAction((0,_.A)(this._cachedNode),i.action),this._cancelDeleteReadyItem()},modifyElement:function(i){this.callBase.apply(this,arguments);var t=i.$itemElement;t.addClass("dx-list-slide-menu-wrapper");var e=(0,_.A)("<div>").addClass(Pn);t.wrapInner(e)},_getDeleteButtonContainer:function(){return this._$buttonsContainer},handleClick:function(i,t){return!!(0,_.A)(t.target).closest("."+Pn).length&&this.callBase.apply(this,arguments)},_swipeStartHandler:function(i){this._enablePositioning(i),this._cacheItemData(i),this._setPositions(this._getPositions(0))},_swipeUpdateHandler:function(i,t){var a=this._isRtlEnabled()?-1:1,n=this._isReadyToDelete(i);if(this._getCurrentPositions().content!==this._getStartPositions().content||n||!(t.offset*a>0)){var s=this._cachedItemWidth*t.offset,o=n?-this._cachedButtonWidth*a:0,d=(s+o)*a<0?Math.abs((s+o)/this._cachedButtonWidth):0;return this._setPositions(this._getPositions(d)),!0}t.cancel=!0},_getStartPositions:function(){var i=this._isRtlEnabled();return{content:0,buttonsContainer:i?-this._cachedButtonWidth:this._cachedItemWidth,buttons:-this._cachedButtonWidth*(i?-1:1)}},_getPositions:function(i){var e=this._isRtlEnabled()?-1:1,a=this._getStartPositions();return{content:a.content-i*this._cachedButtonWidth*e,buttonsContainer:a.buttonsContainer-Math.min(i,1)*this._cachedButtonWidth*e,buttons:a.buttons+Math.min(i,1)*this._cachedButtonWidth*e}},_getCurrentPositions:function(){return{content:(0,Ee.x5)(this._$cachedContent).left,buttonsContainer:(0,Ee.x5)(this._$buttonsContainer).left,buttons:(0,Ee.x5)(this._$buttons).left}},_setPositions:function(i){(0,Ee.Cy)(this._$cachedContent,{left:i.content}),(0,Ee.Cy)(this._$buttonsContainer,{left:i.buttonsContainer}),(0,Ee.Cy)(this._$buttons,{left:i.buttons})},_cacheItemData:function(i){i[0]!==this._cachedNode&&(this._$cachedContent=i.find("."+Pn),this._cachedItemWidth=(0,R.Ot)(i),this._cachedButtonWidth=this._cachedButtonWidth||(0,R.Ot)(this._$buttons),(0,R.zj)(this._$buttonsContainer,this._cachedButtonWidth),this._$cachedContent.length&&(this._cachedNode=i[0]))},_minButtonContainerLeftOffset:function(){return this._cachedItemWidth-this._cachedButtonWidth},_swipeEndHandler:function(i,t){this._cacheItemData(i);var e=this._isRtlEnabled()?1:-1,a=this._cachedItemWidth*t.offset,n=!this._isReadyToDelete(i)&&a*e>.2*this._cachedButtonWidth;return this._toggleDeleteReady(i,t.targetOffset===e&&n),!0},_enablePositioning:function(i){ce.A.stop(this._$cachedContent,!0),this.callBase.apply(this,arguments),this._$buttonsContainer.appendTo(i)},_disablePositioning:function(){this.callBase.apply(this,arguments),this._$buttonsContainer.detach()},_animatePrepareDeleteReady:function(){return this._animateToPositions(this._getPositions(1))},_animateForgetDeleteReady:function(i){return this._cacheItemData(i),this._animateToPositions(this._getPositions(0))},_animateToPositions:function(i){var t=this,e=this._getCurrentPositions(),a=Math.min(Math.abs(e.content-i.content)/this._cachedButtonWidth,1);return ce.A.animate(this._$cachedContent,{from:e,to:i,easing:"cubic-bezier(0.075, 0.82, 0.165, 1)",duration:400*a,strategy:"frame",draw:function(n){t._setPositions(n)}})},dispose:function(){this._menu&&this._menu.$element().remove(),this._$buttonsContainer&&this._$buttonsContainer.remove(),this.callBase.apply(this,arguments)}}).include(Co)),(0,St.k)("delete","static",Yt.A.inherit({afterBag:function(i){var t=i.$itemElement,e=i.$container,a=(0,_.A)("<div>").addClass("dx-list-static-delete-button");this._list._createComponent(a,_e.A,{icon:"remove",onClick:function(n){n.event.stopPropagation(),this._deleteItem(t)}.bind(this),integrationOptions:{}}),e.addClass("dx-list-static-delete-button-container").append(a)},_deleteItem:function(i){i.is(".dx-state-disabled, .dx-state-disabled *")||this._list.deleteItem(i)}})),(0,St.k)("delete","swipe",Yt.A.inherit({_shouldHandleSwipe:!0,_renderItemPosition:function(i,t,e){var a=new w.cY,n=t*this._itemElementWidth;return e?ce.A.animate(i,{to:{left:n},type:"slide",complete:function(){a.resolve(i,t)}}):((0,Ee.Cy)(i,{left:n}),a.resolve()),a.promise()},_swipeStartHandler:function(i){return this._itemElementWidth=(0,R.RG)(i),!0},_swipeUpdateHandler:function(i,t){return this._renderItemPosition(i,t.offset),!0},_swipeEndHandler:function(i,t){return this._renderItemPosition(i,t.targetOffset,!0).done(function(a,n){Math.abs(n)&&this._list.deleteItem(a).fail(function(){this._renderItemPosition(a,0,!0)}.bind(this))}.bind(this)),!0}}));var Ln,Zt,H_=D(8365),z_=D(7465),qt=D(8745),Ze=D(370),K_=D(3558),ke=D(9393),W_=D(9639),Vo=(0,Q.zk)(),Ke="dxDraggable",U_=(0,P.b4)(ke.ni,Ke),$_=(0,P.b4)(ke.Cy,Ke),X_=(0,P.b4)(ke._N,Ke),Y_=(0,P.b4)(ke.Ve,Ke),j_=(0,P.b4)(ke.qG,Ke),Q_=(0,P.b4)(te.A.down,Ke),q_=(0,P.b4)("keydown",Ke),kn=i=>({x:i.pageX-(0,_.A)(Vo).scrollLeft(),y:i.pageY-(0,_.A)(Vo).scrollTop()});class Lo{constructor(t,e){this._$scrollableAtPointer=null,this._preventScroll=!0,this._component=e,"vertical"===t?(this._scrollValue="scrollTop",this._overFlowAttr="overflowY",this._sizeAttr="height",this._scrollSizeProp="scrollHeight",this._clientSizeProp="clientHeight",this._limitProps={start:"top",end:"bottom"}):(this._scrollValue="scrollLeft",this._overFlowAttr="overflowX",this._sizeAttr="width",this._scrollSizeProp="scrollWidth",this._clientSizeProp="clientWidth",this._limitProps={start:"left",end:"right"})}updateScrollable(t,e){var a=!1;t.some(n=>{var r=(0,_.A)(n),s=r.hasClass("dx-overlay-wrapper"),o=r.hasClass("dx-overlay-content");return!(!s&&!o)||(a=this._trySetScrollable(n,e))}),a||(this._$scrollableAtPointer=null,this._scrollSpeed=0)}isScrolling(){return!!this._scrollSpeed}isScrollable(t){return("auto"===t.css(this._overFlowAttr)||t.hasClass("dx-scrollable-container"))&&t.prop(this._scrollSizeProp)>Math.ceil("width"===this._sizeAttr?(0,R.RG)(t):(0,R.Oq)(t))}_trySetScrollable(t,e){var n,a=(0,_.A)(t),r=this._component.option("scrollSensitivity"),s=this.isScrollable(a);return s&&(r>(n=this._calculateDistanceToBorders(a,e))[this._limitProps.start]?this._preventScroll||(this._scrollSpeed=-this._calculateScrollSpeed(n[this._limitProps.start]),this._$scrollableAtPointer=a):r>n[this._limitProps.end]?this._preventScroll||(this._scrollSpeed=this._calculateScrollSpeed(n[this._limitProps.end]),this._$scrollableAtPointer=a):(s=!1,this._preventScroll=!1)),s}_calculateDistanceToBorders(t,e){var n,a=t.get(0);return a?(n=(0,se.N)(a),{left:e.x-n.left,top:e.y-n.top,right:n.right-e.x,bottom:n.bottom-e.y}):{}}_calculateScrollSpeed(t){var e=this._component,a=e.option("scrollSensitivity"),n=e.option("scrollSpeed");return Math.ceil(((a-t)/a)**2*n)}scrollByStep(){if(this._$scrollableAtPointer&&this._scrollSpeed){if(this._$scrollableAtPointer.hasClass("dx-scrollable-container")){var t=this._$scrollableAtPointer.closest(".dx-scrollable"),e=t.data("dxScrollable")||t.data("dxScrollView");if(e){var a=e.scrollOffset()[this._limitProps.start]+this._scrollSpeed;e.scrollTo({[this._limitProps.start]:a})}}else{var n=this._$scrollableAtPointer[this._scrollValue]()+this._scrollSpeed;this._$scrollableAtPointer[this._scrollValue](n)}var r=this._component._dragMoveArgs;r&&this._component._dragMoveHandler(r)}}reset(){this._$scrollableAtPointer=null,this._scrollSpeed=0,this._preventScroll=!0}isOutsideScrollable(t,e){if(!t)return!1;var a=(0,se.N)(t.get(0)),n=a[this._limitProps.start],r=a[this._sizeAttr],s=kn(e),o="width"===this._sizeAttr?s.x:s.y;return o<n||o>n+r}}var iv=W_.A.inherit({ctor(i){this.callBase(),this._strategy=i},_step(){var i=this._strategy._horizontalScrollHelper,t=this._strategy._verticalScrollHelper;i&&i.scrollByStep(),t&&t.scrollByStep()}}),ko=H_.A.inherit({reset:V.lQ,dragMove:V.lQ,dragEnter:V.lQ,dragLeave:V.lQ,dragEnd(i){return this._getSourceDraggable()._fireRemoveEvent(i),(0,w.cY)().resolve()},_fireRemoveEvent:V.lQ,_getDefaultOptions(){return(0,y.X)(this.callBase(),{onDragStart:null,onDragMove:null,onDragEnd:null,onDragEnter:null,onDragLeave:null,onDragCancel:null,onCancelByEsc:!1,onDrop:null,immediate:!0,dragDirection:"both",boundary:void 0,boundOffset:0,allowMoveByClick:!1,itemData:null,container:void 0,dragTemplate:void 0,contentTemplate:"content",handle:"",filter:"",clone:!1,autoScroll:!0,scrollSpeed:30,scrollSensitivity:60,group:void 0,data:void 0})},_setOptionsByReference(){this.callBase.apply(this,arguments),(0,y.X)(this._optionsByReference,{component:!0,group:!0,itemData:!0,data:!0})},_init(){this.callBase(),this._attachEventHandlers(),this._scrollAnimator=new iv(this),this._horizontalScrollHelper=new Lo("horizontal",this),this._verticalScrollHelper=new Lo("vertical",this),this._initScrollTop=0,this._initScrollLeft=0},_normalizeCursorOffset:i=>((0,v.Gv)(i)&&(i={h:i.x,v:i.y}),{left:(i=(0,V.T6)(i).map(t=>parseFloat(t)))[0],top:1===i.length?i[0]:i[1]}),_getNormalizedCursorOffset(i,t){return(0,v.Tn)(i)&&(i=i.call(this,t)),this._normalizeCursorOffset(i)},_calculateElementOffset(i){var t,e,{event:a}=i,n=(0,_.A)(i.itemElement),r=(0,_.A)(i.dragElement),s=this._dragElementIsCloned(),o=this.option("cursorOffset"),l={left:0,top:0},d=this._initialLocate=(0,Ee.x5)(r);return(s||i.initialOffset||o)&&(t=i.initialOffset||n.offset(),o&&(l=this._getNormalizedCursorOffset(o,i),isFinite(l.left)&&(t.left=a.pageX),isFinite(l.top)&&(t.top=a.pageY)),e=r.offset(),t.top-=e.top+(l.top||0)-d.top,t.left-=e.left+(l.left||0)-d.left),t},_initPosition(i){var t=(0,_.A)(i.dragElement),e=this._calculateElementOffset(i);e&&this._move(e,t),this._startPosition=(0,Ee.x5)(t)},_startAnimator(){this._scrollAnimator.inProgress()||this._scrollAnimator.start()},_stopAnimator(){this._scrollAnimator.stop()},_addWidgetPrefix(i){return(0,qt._k)(this.NAME)+(i?"-".concat(i):"")},_getItemsSelector(){return this.option("filter")||""},_$content(){var i=this.$element(),t=i.children(".dx-template-wrapper");return t.length?t:i},_attachEventHandlers(){if(!this.option("disabled")){var i=this._$content(),t=this._getItemsSelector(),e=this.option("allowMoveByClick"),a={direction:this.option("dragDirection"),immediate:this.option("immediate"),checkDropTarget:(n,r)=>{var s=this.option("group"),o=this._getSourceDraggable().option("group"),l=this._getScrollable(n);return!this._verticalScrollHelper.isOutsideScrollable(l,r)&&!this._horizontalScrollHelper.isOutsideScrollable(l,r)&&o&&o===s}};e&&(i=this._getArea(),O.A.on(i,Q_,a,this._pointerDownHandler.bind(this))),">"===t[0]&&(t=t.slice(1)),O.A.on(i,U_,t,a,this._dragStartHandler.bind(this)),O.A.on(i,$_,a,this._dragMoveHandler.bind(this)),O.A.on(i,X_,a,this._dragEndHandler.bind(this)),O.A.on(i,Y_,a,this._dragEnterHandler.bind(this)),O.A.on(i,j_,a,this._dragLeaveHandler.bind(this)),this.option("onCancelByEsc")&&O.A.on(i,q_,this._keydownHandler.bind(this))}},_dragElementIsCloned(){return this._$dragElement&&this._$dragElement.hasClass(this._addWidgetPrefix("clone"))},_getDragTemplateArgs(i,t){return{container:(0,Y.c)(t),model:{itemData:this.option("itemData"),itemElement:(0,Y.c)(i)}}},_createDragElement(i){var t=i,e=this.option("clone"),a=this._getContainer(),n=this.option("dragTemplate");return n?(n=this._getTemplate(n),t=(0,_.A)("<div>").appendTo(a),n.render(this._getDragTemplateArgs(i,t))):e&&(t=(0,_.A)("<div>").appendTo(a),i.clone().css({width:i.css("width"),height:i.css("height")}).appendTo(t)),t.toggleClass(this._addWidgetPrefix("clone"),t.get(0)!==i.get(0)).toggleClass("dx-rtl",this.option("rtlEnabled"))},_resetDragElement(){this._dragElementIsCloned()?this._$dragElement.remove():this._toggleDraggingClass(!1),this._$dragElement=null},_resetSourceElement(){this._toggleDragSourceClass(!1),this._$sourceElement=null},_detachEventHandlers(){O.A.off(this._$content(),".".concat(Ke)),O.A.off(this._getArea(),".".concat(Ke))},_move(i,t){(0,Ee.Cy)(t||this._$dragElement,i)},_getDraggableElement(i){var t=this._getSourceElement();if(t)return t;if(this.option("allowMoveByClick"))return this.$element();var a=(0,_.A)(i&&i.target),n=this._getItemsSelector();if(">"===n[0]){var r=this._$content().find(n);r.is(a)||(a=a.closest(r))}return a},_getSourceElement(){return this._getSourceDraggable()._$sourceElement},_pointerDownHandler(i){if(!(0,P.eT)(i)){var t={},e=this.$element(),a=this.option("dragDirection");("horizontal"===a||"both"===a)&&(t.left=i.pageX-e.offset().left+(0,Ee.x5)(e).left-(0,R.RG)(e)/2),("vertical"===a||"both"===a)&&(t.top=i.pageY-e.offset().top+(0,Ee.x5)(e).top-(0,R.Oq)(e)/2),this._move(t,e),this._getAction("onDragMove")(this._getEventArgs(i))}},_isValidElement(i,t){var e=this.option("handle"),a=(0,_.A)(i.originalEvent&&i.originalEvent.target);return!(e&&!a.closest(e).length||!t.length||t.is(".dx-state-disabled, .dx-state-disabled *"))},_dragStartHandler(i){var t=this._getDraggableElement(i);if(this.dragInProgress=!0,this._isValidElement(i,t)){if(!this._$sourceElement){var e=this._getDragStartArgs(i,t);if(this._getAction("onDragStart")(e),e.cancel)return void(i.cancel=!0);this.option("itemData",e.itemData),this._setSourceDraggable(),this._$sourceElement=t;var a=t.offset();!this._hasClonedDraggable()&&this.option("autoScroll")&&(this._initScrollTop=this._getScrollableScrollTop(),this._initScrollLeft=this._getScrollableScrollLeft(),a=this._getDraggableElementOffset(a.left,a.top));var n=this._$dragElement=this._createDragElement(t);this._toggleDraggingClass(!0),this._toggleDragSourceClass(!0),this._setGestureCoverCursor(n.children());var r="fixed"===n.css("position");this._initPosition((0,y.X)({},e,{dragElement:n.get(0),initialOffset:r&&a})),this._getAction("onDraggableElementShown")((0,N.A)((0,N.A)({},e),{dragElement:n}));var s=this._getArea(),o=this._getAreaOffset(s),l=this._getBoundOffset(),d=(0,R.Ot)(s),h=(0,R.P$)(s),u=(0,R.RG)(n),c=(0,R.Oq)(n),g=n.offset().left-o.left,m=n.offset().top-o.top;s.length&&(i.maxLeftOffset=g-l.left,i.maxRightOffset=d-g-u-l.right,i.maxTopOffset=m-l.top,i.maxBottomOffset=h-m-c-l.bottom),this.option("autoScroll")&&this._startAnimator()}}else i.cancel=!0},_getAreaOffset:i=>i&&Se.A.offset(i)||{left:0,top:0},_toggleDraggingClass(i){this._$dragElement&&this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"),i)},_toggleDragSourceClass(i,t){var e=t||this._$sourceElement;e&&e.toggleClass(this._addWidgetPrefix("source"),i)},_setGestureCoverCursor(i){(0,_.A)(".".concat("dx-gesture-cover")).css("cursor",i.css("cursor"))},_getBoundOffset(){var i=this.option("boundOffset");return(0,v.Tn)(i)&&(i=i.call(this)),(0,Ze.oN)(i)},_getArea(){var i=this.option("boundary");return(0,v.Tn)(i)&&(i=i.call(this)),(0,_.A)(i)},_getContainer(){var i=this.option("container");return void 0===i&&(i=(0,K_.Uq)()),(0,_.A)(i)},_getDraggableElementOffset(i,t){var e,a,n,r,s=this._initScrollTop,o=this._initScrollLeft,l=this._getScrollableScrollTop(),d=this._getScrollableScrollLeft(),h=(0,_.A)(this.element()).css("position"),c={left:(null!==(a=null===(e=this._startPosition)||void 0===e?void 0:e.left)&&void 0!==a?a:0)+i,top:(null!==(r=null===(n=this._startPosition)||void 0===n?void 0:n.top)&&void 0!==r?r:0)+t};return"fixed"===h||this._hasClonedDraggable()?c:{left:(0,v.kf)(d)?c.left+d-o:c.left,top:(0,v.kf)(l)?c.top+l-s:c.top}},_hasClonedDraggable(){return this.option("clone")||this.option("dragTemplate")},_dragMoveHandler(i){if(this._dragMoveArgs=i,this._$dragElement){var t=this._getDraggableElementOffset(i.offset.x,i.offset.y);this._move(t),this._updateScrollable(i);var e=this._getEventArgs(i);this._getAction("onDragMove")(e),!0!==e.cancel&&this._getTargetDraggable().dragMove(i,scrollBy)}else i.cancel=!0},_updateScrollable(i){if(this.option("autoScroll")){var t=kn(i),e=U.A.elementsFromPoint(t.x,t.y,this.$element().get(0));this._verticalScrollHelper.updateScrollable(e,t),this._horizontalScrollHelper.updateScrollable(e,t)}},_getScrollable(i){var t;return i.parents().toArray().some(e=>{var a=(0,_.A)(e);return!(!this._horizontalScrollHelper.isScrollable(a)&&!this._verticalScrollHelper.isScrollable(a)||(t=a,0))}),t},_getScrollableScrollTop(){var i,t;return null!==(t=null===(i=this._getScrollable((0,_.A)(this.element())))||void 0===i?void 0:i.scrollTop())&&void 0!==t?t:0},_getScrollableScrollLeft(){var i,t;return null!==(t=null===(i=this._getScrollable((0,_.A)(this.element())))||void 0===i?void 0:i.scrollLeft())&&void 0!==t?t:0},_defaultActionArgs(){var i=this.callBase.apply(this,arguments),t=this.option("component");return t&&(i.component=t,i.element=t.element()),i},_getEventArgs(i){var t=this._getSourceDraggable(),e=this._getTargetDraggable();return{event:i,itemData:t.option("itemData"),itemElement:(0,Y.c)(t._$sourceElement),fromComponent:t.option("component")||t,toComponent:e.option("component")||e,fromData:t.option("data"),toData:e.option("data")}},_getDragStartArgs(i,t){var e=this._getEventArgs(i);return{event:e.event,itemData:e.itemData,itemElement:t,fromData:e.fromData}},_revertItemToInitialPosition(){!this._dragElementIsCloned()&&this._move(this._initialLocate,this._$sourceElement)},_dragEndHandler(i){var t=(0,w.cY)(),e=this._getEventArgs(i),a=this._getEventArgs(i),n=this._getTargetDraggable(),r=!0;this.dragInProgress=!1;try{this._getAction("onDragEnd")(e)}finally{(0,w.z7)((0,w.Sx)(e.cancel)).done(s=>{if(!s&&(n!==this&&n._getAction("onDrop")(a),!a.cancel))return r=!1,void(0,w.z7)((0,w.Sx)(n.dragEnd(e))).always(t.resolve);t.resolve()}).fail(t.resolve),t.done(()=>{r&&this._revertItemToInitialPosition(),this._resetDragOptions(n)})}},_isTargetOverAnotherDraggable(i){var t=this._getSourceDraggable();if(this===t)return!1;var e=t._$dragElement,a=t.$element(),n=this.$element(),r=kn(i),o=U.A.elementsFromPoint(r.x,r.y,this.element()).filter(u=>{var c=(0,_.A)(u);return!!c.hasClass(this._addWidgetPrefix())&&!c.closest(e).length})[0],l=this._getSourceElement(),d=o===a.get(0),h=(0,_.A)(o).closest(l).length;return!o||o===n.get(0)&&!d&&!h},_dragEnterHandler(i){this._fireDragEnterEvent(i),this._isTargetOverAnotherDraggable(i)&&this._setTargetDraggable(),this._getSourceDraggable().dragEnter(i)},_dragLeaveHandler(i){this._fireDragLeaveEvent(i),this._resetTargetDraggable(),this!==this._getSourceDraggable()&&this.reset(),this._getSourceDraggable().dragLeave(i)},_keydownHandler(i){this.dragInProgress&&"Escape"===i.key&&this._keydownEscapeHandler(i)},_keydownEscapeHandler(i){if(this._getSourceElement()){var e=this._getEventArgs(i);if(this._getAction("onDragCancel")(e),!e.cancel){this.dragInProgress=!1,Zt?._toggleDraggingClass(!1),this._detachEventHandlers(),this._revertItemToInitialPosition();var a=this._getTargetDraggable();this._resetDragOptions(a),this._attachEventHandlers()}}},_getAction(i){return this["_".concat(i,"Action")]||this._createActionByOption(i)},_getAnonymousTemplateName:()=>"content",_initTemplates(){this.option("contentTemplate")&&(this._templateManager.addDefaultTemplates({content:new z_.A}),this.callBase.apply(this,arguments))},_render(){this.callBase(),this.$element().addClass(this._addWidgetPrefix());var i=this._templateManager.anonymousTemplateName===this.option("contentTemplate"),t=this._getTemplateByOption("contentTemplate");t&&(0,_.A)(t.render({container:this.element(),transclude:i}))},_optionChanged(i){var{name:t}=i;switch(t){case"onDragStart":case"onDragMove":case"onDragEnd":case"onDrop":case"onDragEnter":case"onDragLeave":case"onDragCancel":case"onDraggableElementShown":this["_".concat(t,"Action")]=this._createActionByOption(t);break;case"dragTemplate":case"contentTemplate":case"container":case"clone":case"scrollSensitivity":case"scrollSpeed":case"boundOffset":case"handle":case"group":case"data":case"itemData":break;case"allowMoveByClick":case"dragDirection":case"disabled":case"boundary":case"filter":case"immediate":this._resetDragElement(),this._detachEventHandlers(),this._attachEventHandlers();break;case"onCancelByEsc":this._keydownHandler();break;case"autoScroll":this._verticalScrollHelper.reset(),this._horizontalScrollHelper.reset();break;default:this.callBase(i)}},_getTargetDraggable(){return Ln||this},_getSourceDraggable(){return Zt||this},_setTargetDraggable(){var i=this.option("group"),t=this._getSourceDraggable();i&&i===t.option("group")&&(Ln=this)},_setSourceDraggable(){Zt=this},_resetSourceDraggable(){Zt=null},_resetTargetDraggable(){Ln=null},_resetDragOptions(i){this.reset(),i.reset(),this._stopAnimator(),this._horizontalScrollHelper.reset(),this._verticalScrollHelper.reset(),this._resetDragElement(),this._resetSourceElement(),this._resetTargetDraggable(),this._resetSourceDraggable()},_dispose(){this.callBase(),this._detachEventHandlers(),this._resetDragElement(),this._resetTargetDraggable(),this._resetSourceDraggable(),this._$sourceElement=null,this._stopAnimator()},_fireDragEnterEvent(i){var t=this._getEventArgs(i);this._getAction("onDragEnter")(t)},_fireDragLeaveEvent(i){var t=this._getEventArgs(i);this._getAction("onDragLeave")(t)}});(0,le.A)(Ke,ko);const av=ko;var No=(0,Q.zk)(),Ho="placeholder",zo=i=>(0,_.A)(i).is(":visible"),sv=(i,t)=>{var e,a;if(i){var n=(null===(e=t.to)||void 0===e?void 0:e.left)||0,r=(null===(a=t.to)||void 0===a?void 0:a.top)||0;i.style.transform="translate(".concat(n,"px,").concat(r,"px)"),i.style.transition=ce.A.off?"":"transform ".concat(t.duration,"ms ").concat(t.easing)}},ov=i=>{i&&(i.style.transform="",i.style.transition="")},Ko=av.inherit({_init(){this.callBase(),this._sourceScrollHandler=this._handleSourceScroll.bind(this),this._sourceScrollableInfo=null},_getDefaultOptions(){return(0,y.X)(this.callBase(),{clone:!0,filter:"> *",itemOrientation:"vertical",dropFeedbackMode:"push",allowDropInsideItem:!1,allowReordering:!0,moveItemOnDrop:!1,onDragChange:null,onAdd:null,onRemove:null,onReorder:null,onPlaceholderPrepared:null,animation:{type:"slide",duration:300,easing:"ease"},fromIndex:null,toIndex:null,dropInsideItem:!1,itemPoints:null,fromIndexOffset:0,offset:0,autoUpdate:!1,draggableElementSize:0})},reset(){this.option({dropInsideItem:!1,toIndex:null,fromIndex:null,itemPoints:null,fromIndexOffset:0,draggableElementSize:0}),this._$placeholderElement&&this._$placeholderElement.remove(),this._$placeholderElement=null,!this._isIndicateMode()&&this._$modifiedItem&&(this._$modifiedItem.css("marginBottom",this._modifiedItemMargin),this._$modifiedItem=null)},_getPrevVisibleItem:(i,t)=>i.slice(0,t).reverse().filter(zo)[0],_dragStartHandler(i){if(this.callBase.apply(this,arguments),!0!==i.cancel){var t=this._getSourceElement();this._updateItemPoints(),this._subscribeToSourceScroll(i),this.option("fromIndex",this._getElementIndex(t)),this.option("fromIndexOffset",this.option("offset"))}},_subscribeToSourceScroll(i){var t=this._getScrollable((0,_.A)(i.target));t&&(this._sourceScrollableInfo={element:t,scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop()},O.A.off(t,"scroll",this._sourceScrollHandler),O.A.on(t,"scroll",this._sourceScrollHandler))},_unsubscribeFromSourceScroll(){this._sourceScrollableInfo&&(O.A.off(this._sourceScrollableInfo.element,"scroll",this._sourceScrollHandler),this._sourceScrollableInfo=null)},_handleSourceScroll(i){var t=this._sourceScrollableInfo;t&&["scrollLeft","scrollTop"].forEach(e=>{i.target[e]!==t[e]&&(this._correctItemPoints(i.target[e]-t[e]),this._movePlaceholder(),t[e]=i.target[e])})},_dragEnterHandler(i){if(this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&(this._subscribeToSourceScroll(i),this._updateItemPoints(),this.option("fromIndex",-1),!this._isIndicateMode())){var t=this.option("itemPoints"),e=t[t.length-1];if(e){var a=this.$element(),n=this._getSourceElement(),r=this._isVerticalOrientation(),s=r?(0,R.P$)(n,!0):(0,R.Ot)(n,!0),o=a.get(0)[r?"scrollHeight":"scrollWidth"],l=a.get(0)[r?"scrollTop":"scrollLeft"],d=r?"top":"left",h=e[d],c=a.offset()[d]+o-l-h;if(c<s&&r){var g=this._getItems(),m=(0,_.A)(this._getPrevVisibleItem(g));this._$modifiedItem=m,this._modifiedItemMargin=m.get(0).style.marginBottom,m.css("marginBottom",s-c);var f=m.closest(".dx-sortable"),x=f.data("dxScrollable")||f.data("dxScrollView");x&&x.update()}}}},_dragLeaveHandler(){this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&this._unsubscribeFromSourceScroll()},dragEnter(){this!==this._getTargetDraggable()&&this.option("toIndex",-1)},dragLeave(){this!==this._getTargetDraggable()&&this.option("toIndex",this.option("fromIndex"))},_allowDrop(i){var e=this._getTargetDraggable().$element(),a=this._getScrollable(e);if(a){var{left:n,right:r,top:s,bottom:o}=function lv(i){var t=i.offset(),{style:e}=i[0],a=parseFloat(e.paddingLeft)||0,n=parseFloat(e.paddingRight)||0,r=parseFloat(e.paddingTop)||0,s=i[0].clientWidth-(a+n),o=(0,R.Oq)(i),l=t.left+a,d=t.top+r;return{left:l,right:l+s,top:d,bottom:d+o}}(a),l=this.option("toIndex"),d=this.option("itemPoints"),h=d?.filter(c=>c.index===l)[0];if(h&&void 0!==h.top)return this._isVerticalOrientation()?s<=Math.ceil(h.top)&&Math.floor(h.top)<=o:n<=Math.ceil(h.left)&&Math.floor(h.left)<=r}return!0},dragEnd(i){this._unsubscribeFromSourceScroll();var o,l,t=this._getSourceElement(),e=this._getSourceDraggable(),a=e.NAME!==this.NAME,n=this.option("toIndex"),{event:r}=i,s=this._allowDrop(r);return null!==n&&n>=0&&s&&(e!==this&&((o=this._fireAddEvent(r))||(l=this._fireRemoveEvent(r))),a&&(0,Ee.fw)(t),this.option("moveItemOnDrop")&&!o&&this._moveItem(t,n,l),e===this)?this._fireReorderEvent(r):(0,w.cY)().resolve()},dragMove(i){var t=this.option("itemPoints");if(t){for(var s,e=this._isVerticalOrientation(),a=e?"top":"left",n=e?i.pageY:i.pageX,r=this.option("rtlEnabled"),o=t.length-1;o>=0;o--){var l=t[o+1]&&(t[o][a]+t[o+1][a])/2;if(!(!e&&r?n>l:l>n)&&void 0!==l)break;s=t[o]}s&&(this._updatePlaceholderPosition(i,s),this._verticalScrollHelper.isScrolling()&&this._isIndicateMode()&&this._movePlaceholder())}},_isIndicateMode(){return"indicate"===this.option("dropFeedbackMode")||this.option("allowDropInsideItem")},_createPlaceholder(){var i;return this._isIndicateMode()&&(i=(0,_.A)("<div>").addClass(this._addWidgetPrefix(Ho)).insertBefore(this._getSourceDraggable()._$dragElement)),this._$placeholderElement=i,i},_getItems(){var i=this._getItemsSelector();return this._$content().find(i).not(".".concat(this._addWidgetPrefix(Ho))).not(".".concat(this._addWidgetPrefix("clone"))).toArray()},_allowReordering(){return this._getSourceDraggable()!==this._getTargetDraggable()||this.option("allowReordering")},_isValidPoint(i,t,e){var a=this.option("allowDropInsideItem");return!!(e||this._allowReordering()||0===i&&a)&&(!this._isIndicateMode()||-1===t||i!==t&&(e||i!==t+1))},_getItemPoints(){var t,e,a,i=[],n=this.option("rtlEnabled"),r=this._isVerticalOrientation(),s=this._getItems(),o=s.filter(zo),l=o.length,d=this._getDraggableElement(),h=o.indexOf(d.get(0));if(l){for(var u=0;u<=l;u++){var c=!r&&n^u===l,g=r&&u===l;u<l&&(e=(t=(0,_.A)(o[u])).offset(),a=(0,R.Ot)(t)),i.push({dropInsideItem:!1,left:e.left+(c?a:0),top:e.top+(g?i[u-1].height:0),index:u===l?s.length:s.indexOf(t.get(0)),$item:t,width:(0,R.Ot)(t),height:(0,R.P$)(t),isValid:this._isValidPoint(u,h)})}if(this.option("allowDropInsideItem")){var m=i;i=[];for(var f=0;f<m.length;f++)i.push(m[f]),m[f+1]&&i.push((0,y.X)({},m[f],{dropInsideItem:!0,top:Math.floor((m[f].top+m[f+1].top)/2),left:Math.floor((m[f].left+m[f+1].left)/2),isValid:this._isValidPoint(f,h,!0)}))}}else i.push({dropInsideItem:!1,index:0,isValid:!0});return i},_updateItemPoints(i){(i||this.option("autoUpdate")||!this.option("itemPoints"))&&this.option("itemPoints",this._getItemPoints())},_correctItemPoints(i){var t=this.option("itemPoints");if(i&&t&&!this.option("autoUpdate")){var a=this._isVerticalOrientation()?"top":"left";t.forEach(n=>{n[a]-=i})}},_getElementIndex(i){return this._getItems().indexOf(i.get(0))},_getDragTemplateArgs(i){var t=this.callBase.apply(this,arguments);return t.model.fromIndex=this._getElementIndex(i),t},_togglePlaceholder(i){this._$placeholderElement&&this._$placeholderElement.toggle(i)},_isVerticalOrientation(){return"vertical"===this.option("itemOrientation")},_normalizeToIndex(i,t){var e=this._getSourceDraggable()!==this._getTargetDraggable(),a=this._getActualFromIndex();return null===i?a:Math.max(e||a>=i||t?i:i-1,0)},_updatePlaceholderPosition(i,t){var e=this._getSourceDraggable(),a=this._normalizeToIndex(t.index,t.dropInsideItem),n=(0,y.X)(this._getEventArgs(i),{toIndex:a,dropInsideItem:t.dropInsideItem});t.isValid&&this._getAction("onDragChange")(n),!n.cancel&&t.isValid?(this.option({dropInsideItem:t.dropInsideItem,toIndex:t.index}),this._getAction("onPlaceholderPrepared")((0,y.X)(this._getEventArgs(i),{placeholderElement:(0,Y.c)(this._$placeholderElement),dragElement:(0,Y.c)(e._$dragElement)})),this._updateItemPoints()):t.isValid||this.option({dropInsideItem:!1,toIndex:null})},_makeWidthCorrection(i,t){if(this._$scrollable=this._getScrollable(i),this._$scrollable){var e=(0,R.RG)(this._$scrollable),a=this._$scrollable.offset().left-i.offset().left,n=(0,R.Ot)(i)-a-e;a>0&&(t-=a),n>0&&(t-=n)}return t},_updatePlaceholderSizes(i,t){var e=this.option("dropInsideItem"),a=(0,_.A)(t),n=this._isVerticalOrientation(),r="",s="";i.toggleClass(this._addWidgetPrefix("placeholder-inside"),e),(n||e)&&(r=(0,R.Ot)(a)),(!n||e)&&(s=(0,R.P$)(a)),r=this._makeWidthCorrection(a,r),i.css({width:r,height:s})},_moveItem(i,t,e){var a,n=this._getItems(),r=n[t],s=this._getSourceDraggable();e&&(i=i.clone(),s._toggleDragSourceClass(!1,i)),r||(a=n[t-1]),this._moveItemCore(i,r,a)},_moveItemCore(i,t,e){t||e?e?i.insertAfter((0,_.A)(e)):i.insertBefore((0,_.A)(t)):i.appendTo(this.$element())},_getDragStartArgs(i,t){return(0,y.X)(this.callBase.apply(this,arguments),{fromIndex:this._getElementIndex(t)})},_getEventArgs(i){var t=this._getSourceDraggable(),e=this._getTargetDraggable(),a=e.option("dropInsideItem");return(0,y.X)(this.callBase.apply(this,arguments),{fromIndex:t.option("fromIndex"),toIndex:this._normalizeToIndex(e.option("toIndex"),a),dropInsideItem:a})},_optionChanged(i){var{name:t}=i;switch(t){case"onDragChange":case"onPlaceholderPrepared":case"onAdd":case"onRemove":case"onReorder":this["_".concat(t,"Action")]=this._createActionByOption(t);break;case"itemOrientation":case"allowDropInsideItem":case"moveItemOnDrop":case"dropFeedbackMode":case"itemPoints":case"animation":case"allowReordering":case"fromIndexOffset":case"offset":case"draggableElementSize":case"autoUpdate":break;case"fromIndex":[!1,!0].forEach(e=>{var a=e?i.value:i.previousValue;if(null!==a){var n=(0,_.A)(this._getItems()[a]);this._toggleDragSourceClass(e,n)}});break;case"dropInsideItem":this._optionChangedDropInsideItem(i);break;case"toIndex":this._optionChangedToIndex(i);break;default:this.callBase(i)}},_optionChangedDropInsideItem(){this._isIndicateMode()&&this._$placeholderElement&&this._movePlaceholder()},_isPositionVisible(i){var e,t=this.$element();if("hidden"!==t.css("overflow")?e=t.get(0):t.parents().each(function(){if("visible"!==(0,_.A)(this).css("overflow"))return e=this,!1}),e){var a=(0,se.N)(e),n=this._isVerticalOrientation(),r=n?"top":"left",o=n?No.pageYOffset:No.pageXOffset;if(i[r]<a[r]+o||i[r]>a[n?"bottom":"right"]+o)return!1}return!0},_optionChangedToIndex(i){var t=i.value;if(this._isIndicateMode()){var e=null!==t&&t>=0;this._togglePlaceholder(e),e&&this._movePlaceholder()}else this._moveItems(i.previousValue,i.value,i.fullUpdate)},update(){if(null!==this.option("fromIndex")||null!==this.option("toIndex")){this._updateItemPoints(!0),this._updateDragSourceClass();var i=this.option("toIndex");this._optionChangedToIndex({value:i,fullUpdate:!0})}},_updateDragSourceClass(){var i=this._getActualFromIndex(),t=(0,_.A)(this._getItems()[i]);t.length&&(this._$sourceElement=t,this._toggleDragSourceClass(!0,t))},_makeLeftCorrection(i){var t=this._$scrollable;if(t&&this._isVerticalOrientation()){var e=t.offset().left-i;e>0&&(i+=e)}return i},_movePlaceholder(){var i=this._$placeholderElement||this._createPlaceholder();if(i){var t=this._getItems(),e=this.option("toIndex"),a=this._isVerticalOrientation(),n=this.option("rtlEnabled"),r=this.option("dropInsideItem"),s=null,o=t[e];if(o){var l=(0,_.A)(o);s=l.offset(),!a&&n&&!r&&(s.left+=(0,R.Ot)(l,!0))}else{var d=o=this._getPrevVisibleItem(t,e);d&&(s=(0,_.A)(d).offset(),a?s.top+=(0,R.P$)(d,!0):n||(s.left+=(0,R.Ot)(d,!0)))}if(this._updatePlaceholderSizes(i,o),s&&!this._isPositionVisible(s)&&(s=null),s){var h=a&&e===t.length,u=(0,R.P$)(i);s.left=this._makeLeftCorrection(s.left),s.top=h&&s.top>=u?s.top-u:s.top,this._move(s,i)}i.toggle(!!s)}},_getPositions(i,t,e,a){for(var n=[],r=0;r<i.length;r++){var s=0;null!==a&&null!==e?(-1===e?r>=a&&(s=t):-1===a?r>e&&(s=-t):e<a?r>e&&r<a&&(s=-t):e>a&&r>=a&&r<e&&(s=t),n.push(s)):n.push(s)}return n},_getDraggableElementSize(i){var t=this._getDraggableElement(),e=this.option("draggableElementSize");return e||(e=i?((0,R.P$)(t)+(0,R.P$)(t,!0))/2:((0,R.Ot)(t)+(0,R.Ot)(t,!0))/2,this.option("autoUpdate")||this.option("draggableElementSize",e)),e},_getActualFromIndex(){var{fromIndex:i,fromIndexOffset:t,offset:e}=this.option();return null==i?null:i+t-e},_moveItems(i,t,e){for(var a=this._getActualFromIndex(),n=this._isVerticalOrientation(),r=n?"top":"left",s=this._getDraggableElementSize(n),o=this._getItems(),l=this._getPositions(o,s,a,i),d=this._getPositions(o,s,a,t),h=this.option("animation"),u=this.option("rtlEnabled"),c=0;c<o.length;c++){var g=o[c],m=l[c],f=d[c];null===t||null===a?ov(g):(m!==f||e&&f)&&sv(g,(0,y.X)({},h,{to:{[r]:!n&&u?-f:f}}))}},_toggleDragSourceClass(i,t){var e=t||this._$sourceElement;this.callBase.apply(this,arguments),this._isIndicateMode()||e&&e.toggleClass(this._addWidgetPrefix("source-hidden"),i)},_dispose(){this.reset(),this.callBase()},_fireAddEvent(i){var t=this._getEventArgs(i);return this._getAction("onAdd")(t),t.cancel},_fireRemoveEvent(i){var t=this._getSourceDraggable(),e=this._getEventArgs(i);return t._getAction("onRemove")(e),e.cancel},_fireReorderEvent(i){var t=this._getEventArgs(i);return this._getAction("onReorder")(t),t.promise||(0,w.cY)().resolve()}});(0,le.A)("dxSortable",Ko);const Wo=Ko;var Go="dx-list-reorder-handle";(0,St.k)("reorder","default",Yt.A.inherit({_init:function(){var i=this._list;this._groupedEnabled=this._list.option("grouped"),this._lockedDrag=!1;var t=this._groupedEnabled?"> .dx-list-items > .dx-list-group > .dx-list-group-body > .dx-list-item":"> .dx-list-items > .dx-list-item";this._sortable=i._createComponent(i._scrollView.content(),Wo,(0,y.X)({component:i,contentTemplate:null,allowReordering:!1,filter:t,container:i.$element(),dragDirection:i.option("itemDragging.group")?"both":"vertical",handle:".".concat(Go),dragTemplate:this._dragTemplate,onDragStart:this._dragStartHandler.bind(this),onDragChange:this._dragChangeHandler.bind(this),onReorder:this._reorderHandler.bind(this)},i.option("itemDragging")))},afterRender:function(){this._sortable.update()},_dragTemplate:function(i){var t=(0,_.A)(i.itemElement).clone().addClass("dx-list-item-ghost-reordering").addClass("dx-state-hover");return(0,R.zj)(t,(0,R.RG)(i.itemElement)),t},_dragStartHandler:function(i){this._lockedDrag&&(i.cancel=!0)},_dragChangeHandler:function(i){!this._groupedEnabled||this._sameParent(i.fromIndex,i.toIndex)||(i.cancel=!0)},_sameParent:function(i,t){var e=this._list.getItemElementByFlatIndex(i);return this._list.getItemElementByFlatIndex(t).parent().get(0)===e.parent().get(0)},_reorderHandler:function(i){var t=this._list.getItemElementByFlatIndex(i.toIndex);this._list.reorderItem((0,_.A)(i.itemElement),t)},afterBag:function(i){var t=(0,_.A)("<div>").addClass(Go);O.A.on(t,"dxpointerdown",e=>{this._lockedDrag=!(0,P.Er)(e)}),O.A.on(t,"dxhold",{timeout:30},e=>{e.cancel=!0,this._lockedDrag=!1}),i.$container.addClass("dx-list-reorder-handle-container").append(t)}})),fi.A.setEditorClass(xi.A);let gv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.iiR,C.XUe,C.POb,C.S2P,C.B9H,C.GIV,C.u4t,E.p_,E.xZ],C.iiR,C.XUe,C.POb,C.S2P,C.B9H,C.GIV,C.u4t,E.xZ]}),i})();var pv=D(1214);const _v={provide:He.kq,useExisting:(0,p.Rfq)(()=>vv),multi:!0};let vv=(()=>{class i extends E.ic{constructor(e,a,n,r,s,o,l,d){super(e,a,n,r,l,d),this._watcherHelper=r,this._idh=s,this.touched=h=>{},this._createEventEmitters([{subscribe:"change",emit:"onChange"},{subscribe:"closed",emit:"onClosed"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"copy",emit:"onCopy"},{subscribe:"cut",emit:"onCut"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"enterKey",emit:"onEnterKey"},{subscribe:"focusIn",emit:"onFocusIn"},{subscribe:"focusOut",emit:"onFocusOut"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"input",emit:"onInput"},{subscribe:"keyDown",emit:"onKeyDown"},{subscribe:"keyUp",emit:"onKeyUp"},{subscribe:"opened",emit:"onOpened"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"paste",emit:"onPaste"},{subscribe:"valueChanged",emit:"onValueChanged"},{emit:"acceptCustomValueChange"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"adaptivityEnabledChange"},{emit:"applyButtonTextChange"},{emit:"applyValueModeChange"},{emit:"buttonsChange"},{emit:"calendarOptionsChange"},{emit:"cancelButtonTextChange"},{emit:"dateOutOfRangeMessageChange"},{emit:"dateSerializationFormatChange"},{emit:"deferRenderingChange"},{emit:"disabledChange"},{emit:"disabledDatesChange"},{emit:"displayFormatChange"},{emit:"dropDownButtonTemplateChange"},{emit:"dropDownOptionsChange"},{emit:"elementAttrChange"},{emit:"focusStateEnabledChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"inputAttrChange"},{emit:"intervalChange"},{emit:"invalidDateMessageChange"},{emit:"isDirtyChange"},{emit:"isValidChange"},{emit:"labelChange"},{emit:"labelModeChange"},{emit:"maxChange"},{emit:"maxLengthChange"},{emit:"minChange"},{emit:"nameChange"},{emit:"openedChange"},{emit:"openOnFieldClickChange"},{emit:"pickerTypeChange"},{emit:"placeholderChange"},{emit:"readOnlyChange"},{emit:"rtlEnabledChange"},{emit:"showAnalogClockChange"},{emit:"showClearButtonChange"},{emit:"showDropDownButtonChange"},{emit:"spellcheckChange"},{emit:"stylingModeChange"},{emit:"tabIndexChange"},{emit:"textChange"},{emit:"todayButtonTextChange"},{emit:"typeChange"},{emit:"useMaskBehaviorChange"},{emit:"validationErrorChange"},{emit:"validationErrorsChange"},{emit:"validationMessageModeChange"},{emit:"validationMessagePositionChange"},{emit:"validationStatusChange"},{emit:"valueChange"},{emit:"valueChangeEventChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"onBlur"}]),this._idh.setHost(this),o.setHost(this)}get acceptCustomValue(){return this._getOption("acceptCustomValue")}set acceptCustomValue(e){this._setOption("acceptCustomValue",e)}get accessKey(){return this._getOption("accessKey")}set accessKey(e){this._setOption("accessKey",e)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(e){this._setOption("activeStateEnabled",e)}get adaptivityEnabled(){return this._getOption("adaptivityEnabled")}set adaptivityEnabled(e){this._setOption("adaptivityEnabled",e)}get applyButtonText(){return this._getOption("applyButtonText")}set applyButtonText(e){this._setOption("applyButtonText",e)}get applyValueMode(){return this._getOption("applyValueMode")}set applyValueMode(e){this._setOption("applyValueMode",e)}get buttons(){return this._getOption("buttons")}set buttons(e){this._setOption("buttons",e)}get calendarOptions(){return this._getOption("calendarOptions")}set calendarOptions(e){this._setOption("calendarOptions",e)}get cancelButtonText(){return this._getOption("cancelButtonText")}set cancelButtonText(e){this._setOption("cancelButtonText",e)}get dateOutOfRangeMessage(){return this._getOption("dateOutOfRangeMessage")}set dateOutOfRangeMessage(e){this._setOption("dateOutOfRangeMessage",e)}get dateSerializationFormat(){return this._getOption("dateSerializationFormat")}set dateSerializationFormat(e){this._setOption("dateSerializationFormat",e)}get deferRendering(){return this._getOption("deferRendering")}set deferRendering(e){this._setOption("deferRendering",e)}get disabled(){return this._getOption("disabled")}set disabled(e){this._setOption("disabled",e)}get disabledDates(){return this._getOption("disabledDates")}set disabledDates(e){this._setOption("disabledDates",e)}get displayFormat(){return this._getOption("displayFormat")}set displayFormat(e){this._setOption("displayFormat",e)}get dropDownButtonTemplate(){return this._getOption("dropDownButtonTemplate")}set dropDownButtonTemplate(e){this._setOption("dropDownButtonTemplate",e)}get dropDownOptions(){return this._getOption("dropDownOptions")}set dropDownOptions(e){this._setOption("dropDownOptions",e)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(e){this._setOption("elementAttr",e)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(e){this._setOption("focusStateEnabled",e)}get height(){return this._getOption("height")}set height(e){this._setOption("height",e)}get hint(){return this._getOption("hint")}set hint(e){this._setOption("hint",e)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(e){this._setOption("hoverStateEnabled",e)}get inputAttr(){return this._getOption("inputAttr")}set inputAttr(e){this._setOption("inputAttr",e)}get interval(){return this._getOption("interval")}set interval(e){this._setOption("interval",e)}get invalidDateMessage(){return this._getOption("invalidDateMessage")}set invalidDateMessage(e){this._setOption("invalidDateMessage",e)}get isDirty(){return this._getOption("isDirty")}set isDirty(e){this._setOption("isDirty",e)}get isValid(){return this._getOption("isValid")}set isValid(e){this._setOption("isValid",e)}get label(){return this._getOption("label")}set label(e){this._setOption("label",e)}get labelMode(){return this._getOption("labelMode")}set labelMode(e){this._setOption("labelMode",e)}get max(){return this._getOption("max")}set max(e){this._setOption("max",e)}get maxLength(){return this._getOption("maxLength")}set maxLength(e){this._setOption("maxLength",e)}get min(){return this._getOption("min")}set min(e){this._setOption("min",e)}get name(){return this._getOption("name")}set name(e){this._setOption("name",e)}get opened(){return this._getOption("opened")}set opened(e){this._setOption("opened",e)}get openOnFieldClick(){return this._getOption("openOnFieldClick")}set openOnFieldClick(e){this._setOption("openOnFieldClick",e)}get pickerType(){return this._getOption("pickerType")}set pickerType(e){this._setOption("pickerType",e)}get placeholder(){return this._getOption("placeholder")}set placeholder(e){this._setOption("placeholder",e)}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOption("readOnly",e)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(e){this._setOption("rtlEnabled",e)}get showAnalogClock(){return this._getOption("showAnalogClock")}set showAnalogClock(e){this._setOption("showAnalogClock",e)}get showClearButton(){return this._getOption("showClearButton")}set showClearButton(e){this._setOption("showClearButton",e)}get showDropDownButton(){return this._getOption("showDropDownButton")}set showDropDownButton(e){this._setOption("showDropDownButton",e)}get spellcheck(){return this._getOption("spellcheck")}set spellcheck(e){this._setOption("spellcheck",e)}get stylingMode(){return this._getOption("stylingMode")}set stylingMode(e){this._setOption("stylingMode",e)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(e){this._setOption("tabIndex",e)}get text(){return this._getOption("text")}set text(e){this._setOption("text",e)}get todayButtonText(){return this._getOption("todayButtonText")}set todayButtonText(e){this._setOption("todayButtonText",e)}get type(){return this._getOption("type")}set type(e){this._setOption("type",e)}get useMaskBehavior(){return this._getOption("useMaskBehavior")}set useMaskBehavior(e){this._setOption("useMaskBehavior",e)}get validationError(){return this._getOption("validationError")}set validationError(e){this._setOption("validationError",e)}get validationErrors(){return this._getOption("validationErrors")}set validationErrors(e){this._setOption("validationErrors",e)}get validationMessageMode(){return this._getOption("validationMessageMode")}set validationMessageMode(e){this._setOption("validationMessageMode",e)}get validationMessagePosition(){return this._getOption("validationMessagePosition")}set validationMessagePosition(e){this._setOption("validationMessagePosition",e)}get validationStatus(){return this._getOption("validationStatus")}set validationStatus(e){this._setOption("validationStatus",e)}get value(){return this._getOption("value")}set value(e){this._setOption("value",e)}get valueChangeEvent(){return this._getOption("valueChangeEvent")}set valueChangeEvent(e){this._setOption("valueChangeEvent",e)}get visible(){return this._getOption("visible")}set visible(e){this._setOption("visible",e)}get width(){return this._getOption("width")}set width(e){this._setOption("width",e)}change(e){}get buttonsChildren(){return this._getOption("buttons")}set buttonsChildren(e){this.setChildren("buttons",e)}_createInstance(e,a){return new pv.A(e,a)}writeValue(e){this.eventHelper.lockedValueChangeEvent=!0,this.value=e,this.eventHelper.lockedValueChangeEvent=!1}setDisabledState(e){this.disabled=e}registerOnChange(e){this.change=e}registerOnTouched(e){this.touched=e}_createWidget(e){super._createWidget(e),this.instance.on("focusOut",a=>{this.eventHelper.fireNgEvent("onBlur",[a])})}ngOnDestroy(){this._destroyWidget()}ngOnChanges(e){super.ngOnChanges(e),this.setupChanges("buttons",e),this.setupChanges("disabledDates",e),this.setupChanges("validationErrors",e)}setupChanges(e,a){e in this._optionsToUpdate||this._idh.setup(e,a)}ngDoCheck(){this._idh.doCheck("buttons"),this._idh.doCheck("disabledDates"),this._idh.doCheck("validationErrors"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(e,a){let n=this._idh.setupSingle(e,a),r=null!==this._idh.getChanges(e,a);(n||r)&&super._setOption(e,a)}}return i.\u0275fac=function(e){return new(e||i)(p.rXU(p.aKT),p.rXU(p.SKi),p.rXU(E.zF),p.rXU(E.jS),p.rXU(E.$M),p.rXU(E.fH),p.rXU(he.pJ),p.rXU(p.Agw))},i.\u0275cmp=p.VBU({type:i,selectors:[["dx-date-box"]],contentQueries:function(e,a,n){if(1&e&&p.wni(n,C.BrI,4),2&e){let r;p.mGM(r=p.lsd())&&(a.buttonsChildren=r)}},hostBindings:function(e,a){1&e&&p.bIt("valueChange",function(r){return a.change(r)})("onBlur",function(r){return a.touched(r)})},inputs:{acceptCustomValue:"acceptCustomValue",accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",adaptivityEnabled:"adaptivityEnabled",applyButtonText:"applyButtonText",applyValueMode:"applyValueMode",buttons:"buttons",calendarOptions:"calendarOptions",cancelButtonText:"cancelButtonText",dateOutOfRangeMessage:"dateOutOfRangeMessage",dateSerializationFormat:"dateSerializationFormat",deferRendering:"deferRendering",disabled:"disabled",disabledDates:"disabledDates",displayFormat:"displayFormat",dropDownButtonTemplate:"dropDownButtonTemplate",dropDownOptions:"dropDownOptions",elementAttr:"elementAttr",focusStateEnabled:"focusStateEnabled",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",inputAttr:"inputAttr",interval:"interval",invalidDateMessage:"invalidDateMessage",isDirty:"isDirty",isValid:"isValid",label:"label",labelMode:"labelMode",max:"max",maxLength:"maxLength",min:"min",name:"name",opened:"opened",openOnFieldClick:"openOnFieldClick",pickerType:"pickerType",placeholder:"placeholder",readOnly:"readOnly",rtlEnabled:"rtlEnabled",showAnalogClock:"showAnalogClock",showClearButton:"showClearButton",showDropDownButton:"showDropDownButton",spellcheck:"spellcheck",stylingMode:"stylingMode",tabIndex:"tabIndex",text:"text",todayButtonText:"todayButtonText",type:"type",useMaskBehavior:"useMaskBehavior",validationError:"validationError",validationErrors:"validationErrors",validationMessageMode:"validationMessageMode",validationMessagePosition:"validationMessagePosition",validationStatus:"validationStatus",value:"value",valueChangeEvent:"valueChangeEvent",visible:"visible",width:"width"},outputs:{onChange:"onChange",onClosed:"onClosed",onContentReady:"onContentReady",onCopy:"onCopy",onCut:"onCut",onDisposing:"onDisposing",onEnterKey:"onEnterKey",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onInitialized:"onInitialized",onInput:"onInput",onKeyDown:"onKeyDown",onKeyUp:"onKeyUp",onOpened:"onOpened",onOptionChanged:"onOptionChanged",onPaste:"onPaste",onValueChanged:"onValueChanged",acceptCustomValueChange:"acceptCustomValueChange",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",adaptivityEnabledChange:"adaptivityEnabledChange",applyButtonTextChange:"applyButtonTextChange",applyValueModeChange:"applyValueModeChange",buttonsChange:"buttonsChange",calendarOptionsChange:"calendarOptionsChange",cancelButtonTextChange:"cancelButtonTextChange",dateOutOfRangeMessageChange:"dateOutOfRangeMessageChange",dateSerializationFormatChange:"dateSerializationFormatChange",deferRenderingChange:"deferRenderingChange",disabledChange:"disabledChange",disabledDatesChange:"disabledDatesChange",displayFormatChange:"displayFormatChange",dropDownButtonTemplateChange:"dropDownButtonTemplateChange",dropDownOptionsChange:"dropDownOptionsChange",elementAttrChange:"elementAttrChange",focusStateEnabledChange:"focusStateEnabledChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",inputAttrChange:"inputAttrChange",intervalChange:"intervalChange",invalidDateMessageChange:"invalidDateMessageChange",isDirtyChange:"isDirtyChange",isValidChange:"isValidChange",labelChange:"labelChange",labelModeChange:"labelModeChange",maxChange:"maxChange",maxLengthChange:"maxLengthChange",minChange:"minChange",nameChange:"nameChange",openedChange:"openedChange",openOnFieldClickChange:"openOnFieldClickChange",pickerTypeChange:"pickerTypeChange",placeholderChange:"placeholderChange",readOnlyChange:"readOnlyChange",rtlEnabledChange:"rtlEnabledChange",showAnalogClockChange:"showAnalogClockChange",showClearButtonChange:"showClearButtonChange",showDropDownButtonChange:"showDropDownButtonChange",spellcheckChange:"spellcheckChange",stylingModeChange:"stylingModeChange",tabIndexChange:"tabIndexChange",textChange:"textChange",todayButtonTextChange:"todayButtonTextChange",typeChange:"typeChange",useMaskBehaviorChange:"useMaskBehaviorChange",validationErrorChange:"validationErrorChange",validationErrorsChange:"validationErrorsChange",validationMessageModeChange:"validationMessageModeChange",validationMessagePositionChange:"validationMessagePositionChange",validationStatusChange:"validationStatusChange",valueChange:"valueChange",valueChangeEventChange:"valueChangeEventChange",visibleChange:"visibleChange",widthChange:"widthChange",onBlur:"onBlur"},features:[p.Jv_([E.zF,E.jS,_v,E.fH,E.$M]),p.Vt3,p.OA$],decls:0,vars:0,template:function(e,a){},encapsulation:2}),i})(),mv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.GIV,C.u4t,C.QWP,C.f8z,C.df_,C.YLo,C.YaD,C.eNx,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C.Tob,C.$Ql,C.isg,E.p_,E.xZ],C.GIV,C.u4t,C.QWP,C.f8z,C.df_,C.YLo,C.YaD,C.eNx,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C.Tob,C.$Ql,C.isg,E.xZ]}),i})();var Nn="dx-state-focused",Cv="dx-cell-focus-disabled",Uo=".dx-datagrid-rowsview .dx-row",$o="".concat(Uo," > td"),Xo=".dx-treelist-rowsview .dx-row",Yo="".concat(Xo," > td"),jo={groupPanel:[".dx-datagrid-group-panel .dx-group-panel-item[tabindex]"],columnHeaders:[".dx-datagrid-headers .dx-header-row > td.dx-datagrid-action",".dx-treelist-headers .dx-header-row > td.dx-treelist-action"],filterRow:[".dx-datagrid-headers .dx-datagrid-filter-row .dx-editor-cell .dx-texteditor-input",".dx-treelist-headers .dx-treelist-filter-row .dx-editor-cell .dx-texteditor-input"],rowsView:["".concat(".dx-row-focused"),"".concat(Uo,"[tabindex]"),"".concat($o,"[tabindex]"),"".concat($o),"".concat(Xo,"[tabindex]"),"".concat(Yo,"[tabindex]"),"".concat(Yo)],footer:[".dx-datagrid-total-footer .dx-datagrid-summary-item",".dx-treelist-total-footer .dx-treelist-summary-item"],filterPanel:[".dx-datagrid-filter-panel .dx-icon-filter",".dx-treelist-filter-panel .dx-icon-filter"],pager:[".dx-datagrid-pager [tabindex]",".dx-treelist-pager [tabindex]"]},Hn=!1,fa=!1,Jt=null;function Qo(i,t){var e=(0,_.A)(i),a=e.attr("aria-label"),r=qo(a,t.element()).index(e);Jt=(0,y.X)({},{ariaLabel:a,index:r},{viewInstance:t})}function qo(i,t){return(0,_.A)(t).find(i?'[aria-label="'.concat(i,'"][tabindex]'):"[tabindex]")}function bv(i,t){var e=t?.getRootNode()||U.A.getDocument();for(var a in i){var n=i[a],r=(0,_.A)(e).find(n).first();if(r.length)return r}}function Zo(){fa="visible"===U.A.getDocument().visibilityState}function Jo(){O.A.off(U.A.getDocument(),"visibilitychange",Zo)}function el(i,t,e,a,n,r){if(t.option("useLegacyKeyboardNavigation"))return V.lQ;var s=()=>(0,_.A)(t.element()),o=h=>function xv(i,t,e,a,n,r){var s=function Ev(i,t,e){var a={event:t,handled:!1};return e?e(a):i._createActionByOption("onKeyDown")(a),a.handled}(t,e.originalEvent,r);if(!s){var o=(0,P.YD)(e);"enter"===o||"space"===o?(Qo(e.target,t),a&&a({event:e})):"tab"===o?n.addClass(Nn):Kn(i,t,e)}}(i,t,h,n,s(),r),l=()=>{Hn=!0,s().removeClass(Nn)},d=()=>{!Hn&&!fa&&s().addClass(Nn),Hn=!1};return O.A.on(e,"keydown",a,o),O.A.on(e,"mousedown",a,l),O.A.on(e,"focusin",a,d),()=>{O.A.off(e,"keydown",a,o),O.A.off(e,"mousedown",a,l),O.A.off(e,"focusin",a,d)}}function zn(i){if(!i.option("useLegacyKeyboardNavigation")&&Jt){var t=Jt.viewInstance;if(t){var a=qo(Jt.ariaLabel,t.element()).eq(Jt.index);Jt=null,O.A.trigger(a,"focus")}}}function Kn(i,t,e){var a=(0,P.YD)(e);if(e.ctrlKey&&("upArrow"===a||"downArrow"===a))for(var n=Object.keys(jo),r=n.indexOf(i);r>=0&&r<n.length;){r="upArrow"===a?--r:++r;var l=bv(jo[n[r]],e.target);if(l&&l.length){l.attr("tabindex",t.option("tabindex")||0),O.A.trigger(l,"focus"),l.removeClass(Cv);break}}}var Oi=function(i,t,e,a,n){var r=t.getController("keyboardNavigation");t.option("useLegacyKeyboardNavigation")||r&&!r.isKeyboardEnabled()||(t.createAction("onKeyDown"),el(i,t,e,a,n,s=>{t.executeAction("onKeyDown",s)}))},ge=D(9263),ei=D(5918),Ot=D(675),tl="dx-column-indicators";const Iv={_applyColumnState(i){var t,e=this.option("rtlEnabled"),a=this._getColumnAlignment(i.column.alignment,e),n=(0,y.X)(!0,{columnAlignment:a},i),r=n.rootElement.hasClass("dx-group-panel-item"),s=this._createIndicatorContainer(n,r),o=(0,_.A)("<span>").addClass(this._getIndicatorClassName(i.name)),l=null===(t=this.component)||void 0===t?void 0:t.getController("columns"),d=l?.getHeaderContentAlignment(a)||a;return n.container=s,n.indicator=o,this._renderIndicator(n),s[!r&&i.showColumnLines||"left"!==d?"prependTo":"appendTo"](i.rootElement),o},_getIndicatorClassName:V.lQ,_getColumnAlignment(i,t){return t=t||this.option("rtlEnabled"),i&&"center"!==i?i:(0,se.n)(t)},_createIndicatorContainer(i,t){var e=this._getIndicatorContainer(i.rootElement),a="left"===i.columnAlignment?"right":"left";return e.length||(e=(0,_.A)("<div>").addClass(tl)),this.setAria("role","presentation",e),e.css("float",i.showColumnLines&&!t?a:null)},_getIndicatorContainer:i=>i&&i.find(".".concat(tl)),_getIndicatorElements(i){var t=this._getIndicatorContainer(i);return t&&t.children()},_renderIndicator(i){var t=i.container,e=i.indicator;t&&e&&t.append(e)},_updateIndicators(i){var a,t=this.getColumns(),e=this.getColumnElements();if(e&&t.length===e.length)for(var n=0;n<t.length;n++){a=e.eq(n),this._updateIndicator(a,t[n],i);var r=a.parent().data("options");r&&r.cells&&(r.cells[a.index()].column=t[n])}},_updateIndicator(i,t,e){if(!t.command)return this._applyColumnState({name:e,rootElement:i,column:t,showColumnLines:this.option("showColumnLines")})}};var me=D(4423),il=["columnHeadersView","rowsView","footerView","filterPanelView"],al=ut.A.inherit({_endUpdateCore(){},ctor(i){var t=this;t._updateLockCount=0,t.component=i,t._actions={},t._actionConfigs={},(0,I.__)(this.callbackNames()||[],function(e,a){var n=t.callbackFlags(a)||{};n.unique=!0,n.syncStrategy=!0,t[this]=(0,me.A)(n)})},init(){},callbackNames(){},callbackFlags(){},publicMethods(){},beginUpdate(){this._updateLockCount++},endUpdate(){this._updateLockCount>0&&(this._updateLockCount--,this._updateLockCount||this._endUpdateCore())},option(i){var{component:t}=this,e=t._optionCache;return 1===arguments.length&&e?(i in e||(e[i]=t.option(i)),e[i]):t.option.apply(t,arguments)},_silentOption(i,t){var{component:e}=this,a=e._optionCache;return a&&(a[i]=t),e._setOptionWithoutOptionChange(i,t)},localize(i){var t=this.component._optionCache;return t?(i in t||(t[i]=A.A.format(i)),t[i]):A.A.format(i)},on(){return this.component.on.apply(this.component,arguments)},off(){return this.component.off.apply(this.component,arguments)},optionChanged(i){i.name in this._actions&&(this.createAction(i.name,this._actionConfigs[i.name]),i.handled=!0)},getAction(i){return this._actions[i]},setAria(i,t,e){var a=e.get(0),n="role"!==i&&"id"!==i?"aria-":"";a.setAttribute?a.setAttribute(n+i,t):e.attr(n+i,t)},_createComponent(){return this.component._createComponent.apply(this.component,arguments)},getController(i){return this.component._controllers[i]},createAction(i,t){if((0,v.Tn)(i)){var e=this.component._createAction(i.bind(this),t);return function(a){e({event:a})}}this._actions[i]=this.component._createActionByOption(i,t),this._actionConfigs[i]=t},executeAction(i,t){var e=this._actions[i];return e&&e(t)},dispose(){var i=this;(0,I.__)(i.callbackNames()||[],function(){i[this].empty()})},addWidgetPrefix(i){return"dx-".concat(this.component.NAME.slice(2).toLowerCase()).concat(i?"-".concat(i):"")},getWidgetContainerClass(){return this.addWidgetPrefix("dxDataGrid"===this.component.NAME?null:"container")},elementIsInsideGrid(i){return i.closest(".".concat(this.getWidgetContainerClass())).parent().is(this.component.$element())}}),Wn=al,Tv=Wn.inherit({getView(i){return this.component._views[i]},getViews(){return this.component._views}}),nl=al.inherit({_isReady(){return this.component.isReady()},_endUpdateCore(){this.callBase(),!this._isReady()&&this._requireReady&&(this._requireRender=!1,this.component._requireResize=!1),this._requireRender&&(this._requireRender=!1,this.render(this._$parent))},_invalidate(i,t){this._requireRender=!0,this.component._requireResize=(0,Q.Vd)()&&(this.component._requireResize||i),this._requireReady=this._requireReady||t},_renderCore(){},_resizeCore(){},_parentElement(){return this._$parent},ctor(i){this.callBase(i),this.renderCompleted=(0,me.A)(),this.resizeCompleted=(0,me.A)()},element(){return this._$element},getElementHeight(){var i=this.element();if(!i)return 0;var t=parseFloat(i.css("marginTop"))||0,e=parseFloat(i.css("marginBottom"))||0,{offsetHeight:a}=i.get(0);return a+t+e},isVisible:()=>!0,getTemplate(i){return this.component._getTemplate(i)},getView(i){return this.component._views[i]},getFirstVisibleViewElement(){var i=this.getView("columnHeadersView");return i&&i.isVisible()?i.element():this.getView("rowsView").element()},getLastVisibleViewElement(){var i=this.getView("filterPanelView");if(i&&i.isVisible())return i.element();var t=this.getView("footerView");return t&&t.isVisible()?t.element():this.getView("rowsView").element()},getViewElementWithClass(i){var t=il.map(e=>this.getView(e)).filter(e=>e&&e.element()).find(e=>e.element().hasClass(i));return t&&t.element()},updateBorderedViews(){var i=this.getViewElementWithClass("dx-bordered-top-view"),t=this.getViewElementWithClass("dx-bordered-bottom-view"),e=this.getFirstVisibleViewElement(),a=this.getLastVisibleViewElement();i&&!i.is(e)&&i.removeClass("dx-bordered-top-view"),t&&!t.is(a)&&t.removeClass("dx-bordered-bottom-view"),e.hasClass("dx-bordered-top-view")||e.addClass("dx-bordered-top-view"),a.hasClass("dx-bordered-bottom-view")||a.addClass("dx-bordered-bottom-view")},isViewsStateValid(){var i;if(this.component._views){if(!il.includes(this.name))return!1;var t=this.getView("rowsView");return!(!t||!(0,v.O9)(null===(i=t.element)||void 0===i?void 0:i.call(t)))&&["columnHeadersView","footerView","filterPanelView"].map(n=>this.getView(n)).filter(n=>{var r;return n&&(null===(r=n.isVisible)||void 0===r?void 0:r.call(n))}).every(n=>n&&(0,v.O9)(n.element()))}return!1},render(i,t){var e=this._$element,a=this.isVisible();if((e||i)&&(this._requireReady=!1,e||(e=this._$element=(0,_.A)("<div>").appendTo(i),this._$parent=i),e.toggleClass("dx-hidden",!a),this.isViewsStateValid()&&this.updateBorderedViews(),a)){this.component._optionCache={};var n=this._renderCore(t);this.component._optionCache=void 0,n?n.done(()=>{this.renderCompleted.fire(t)}):this.renderCompleted.fire(t)}},resize(){this.isResizing=!0,this._resizeCore(),this.resizeCompleted.fire(),this.isResizing=!1},focus(i){this.element().get(0).focus({preventScroll:i})}});function sl(i){var e={};return Object.entries(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).forEach(a=>{var[n,r]=a,s=i[n];s&&(e[n]=(0,v.Tn)(r)?r(s):s.inherit(r))}),e}const Z={modules:[],View:nl,ViewController:Tv,Controller:Wn,registerModule(i,t){for(var{modules:e}=this,a=0;a<e.length;a++)if(e[a].name===i)return;t.name=i,e.push(t)},registerModulesOrder(i){this.modulesOrder=i},unregisterModule(i){this.modules=(0,V.VM)(this.modules,t=>t.name!==i)},processModules:function Dv(i,t){var{modules:e}=t,{modulesOrder:a}=t;function n(h){var u={};return(0,I.__)(h,(c,g)=>{var m=new g(i);m.name=c,function Rv(i,t,e){var a=e.publicMethods();a&&(0,I.__)(a,(n,r)=>{if(!e[r])throw J.A.Error("E1006",t,r);if(i[r])throw J.A.Error("E1005",r);i[r]=function(){return e[r](...arguments)}})}(i,c,m),u[c]=m}),u}a&&e.sort((h,u)=>{var c=a.indexOf(h.name),g=a.indexOf(u.name);return c<0&&(c=1e6),g<0&&(g=1e6),c-g});var r={},s={};e.forEach(h=>{var{name:u,controllers:c={},views:g={}}=h;Object.entries(c).forEach(m=>{var b,[f,x]=m;if(r[f])throw J.A.Error("E1001",u,f);if(null===(b=x?.subclassOf)||void 0===b||!b.call(x,Wn))throw J.A.Error("E1002",u,f);r[f]=x}),Object.entries(g).forEach(m=>{var b,[f,x]=m;if(s[f])throw J.A.Error("E1003",u,f);if(null===(b=x?.subclassOf)||void 0===b||!b.call(x,nl))throw J.A.Error("E1004",u,f);s[f]=x})});var o=e.filter(h=>{var{extenders:u}=h;return!!u}),l=o.reduce((h,u)=>{var{extenders:c}=u;return(0,N.A)((0,N.A)({},h),sl(h,c?.controllers))},r),d=o.reduce((h,u)=>{var{extenders:c}=u;return(0,N.A)((0,N.A)({},h),sl(h,c?.views))},s);i._controllers=n(l),i._views=n(d)},callModuleItemsMethod:function(i,t,e){e=e||[],i._controllers&&(0,I.__)(i._controllers,function(){this[t]&&this[t].apply(this,e)}),i._views&&(0,I.__)(i._views,function(){this[t]&&this[t].apply(this,e)})}};var xa=D(8059),Ii=D(5333),Je=D(5571),Ai=D(1437),ba=D(5655),et=D(9259),Fv=D(7041);D(1364);const ol=(0,Fv.A)({format:function(i,t){var e=(0,v.Kg)(t)&&""!==t||(0,v.Qd)(t)||(0,v.Tn)(t),a=(0,v.kf)(i)||(0,v.$P)(i);return e&&a?(0,v.Tn)(t)?t(i):((0,v.Kg)(t)&&(t={type:t}),(0,v.kf)(i)?ba.A.format(i,t):(0,v.$P)(i)?et.A.format(i,t):void 0):(0,v.O9)(i)?i.toString():""},getTimeFormat:function(i){return i?"longtime":"shorttime"},_normalizeFormat:function(i){return Array.isArray(i)?1===i.length?i[0]:function(t){return i.map(function(e){return et.A.format(t,e)}).join(" ")}:i},getDateFormatByDifferences:function(i,t){var e=[],a=t&&i.millisecond&&!(i.year||i.month||i.day);return a?e.push(function(n){return n.getSeconds()+n.getMilliseconds()/1e3+"s"}):i.millisecond&&e.push("millisecond"),(i.hour||i.minute||!a&&i.second)&&e.unshift(this.getTimeFormat(i.second)),i.year&&i.month&&i.day?t&&"month"===t?"monthandyear":(e.unshift("shortdate"),this._normalizeFormat(e)):i.year&&i.month?"monthandyear":i.year&&i.quarter?"quarterandyear":i.year?"year":i.quarter?"quarter":i.month&&i.day?(e.unshift(t?function(n){return et.A.getMonthNames("abbreviated")[n.getMonth()]+" "+et.A.format(n,"day")}:"monthandday"),this._normalizeFormat(e)):i.month?"month":i.day?(e.unshift(t?"day":function(n){return et.A.format(n,"dayofweek")+", "+et.A.format(n,"day")}),this._normalizeFormat(e)):this._normalizeFormat(e)},getDateFormatByTicks:function(i){var t,e,a;if(i.length>1)for(t=Ai.A.getDatesDifferences(i[0],i[1]),a=1;a<i.length-1;a++)e=Ai.A.getDatesDifferences(i[a],i[a+1]),t.count<e.count&&(t=e);else t={year:!0,month:!0,day:!0,hour:i[0].getHours()>0,minute:i[0].getMinutes()>0,second:i[0].getSeconds()>0,millisecond:i[0].getMilliseconds()>0};return this.getDateFormatByDifferences(t)},getDateFormatByTickInterval:function(i,t,e){var a,n=function(o,l,d){switch(l){case"year":case"quarter":o.month=d;case"month":o.day=d;case"week":case"day":o.hour=d;case"hour":o.minute=d;case"minute":o.second=d;case"second":o.millisecond=d}};e=(0,v.Kg)(e)?e.toLowerCase():e;var o,l,d,r=Ai.A.getDatesDifferences(i,t);return i!==t&&(o=r,l=i>t?t:i,!(d=i>t?i:t).getMilliseconds()&&d.getSeconds()?d.getSeconds()-l.getSeconds()==1&&(o.millisecond=!0,o.second=!1):!d.getSeconds()&&d.getMinutes()?d.getMinutes()-l.getMinutes()==1&&(o.second=!0,o.minute=!1):!d.getMinutes()&&d.getHours()?d.getHours()-l.getHours()==1&&(o.minute=!0,o.hour=!1):!d.getHours()&&d.getDate()>1?d.getDate()-l.getDate()==1&&(o.hour=!0,o.day=!1):1===d.getDate()&&d.getMonth()?d.getMonth()-l.getMonth()==1&&(o.day=!0,o.month=!1):!d.getMonth()&&d.getFullYear()&&d.getFullYear()-l.getFullYear()==1&&(o.month=!0,o.year=!1)),n(r,Ai.A.getDateUnitInterval(r),!0),n(r,a=Ai.A.getDateUnitInterval(e||"second"),!1),r[{week:"day"}[a]||a]=!0,this.getDateFormatByDifferences(r)}});var ll=D(8543),Mv=["year","month","day"],Vv=["year","month","day","hour","minute"],Gn=function(i){return"date"===i||"datetime"===i},Un=function(i){var t,e=[],a=["year","month","day","hour","minute","second"],n=i.headerFilter&&i.headerFilter.groupInterval,r="quarter"===n?"month":n;return Gn(i.dataType)&&null!==n?(e="datetime"===i.dataType?Vv:Mv,(t=a.indexOf(r))>=0&&(e=a.slice(0,t)).push(n),e):(0,v.O9)(n)?Array.isArray(n)?n:[n]:void 0};const It=function(){var i=function(n,r){var s=n.dataField||n.selector;return"search"===r&&(s=n.displayField||n.calculateDisplayValue||s),s},t=function(n,r){var s,o,l,h,d=i(this,r);if(Array.isArray(n)&&(0,v.O9)(n[0])&&(0,v.O9)(n[1]))return o=[d,">=",n[0]],l=[d,"<=",n[1]],Gn(this.dataType)&&(h=n[1]).getHours()+h.getMinutes()+h.getSeconds()+h.getMilliseconds()<1&&(s=new Date(n[1].getTime()),"date"===this.dataType&&s.setDate(n[1].getDate()+1),l=[d,"<",s]),[o,"and",l]},e=function(n,r,s){var o,l,d,c,h=(0,v.$P)(c=n)?[c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds()]:(0,I.Tj)((""+c).split("/"),function(g,m){return 1===m?Number(g)-1:Number(g)}),u=i(this,s);switch("headerFilter"===s?d=Un(this)[h.length-1]:"datetime"===this.dataType&&(d="minute"),d){case"year":o=new Date(h[0],0,1),l=new Date(h[0]+1,0,1);break;case"month":o=new Date(h[0],h[1],1),l=new Date(h[0],h[1]+1,1);break;case"quarter":o=new Date(h[0],3*h[1],1),l=new Date(h[0],3*h[1]+3,1);break;case"hour":o=new Date(h[0],h[1],h[2],h[3]),l=new Date(h[0],h[1],h[2],h[3]+1);break;case"minute":o=new Date(h[0],h[1],h[2],h[3],h[4]),l=new Date(h[0],h[1],h[2],h[3],h[4]+1);break;case"second":o=new Date(h[0],h[1],h[2],h[3],h[4],h[5]),l=new Date(h[0],h[1],h[2],h[3],h[4],h[5]+1);break;default:o=new Date(h[0],h[1],h[2]),l=new Date(h[0],h[1],h[2]+1)}switch(r){case"<":return[u,"<",o];case"<=":return[u,"<",l];case">":return[u,">=",l];case">=":return[u,">=",o];case"<>":return[[u,"<",o],"or",[u,">=",l]];default:return[[u,">=",o],"and",[u,"<",l]]}},a=function(n,r,s){var o=i(this,s),l=Un(this);if("headerFilter"===s&&l&&(0,v.O9)(n)){var d=(""+n).split("/"),h=Number(d[d.length-1]);return[[o,">=",h],"and",[o,"<",h+l[d.length-1]]]}return[o,r||"=",n]};return{defaultCalculateFilterExpression:function(n,r,s){var o=this,l=i(o,s),d=o.calculateDisplayValue&&"search"===s,h=d&&o.lookup&&o.lookup.dataType||o.dataType,u=null;if("headerFilter"!==s&&"filterBuilder"!==s||null!==n)if("string"!==h||o.lookup&&!d){if("between"===r)return t.apply(o,[n,s]);if(Gn(h)&&(0,v.O9)(n))return e.apply(o,arguments);if("number"===h)return a.apply(o,arguments);u=[l,r||"=",n]}else u=[l,r||"contains",n];else u=[l,r||"=",null],"string"===h&&(u=[u,"="===r?"or":"and",[l,r||"=",""]]);return u},getGroupInterval:Un}}();var dl="virtual",hl="scrolling.mode",Gv={year:i=>i&&i.getFullYear(),month:i=>i&&i.getMonth()+1,day:i=>i&&i.getDate(),quarter:i=>i&&Math.floor(i.getMonth()/3)+1,hour:i=>i&&i.getHours(),minute:i=>i&&i.getMinutes(),second:i=>i&&i.getSeconds()},Uv=function(){var t=this.calculateCellValue(arguments[1]);if(!(0,v.O9)(t))return null;if(ul(this.dataType))return Gv[arguments[0]](t);if("number"===this.dataType){var a=arguments[0];return Math.floor(Number(t)/a)*a}},$v=function(i,t){return(0,v.Tn)(i)&&(0,v.Tn)(t)&&i.originalCallback&&t.originalCallback?i.originalCallback===t.originalCallback&&i.columnIndex===t.columnIndex:i===t};function ul(i){return"date"===i||"datetime"===i}var cl=function(i){i.get(0).textContent="\xa0"},$n=function(i){for(var t=(0,Je.st)(i=i||[]),e=0;e<i.length;e++)i&&i[e]&&void 0!==i[e].isExpanded&&(t[e].isExpanded=i[e].isExpanded),i&&i[e]&&void 0!==i[e].groupInterval&&(t[e].groupInterval=i[e].groupInterval);return t},gl=function(i,t){var e=ol.format(i,t.format)||i&&i.toString()||"",a={value:i,valueText:t.getDisplayFormat?t.getDisplayFormat(e):e,target:t.target||"row",groupInterval:t.groupInterval};return t.customizeText?t.customizeText.call(t,a):a.valueText},pl=function(i,t){var e=i.displayFormat||i.columnCaption&&t["".concat(i.summaryType,"OtherColumn")]||t[i.summaryType];return gl(i.value,{format:i.valueFormat,getDisplayFormat:a=>e?(0,Ze.GP)(e,a,i.columnCaption):a,customizeText:i.customizeText})},_l=function(i){var t=i.data&&i.data(),e=t&&t.dxComponents,a=e&&e[0];return a&&t[a]};const F={renderNoDataText(i){if(i=i||this.element()){var t=this.addWidgetPrefix("nodata"),e=i.find(".".concat(t)).last(),a=this._dataController.isEmpty(),n=this._dataController.isLoading();e.length||(e=(0,_.A)("<span>").addClass(t)),e.parent().is(i)||e.appendTo(i),a&&!n?e.removeClass("dx-hidden").text(this._getNoDataText()):e.addClass("dx-hidden")}},renderLoadPanel(i,t,e){var a;this._loadPanel&&this._loadPanel.$element().remove(),(a=this.option("loadPanel"))&&("auto"===a.enabled?!e:a.enabled)?(a=(0,y.X)({shading:!1,message:a.text,container:t},a),this._loadPanel=this._createComponent((0,_.A)("<div>").appendTo(t),ll.A,a)):this._loadPanel=null},calculateLoadPanelPosition(i){var t=(0,_.A)((0,Q.zk)());return(0,R.Oq)(i)>(0,R.Oq)(t)?{of:t,boundary:i,collision:"fit"}:{of:i}},getIndexByKey(i,t,e){var a=-1;if(void 0!==i&&Array.isArray(t)){e=arguments.length<=2?"key":e;for(var n=0;n<t.length;n++){var r=(0,v.O9)(e)?t[n][e]:t[n];if((0,V.RL)(i,r)){a=n;break}}}return a},combineFilters(i,t){var e,a=[];t=t||"and";for(var n=0;n<i.length;n++)if(i[n]){if(1===(null===(e=i[n])||void 0===e?void 0:e.length)&&"!"===i[n][0]){if("and"===t)return["!"];if("or"===t)continue}a.length&&a.push(t),a.push(i[n])}if(1===a.length&&(a=a[0]),a.length)return a},checkChanges(i,t){for(var e=0,a=0;a<t.length;a++)i[t[a]]&&e++;return i.length&&i.length===e},equalFilterParameters:function i(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var a=0;a<t.length;a++)if(!i(t[a],e[a]))return!1;return!0}return(0,v.Tn)(t)&&t.columnIndex>=0&&(0,v.Tn)(e)&&e.columnIndex>=0?t.columnIndex===e.columnIndex&&(0,q.ao)(t.filterValue)===(0,q.ao)(e.filterValue)&&(0,q.ao)(t.selectedFilterOperation)===(0,q.ao)(e.selectedFilterOperation):(0,q.ao)(t)==(0,q.ao)(e)},proxyMethod(i,t,e){i[t]||(i[t]=function(){var a=this._dataSource;return a?a[t].apply(a,arguments):e})},formatValue:gl,getFormatOptionsByColumn:(i,t)=>({format:i.format,getDisplayFormat:i.getDisplayFormat,customizeText:i.customizeText,target:t,trueText:i.trueText,falseText:i.falseText}),getDisplayValue:(i,t,e,a)=>i.displayValueMap&&void 0!==i.displayValueMap[t]?i.displayValueMap[t]:i.calculateDisplayValue&&e&&"group"!==a?i.calculateDisplayValue(e):!i.lookup||"group"===a&&(i.calculateGroupValue||i.calculateDisplayValue)?t:i.lookup.calculateCellValue(t),getGroupRowSummaryText(i,t){for(var e="(",a=0;a<i.length;a++)e+=(a>0?", ":"")+pl(i[a],t);return e+")"},getSummaryText:pl,normalizeSortingInfo:$n,getFormatByDataType(i){switch(i){case"date":return"shortDate";case"datetime":return"shortDateShortTime";default:return}},getHeaderFilterGroupParameters(i,t){var e=[],a=i.dataField||i.name,n=It.getGroupInterval(i);return n?((0,I.__)(n,(r,s)=>{e.push(t?{selector:a,groupInterval:s,isExpanded:r<n.length-1}:Uv.bind(i,s))}),e):(t?e=[{selector:a,isExpanded:!1}]:(e=function(r){var s=i.calculateCellValue(r);return(void 0===s||""===s)&&(s=null),s},i.sortingMethod&&(e=[{selector:e,compare:i.sortingMethod.bind(i)}])),e)},equalSortParameters(i,t,e){if(i=$n(i),t=$n(t),Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;for(var a=0;a<i.length;a++)if(!$v(i[a].selector,t[a].selector)||i[a].desc!==t[a].desc||i[a].groupInterval!==t[a].groupInterval||!e&&!!i[a].isExpanded!=!!t[a].isExpanded)return!1;return!0}return(!i||!i.length)==(!t||!t.length)},getPointsByColumns(i,t,e,a){for(var s,o,h,n=i.length,r=!1,l=a||0,d=[],u=0;u<=n;u++){u<n&&(o=(s=i.eq(u)).offset(),h="rtl"===s.css("direction"));var c={index:l,x:o?o.left+(!e&&h^u===n?(0,se.N)(s[0]).width:0):0,y:o?o.top+(e&&u===n?(0,se.N)(s[0]).height:0):0,columnIndex:l};if(!e&&u>0){var g=i.eq(u-1).offset();g.top<c.y&&(c.y=g.top)}t&&(r=t(c)),r||d.push(c),l++}return d},getExpandCellTemplate:()=>({allowRenderToDetachedContainer:!0,render(i,t){var e=(0,_.A)(i);if(!(0,v.O9)(t.value)||t.data&&t.data.isContinuation||t.row.isNewRow)cl(e);else{var a=t.component.getView("rowsView");e.addClass("dx-datagrid-expand").addClass("dx-selection-disabled"),(0,_.A)("<div>").addClass(t.value?"dx-datagrid-group-opened":"dx-datagrid-group-closed").appendTo(e),a.setAria("label",a.localize(t.value?"dxDataGrid-ariaCollapse":"dxDataGrid-ariaExpand"),e)}}}),setEmptyText:cl,isDateType:ul,getSelectionRange(i){try{if(i)return{selectionStart:i.selectionStart,selectionEnd:i.selectionEnd}}catch{}return{}},setSelectionRange(i,t){try{i&&i.setSelectionRange&&i.setSelectionRange(t.selectionStart,t.selectionEnd)}catch{}},focusAndSelectElement(i,t){var e=t.is(":focus");O.A.trigger(t,"focus");var a=i.option("editing.selectTextOnEditStart"),n=t.get(0);if(!e&&a&&t.is(".dx-texteditor-input")&&!t.is("[readonly]")){var r=_l(t.closest(".dx-texteditor"));(0,w.z7)(r&&r._loadItemDeferred).done(()=>{n.select()})}},getWidgetInstance:_l,getLastResizableColumnIndex(i,t){var a,e=i.some(o=>o&&!o.command&&!o.fixed&&!1!==o.allowResizing);for(a=i.length-1;i[a];a--){var n=i[a];if(!(n.command||n.fixed||"adaptiveHidden"===(t&&t[a])||e&&!1===n.allowResizing))break}return a},isElementInCurrentGrid:(i,t)=>!(!t||!t.length)&&t.closest(".".concat(i.getWidgetContainerClass())).parent().is(i.component.$element()),isVirtualRowRendering(i){var t=i.option("scrolling.rowRenderingMode"),e=i.option(hl)===dl,a="infinite"===i.option(hl);return!(!1!==i.option("scrolling.legacyMode")||!e&&!a)||t===dl},getPixelRatio:i=>i.devicePixelRatio||1,getContentHeightLimit(i){return i.mozilla?8e6:15e6/this.getPixelRatio((0,Q.zk)())},normalizeLookupDataSource(i){var t;return i.items?t=i.items:(0,v.Tn)(t=i.dataSource)&&!xa.A.isWrapped(t)&&(t=t({})),(0,vi.ho)(t)},getWrappedLookupDataSource(i,t,e){if(!t)return[];var a=this.normalizeLookupDataSource(i.lookup);if(i.calculateCellValue!==i.defaultCalculateCellValue)return a;var s,o,l,n=t.remoteOperations().groupPaging,r=i.displayField&&(0,v.Kg)(i.displayField),d=(u,c)=>{var g,m=null!==(g=c.skip)&&void 0!==g?g:0;return u.slice(m,c.take?m+c.take:u.length)},h=(0,N.A)((0,N.A)({},a),{__dataGridSourceFilter:e,load:u=>{var g,m,f,c=new w.cY;return(g=u,m=function Yv(i){return Array.isArray(i)||(i=[i]),i.map((t,e)=>(0,v.Kg)(t)?{selector:t,isExpanded:e<i.length-1}:t)}(r?[i.dataField,i.displayField]:i.dataField),f=new w.cY,s&&(!n||g.skip===l&&g.take===o)?f.resolve(d(s,g)):(l=g.skip,o=g.take,t.load({filter:e,group:m,take:n?g.take:void 0,skip:n?g.skip:void 0}).done(b=>{s=b,f.resolve(n?b:d(b,g))}).fail(f.fail)),f).done(g=>{if(0!==g.length){var m=this.combineFilters(g.flatMap(x=>x.key).map(x=>[i.lookup.valueExpr,x]),"or");new Ii.q((0,N.A)((0,N.A)((0,N.A)({},a),u),{filter:this.combineFilters([m,u.filter],"and"),paginate:!1})).load().done(c.resolve).fail(c.fail)}else c.resolve([])}).fail(c.fail),c},key:i.lookup.valueExpr,byKey(u){var c=(0,w.cY)();return this.load({filter:[i.lookup.valueExpr,"=",u]}).done(g=>{c.resolve(g[0])}),c.promise()}});return h},logHeaderFilterDeprecatedWarningIfNeed(i){var t=i._logDeprecatedOptionWarning.bind(i);(0,v.O9)(i.option("headerFilter.allowSearch"))&&t("headerFilter.allowSearch",{since:"23.1",alias:"headerFilter.search.enabled"}),(0,v.O9)(i.option("headerFilter.searchTimeout"))&&t("headerFilter.searchTimeout",{since:"23.1",alias:"headerFilter.search.timeout"});var e="dxPivotGrid"===i.NAME?"dataSource.fields":"columns",a=i.option(e);if(Array.isArray(a)){var n=r=>{r.forEach(s=>{var o,l=s.headerFilter||{};(0,v.O9)(l.allowSearch)&&t("".concat(e,"[].headerFilter.allowSearch"),{since:"23.1",alias:"".concat(e,"[].headerFilter.search.enabled")}),(0,v.O9)(l.searchMode)&&t("".concat(e,"[].headerFilter.searchMode"),{since:"23.1",alias:"".concat(e,"[].headerFilter.search.mode")}),null!==(o=s.columns)&&void 0!==o&&o.length&&n(s.columns)})};n(a)}}};var vl="scroll-container",Ti="dx-row",Xn="dx-group-row",Yn="dx-master-detail-row",ml="0.0001px",jn="dxCellHintVisible",sm={render(i){i.container.append(i.content)}},Ea=function(i){return"auto"===i?"":(0,v.kf)(i)?"".concat(i,"px"):i},Cl=function(i,t,e){i.style.width=i.style.maxWidth="auto"===t.width?"":e},dm=function(i){i.resolve()},fl=i=>"number"==typeof i?"".concat(i.toFixed(3),"px"):"adaptiveHidden"===i?ml:i,hm=Z.View.inherit(Iv);class Ri extends hm{_createScrollableOptions(){var t=this.option("scrolling"),e=this.option("scrolling.useNative"),a=(0,y.X)({},t,{direction:"both",bounceEnabled:!1,useKeyboard:!1});return void 0===e&&(e=!0),"auto"===e?(delete a.useNative,delete a.useSimulatedScrollbar):(a.useNative=!!e,a.useSimulatedScrollbar=!e),a}_updateCell(t,e){e.rowType&&this._cellPrepared(t,e)}_createCell(t){var{column:e}=t,a=e.alignment||(0,se.n)(this.option("rtlEnabled")),n=U.A.createElement("td");n.style.textAlign=a;var r=(0,_.A)(n);return"data"===t.rowType&&e.headerId&&!e.type&&this.component.option("showColumnHeaders")&&this.setAria("describedby",e.headerId,r),e.cssClass&&r.addClass(e.cssClass),Array.isArray(e.elementAttr)&&e.elementAttr.forEach(s=>{var{name:o,value:l}=s;r.attr(o,l)}),"expand"===e.command&&(r.addClass(e.cssClass),r.addClass(this.addWidgetPrefix("group-space"))),e.colspan>1?r.attr("colSpan",e.colspan):!e.isBand&&"auto"!==e.visibleWidth&&this.option("columnAutoWidth")&&((e.width||e.minWidth)&&(n.style.minWidth=Ea(e.minWidth||e.width)),e.width&&Cl(n,e,Ea(e.width))),r}_createRow(t,e){var a=(0,_.A)("<".concat(e=e||"tr",">")).addClass(Ti);return this.setAria("role","row",a),a}_isAltRow(t){return t&&t.dataIndex%2==1}_createTable(t,e){var a=(0,_.A)("<table>").addClass(this.addWidgetPrefix("table")).addClass(this.addWidgetPrefix("table-fixed"));if(t&&!e?(a.attr("id","dx-".concat(new Pe.A)).append(this._createColGroup(t)),ge.A.safari&&a.append((0,_.A)("<thead>").append("<tr>")),this.setAria("role","presentation",a)):this.setAria("hidden",!0,a),this.setAria("role","presentation",(0,_.A)("<tbody>").appendTo(a)),e)return a;ge.A.mozilla&&O.A.on(a,"mousedown","td",r=>{r.ctrlKey&&r.preventDefault()}),this.option("cellHintEnabled")&&O.A.on(a,"mousemove",".dx-row > td",this.createAction(r=>{var s=r.event,o=(0,_.A)(s.target),l=(0,_.A)(s.currentTarget),d=l.parent(),h=this._columnsController.getVisibleColumns(),u=d.data("options"),c=l.index(),g=u&&u.cells&&u.cells[c],m=g?g.column:h[c],f=d.hasClass("dx-header-row"),x=d.hasClass("dx-data-row"),b=d.hasClass(Yn),S=d.hasClass(Xn),T=d.hasClass(this.addWidgetPrefix("filter-row")),B=x&&(!m||m.cellTemplate);b||T||x&&g&&(u.isEditing||g.isEditing||m?.showEditorAlways)||B||f&&(!m||m.headerCellTemplate)||S&&(!m||m.groupIndex&&m.groupCellTemplate)||(o.data(jn)&&(o.removeAttr("title"),o.data(jn,!1)),o[0].scrollWidth-o[0].clientWidth>0&&!(0,v.O9)(o.attr("title"))&&(o.attr("title",o.text()),o.data(jn,!0)))}));var n=r=>{var s=(0,_.A)(r.currentTarget),o=(0,_.A)(r.target).closest(".".concat("dx-field-item-content")),l=s.parent(),d=l.data("options"),h=d&&d.cells&&d.cells[s.index()];if(s.closest("table").is(r.delegateTarget)){var u=(0,y.X)({},h,{cellElement:(0,Y.c)(s),event:r,eventType:r.type});if(u.rowIndex=this.getRowIndex(l),o.length){var c=o.data("dx-form-item");c.column&&(u.column=c.column,u.columnIndex=this._columnsController.getVisibleIndex(u.column.index))}return u}};return O.A.on(a,"mouseover",".dx-row > td",r=>{var s=n(r);s&&this.executeAction("onCellHoverChanged",s)}),O.A.on(a,"mouseout",".dx-row > td",r=>{var s=n(r);s&&this.executeAction("onCellHoverChanged",s)}),O.A.on(a,ae.U,".dx-row > td",r=>{var s=n(r);s&&this.executeAction("onCellClick",s)}),O.A.on(a,bi,".dx-row > td",r=>{var s=n(r);s&&this.executeAction("onCellDblClick",s)}),function(i,t){var e,a,n;function r(s){return setTimeout(()=>{e=a=null},s)}O.A.on(t,"touchstart touchend",".dx-row",s=>{clearTimeout(n),"touchstart"===s.type?(e=s.target,a=s.currentTarget,n=r(1e3)):n=r()}),O.A.on(t,[ae.U,bi,te.A.down].join(" "),".dx-row",i.createAction(s=>{var{event:o}=s;e&&(o.target=e,o.currentTarget=a),(0,_.A)(o.target).closest("a").length||(s.rowIndex=i.getRowIndex(o.currentTarget),s.rowIndex>=0&&(s.rowElement=(0,Y.c)((0,_.A)(o.currentTarget)),s.columns=i.getColumns(),o.type===te.A.down?i._rowPointerDown(s):o.type===ae.U?i._rowClick(s):i._rowDblClick(s)))}))}(this,a),a}_rowPointerDown(){}_rowClick(){}_rowDblClick(){}_createColGroup(t){for(var e=(0,_.A)("<colgroup>"),a=0;a<t.length;a++)for(var n=t[a].colspan||1,r=0;r<n;r++)e.append(this._createCol(t[a]));return e}_createCol(t){var e=t.visibleWidth||t.width;"adaptiveHidden"===e&&(e=ml);var a=(0,_.A)("<col>");return(0,ei.zj)(a,e),a}renderDelayedTemplates(t){var e=this._delayedTemplates,a=e.filter(r=>!r.async),n=e.filter(r=>r.async);this._delayedTemplates=[],this._renderDelayedTemplatesCore(a,!1,t),this._renderDelayedTemplatesCoreAsync(n)}_renderDelayedTemplatesCoreAsync(t){if(t.length){var e=(0,Q.zk)().setTimeout(()=>{this._templateTimeouts.delete(e),this._renderDelayedTemplatesCore(t,!0)});this._templateTimeouts.add(e)}}_renderDelayedTemplatesCore(t,e,a){for(var n=new Date;t.length;){var r=t.shift(),{options:s}=r,o=U.A.getRootNode((0,_.A)(s.container).get(0)),l=this.needWaitAsyncTemplates();if((!e||(0,_.A)(s.container).closest(o).length||l)&&(a&&(s.change=a),r.template.render(s)),e&&new Date-n>30){this._renderDelayedTemplatesCoreAsync(t);break}}!t.length&&this._delayedTemplates.length&&this.renderDelayedTemplates()}_processTemplate(t,e){var a;if(t&&t.render&&!(0,v.Kb)(t))a={allowRenderToDetachedContainer:t.allowRenderToDetachedContainer,render(r){t.render(r.container,r.model,r.change),r.deferred&&r.deferred.resolve()}};else if((0,v.Tn)(t))a={render(r){var s=t((0,Y.c)(r.container),r.model,r.change);s&&(s.nodeType||(0,v.Kb)(s))&&r.container.append(s),r.deferred&&r.deferred.resolve()}};else{var n=(0,v.Kg)(t)?t:(0,_.A)(t).attr("id");n?(this._templatesCache[n]||(this._templatesCache[n]=this.getTemplate(t)),a=this._templatesCache[n]):a=this.getTemplate(t)}return a}renderTemplate(t,e,a,n,r){var s,o=this._processTemplate(e,a),{column:l}=a,d="data"===a.rowType,h=new w.cY,u={container:t,model:a,deferred:h,onRendered:()=>{this.isDisposed()?h.reject():h.resolve()}};if(o){a.component=this.component;var c=l&&(l.renderAsync&&d||this.option("renderAsync")&&(!1!==l.renderAsync&&(l.command||l.showEditorAlways)&&d||"filter"===a.rowType)),g=null!==(s=a.renderAsync)&&void 0!==s?s:c;!o.allowRenderToDetachedContainer&&!n||g?this._delayedTemplates.push({template:o,options:u,async:g}):o.render(u),this._templateDeferreds.add(h),O.A.on(t,Ot.N,dm.bind(null,h))}else h.reject();return h.promise().always(()=>{this._templateDeferreds.delete(h)})}_getBodies(t){return(0,_.A)(t).children("tbody").not(".dx-header").not(".dx-footer")}_needWrapRow(t){var e;return!!this.option().rowTemplate&&!(null===(e=this._getBodies(t))||void 0===e||!e.filter(".".concat(Ti)).length)}_wrapRowIfNeed(t,e,a){if(this._needWrapRow(a?t||this._tableElement:this._tableElement||t)){var s=(0,_.A)("<tbody>").addClass(e.attr("class"));return this.setAria("role","presentation",s),s.append(e)}return e}_appendRow(t,e,a){(a=a||sm).render({content:e,container:t})}_resizeCore(){var t=this._scrollLeft;t>=0&&(this._scrollLeft=0,this.scrollTo({left:t}))}_renderCore(t){var e=this.element().parent();(!e||e.parent().length)&&this.renderDelayedTemplates(t)}_renderTable(t){(t=t||{}).columns=this._columnsController.getVisibleColumns();var e=t.change&&t.change.changeType,a=this._createTable(t.columns,"append"===e||"prepend"===e||"update"===e);return this._renderRows(a,t),a}_renderRows(t,e){for(var a=this._getRows(e.change),n=e.change&&e.change.columnIndices||[],r=e.change&&e.change.changeTypes||[],s=0;s<a.length;s++)this._renderRow(t,(0,y.X)({row:a[s],columnIndices:n[s],changeType:r[s]},e))}_renderRow(t,e){e.columnIndices||(e.row.cells=[]);var a=this._createRow(e.row),n=this._wrapRowIfNeed(t,a);"remove"!==e.changeType&&this._renderCells(a,e),this._appendRow(t,n);var r=(0,y.X)({columns:e.columns},e.row);this._addWatchMethod(r,e.row),this._rowPrepared(n,r,e.row)}_needRenderCell(t,e){return!e||e.indexOf(t)>=0}_renderCells(t,e){for(var a=0,{row:n}=e,{columns:r}=e,s=0;s<r.length;s++)this._needRenderCell(s,e.columnIndices)&&this._renderCell(t,(0,y.X)({column:r[s],columnIndex:a,value:n.values&&n.values[a],oldValue:n.oldValues&&n.oldValues[a]},e)),r[s].colspan>1?a+=r[s].colspan:a++}_updateCells(t,e,a){var n=t.children(),r=e.children(),s=this.option("highlightChanges"),o=this.addWidgetPrefix("cell-updated-animation");a.forEach((l,d)=>{var h=n.eq(l),u=r.eq(d);h.replaceWith(u),s&&!u.hasClass("dx-command-expand")&&u.addClass(o)}),function(i,t){if(i&&t){var n,e=i.attributes,a=t.attributes;for(n=0;n<e.length;n++){var r=e[n].nodeName;t.hasAttribute(r)||i.removeAttribute(r)}for(n=0;n<a.length;n++)i.setAttribute(a[n].nodeName,a[n].nodeValue)}}(t.get(0),e.get(0))}_setCellAriaAttributes(t,e){if("freeSpace"!==e.rowType){this.setAria("role","gridcell",t);var a=this._columnsController.getColumnIndexOffset();this.setAria("colindex",e.columnIndex+a+1,t)}}_renderCell(t,e){var a=this._getCellOptions(e);if(e.columnIndices){if(e.row.cells){var n=e.row.cells.findIndex(s=>s.columnIndex===a.columnIndex);e.row.cells[n]=a}}else e.row.cells.push(a);var r=this._createCell(a);return this._setCellAriaAttributes(r,a),this._renderCellContent(r,a,e),t.get(0).appendChild(r.get(0)),r}_renderCellContent(t,e,a){var n=this._getCellTemplate(e);(0,w.z7)(!n||this.renderTemplate(t,n,e,void 0,a.change)).done(()=>{this._updateCell(t,e)})}_getCellTemplate(t){}_getRows(t){return[]}_getCellOptions(t){var e={column:t.column,columnIndex:t.columnIndex,rowType:t.row.rowType,isAltRow:this._isAltRow(t.row)};return this._addWatchMethod(e),e}_addWatchMethod(t,e){if(this.option("repaintChangesOnly")){var a=[];return(e=e||t).watch=e.watch||function(n,r,s){var o=n(e.data),l=function(d){d&&s&&s(d);var h=n(e.data);JSON.stringify(o)!==JSON.stringify(h)&&(d&&r(h),o=h)};return a.push(l),function(){var d=a.indexOf(l);d>=0&&a.splice(d,1)}},e.update=e.update||function(n,r){n&&(this.data=t.data=n.data,this.rowIndex=t.rowIndex=n.rowIndex,this.dataIndex=t.dataIndex=n.dataIndex,this.isExpanded=t.isExpanded=n.isExpanded,t.row&&!r&&(t.row=n)),a.forEach(s=>{s(n)})},e!==t&&(t.watch=e.watch.bind(e)),t}}_cellPrepared(t,e){e.cellElement=(0,Y.c)((0,_.A)(t)),this.executeAction("onCellPrepared",e)}_rowPrepared(t,e,a){(0,ao.p)(t.get(0),"options",e),e.rowElement=(0,Y.c)(t),this.executeAction("onRowPrepared",e)}_columnOptionChanged(t){var{optionNames:e}=t;if(F.checkChanges(e,["width","visibleWidth"])){var n=this._columnsController.getVisibleColumns().map(r=>r.visibleWidth||r.width);this.setColumnWidths({widths:n,optionNames:e})}else this._requireReady||this.render()}getCellIndex(t){return t.length?t[0].cellIndex:-1}getTableElements(){return this._tableElement||(0,_.A)()}getTableElement(t){return this._tableElement}setTableElement(t,e){this._tableElement=t}optionChanged(t){switch(super.optionChanged(t),t.name){case"cellHintEnabled":case"onCellPrepared":case"onRowPrepared":case"onCellHoverChanged":case"keyboardNavigation":this._invalidate(!0,!0),t.handled=!0}}init(){this._scrollLeft=-1,this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._delayedTemplates=[],this._templateDeferreds=new Set,this._templatesCache={},this._templateTimeouts=new Set,this.createAction("onCellClick"),this.createAction("onRowClick"),this.createAction("onCellDblClick"),this.createAction("onRowDblClick"),this.createAction("onCellHoverChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onCellPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onRowPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering",afterExecute:t=>{this._afterRowPrepared(t)}}),this._columnsController.columnsChanged.add(this._columnOptionChanged.bind(this)),this._dataController&&this._dataController.changed.add(this._handleDataChanged.bind(this))}_afterRowPrepared(t){}_handleDataChanged(){}callbackNames(){return["scrollChanged"]}_updateScrollLeftPosition(){var t=this._scrollLeft;t>=0&&(this._scrollLeft=0,this.scrollTo({left:t}))}scrollTo(t){var e=this.element(),a=e&&e.children(".".concat(this.addWidgetPrefix(vl))).not(".".concat(this.addWidgetPrefix("content-fixed")));(0,v.O9)(t)&&(0,v.O9)(t.left)&&this._scrollLeft!==t.left&&(this._scrollLeft=t.left,a&&a.scrollLeft(t.left))}_getContent(t){var e;return null===(e=this._tableElement)||void 0===e?void 0:e.parent()}_removeContent(t){var e=this._getContent(t);e?.length&&e.remove()}_wrapTableInScrollContainer(t,e){var a=(0,_.A)("<div>"),n=this.option("scrolling.useNative");return(!1===n||"auto"===n&&!Tn.nativeScrolling)&&a.addClass(this.addWidgetPrefix("scrollable-simulated")),O.A.on(a,"scroll",()=>{var r=a.scrollLeft();r!==this._scrollLeft&&this.scrollChanged.fire({left:r},this.name)}),a.addClass(this.addWidgetPrefix("content")).addClass(this.addWidgetPrefix(vl)).append(t).appendTo(this.element()),this.setAria("role","presentation",a),a}needWaitAsyncTemplates(){return this.option("templatesRenderAsynchronously")&&!1===this.option("renderAsync")}waitAsyncTemplates(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new w.cY;if(!t&&!this.needWaitAsyncTemplates())return e.resolve();var n=()=>w.z7.apply(this,Array.from(this._templateDeferreds)).done(()=>{this.isDisposed()?e.reject():this._templateDeferreds.size>0?n():e.resolve()}).fail(e.reject);return n(),e.promise()}_updateContent(t,e,a){return this.waitAsyncTemplates().done(()=>{this._removeContent(a),this.setTableElement(t,a),this._wrapTableInScrollContainer(t,a)})}_findContentElement(){}_getWidths(t){if(!t)return[];var e=[];return t.toArray().forEach(n=>{var r=n.offsetWidth;if(n.getBoundingClientRect){var s=(0,se.N)(n);s.width>n.offsetWidth-1&&(r=s.width)}e.push(r)}),e}getColumnWidths(t){if((this.option("forceApplyBindings")||V.lQ)(),t=t??this.getTableElement())for(var e=t.children("tbody:not(.dx-header)").children(),a=0;a<e.length;a++){var n=e.eq(a),r=n.hasClass(Xn),s=n.hasClass(Yn),o=n.hasClass("dx-error-row");if(!("none"===n.get(0).style.display||n.hasClass("dx-state-invisible")||r||s||o)){var h=n.children("td");return this._getWidths(h)}}return[]}getVisibleColumnIndex(t,e){return t}setColumnWidths(t){var{widths:e}=t,n=this.getTableElement();if(n?.length&&e){var r=this.getColumns(),s=this.option("columnAutoWidth"),o=n.children("colgroup").children("col");o.toArray().forEach(l=>l.removeAttribute("style")),r.forEach((l,d)=>{if(s&&l.width&&!l.command)for(var h=Ea(l.visibleWidth||l.width),u=Ea(l.minWidth||h),c=n.children().children(".dx-row").not(".".concat(Yn)),g=0;g<c.length;g++){var m=this.getVisibleColumnIndex(d,g);if(m>=0){var f=c.eq(g),x=f.hasClass(Xn)?f.find("td[aria-colindex='".concat(m+1,"']:not(.").concat("dx-group-cell",")")):f.find("td").eq(m);if(x.length){var b=x.get(0);Cl(b,l,h),b.style.minWidth=u}}}var S=fl(e[d]);(0,v.O9)(S)&&(0,ei.zj)(o.eq(d),S)})}}getCellElements(t){return this._getCellElementsCore(t)}_getCellElementsCore(t){if(!(t<0))return this._getRowElements().eq(t).children()}_getCellElement(t,e){var a=this.getCellElements(t),n=this._getVisibleColumnIndex(a,t,e);if(a?.length&&!(n<0)){var r=a.eq(n);return r.length>0?r:void 0}}_getRowElement(t){var e=this,a=(0,_.A)(),n=e.getTableElements();if(I.__(n,(r,s)=>{a=a.add(e._getRowElements((0,_.A)(s)).eq(t))}),a.length)return a}getCellElement(t,e){var a=this._getCellElement(t,e);if(a)return(0,Y.c)(a)}getRowElement(t){var e=this._getRowElement(t),a=[];if(e&&!(0,Y.c)(e).get)for(var n=0;n<e.length;n++)a.push(e[n]);else a=e;return a}_getVisibleColumnIndex(t,e,a){if((0,v.Kg)(a)){var n=this._columnsController.columnOption(a,"index");return this._columnsController.getVisibleIndex(n)}return a}getColumnElements(){}getColumns(t){return this._columnsController.getVisibleColumns(t)}getCell(t,e,a){var r,n=e||this._getRowElements();if(n.length>0&&t.rowIndex>=0&&("virtual"!==this.option("scrolling.mode")&&"virtual"!==this.option("scrolling.rowRenderingMode")&&(t.rowIndex=t.rowIndex<n.length?t.rowIndex:n.length-1),r=a||this.getCellElements(t.rowIndex),r?.length>0))return r.eq(r.length>t.columnIndex?t.columnIndex:r.length-1)}getRowsCount(){var t=this.getTableElement();return t&&1===t.length?t[0].rows.length:0}_getRowElementsCore(t){if(t=t||this.getTableElement()){var a=(this.option().rowTemplate||this.option("dataRowTemplate"))&&t.find("> tbody.".concat(Ti));return a&&a.length?a:t.find("> tbody > "+".".concat(Ti,", > .").concat(Ti))}return(0,_.A)()}_getRowElements(t){return this._getRowElementsCore(t)}getRowIndex(t){return this._getRowElements().index(t)}getBoundingRect(){}getName(){}setScrollerSpacing(t){var e=this.element(),a=this.option("rtlEnabled");e&&e.css({paddingLeft:a?t:"",paddingRight:a?"":t})}isScrollbarVisible(t){var e=this.element(),a=this._tableElement;return!(!e||!a)&&(t?(0,R.Ot)(a)-(0,R.RG)(e)>0:(0,R.P$)(a)-(0,R.Oq)(e)>0)}isDisposed(){var t;return null===(t=this.component)||void 0===t?void 0:t._disposed}dispose(){var t,e;if((0,Q.Vd)()){var a=(0,Q.zk)();null===(t=this._templateTimeouts)||void 0===t||t.forEach(n=>a.clearTimeout(n)),null===(e=this._templateTimeouts)||void 0===e||e.clear()}}}var Qn="text-content",xl="dx-header-row",qn="dx-visibility-hidden",bl="dx-text-content-alignment-",Zn={defaultOptions:()=>({showColumnHeaders:!0,cellHintEnabled:!0}),views:{columnHeadersView:Ri.inherit(function(){var i=function(a,n,r){var s=(0,_.A)("<div>").addClass(a.addWidgetPrefix(Qn));a.setAria("role","presentation",s),t(a,n,r.column,s);var o=a.option("showColumnLines"),l=a.getController("columns").getHeaderContentAlignment(r.column.alignment);return s[o||"right"===l?"appendTo":"prependTo"](n)};function t(a,n,r,s){var o=a._getIndicatorElements(n,!0),l=a._getIndicatorElements(n),d=o&&o.length,h=a._getColumnAlignment(r.alignment),u=".".concat(a._getIndicatorClassName("sort")),c=".".concat(a._getIndicatorClassName("sortIndex")),g=l.filter(u),m=l.children().filter(c);(s=s||n.children(".".concat(a.addWidgetPrefix(Qn)))).toggleClass(bl+h,d>0).toggleClass(bl+("left"===h?"right":"left"),d>0&&"center"===r.alignment).toggleClass("dx-sort-indicator",!!g.length).toggleClass("dx-sort-index-indicator",!!m.length).toggleClass("dx-header-filter-indicator",!!l.filter(".".concat(a._getIndicatorClassName("headerFilter"))).length)}var e={_createTable(){var a=this.callBase.apply(this,arguments);return O.A.on(a,"mousedown selectstart",this.createAction(n=>{var{event:r}=n;r.shiftKey&&r.preventDefault()})),a},_isLegacyKeyboardNavigation(){return this.option("useLegacyKeyboardNavigation")},_getDefaultTemplate(a){var n=this;return function(r,s){var{caption:o}=a,l=!a.command||o&&"expand"!==a.command;"empty"===a.command?n._renderEmptyMessage(r,s):l?i(n,r,s).text(o):a.command&&r.html("&nbsp;")}},_renderEmptyMessage(a,n){var r=this._getEmptyHeaderText();if(r){var s=i(this,a,n);if(r.includes("{0}")){var[l,d]=r.split("{0}"),h=A.A.format("dxDataGrid-emptyHeaderColumnChooserText"),u=this.component.getView("columnChooserView"),c=(0,_.A)("<a>").text(h).addClass("dx-link");O.A.on(c,"click",this.createAction(()=>u.showColumnChooser())),s.append(U.A.createTextNode(l)).append(c).append(U.A.createTextNode(d))}else s.text(r)}else a.html("&nbsp;")},_getEmptyHeaderText(){var a=!!this.component.getView("columnChooserView").hasHiddenColumns(),n=!!this.component.getView("headerPanel").hasGroupedColumns();switch(!0){case a&&n:return A.A.format("dxDataGrid-emptyHeaderWithColumnChooserAndGroupPanelText");case n:return A.A.format("dxDataGrid-emptyHeaderWithGroupPanelText");case a:return A.A.format("dxDataGrid-emptyHeaderWithColumnChooserText");default:return""}},_getHeaderTemplate(a){return a.headerCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(a)}},_processTemplate(a,n){var r=this,{column:o}=n,l=r.callBase(a);return"header"===n.rowType&&l&&o.headerCellTemplate&&!o.command?{render(d){var h=i(r,d.container,d.model);l.render((0,y.X)({},d,{container:h}))}}:l},_handleDataChanged(a){"refresh"===a.changeType&&(this._isGroupingChanged||this._requireReady)&&(this._isGroupingChanged=!1,this.render())},_renderCell(a,n){var r=this.callBase(a,n);return"header"===n.row.rowType&&(r.addClass("dx-cell-focus-disabled"),this._isLegacyKeyboardNavigation()||n.column&&!n.column.type&&r.attr("tabindex",this.option("tabindex")||0)),r},_setCellAriaAttributes(a,n){this.callBase(a,n),"header"===n.rowType&&(n.column.type||this.setAria("role","columnheader",a),n.column&&!n.column.command&&!n.column.isBand&&(a.attr("id",n.column.headerId),this.setAria("label","".concat(A.A.format("dxDataGrid-ariaColumn")," ").concat(n.column.caption),a)))},_createRow(a){var n=this.callBase.apply(this,arguments);return n.toggleClass("dx-column-lines",this.option("showColumnLines")),"header"===a.rowType&&(n.addClass(xl),this._isLegacyKeyboardNavigation()||Oi("columnHeaders",this,n,"td",this._handleActionKeyDown.bind(this))),n},_handleActionKeyDown(a){var{event:n}=a,r=(0,_.A)(n.target);if(this._lastActionElement=n.target,r.is(".dx-header-filter")){var s=this.getController("headerFilter"),o=r.closest("td"),l=this.getColumnIndexByElement(o);l>=0&&s.showHeaderFilterMenu(l,!1)}else{var d=r.closest(".dx-row");this._processHeaderAction(n,d)}n.preventDefault()},_renderCore(){var a=this.element(),n={};if(!this._tableElement||this._dataController.isLoaded()||this._hasRowElements){a.addClass(this.addWidgetPrefix("headers")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")).empty(),this.setAria("role","presentation",a);var r=this._updateContent(this._renderTable({change:n}),n);return this.getRowCount()>1&&a.addClass("dx-header-multi-row"),this.callBase.apply(this,arguments),r}},_renderRows(){(this._dataController.isLoaded()||this._hasRowElements)&&(this.callBase.apply(this,arguments),this._hasRowElements=!0)},_renderRow(a,n){var r=1===this.getRowCount()?null:n.row.rowIndex;n.columns=this.getColumns(r),this.callBase(a,n)},_createCell(a){var{column:n}=a,r=this.callBase.apply(this,arguments);return n.rowspan>1&&"header"===a.rowType&&r.attr("rowSpan",n.rowspan),r},_getRows(){var a=[],n=this.getRowCount();if(this.option("showColumnHeaders"))for(var r=0;r<n;r++)a.push({rowType:"header",rowIndex:r});return a},_getCellTemplate(a){if("header"===a.rowType)return this._getHeaderTemplate(a.column)},_columnOptionChanged(a){var{changeTypes:n}=a,{optionNames:r}=a;n.grouping||n.groupExpanding?n.grouping&&(this._isGroupingChanged=!0):(this.callBase(a),(r.width||r.visible)&&this.resizeCompleted.fire())},_isElementVisible:a=>a&&a.visible,_alignCaptionByCenter(a){var n=this._getIndicatorContainer(a,!0);n&&n.length&&(n.filter(".".concat(qn)).remove(),(n=this._getIndicatorContainer(a)).clone().addClass(qn).css("float","").insertBefore(a.children(".".concat(this.addWidgetPrefix(Qn)))))},_updateCell(a,n){"header"===n.rowType&&"center"===n.column.alignment&&this._alignCaptionByCenter(a),this.callBase.apply(this,arguments)},_updateIndicator(a,n,r){var s=this.callBase.apply(this,arguments);return"center"===n.alignment&&this._alignCaptionByCenter(a),t(this,a,n),s},_getIndicatorContainer(a,n){var r=this.callBase(a);return n?r:r.filter(":not(.".concat(qn,")"))},_isSortableElement:()=>!0,getHeadersRowHeight(){var a=this.getTableElement(),n=a&&a.find(".".concat(xl));return n&&n.toArray().reduce((r,s)=>r+(0,R.Oq)(s),0)||0},getHeaderElement(a){var n=this.getColumnElements();return n&&n.eq(a)},getColumnElements(a,n){var s,r=this,o=r._columnsController,l=r.getRowCount();if(r.option("showColumnHeaders")){if(l>1&&(!(0,v.O9)(a)||(0,v.O9)(n))){var d=[],h=(0,v.O9)(n)?o.getChildrenByBandColumn(n,!0):o.getVisibleColumns();return(0,I.__)(h,(u,c)=>{var g=(0,v.O9)(a)?a:o.getRowIndex(c.index);(s=r._getCellElement(g,o.getVisibleIndex(c.index,g)))&&d.push(s.get(0))}),(0,_.A)(d)}if(!a||a<l)return r.getCellElements(a||0)}},getColumnIndexByElement(a){var n=this.getCellIndex(a),r=a.closest(".dx-row"),{rowIndex:s}=r[0],o=this.getColumns(s)[n];return o?o.index:-1},getVisibleColumnIndex(a,n){var r=this.getColumns()[a];return r?this._columnsController.getVisibleIndex(r.index,n):-1},getColumnWidths(){var a=this.getColumnElements();return a&&a.length?this._getWidths(a):this.callBase.apply(this,arguments)},allowDragging(a){var n=a&&this._columnsController.getRowIndex(a.index),r=this.getColumns(n);return(this.option("allowColumnReordering")||this._columnsController.isColumnOptionUsed("allowReordering"))&&a.allowReordering&&r.length>1},getBoundingRect(){var a=this.getColumnElements();return a&&a.length?{top:this.getTableElement().offset().top}:null},getName:()=>"headers",getColumnCount(){var a=this.getColumnElements();return a?a.length:0},isVisible(){return this.option("showColumnHeaders")},optionChanged(a){switch(a.name){case"showColumnHeaders":case"wordWrapEnabled":case"showColumnLines":this._invalidate(!0,!0),a.handled=!0;break;default:this.callBase(a)}},getHeight(){return this.getElementHeight()},getContextMenuItems(a){var n=this,{column:r}=a;if(a.row&&("header"===a.row.rowType||"detailAdaptive"===a.row.rowType)){var s=n.option("sorting");if(s&&"none"!==s.mode&&r&&r.allowSorting){var o=function(l){setTimeout(()=>{n._columnsController.changeSortOrder(r.index,l.itemData.value)})};return[{text:s.ascendingText,value:"asc",disabled:"asc"===r.sortOrder,icon:"context-menu-sort-asc",onItemClick:o},{text:s.descendingText,value:"desc",disabled:"desc"===r.sortOrder,icon:"context-menu-sort-desc",onItemClick:o},{text:s.clearText,value:"none",disabled:!r.sortOrder,icon:"context-menu-sort-none",onItemClick:o}]}}},getRowCount(){return this._columnsController&&this._columnsController.getRowCount()},setRowsOpacity(a,n,r){var s,o,l=this.getRowCount(),d=this._columnsController.getColumns(),h=d&&d[a],u=h&&h.isBand&&h.index,c=(m,f)=>{m.ownerBand===u&&(o.eq(f).css({opacity:n}),m.isBand&&this.setRowsOpacity(m.index,n,s+1))};if((0,v.O9)(u))for(s=r=r||0;s<l;s++)(o=this.getCellElements(s))&&this.getColumns(s).forEach(c)}};return e}())}};const G=(0,y.X)({},Z,{modules:[],foreachNodes(i,t,e){for(var a=0;a<i.length;a++)!1!==t(i[a])&&(e||i[a].hasChildren)&&i[a].children.length&&this.foreachNodes(i[a].children,t,e)}});G.registerModule("columnHeaders",Zn);var Sm=D(3771),We=D(5652),Om=D(4168),El=["filterValues","filterType","fixed","fixedPosition"],wa=["visibleIndex","dataField","name","dataType","width","visible","sortOrder","lastSortOrder","sortIndex","groupIndex","filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","added"].concat(El),Im={visibleWidth:!0,bestFitWidth:!0,bufferedFilterValue:!0},wl=Number.MAX_SAFE_INTEGER||9007199254740991,gt="groupExpand",Jn=/columns\[(\d+)\]\.?/gi,Rm={visible:!0,showInColumnChooser:!0},Dm={number:["=","<>","<",">","<=",">=","between"],string:["contains","notcontains","startswith","endswith","=","<>"],date:["=","<>","<",">","<=",">=","between"],datetime:["=","<>","<",">","<=",">=","between"]},Bm={visibleIndex:!0,groupIndex:!0,grouped:!0,sortIndex:!0,sortOrder:!0},ti="group",ii="columnChooser",ya=D(9504),yl=function(i){i.filterOperations=i.defaultFilterOperations},Fm=1,Sa=function(i,t,e,a){var n={};if(t){(0,v.Kg)(t)&&(t={dataField:t}),i.setName(t);var r={};if(t.command)r=(0,We.tm)(n,t);else{n=i.getCommonSettings(t),e&&e.name&&e.dataField&&(t=(0,y.X)({},t,{dataField:e.dataField}));var s=i._createCalculatedColumnOptions(t,a);t.type||(r={headerId:"dx-col-".concat(Fm++)}),r=(0,We.tm)(r,Rm),(0,We.tm)(r,n),(0,We.tm)(r,s),(0,We.tm)(r,t),(0,We.tm)(r,{selector:null})}return t.filterOperations===t.defaultFilterOperations&&yl(r),r}},ai=function i(t,e,a){var n=[];return e&&(0,I.__)(e,(r,s)=>{var o=t._columnsUserState&&ir(s,t._columnsUserState[r])&&t._columnsUserState[r],l=Sa(t,s,o,a);l&&(a&&(l.ownerBand=a),n.push(l),l.columns&&(n=n.concat(i(t,l.columns,l)),delete l.columns,l.hasColumns=!0))}),n},At=function(i,t){for(var e=[],a=t[i];a;)e.unshift(a),a=t[i=a.index];return e},Mm=function i(t,e,a){var n=[],r=e[t];if(r)for(var s=0;s<r.length;s++){var o=r[s];(!(0,v.O9)(o.groupIndex)||o.showWhenGrouped)&&(n.push(o),a&&o.isBand&&(n=n.concat(i(o.index,e,a))))}return n},Lm=function i(t,e){var a=0,n=t.getChildrenByBandColumn(e,!0);return(0,I.__)(n,(r,s)=>{s.isBand?(s.colspan=s.colspan||i(t,s.index),a+=s.colspan||1):a+=1}),a},er=function(i){var t=(0,v.NW)(i);return"string"!==t&&"boolean"!==t&&"number"!==t&&"date"!==t&&"object"!==t&&(t=void 0),t},Sl=function(i,t){switch(i){case"date":case"datetime":return ya.A.getDateSerializationFormat(t);case"number":if((0,v.Kg)(t))return"string";if((0,v.kf)(t))return null}},Ol=function(i,t){i.deserializeValue||(F.isDateType(t)&&(i.deserializeValue=function(e){return ya.A.deserializeDate(e)},i.serializeValue=function(e){return(0,v.Kg)(e)?e:ya.A.serializeDate(e,this.serializationFormat)}),"number"===t&&(i.deserializeValue=function(e){var a=parseFloat(e);return isNaN(a)?e:a},i.serializeValue=function(e,a){return"filter"===a?e:(0,v.O9)(e)&&"string"===this.serializationFormat?e.toString():e}))},Hm=function(i){return!0===i.value?this.trueText||"true":!1===i.value?this.falseText||"false":i.valueText||""},Il=function(i){if("boolean"===i)return Hm},Al=function(i){(0,I.__)(i._columns,(t,e)=>{e.index=t}),(0,I.__)(i._columns,(t,e)=>{(0,v.Gv)(e.ownerBand)&&(e.ownerBand=e.ownerBand.index)}),(0,I.__)(i._commandColumns,(t,e)=>{e.index=-(t+1)})},Tl=function(i,t){(0,Ut.Il)(i._columns,"groupIndex",t,e=>{var{grouped:a}=e;return delete e.grouped,a})},tr=function(i,t,e){var r,a=(0,v.Gv)(t)?t.rowIndex:null,n=e===ti?i.getGroupColumns():e===ii?i.getChooserColumns():i.getVisibleColumns(a);return t=(0,v.Gv)(t)?t.columnIndex:t,(r=n[t])&&r.type===gt&&(r=i._columns.filter(s=>r.type===s.type)[0]||r),r&&(0,v.O9)(r.index)?r.index:-1};function ir(i,t){return i&&t&&t.name===(i.name||i.dataField)&&(t.dataField===i.dataField||i.name)}var Rl=function(i){var l,d,h,t=i._columnsUserState,e=i._ignoreColumnOptionNames||[],a=i._columns,n={},r=[],s=!0,o=[];function u(f,x){if(x)for(var b=0;b<wa.length;b++){var S=wa[b];e.includes(S)||("dataType"===S?f[S]=f[S]||x[S]:El.includes(S)?S in x&&(f[S]=x[S]):("selectedFilterOperation"===S&&x[S]&&(f.defaultSelectedFilterOperation=f[S]||null),f[S]=x[S]))}}function c(f,x){for(var b=x.name||x.dataField,S=n[b]||0,T=0;T<f.length;T++)if(ir(x,f[T])){if(!S)return n[b]=n[b]||0,n[b]++,T;S--}return-1}if(t){for(h=0;h<a.length;h++)d=c(t,a[h]),s=s&&d>=0,o.push(d);for(h=0;h<a.length;h++)l=a[h],d=o[h],(i._hasUserState||s)&&u(l,t[d]),d>=0&&(0,v.O9)(t[d].initialIndex)?r[d]=l:r.push(l);var g=!1;for(h=0;h<t.length;h++){var m=t[h];m.added&&c(a,m)<0&&(u(l=Sa(i,m.added),m),r.push(l),m.added.columns&&(g=!0))}g&&(Al(i),r=ai(i,r)),ni(i,r)}},Tt=function(i,t){Al(i),Tl(i,t),function(i,t){(0,I.__)(i._columns,(e,a)=>{(0,v.O9)(a.sortIndex)&&!Ia(a.sortOrder)&&delete a.sortIndex}),(0,Ut.Il)(i._columns,"sortIndex",t,e=>!(0,v.O9)(e.groupIndex)&&Ia(e.sortOrder))}(i,t),Pl(i),function(i,t){for(var e,a=[],n=i.getBandColumnsCache(),r=[],s=i._columns.filter(d=>!d.command),o=0;o<s.length;o++)e=s[o],At(o,n.columnParentByIndex).length?r.push(e):a.push(e);(0,Ut.Il)(r,"visibleIndex",t),(0,Ut.Il)(a,"visibleIndex",t)}(i,t)},Oa=function(i){i.resetColumnsCache()};function ni(i,t){i._previousColumns=i._columns,i._columns=t,Oa(i),i.updateColumnDataTypes()}var Ge=function(i,t,e,a){var n,r=i._columnChanges||{optionNames:{length:0},changeTypes:{length:0},columnIndex:a};e=(e=e||"all").split(".")[0];var{changeTypes:s}=r;t&&!s[t]&&(s[t]=!0,s.length++);var{optionNames:o}=r;e&&!o[e]&&(o[e]=!0,o.length++),(void 0===a||a!==r.columnIndex)&&((0,v.O9)(a)&&(null!==(n=r.columnIndices)&&void 0!==n||(r.columnIndices=[]),(0,v.O9)(r.columnIndex)&&r.columnIndices.push(r.columnIndex),r.columnIndices.push(a)),delete r.columnIndex),i._columnChanges=r,Oa(i)},Di=function(i){var n,t=i.option("onColumnsChanging"),e=i._columnChanges;i.isInitialized()&&!i._updateLockCount&&e&&(t&&(i._updateLockCount++,t((0,y.X)({component:i.component},e)),i._updateLockCount--),i._columnChanges=void 0,(n=e.optionNames)&&["dataField","lookup","dataType","columns"].some(r=>n[r])?(i._reinitAfterLookupChanges=e?.optionNames.lookup,i.reinit(),i._reinitAfterLookupChanges=void 0):i.columnsChanged.fire(e))},ar=function(i,t,e,a,n){var o,l,d,r=(0,q.Hz)(e),s=t.index;if(3===arguments.length)return r(t,{functionsAsIs:!0});var h=r(t,{functionsAsIs:!0});if(!(0,V.RL)(h,a,{maxDepth:5})){"groupIndex"===e||"calculateGroupValue"===e?(l="grouping",function(i,t,e,a){if(e>=0)a>=0||(t.lastSortOrder=t.sortOrder);else{var r=i.option("sorting.mode"),s=t.lastSortOrder;"single"===r&&i._columns.some(l=>l!==t&&(0,v.O9)(l.sortIndex))&&(s=void 0),t.sortOrder=s}}(i,t,a,h)):l="sortIndex"===e||"sortOrder"===e||"calculateSortValue"===e?"sorting":"columns";var u=(0,q.vL)(e);u(t,a,{functionsAsIs:!0});var c=function(i,t){var a,e=[],n=i.getBandColumnsCache(),r=function(o){return o.ownerBand===t.ownerBand};if(n.isPlain){var s=i._columns.indexOf(t);s>=0&&(e=["columns[".concat(s,"]")])}else for(a=i._columns.filter(r);a.length&&-1!==a.indexOf(t);)e.unshift("columns[".concat(a.indexOf(t),"]")),a=(t=n.columnParentByIndex[t.index])?i._columns.filter(r):[];return e.join(".")}(i,t);Bm[e]&&(Tt(i,t),a=r(t)),("name"===e||"allowEditing"===e)&&i._checkColumns(),!(0,v.O9)(h)&&!(0,v.O9)(a)&&0!==e.indexOf("buffer")&&(n=!0),n?Oa(i):(!wa.includes(e)&&"visibleWidth"!==e&&(o=i.option("columns"),d=i.getColumnByPath(c,o),(0,v.Kg)(d)&&(d=o[s]={dataField:d}),d&&ir(d,t)&&u(d,a,{functionsAsIs:!0})),Ge(i,l,e,s)),c&&function(i,t){var{value:e}=t,{optionName:a}=t,{prevValue:n}=t,{fullOptionName:r}=t,s="".concat(r,".").concat(a);!Im[a]&&i._skipProcessingColumnsChange!==s&&(i._skipProcessingColumnsChange=s,i.component._notifyOptionChanged(s,e,n),i._skipProcessingColumnsChange=!1)}(i,{fullOptionName:c,optionName:e,value:a,prevValue:h})}};function Ia(i){return"asc"===i||"desc"===i}var Ym=function(i,t){if(this.dataField){var e=this.dataField.split("."),a=e.length-1;this.serializeValue&&(t=this.serializeValue(t));for(var n=0;n<a;n++){var r=e[n];i=i[r]=i[r]||{}}i[e[a]]=t}},jm=function i(t,e,a){var n=[];return t[e=e||0]&&(0,I.__)(t[e],(r,s)=>{(s.ownerBand===a||s.type===gt)&&(s.isBand&&s.colspan?n.push.apply(n,i(t,e+1,s.index)):(!s.command||e<1)&&n.push(s))}),n},nr=(i,t)=>!!i._columns.filter(a=>a.type===t.type).length,Dl=function(i,t){var e=i.option("rtlEnabled");return t.command&&!nr(i,t)||!t.fixedPosition?e?"right":"left":t.fixedPosition},Bl=function(i,t,e,a){var n,r=this.getRowCount(),s=i[a]&&i[a].rowspan,o=t.filter(l=>l.type===e);return i.forEach((l,d)=>{l.type===e&&(n=d,s=i[d+1]?i[d+1].rowspan:r)}),s>1&&(o=(0,I.Tj)(o,l=>(0,y.X)({},l,{rowspan:s}))),o.unshift.apply(o,(0,v.O9)(n)?[n,1]:[a,0]),i.splice.apply(i,o),s||1},Fl=function(i,t){for(var e=i?i.toString():"0";e.length<t;)e="0".concat(e);return e},Ml=(i,t,e,a)=>{for(var n,r,s=t.slice().map(g=>(0,y.X)({},g)),o=i._isColumnFixing(),l=e.slice().map(g=>(0,y.X)({fixed:o},g)),d=g=>e.reduce((m,f,x)=>f.type===(a&&g.type===gt?"expand":g.type)||f.command===g.command?x:m,-1),h=g=>g.command!==e[r].command,u=0;u<t.length;u++)(r=(n=t[u])&&(n.type||n.command)?d(n):-1)>=0&&(a?(s[u]=(0,y.X)({fixed:o},e[r],n),n.type!==gt&&(l=l.filter(h))):s[u]=(0,y.X)({},n,e[r],n.type===gt&&{visibleIndex:n.visibleIndex,index:n.index,headerId:n.headerId,allowFixing:0===n.groupIndex,allowReordering:0===n.groupIndex,groupIndex:n.groupIndex}));return t.length&&a&&l.length&&(s=s.concat(l)),s},Vl=(i,t)=>(0,v.O9)(t.fixed)||!t.type?t.fixed:i._isColumnFixing(),Pl=i=>{i._bandColumnsCache=void 0},Ll=(i,t)=>{var a,e=(0,v.Kg)(t)&&t.substr(0,t.indexOf(":"));if(void 0!==t)return e&&(t=t.substr(e.length+1)),e?a=i.filter(n=>"".concat(n[e])===t)[0]:["index","name","dataField","caption"].some(n=>!!(a=i.filter(r=>r[n]===t)[0])),a},Aa={defaultOptions:()=>({commonColumnSettings:{allowFiltering:!0,allowHiding:!0,allowSorting:!0,allowEditing:!0,encodeHtml:!0,trueText:A.A.format("dxDataGrid-trueText"),falseText:A.A.format("dxDataGrid-falseText")},allowColumnReordering:!1,allowColumnResizing:!1,columnResizingMode:"nextColumn",columnMinWidth:void 0,columnWidth:void 0,adaptColumnWidthByRatio:!0,columns:void 0,regenerateColumnsByVisibleItems:!1,customizeColumns:null,dateSerializationFormat:void 0}),controllers:{columns:class tC extends Z.Controller{_getExpandColumnOptions(){return{type:"expand",command:"expand",width:"auto",cssClass:"dx-command-expand",allowEditing:!1,allowGrouping:!1,allowSorting:!1,allowResizing:!1,allowReordering:!1,allowHiding:!1}}_getFirstItems(t){var e,a=[];return t&&t.items().length>0&&(e=F.normalizeSortingInfo(t.group()).length,a=function n(r,s){if(!r||!s)return r;for(var o=0;o<r.length;o++){var l=n(r[o].items||r[o].collapsedItems,s-1);if(l&&l.length)return l}}(t.items(),e)||[]),a}_endUpdateCore(){!this._skipProcessingColumnsChange&&Di(this)}init(t){var e=this.option("columns");this._commandColumns=this._commandColumns||[],this._columns=this._columns||[],this._isColumnsFromOptions=!!e,this._isColumnsFromOptions?(ni(this,e?ai(this,e):[]),Rl(this)):ni(this,this._columnsUserState?ai(this,this._columnsUserState):this._columns),function(i){var t=i._getExpandColumnOptions();i.addCommandColumn(t)}(this),this._dataSourceApplied?this.applyDataSource(this._dataSource,!0,t):Tt(this),this._checkColumns()}callbackNames(){return["columnsChanged"]}getColumnByPath(t,e){var a,n=[];return t.replace(Jn,(r,s)=>(n.push(parseInt(s)),"")),n.length&&(a=e?n.reduce((r,s)=>r&&r.columns&&r.columns[s],{columns:e}):function(i,t){var e,a,r=function(o){return o.ownerBand===(e?e.index:void 0)};if(i.getBandColumnsCache().isPlain)e=i._columns[t[0]];else{a=i._columns.filter(r);for(var s=0;s<t.length;s++)(e=a[t[s]])&&(a=i._columns.filter(r))}return e}(this,n)),a}optionChanged(t){var e;switch(t.name){case"adaptColumnWidthByRatio":t.handled=!0;break;case"dataSource":t.value!==t.previousValue&&!this.option("columns")&&(!Array.isArray(t.value)||!Array.isArray(t.previousValue))&&(this._columns=[]);break;case"columns":e=this._skipProcessingColumnsChange,t.handled=!0,this._skipProcessingColumnsChange||(t.name===t.fullName?(this._columnsUserState=null,this._ignoreColumnOptionNames=null,this.init()):(this._columnOptionChanged(t),e=!0)),e&&this._updateRequireResize(t);break;case"commonColumnSettings":case"columnAutoWidth":case"allowColumnResizing":case"allowColumnReordering":case"columnFixing":case"grouping":case"groupPanel":case"regenerateColumnsByVisibleItems":case"customizeColumns":case"columnHidingEnabled":case"dateSerializationFormat":case"columnResizingMode":case"columnMinWidth":case"columnWidth":t.handled=!0,this.reinit("columnWidth"===t.fullName&&["width"]);break;case"rtlEnabled":this.reinit();break;default:super.optionChanged(t)}}_columnOptionChanged(t){var e={},a=this.getColumnByPath(t.fullName),n=t.fullName.replace(Jn,"");a&&(n?e[n]=t.value:e=t.value,this._skipProcessingColumnsChange=t.fullName,this.columnOption(a.index,e),this._skipProcessingColumnsChange=!1)}_updateRequireResize(t){var{component:e}=this;"width"===t.fullName.replace(Jn,"")&&e._updateLockCount&&(e._requireResize=!0)}publicMethods(){return["addColumn","deleteColumn","columnOption","columnCount","clearSorting","clearGrouping","getVisibleColumns","getVisibleColumnIndex"]}applyDataSource(t,e,a){var n=t&&t.isLoaded();if(this._dataSource=t,!this._dataSourceApplied||0===this._dataSourceColumnsCount||e||this.option("regenerateColumnsByVisibleItems")){if(n){if(!this._isColumnsFromOptions){var r=function(i,t){for(var a,e=i._getFirstItems(t),n={},r=[],s=0;s<e.length;s++)if(e[s])for(a in e[s])(!(0,v.Tn)(e[s][a])||xa.A.isWrapped(e[s][a]))&&(n[a]=!0);for(a in n)if(0!==a.indexOf("__")){var o=Sa(i,a);r.push(o)}return r}(this,t);r.length&&(ni(this,r),this._dataSourceColumnsCount=this._columns.length,Rl(this))}return this.updateColumns(t,e,a)}this._dataSourceApplied=!1,Tt(this)}else if(n&&!this.isAllDataTypesDefined(!0)&&this.updateColumnDataTypes(t))return Ge(this,"columns"),Di(this),(new w.cY).reject().promise()}reset(){this._dataSource=null,this._dataSourceApplied=!1,this._dataSourceColumnsCount=void 0,this.reinit()}resetColumnsCache(){this._visibleColumns=void 0,this._fixedColumns=void 0,this._rowCount=void 0,Pl(this)}reinit(t){this._columnsUserState=this.getUserState(),this._ignoreColumnOptionNames=t||null,this.init(),t&&(this._ignoreColumnOptionNames=null)}isInitialized(){return!!this._columns.length||!!this.option("columns")}isDataSourceApplied(){return this._dataSourceApplied}getCommonSettings(t){var e,a,n=(!t||!t.type)&&this.option("commonColumnSettings")||{},r=null!==(e=this.option("grouping"))&&void 0!==e?e:{},s=null!==(a=this.option("groupPanel"))&&void 0!==a?a:{};return(0,y.X)({allowFixing:this.option("columnFixing.enabled"),allowResizing:this.option("allowColumnResizing")||void 0,allowReordering:this.option("allowColumnReordering"),minWidth:this.option("columnMinWidth"),width:this.option("columnWidth"),autoExpandGroup:r.autoExpandAll,allowCollapsing:r.allowCollapsing,allowGrouping:s.allowColumnDragging&&s.visible||r.contextMenuEnabled},n)}isColumnOptionUsed(t){for(var e=0;e<this._columns.length;e++)if(this._columns[e][t])return!0}isAllDataTypesDefined(t){var e=this._columns;if(!e.length)return!1;for(var a=0;a<e.length;a++)if((e[a].dataField||e[a].calculateCellValue!==e[a].defaultCalculateCellValue)&&(!e[a].dataType||t&&e[a].deserializeValue&&void 0===e[a].serializationFormat))return!1;return!0}getColumns(){return this._columns}isBandColumnsUsed(){return this.getColumns().some(t=>t.isBand)}getGroupColumns(){var t=[];return(0,I.__)(this._columns,function(){(0,v.O9)(this.groupIndex)&&(t[this.groupIndex]=this)}),t}_shouldReturnVisibleColumns(){return!0}_compileVisibleColumns(t){return this._visibleColumns=this._visibleColumns||this._compileVisibleColumnsCore(),t=(0,v.O9)(t)?t:this._visibleColumns.length-1,this._visibleColumns[t]||[]}getVisibleColumns(t,e){return this._shouldReturnVisibleColumns()?this._compileVisibleColumns.apply(this,arguments):[]}getFixedColumns(t){return this._fixedColumns=this._fixedColumns||this._getFixedColumnsCore(),t=(0,v.O9)(t)?t:this._fixedColumns.length-1,this._fixedColumns[t]||[]}getFilteringColumns(){return this.getColumns().filter(t=>(t.dataField||t.name)&&(t.allowFiltering||t.allowHeaderFiltering)).map(t=>{var e=(0,y.X)(!0,{},t);return(0,v.O9)(e.dataField)||(e.dataField=e.name),e.filterOperations=t.filterOperations!==t.defaultFilterOperations?e.filterOperations:null,e})}getColumnIndexOffset(){return 0}_getFixedColumnsCore(){var s,o,l,t=[],e=this.getRowCount(),n={command:"transparent"},r=0;if(this._isColumnFixing())for(var d=0;d<=e;d++){s=0,l=null,o=null;for(var h=this.getVisibleColumns(d,!0),u=0;u<h.length;u++){var c=h[u-1],g=h[u];g.fixed?c&&c.fixed&&Dl(this,c)!==Dl(this,g)?(0,v.O9)(o)||(o=u):l=g.fixedPosition:(0===d&&(g.isBand&&g.colspan?r+=g.colspan:r++),s++,(0,v.O9)(o)||(o=u))}if(0===d&&(0===s||s>=h.length))return[];(0,v.O9)(o)||(o="right"===l?0:h.length),t[d]=h.slice(0),n.colspan||(n.colspan=r),t[d].splice(o,s,n)}return t.map(m=>m.map(f=>{var x=(0,N.A)({},f);return x.headerId&&(x.headerId+="-fixed"),x}))}_isColumnFixing(){var t=this.option("columnFixing.enabled");return!t&&(0,I.__)(this._columns,(e,a)=>{if(a.fixed)return t=!0,!1}),t}_getExpandColumnsCore(){return this.getGroupColumns()}getExpandColumns(){var e,t=this._getExpandColumnsCore(),a=t.filter(o=>0===o.groupIndex)[0],n=a&&a.fixed,r=this._isColumnFixing(),s=this.option("rtlEnabled");return t.length&&(e=this.columnOption("command:expand")),(0,I.Tj)(t,o=>(0,y.X)({},o,{visibleWidth:null,minWidth:null,cellTemplate:(0,v.O9)(o.groupIndex)?null:o.cellTemplate,headerCellTemplate:null,fixed:!(!(0,v.O9)(o.groupIndex)||!n)||r,fixedPosition:s?"right":"left"},e,{index:o.index,type:o.type||gt}))}getBandColumnsCache(){if(!this._bandColumnsCache){var t=this._columns,e={},a={},n=!0;t.forEach(r=>{var{ownerBand:s}=r,o=(0,v.Gv)(s)?s.index:s,l=t[o];r.hasColumns&&(n=!1),r.colspan&&(r.colspan=void 0),r.rowspan&&(r.rowspan=void 0),l?a[r.index]=l:o=-1,e[o]=e[o]||[],e[o].push(r)}),this._bandColumnsCache={isPlain:n,columnChildrenByIndex:e,columnParentByIndex:a}}return this._bandColumnsCache}_isColumnVisible(t){return t.visible&&this.isParentColumnVisible(t.index)}_isColumnInGroupPanel(t){return(0,v.O9)(t.groupIndex)&&!t.showWhenGrouped}hasVisibleDataColumns(){return this._columns.some(e=>{var a=this._isColumnVisible(e),n=this._isColumnInGroupPanel(e);return a&&!n&&!e.command})}_compileVisibleColumnsCore(){var t=this.getBandColumnsCache(),e=Ml(this,this._columns,this._commandColumns,!0);!function(i,t,e){for(var a,n=0;n<t.length;n++){var r=t[n];(r.visible||r.command)&&(r.isBand&&(r.colspan=r.colspan||Lm(i,r.index)),(!r.isBand||!r.colspan)&&(a=i.getRowCount(),!r.command&&(!(0,v.O9)(r.groupIndex)||r.showWhenGrouped)&&(a-=At(r.index,e.columnParentByIndex).length),a>1&&(r.rowspan=a)))}}(this,e,t);var a=this._getIndexedColumns(e),n=this._getVisibleColumnsFromIndexed(a);return!this.hasVisibleDataColumns()&&this._columns.length&&n[n.length-1].push({command:"empty"}),n}_getIndexedColumns(t){for(var e=this.option("rtlEnabled"),a=this.getRowCount(),n=function(i){var t;for(t=0;i>1;t++)i/=10;return t}(t.length),r=this.getBandColumnsCache(),s=[],o=[],l=0;l<a;l+=1)o[l]=[{}],s[l]=[{},{},{}];return t.forEach(d=>{var h,u,c,g,f,{visibleIndex:m}=d,x=At(d.index,r.columnParentByIndex),b=this._isColumnVisible(d),S=this._isColumnInGroupPanel(d);if(b&&!S){var T=x.length;if(m<0)m=-m,f=o[T];else if(d.fixed=null!==(u=null===(h=x[0])||void 0===h?void 0:h.fixed)&&void 0!==u?u:d.fixed,d.fixedPosition=null!==(g=null===(c=x[0])||void 0===c?void 0:c.fixedPosition)&&void 0!==g?g:d.fixedPosition,d.fixed){var B=!!d.command&&!nr(this,d),M="right"===d.fixedPosition;e&&!B&&(M=!M),f=M?s[T][2]:s[T][0]}else f=s[T][1];if(x.length){m=Fl(m,n);for(var L=x.length-1;L>=0;L-=1)m=Fl(x[L].visibleIndex,n)+m}f[m]=f[m]||[],f[m].push(d)}}),{positiveIndexedColumns:s,negativeIndexedColumns:o}}_getVisibleColumnsFromIndexed(t){for(var e=this,{positiveIndexedColumns:a,negativeIndexedColumns:n}=t,r=[],s=this.getRowCount(),o=Ml(this,this.getExpandColumns(),this._columns),l=0,d=0,h=function(c){r.push([]),(0,We.ap)(n[c],(f,x)=>{r[c].unshift.apply(r[c],x)});var g=r[c].length;a[c].forEach(f=>{(0,We.ap)(f,(x,b)=>{r[c].push.apply(r[c],b)})}),d<=c&&(d+=Bl.call(e,r[c],o,"detailExpand",g)),l<=c&&(l+=Bl.call(e,r[c],o,gt,g))},u=0;u<s;u+=1)h(u);return r.push(jm(r)),r}getInvisibleColumns(t,e){var r,a=this,n=[];return(0,I.__)(t=t||a._columns,(s,o)=>{if(o.ownerBand===e){if(o.isBand)return void((r=o.visible?a.getInvisibleColumns(a.getChildrenByBandColumn(o.index),o.index):a.getChildrenByBandColumn(o.index)).length&&(n.push(o),n=n.concat(r)));o.visible||n.push(o)}}),n}getChooserColumns(t){return((i,t)=>{if("asc"!==t&&"desc"!==t)return i;var e="asc"===t?1:-1;return i.sort((a,n)=>e*(a.caption||"").localeCompare(n.caption||"")),i})((t?this.getColumns():this.getInvisibleColumns()).filter(r=>r.showInColumnChooser),this.option("columnChooser.sortOrder"))}allowMoveColumn(t,e,a,n){var r=tr(this,t,a),s=this._columns[r];return!(!s||!(s.allowReordering||s.allowGrouping||s.allowHiding))&&(a===n?a!==ii&&(t=(0,v.Gv)(t)?t.columnIndex:t)!==(e=(0,v.Gv)(e)?e.columnIndex:e)&&t+1!==e:a===ti&&n!==ii||n===ti?s&&s.allowGrouping:a!==ii&&n!==ii||s&&s.allowHiding)}moveColumn(t,e,a,n){var s,d,r={},o=tr(this,t,a),l=tr(this,e,n);if(o>=0){var h=this._columns[o];if(e=(0,v.Gv)(e)?e.columnIndex:e,d=l>=0?this._columns[l].groupIndex:-1,(0,v.O9)(h.groupIndex)&&a===ti&&(d>h.groupIndex&&d--,n!==ti?r.groupIndex=void 0:(s=h.groupIndex,delete h.groupIndex,Tl(this))),n===ti)r.groupIndex=function(i,t,e){var n,a=i.getGroupColumns();if(e>=0)for(n=0;n<a.length;n++)a[n].groupIndex>=e&&a[n].groupIndex++;else for(e=0,n=0;n<a.length;n++)e=Math.max(e,a[n].groupIndex+1);return e}(this,0,d),h.groupIndex=s;else if(e>=0){var u=this._columns[l];r.visibleIndex=!u||h.ownerBand!==u.ownerBand||Vl(this,h)^Vl(this,u)?wl:u.visibleIndex}var c=n!==ii;h.visible!==c&&(r.visible=c),this.columnOption(h.index,r)}}changeSortOrder(t,e){var a={},n=this.option("sorting"),r=n&&n.mode,l=this._columns[t];("single"===r||"multiple"===r)&&l&&l.allowSorting&&(("single"===r||!e)&&!(0,v.O9)(l.groupIndex)&&(0,I.__)(this._columns,function(d){d!==t&&this.sortOrder&&((0,v.O9)(this.groupIndex)||delete this.sortOrder,delete this.sortIndex)}),Ia(e)?l.sortOrder!==e&&(a.sortOrder=e):"none"===e?l.sortOrder&&(a.sortIndex=void 0,a.sortOrder=void 0):function(d){if("ctrl"===e){if(!("sortOrder"in d)||!("sortIndex"in d))return!1;a.sortOrder=void 0,a.sortIndex=void 0}else a.sortOrder=(0,v.O9)(d.groupIndex)||(0,v.O9)(d.sortIndex)?"desc"===d.sortOrder?"asc":"desc":"asc"}(l)),this.columnOption(l.index,a)}getSortDataSourceParameters(t){var e=[],a=[];return(0,I.__)(this._columns,function(){(this.dataField||this.selector||this.calculateCellValue)&&(0,v.O9)(this.sortIndex)&&!(0,v.O9)(this.groupIndex)&&(e[this.sortIndex]=this)}),(0,I.__)(e,function(){if(Ia(this&&this.sortOrder)){var r={selector:this.calculateSortValue||this.displayField||this.calculateDisplayValue||t&&this.selector||this.dataField||this.calculateCellValue,desc:"desc"===this.sortOrder};this.sortingMethod&&(r.compare=this.sortingMethod.bind(this)),a.push(r)}}),a.length>0?a:null}getGroupDataSourceParameters(t){var e=[];return(0,I.__)(this.getGroupColumns(),function(){var a=this.calculateGroupValue||this.displayField||this.calculateDisplayValue||t&&this.selector||this.dataField||this.calculateCellValue;if(a){var n={selector:a,desc:"desc"===this.sortOrder,isExpanded:!!this.autoExpandGroup};this.sortingMethod&&(n.compare=this.sortingMethod.bind(this)),e.push(n)}}),e.length>0?e:null}refresh(t){var e=[];return(0,I.__)(this._columns,function(){var{lookup:a}=this;if(a&&!this.calculateDisplayValue){if(t&&a.valueMap)return;a.update&&e.push(a.update())}}),w.z7.apply(_.A,e).done(Oa.bind(null,this))}_updateColumnOptions(t,e){t.selector=t.selector||function(r){return t.calculateCellValue(r)},this._reinitAfterLookupChanges&&this._previousColumns?(t.selector.columnIndex=e,t.selector.originalCallback=this._previousColumns[e].selector.originalCallback):(t.selector.columnIndex=e,t.selector.originalCallback=t.selector),(0,I.__)(["calculateSortValue","calculateGroupValue","calculateDisplayValue"],(r,s)=>{var o=t[s];if((0,v.Tn)(o))if(o.originalCallback)t[s].context.column=t;else{var l={column:t};t[s]=function(d){return o.call(l.column,d)},t[s].originalCallback=o,t[s].columnIndex=e,t[s].context=l}}),(0,v.Kg)(t.calculateDisplayValue)&&(t.displayField=t.calculateDisplayValue,t.calculateDisplayValue=(0,q.Hz)(t.displayField)),t.calculateDisplayValue&&(t.displayValueMap=t.displayValueMap||{}),Ol(t,t.dataType);var{lookup:a}=t;a&&Ol(a,a.dataType);var n=a?a.dataType:t.dataType;n&&(t.alignment=t.alignment||function(i,t){switch(i){case"number":return"right";case"boolean":return"center";default:return(0,se.n)(t)}}(n,this.option("rtlEnabled")),t.format=t.format||F.getFormatByDataType(n),t.customizeText=t.customizeText||Il(n),t.defaultFilterOperations=t.defaultFilterOperations||!a&&Dm[n]||[],(0,v.O9)(t.filterOperations)||yl(t),t.defaultFilterOperation=t.filterOperations&&t.filterOperations[0]||"=",t.showEditorAlways=(0,v.O9)(t.showEditorAlways)?t.showEditorAlways:"boolean"===n&&!t.cellTemplate&&!t.lookup)}updateColumnDataTypes(t){var e=this,a=e.option("dateSerializationFormat"),n=e._getFirstItems(t),r=!1;return(0,I.__)(e._columns,(s,o)=>{var l,d,h,u,c,{lookup:g}=o;if(F.isDateType(o.dataType)&&void 0===o.serializationFormat&&(o.serializationFormat=a),g&&F.isDateType(g.dataType)&&void 0===o.serializationFormat&&(g.serializationFormat=a),o.calculateCellValue&&n.length){if(!o.dataType||g&&!g.dataType){for(l=0;l<n.length;l++)d=o.calculateCellValue(n[l]),o.dataType||(c=er(d),(h=h||c)&&c&&h!==c&&(h="string")),g&&!g.dataType&&(c=er(F.getDisplayValue(o,d,n[l])),(u=u||c)&&c&&u!==c&&(u="string"));(h||u)&&(h&&(o.dataType=h),g&&u&&(g.dataType=u),r=!0)}if(void 0===o.serializationFormat||g&&void 0===g.serializationFormat)for(l=0;l<n.length;l++)d=o.calculateCellValue(n[l],!0),void 0===o.serializationFormat&&(o.serializationFormat=Sl(o.dataType,d)),g&&void 0===g.serializationFormat&&(g.serializationFormat=Sl(g.dataType,g.calculateCellValue(d,!0)))}e._updateColumnOptions(o,s)}),r}_customizeColumns(t){var e=this.option("customizeColumns");e&&(t.some(n=>(0,v.Gv)(n.ownerBand))&&Tt(this),e(t),ni(this,ai(this,t)))}updateColumns(t,e,a){if(e||this.updateSortingGrouping(t),!t||t.isLoaded()){var n=t?t.sort()||[]:this.getSortDataSourceParameters(),r=t?t.group()||[]:this.getGroupDataSourceParameters(),s=t?.lastLoadOptions().filter;a||this._customizeColumns(this._columns),Tt(this);var o=this._columns;return(0,w.z7)(this.refresh(!0)).always(()=>{this._columns===o&&(this._updateChanges(t,{sorting:n,grouping:r,filtering:s}),Di(this))})}}_updateChanges(t,e){t&&(this.updateColumnDataTypes(t),this._dataSourceApplied=!0),F.equalSortParameters(e.sorting,this.getSortDataSourceParameters())||Ge(this,"sorting"),F.equalSortParameters(e.grouping,this.getGroupDataSourceParameters())||Ge(this,"grouping");var a=this.getController("data");a&&!F.equalFilterParameters(e.filtering,a.getCombinedFilter())&&Ge(this,"filtering"),Ge(this,"columns")}updateSortingGrouping(t,e){var n,r,a=this,s=function(c,g,m){(0,I.__)(c,(f,x)=>{if(delete x[m],g)for(var b=0;b<g.length;b++){var{selector:S}=g[b],{isExpanded:T}=g[b];if(S===x.dataField||S===x.name||S===x.selector||S===x.calculateCellValue||S===x.calculateGroupValue||S===x.calculateDisplayValue){x.sortOrder=e?"sortOrder"in x?x.sortOrder:g[b].desc?"desc":"asc":x.sortOrder||(g[b].desc?"desc":"asc"),void 0!==T&&(x.autoExpandGroup=T),x[m]=b;break}}})};if(t){n=F.normalizeSortingInfo(t.sort());var o=F.normalizeSortingInfo(t.group()),l=a.getGroupDataSourceParameters(),d=a.getSortDataSourceParameters(),h=!F.equalSortParameters(o,l,!0),u=!h&&!F.equalSortParameters(o,l);a._columns.length||((0,I.__)(o,(c,g)=>{a._columns.push(g.selector)}),(0,I.__)(n,(c,g)=>{(0,v.Tn)(g.selector)||a._columns.push(g.selector)}),ni(a,ai(a,a._columns))),(e||!l&&!a._hasUserState)&&(h||u)&&(s(a._columns,o,"groupIndex"),e&&(h&&Ge(a,"grouping"),u&&Ge(a,"groupExpanding"),r=!0)),(e||!d&&!a._hasUserState)&&!F.equalSortParameters(n,d)&&(s(a._columns,n,"sortIndex"),e&&(Ge(a,"sorting"),r=!0)),r&&Di(a)}}updateFilter(t,e,a,n){if(!Array.isArray(t))return t;if(a=void 0!==(t=(0,y.X)([],t)).columnIndex?t.columnIndex:a,n=void 0!==t.filterValue?t.filterValue:n,(0,v.Kg)(t[0])&&"!"!==t[0]){var r=this.columnOption(t[0]);e?(0,Sm.A)().forceIsoDateParsing&&r&&r.serializeValue&&t.length>1&&(t[t.length-1]=r.serializeValue(t[t.length-1],"filter")):r&&r.selector&&(t[0]=r.selector,t[0].columnIndex=r.index)}else(0,v.Tn)(t[0])&&(t[0].columnIndex=a,t[0].filterValue=n,t[0].selectedFilterOperation=t.selectedFilterOperation);for(var s=0;s<t.length;s++)t[s]=this.updateFilter(t[s],e,a,n);return t}columnCount(){return this._columns?this._columns.length:0}columnOption(t,e,a,n){var r=this,s=r._columns.concat(r._commandColumns),o=Ll(s,t);if(o){if(1===arguments.length)return(0,y.X)({},o);if((0,v.Kg)(e)){if(2===arguments.length)return ar(r,o,e);ar(r,o,e,a,n)}else(0,v.Gv)(e)&&(0,I.__)(e,(l,d)=>{ar(r,o,l,d,n)});Di(r)}}clearSorting(){var t=this.columnCount();this.beginUpdate();for(var e=0;e<t;e++)this.columnOption(e,"sortOrder",void 0),delete Ll(this._columns,e).sortOrder;this.endUpdate()}clearGrouping(){var t=this.columnCount();this.beginUpdate();for(var e=0;e<t;e++)this.columnOption(e,"groupIndex",void 0);this.endUpdate()}getVisibleIndex(t,e){for(var a=this.getVisibleColumns(e),n=a.length-1;n>=0;n--)if(a[n].index===t)return n;return-1}getVisibleIndexByColumn(t,e){var a=this.getVisibleColumns(e),n=a.filter(r=>r.index===t.index&&r.command===t.command)[0];return a.indexOf(n)}getVisibleColumnIndex(t,e){var a=this.columnOption(t,"index");return this.getVisibleIndex(a,e)}addColumn(t){var e=Sa(this,t),a=this._columns.length;this._columns.push(e),e.isBand&&(this._columns=ai(this,this._columns),e=this._columns[a]),e.added=t,Tt(this,e),this.updateColumns(this._dataSource),this._checkColumns()}deleteColumn(t){var i,e=this.columnOption(t);if(e&&e.index>=0){if((i=this._columns).forEach(t=>{(0,v.O9)(t.ownerBand)&&(t.ownerBand=i[t.ownerBand])}),this._columns.splice(e.index,1),e.isBand){var a=this.getChildrenByBandColumn(e.index).map(n=>n.index);this._columns=this._columns.filter(n=>a.indexOf(n.index)<0)}Tt(this),this.updateColumns(this._dataSource)}}addCommandColumn(t){var e=this._commandColumns.filter(a=>a.command===t.command)[0];e||this._commandColumns.push(e=t)}getUserState(){var a,t=this._columns,e=[];function n(r,s){void 0!==t[a][s]&&(e[a][s]=t[a][s])}for(a=0;a<t.length;a++)e[a]={},(0,I.__)(wa,n);return e}setName(t){t.name=t.name||t.dataField||t.type}setUserState(t){var e=this._dataSource,a=this.option("stateStoring.ignoreColumnOptionNames");if(t?.forEach(this.setName),!a){a=[];var n=this.getCommonSettings();this.option("columnChooser.enabled")||a.push("visible"),"none"===this.option("sorting.mode")&&a.push("sortIndex","sortOrder"),n.allowGrouping||a.push("groupIndex"),n.allowFixing||a.push("fixed","fixedPosition"),n.allowResizing||a.push("width","visibleWidth");var r=!this.option("filterPanel.visible");!this.option("filterRow.visible")&&r&&a.push("filterValue","selectedFilterOperation"),!this.option("headerFilter.visible")&&r&&a.push("filterValues","filterType")}this._columnsUserState=t,this._ignoreColumnOptionNames=a,this._hasUserState=!!t,Ge(this,"filtering"),this.init(!0),e&&(e.sort(this.getSortDataSourceParameters()),e.group(this.getGroupDataSourceParameters()))}_checkColumns(){var t={},e=!1,a=[];this._columns.forEach(n=>{var r,{name:s}=n,o=null===(r=n.columns)||void 0===r?void 0:r.length,l=n.allowEditing&&(n.dataField||n.setCellValue)&&!o;s?(t[s]&&a.push('"'.concat(s,'"')),t[s]=!0):l&&(e=!0)}),a.length&&J.A.log("E1059",a.join(", ")),e&&J.A.log("E1060")}_createCalculatedColumnOptions(t,e){var a={},{dataField:n}=t;if((Array.isArray(t.columns)&&t.columns.length||t.isBand)&&(a.isBand=!0,n=null),n){if((0,v.Kg)(n)){var r=(0,q.Hz)(n);a={caption:(0,qt.Bc)(n),calculateCellValue(s,o){var l=r(s);return this.deserializeValue&&!o?this.deserializeValue(l):l},setCellValue:Ym,parseValue(s){var o,l;return"number"===this.dataType?(0,v.Kg)(s)&&this.format?o=function(i,t){var e=ba.A.parse(i);if((0,v.kf)(e)){var a=ba.A.format(e,t),n=ba.A.format(e,"decimal");if(a===i||n===i)return e}}(s.trim(),this.format):(0,v.O9)(s)&&(0,v.kf)(s)&&(o=Number(s)):"boolean"===this.dataType?s===this.trueText?o=!0:s===this.falseText&&(o=!1):F.isDateType(this.dataType)?(l=et.A.parse(s,this.format))&&(o=l):o=s,o}}}a.allowFiltering=!0}else a.allowFiltering=!!t.calculateFilterExpression;return a.calculateFilterExpression=function(){return It.defaultCalculateFilterExpression.apply(this,arguments)},a.defaultFilterOperation="=",a.createFilterExpression=function(s,o){var l;return this.calculateFilterExpression&&(l=this.calculateFilterExpression.apply(this,arguments)),(0,v.Tn)(l)&&(l=[l,"=",!0]),l&&(l.columnIndex=this.index,l.filterValue=s,l.selectedFilterOperation=o),l},(!n||!(0,v.Kg)(n))&&(0,y.X)(!0,a,{allowSorting:!1,allowGrouping:!1,calculateCellValue:()=>null}),e&&(a.allowFixing=!1),t.dataType&&(a.userDataType=t.dataType),t.selectedFilterOperation&&!("defaultSelectedFilterOperation"in a)&&(a.defaultSelectedFilterOperation=t.selectedFilterOperation),t.lookup&&(a.lookup={calculateCellValue(s,o){return this.valueExpr&&(s=this.valueMap&&this.valueMap[s]),this.deserializeValue&&!o?this.deserializeValue(s):s},updateValueMap(){if(this.valueMap={},this.items)for(var s=(0,q.Hz)(this.valueExpr),o=(0,q.Hz)(this.displayExpr),l=0;l<this.items.length;l++){var d=this.items[l],h=o(d);this.valueMap[s(d)]=h,this.dataType=this.dataType||er(h)}},update(){var s=this,{dataSource:o}=s;if(o)if((0,v.Tn)(o)&&!xa.A.isWrapped(o)&&(o=o({})),(0,v.Qd)(o)||o instanceof Om.A||Array.isArray(o)){if(s.valueExpr){var l=(0,vi.ho)(o);return l.paginate=!1,(o=new Ii.q(l)).load().done(d=>{s.items=d,s.updateValueMap&&s.updateValueMap()})}}else J.A.log("E1016");else s.updateValueMap&&s.updateValueMap()}}),a.resizedCallbacks=(0,me.A)(),t.resized&&a.resizedCallbacks.add(t.resized.bind(t)),(0,I.__)(a,s=>{if((0,v.Tn)(a[s])&&0!==s.indexOf("default")){var o="default".concat(s.charAt(0).toUpperCase()).concat(s.substr(1));a[o]=a[s]}}),a}getRowCount(){return this._rowCount=this._rowCount||function(i){var t=1,e=i.getBandColumnsCache(),{columnParentByIndex:a}=e;return i._columns.forEach(n=>{var r=At(n.index,a),s=r.filter(o=>!o.visible);n.visible&&!s.length&&(t=Math.max(t,r.length+1))}),t}(this),this._rowCount}getRowIndex(t,e){var a=this._columns[t],n=this.getBandColumnsCache();return a&&(e||a.visible&&!a.command&&!(0,v.O9)(a.groupIndex))?At(t,n.columnParentByIndex).length:0}getChildrenByBandColumn(t,e){var a=this.getBandColumnsCache(),n=Mm(t,a.columnChildrenByIndex,!e);return e?n.filter(r=>r.visible&&!r.command).sort((r,s)=>r.visibleIndex-s.visibleIndex):n}isParentBandColumn(t,e){var a=!1,n=this._columns[t],r=this.getBandColumnsCache(),s=n&&At(t,r.columnParentByIndex);return s&&(0,I.__)(s,(o,l)=>{if(l.index===e)return a=!0,!1}),a}isParentColumnVisible(t){var e=!0,a=this.getBandColumnsCache(),n=t>=0&&At(t,a.columnParentByIndex);return n&&(0,I.__)(n,(r,s)=>e=e&&s.visible),e}getColumnId(t){return t.command&&t.type===gt?nr(this,t)?"type:".concat(t.type):"command:".concat(t.command):t.index}getCustomizeTextByDataType(t){return Il(t)}getHeaderContentAlignment(t){return this.option("rtlEnabled")?"left"===t?"right":"left":t}}}},iC=Aa.controllers.columns.inherit({_getFirstItems(i){return this.callBase(i).map(t=>t.data)},getFirstDataColumnIndex(){for(var i=this.getVisibleColumns(),t=i.length,e=0,a=0;a<=t-1;a++)if(!(0,v.O9)(i[a].command)){e=i[a].index;break}return e}});G.registerModule("columns",{defaultOptions:Aa.defaultOptions,controllers:{columns:iC}});var aC=D(4014),Ta=D(2097),nC=D(6305),kl=D(764),Nl=function(i,t,e){var a=i._dataSource;if(a){if(void 0!==e){if(i._getPagingOptionValue(t)!==e){"pageSize"===t&&a.pageIndex(0),a[t](e),i._skipProcessingPagingChange=!0,i.option("paging.".concat(t),e),i._skipProcessingPagingChange=!1;var r=a.pageIndex();return i._isPaging="pageIndex"===t,a["pageIndex"===t?"load":"reload"]().done(()=>{i._isPaging=!1,i.pageChanged.fire(r)})}return(0,w.cY)().resolve().promise()}return a[t]()}return 0},rC=Z.Controller.inherit(kl.A),Ra={defaultOptions:()=>({loadingTimeout:0,dataSource:null,cacheEnabled:!0,repaintChangesOnly:!1,highlightChanges:!1,onDataErrorOccurred:null,remoteOperations:"auto",paging:{enabled:!0,pageSize:void 0,pageIndex:void 0}}),controllers:{data:class sC extends rC{init(){var t=this;t._items=[],t._cachedProcessedItems=null,t._columnsController=this.getController("columns"),t._isPaging=!1,t._currentOperationTypes=null,t._dataChangedHandler=e=>{t._currentOperationTypes=this._dataSource.operationTypes(),t._handleDataChanged(e),t._currentOperationTypes=null},t._columnsChangedHandler=t._handleColumnsChanged.bind(t),t._loadingChangedHandler=t._handleLoadingChanged.bind(t),t._loadErrorHandler=t._handleLoadError.bind(t),t._customizeStoreLoadOptionsHandler=t._handleCustomizeStoreLoadOptions.bind(t),t._changingHandler=t._handleChanging.bind(t),t._dataPushedHandler=t._handleDataPushed.bind(t),t._columnsController.columnsChanged.add(t._columnsChangedHandler),t._isLoading=!1,t._isCustomLoading=!1,t._repaintChangesOnly=void 0,t._changes=[],t.createAction("onDataErrorOccurred"),t.dataErrorOccurred.add(e=>t.executeAction("onDataErrorOccurred",{error:e})),t._refreshDataSource()}_getPagingOptionValue(t){return this._dataSource[t]()}callbackNames(){return["changed","loadingChanged","dataErrorOccurred","pageChanged","dataSourceChanged","pushed"]}callbackFlags(t){if("dataErrorOccurred"===t)return{stopOnFalse:!0}}publicMethods(){return["beginCustomLoading","endCustomLoading","refresh","filter","clearFilter","getCombinedFilter","keyOf","byKey","getDataByKeys","pageIndex","pageSize","pageCount","totalCount","_disposeDataSource","getKeyByRowIndex","getRowIndexByKey","getDataSource","getVisibleRows","repaintRows"]}reset(){this._columnsController.reset(),this._items=[],this._refreshDataSource()}_handleDataSourceChange(t){if(t.value===t.previousValue||this.option("columns")&&Array.isArray(t.value)&&Array.isArray(t.previousValue)){if(t.value!==t.previousValue){var a=this.store();a&&(a._array=t.value)}return this.needToRefreshOnDataSourceChange(t)&&this.refresh(this.option("repaintChangesOnly")),!0}return!1}needToRefreshOnDataSourceChange(t){return!0}optionChanged(t){var a,n,e=this;function r(){t.handled=!0}if("dataSource"===t.name&&t.name===t.fullName&&this._handleDataSourceChange(t))r();else switch(t.name){case"cacheEnabled":case"repaintChangesOnly":case"highlightChanges":case"loadingTimeout":r();break;case"remoteOperations":case"keyExpr":case"dataSource":case"scrolling":r(),e.reset();break;case"paging":if((a=e.dataSource())&&(n=e._setPagingOptions(a))){var s=a.pageIndex();this._isPaging=n.isPageIndexChanged,a.load().done(()=>{this._isPaging=!1,e.pageChanged.fire(s)})}r();break;case"rtlEnabled":e.reset();break;case"columns":(a=e.dataSource())&&a.isLoading()&&t.name===t.fullName&&(this._useSortingGroupingFromColumns=!0,a.load());break;default:super.optionChanged(t)}}isReady(){return!this._isLoading}getDataSource(){return this._dataSource&&this._dataSource._dataSource}getCombinedFilter(t){return this.combinedFilter(void 0,t)}combinedFilter(t,e){if(!this._dataSource)return t;var a=t??this._dataSource.filter();if(this._columnsController.isDataSourceApplied()||this._columnsController.isAllDataTypesDefined()){var r=this._calculateAdditionalFilter();a=r?F.combineFilters([r,a]):a}var s=this._dataSource.remoteOperations().filtering||e;return this._columnsController.updateFilter(a,s)}waitReady(){return this._updateLockCount?(this._readyDeferred=new w.cY,this._readyDeferred):(0,w.z7)()}_endUpdateCore(){var t=this._changes;if(t.length){this._changes=[];var e=t.every(a=>a.repaintChangesOnly);this.updateItems(1===t.length?t[0]:{repaintChangesOnly:e})}this._readyDeferred&&(this._readyDeferred.resolve(),this._readyDeferred=null)}_handleCustomizeStoreLoadOptions(t){var e,a=this._columnsController,n=this._dataSource,{storeLoadOptions:r}=t;t.isCustomLoading&&!r.isLoadingAll||(r.filter=this.combinedFilter(r.filter),1===(null===(e=r.filter)||void 0===e?void 0:e.length)&&"!"===r.filter[0]&&(t.data=[],t.extra=t.extra||{},t.extra.totalCount=0),a.isDataSourceApplied()||a.updateColumnDataTypes(n),this._columnsUpdating=!0,a.updateSortingGrouping(n,!this._useSortingGroupingFromColumns),this._columnsUpdating=!1,r.sort=a.getSortDataSourceParameters(),r.group=a.getGroupDataSourceParameters(),n.sort(r.sort),n.group(r.group),r.sort=a.getSortDataSourceParameters(!n.remoteOperations().sorting),t.group=a.getGroupDataSourceParameters(!n.remoteOperations().grouping))}_handleColumnsChanged(t){var r,s,o,e=this,{changeTypes:a}=t,{optionNames:n}=t;if(a.sorting||a.grouping)e._dataSource&&!e._columnsUpdating&&(e._dataSource.group(e._columnsController.getGroupDataSourceParameters()),e._dataSource.sort(e._columnsController.getSortDataSourceParameters()),e.reload());else if(a.columns&&(s=e._columnsController.columnOption(t.columnIndex,"filterValues"),(n.filterValues||n.filterType&&Array.isArray(s)||n.filterValue||n.selectedFilterOperation||n.allowFiltering)&&(r=e._columnsController.columnOption(t.columnIndex,"filterValue"),(Array.isArray(s)||void 0===t.columnIndex||(0,v.O9)(r)||!n.selectedFilterOperation||n.filterValue)&&(e._applyFilter(),o=!0)),!e._needApplyFilter&&!F.checkChanges(n,["width","visibleWidth","filterValue","bufferedFilterValue","selectedFilterOperation","filterValues","filterType"])&&e._columnsController.columnsChanged.add(function d(h){var u;e._columnsController.columnsChanged.remove(d),e.updateItems({repaintChangesOnly:!1,virtualColumnsScrolling:null===(u=h?.changeTypes)||void 0===u?void 0:u.virtualColumnsScrolling})}),(0,v.O9)(n.visible))){var l=e._columnsController.columnOption(t.columnIndex);l&&((0,v.O9)(l.filterValue)||(0,v.O9)(l.filterValues))&&(e._applyFilter(),o=!0)}!o&&a.filtering&&e.reload()}_handleDataChanged(t){var e=this,a=e._dataSource,n=e._columnsController,r=!1;this._useSortingGroupingFromColumns=!1,a&&!e._isDataSourceApplying&&(e._isDataSourceApplying=!0,(0,w.z7)(e._columnsController.applyDataSource(a)).done(()=>{e._isLoading&&e._handleLoadingChanged(!1),r&&t&&t.isDelayed&&(t.isDelayed=!1),e._isDataSourceApplying=!1;var o,s=e._needApplyFilter;e._needApplyFilter=!1,s&&!e._isAllDataTypesDefined&&(o=e._calculateAdditionalFilter())&&o.length?(J.A.log("W1005",e.component.NAME),e._applyFilter()):e.updateItems(t,!0)}).fail(()=>{e._isDataSourceApplying=!1}),e._isDataSourceApplying&&(r=!0,e._handleLoadingChanged(!0)),e._needApplyFilter=!e._columnsController.isDataSourceApplied(),e._isAllDataTypesDefined=n.isAllDataTypesDefined())}_handleLoadingChanged(t){this._isLoading=t,this._fireLoadingChanged()}_handleLoadError(t){this.dataErrorOccurred.fire(t)}_handleDataPushed(t){this.pushed.fire(t)}fireError(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];this.dataErrorOccurred.fire(J.A.Error.apply(J.A,e))}_setPagingOptions(t){var e=this.option("paging.pageIndex"),a=this.option("paging.pageSize"),n=this.option("paging.enabled"),r=this.option("scrolling.mode"),s="infinite"===r,l=n||"virtual"===r||s,d=!1,h=!1,u=!1;return t.requireTotalCount(!s),void 0!==n&&t.paginate()!==l&&(t.paginate(l),d=!0),void 0!==a&&t.pageSize()!==a&&(t.pageSize(a),h=!0),void 0!==e&&t.pageIndex()!==e&&(t.pageIndex(e),u=!0),!!(d||h||u)&&{isPaginateChanged:d,isPageSizeChanged:h,isPageIndexChanged:u}}_getSpecificDataSourceOption(){var t=this.option("dataSource");return Array.isArray(t)?{store:{type:"array",data:t,key:this.option("keyExpr")}}:t}_initDataSource(){var t=this._dataSource;super._initDataSource();var e=this._dataSource;if(this._useSortingGroupingFromColumns=!0,this._cachedProcessedItems=null,e){var a=this._setPagingOptions(e);this._isPaging=a?.isPageIndexChanged,this.setDataSource(e)}else t&&this.updateItems()}_loadDataSource(){var t=this,e=t._dataSource,a=new w.cY;return(0,w.z7)(this._columnsController.refresh(!0)).always(()=>{e?e.load().done(function(){t._isPaging=!1,a.resolve.apply(a,arguments)}).fail(a.reject):a.resolve()}),a.promise()}_beforeProcessItems(t){return t.slice(0)}getRowIndexDelta(){return 0}getDataIndex(t){var e=this._items,a="append"===t.changeType&&e.length>0?e[e.length-1]:null;return(0,v.O9)(a?.dataIndex)?a.dataIndex+1:0}_processItems(t,e){var a=this,n=a.getRowIndexDelta(),{changeType:r}=e,l={visibleColumns:a._columnsController.getVisibleColumns(null,"loadingAll"===r),dataIndex:this.getDataIndex(e)},d=[];return(0,I.__)(t,(h,u)=>{(0,v.O9)(u)&&(l.rowIndex=h-n,u=a._processItem(u,l),d.push(u))}),d}_processItem(t,e){return t=this._generateDataItem(t,e),(t=this._processDataItem(t,e)).dataIndex=e.dataIndex++,t}_generateDataItem(t,e){return{rowType:"data",data:t,key:this.keyOf(t)}}_processDataItem(t,e){return t.values=this.generateDataValues(t.data,e.visibleColumns),t}generateDataValues(t,e,a){for(var r,n=[],s=0;s<e.length;s++){var o=e[s];r=a?void 0:null,o.command||(o.calculateCellValue?r=o.calculateCellValue(t):o.dataField&&(r=t[o.dataField])),n.push(r)}return n}_applyChange(t){"update"===t.changeType?this._applyChangeUpdate(t):this.items().length&&t.repaintChangesOnly&&"refresh"===t.changeType?this._applyChangesOnly(t):"refresh"===t.changeType&&this._applyChangeFull(t)}_applyChangeFull(t){this._items=t.items.slice(0)}_getRowIndices(t){var e=t.rowIndices.slice(0),a=this.getRowIndexDelta();e.sort((s,o)=>s-o);for(var n=0;n<e.length;n++){var r=e[n];t.allowInvisibleRowIndices&&(r+=a),r<0&&(e.splice(n,1),n--)}return e}_applyChangeUpdate(t){var d,e=this,{items:a}=t,n=e._getRowIndices(t),r=e.getRowIndexDelta(),s=e.option("repaintChangesOnly"),o=-1,l=0;t.items=[],t.rowIndices=[],t.columnIndices=[],t.changeTypes=[];var h=function(u,c,g){var m=u&&c&&(0,V.RL)(u.key,c.key);return m&&g&&(m=u.rowType===c.rowType&&("detail"!==c.rowType||u.isEditing===c.isEditing)),m};(0,I.__)(n,(u,c)=>{var g;if(o!==(c+=l+r)){o=c;var m=e._items[c],f=e._items[c+1],x=a[c],b=a[c+1],S=h(m,f)||h(x,b);if(x&&(x.rowIndex=c,t.items.push(x)),m&&x&&h(m,x,S))d="update",e._items[c]=x,m.visible!==x.visible?t.items.splice(-1,1,{visible:x.visible}):s&&!t.isFullUpdate&&(g=e._partialUpdateRow(m,x,c-r));else if(x&&!m||b&&h(m,b,S))d="insert",e._items.splice(c,0,x),l++;else if(m&&!x||f&&h(x,f,S))d="remove",e._items.splice(c,1),l--,o=-1;else{if(!x)return;d="update",e._items[c]=x}t.rowIndices.push(c-r),t.changeTypes.push(d),t.columnIndices.push(g)}})}_isCellChanged(t,e,a,n,r){if(JSON.stringify(t.values[n])!==JSON.stringify(e.values[n]))return!0;function s(o,l){return!!o.modifiedValues&&void 0!==o.modifiedValues[l]}return s(t,n)!==s(e,n)}_getChangedColumnIndices(t,e,a,n){var r;if(t.rowType===e.rowType){if("group"!==e.rowType&&"groupFooter"!==e.rowType&&(r=[],"detail"!==e.rowType))for(var s=0;s<t.values.length;s++)this._isCellChanged(t,e,a,s,n)&&r.push(s);"group"===e.rowType&&e.isExpanded===t.isExpanded&&t.cells&&(r=t.cells.map((o,l)=>{var d;return"groupExpand"!==(null===(d=o.column)||void 0===d?void 0:d.type)?l:-1}).filter(o=>o>=0))}return r}_partialUpdateRow(t,e,a,n){var r=this._getChangedColumnIndices(t,e,a,n);return r?.length&&this.option("dataRowTemplate")&&(r=void 0),r&&(t.cells&&t.cells.forEach((s,o)=>{!(r.indexOf(o)>=0)&&s&&s.update&&s.update(e)}),e.update=t.update,e.watch=t.watch,e.cells=t.cells,n&&(e.oldValues=t.values),t.update&&t.update(e)),r}_isItemEquals(t,e){var a,n,r,s;if(JSON.stringify(t.values)!==JSON.stringify(e.values)||["modified","isNewRow","removed","isEditing"].some(h=>t[h]!==e[h]))return!1;if("group"===t.rowType||"groupFooter"===t.rowType){var o=t.isExpanded===e.isExpanded,l=JSON.stringify(t.summaryCells)===JSON.stringify(e.summaryCells),d=(null===(a=t.data)||void 0===a?void 0:a.isContinuation)===(null===(n=e.data)||void 0===n?void 0:n.isContinuation)&&(null===(r=t.data)||void 0===r?void 0:r.isContinuationOnNextPage)===(null===(s=e.data)||void 0===s?void 0:s.isContinuationOnNextPage);if(!o||!l||!d)return!1}return!0}_applyChangesOnly(t){var e,a=[],n=[],r=[],s=[],o={},l=null===(e=t?.isLiveUpdate)||void 0===e||e;function d(g){if(g)return"".concat(g.rowType,",").concat(JSON.stringify(g.key))}var h=this._items,u=h.slice();t.items.forEach((g,m)=>{var f=d(g);o[f]=m,g.rowIndex=m});var c=(0,aC.p)(u,t.items,d,(g,m)=>!!this._isItemEquals(g,m)&&(g.cells&&(g.update&&g.update(m),g.cells.forEach(f=>{f&&f.update&&f.update(m,!0)})),!0));c?(c.forEach(g=>{switch(g.type){case"update":var{index:m}=g,f=g.data,{oldItem:x}=g,b=this._partialUpdateRow(x,f,m,l);a.push(m),r.push("update"),s.push(f),h[m]=f,n.push(b);break;case"insert":a.push(g.index),r.push("insert"),s.push(g.data),n.push(void 0),h.splice(g.index,0,g.data);break;case"remove":a.push(g.index),r.push("remove"),h.splice(g.index,1),s.push(g.oldItem),n.push(void 0)}}),t.repaintChangesOnly=!0,t.changeType="update",t.rowIndices=a,t.columnIndices=n,t.changeTypes=r,t.items=s,u.length&&(t.isLiveUpdate=!0),this._correctRowIndices(g=>{var m=this._rowIndexOffset||0,f=this.getRowIndexOffset(),b=d(u[g-m]),S=o[b];return S>=0?S+f-g:0})):this._applyChangeFull(t)}_correctRowIndices(t){}_afterProcessItems(t,e){return t}_updateItemsCore(t){var e,a=this._dataSource;if(t.changeType=t.changeType||"refresh",a){var r=this._cachedProcessedItems;t.useProcessedItemsCache&&r?e=r:(e=t.items||a.items(),e=this._beforeProcessItems(e),e=this._processItems(e,t),this._cachedProcessedItems=e),e=this._afterProcessItems(e,t),t.items=e;var s=this._items.length===e.length&&this._items;this._applyChange(t);var o=this.getRowIndexDelta();(0,I.__)(this._items,(l,d)=>{var h;d.rowIndex=l-o,s&&(d.cells=null!==(h=s[l].cells)&&void 0!==h?h:[]);var u=e[l];u&&(d.loadIndex=u.loadIndex)}),this._rowIndexOffset=this.getRowIndexOffset()}else this._items=[]}_handleChanging(t){var e=this.getVisibleRows();this.dataSource()&&t.changes.forEach(n=>{if("insert"===n.type&&n.index>=0){for(var r=0,s=0;s<n.index;s++){var o=e[s];o&&("data"===o.rowType||"group"===o.rowType)&&r++}n.index=r}})}updateItems(t,e){var a;if(t=t||{},void 0!==this._repaintChangesOnly)t.repaintChangesOnly=null!==(a=t.repaintChangesOnly)&&void 0!==a?a:this._repaintChangesOnly,t.needUpdateDimensions=t.needUpdateDimensions||this._needUpdateDimensions;else if(t.changes)t.repaintChangesOnly=this.option("repaintChangesOnly");else if(e){var n=this.dataSource().operationTypes();t.repaintChangesOnly=n&&!n.grouping&&!n.filtering&&this.option("repaintChangesOnly"),t.isDataChanged=!0,n&&(n.reload||n.paging||n.groupExpanding)&&(t.needUpdateDimensions=!0)}!this._updateLockCount||t.cancel?(this._updateItemsCore(t),!t.cancel&&this._fireChanged(t)):this._changes.push(t)}loadingOperationTypes(){var t=this.dataSource();return t&&t.loadingOperationTypes()||{}}_fireChanged(t){this._currentOperationTypes&&(t.operationTypes=this._currentOperationTypes,this._currentOperationTypes=null),(0,V.zE)(()=>{this.changed.fire(t)})}isLoading(){return this._isLoading||this._isCustomLoading}_fireLoadingChanged(){this.loadingChanged.fire(this.isLoading(),this._loadingText)}_calculateAdditionalFilter(){return null}_applyFilter(){var t=this._dataSource;if(t)return t.pageIndex(0),this._isFilterApplying=!0,this.reload().done(()=>{this._isFilterApplying&&this.pageChanged.fire()})}resetFilterApplying(){this._isFilterApplying=!1}filter(t){var e=this._dataSource,a=e&&e.filter();if(0===arguments.length)return a;t=arguments.length>1?Array.prototype.slice.call(arguments,0):t,!F.equalFilterParameters(a,t)&&(e&&e.filter(t),this._applyFilter())}clearFilter(t){var e=this._columnsController,a=function(n){for(var r=e.columnCount(),s=0;s<r;s++)e.columnOption(s,n,void 0)};if(this.component.beginUpdate(),arguments.length>0)switch(t){case"dataSource":this.filter(null);break;case"search":this.searchByText("");break;case"header":a("filterValues");break;case"row":a("filterValue")}else this.filter(null),this.searchByText(""),a("filterValue"),a("bufferedFilterValue"),a("filterValues");this.component.endUpdate()}_fireDataSourceChanged(){var t=this;t.changed.add(function e(){t.changed.remove(e),t.dataSourceChanged.fire()})}_getDataSourceAdapter(){}_createDataSourceAdapterCore(t,e){var n=this._getDataSourceAdapter().create(this.component);return n.init(t,e),n}isLocalStore(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store())instanceof Ta.A}isCustomStore(t){return(t=t||this.store())instanceof nC.A}_createDataSourceAdapter(t){var e=this.option("remoteOperations"),a=t.store(),n={filtering:!0,sorting:!0,paging:!0,grouping:!0,summary:!0};return(0,v.Gv)(e)&&e.groupPaging&&(e=(0,y.X)({},n,e)),"auto"===e&&(e=this.isLocalStore(a)||this.isCustomStore(a)?{}:{filtering:!0,sorting:!0,paging:!0}),!0===e&&(e=n),this._createDataSourceAdapterCore(t,e)}setDataSource(t){var e=this._dataSource;!t&&e&&(e.cancelAll(),e.changed.remove(this._dataChangedHandler),e.loadingChanged.remove(this._loadingChangedHandler),e.loadError.remove(this._loadErrorHandler),e.customizeStoreLoadOptions.remove(this._customizeStoreLoadOptionsHandler),e.changing.remove(this._changingHandler),e.pushed.remove(this._dataPushedHandler),e.dispose(this._isSharedDataSource)),t&&(t=this._createDataSourceAdapter(t)),this._dataSource=t,t&&(this._fireDataSourceChanged(),this._isLoading=!t.isLoaded(),this._needApplyFilter=!0,this._isAllDataTypesDefined=this._columnsController.isAllDataTypesDefined(),t.changed.add(this._dataChangedHandler),t.loadingChanged.add(this._loadingChangedHandler),t.loadError.add(this._loadErrorHandler),t.customizeStoreLoadOptions.add(this._customizeStoreLoadOptionsHandler),t.changing.add(this._changingHandler),t.pushed.add(this._dataPushedHandler))}items(t){return this._items}isEmpty(){return!this.items().length}pageCount(){return this._dataSource?this._dataSource.pageCount():1}dataSource(){return this._dataSource}store(){var t=this._dataSource;return t&&t.store()}loadAll(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this,n=new w.cY,r=a._dataSource;if(r)if(t){var s={data:t,isCustomLoading:!0,storeLoadOptions:{isLoadingAll:!0},loadOptions:{filter:e?null:a.getCombinedFilter(),group:r.group(),sort:r.sort()}};r._handleDataLoaded(s),(0,w.z7)(s.data).done(l=>{var d;l=a._beforeProcessItems(l),n.resolve(a._processItems(l,{changeType:"loadingAll"}),null===(d=s.extra)||void 0===d?void 0:d.summary)}).fail(n.reject)}else if(r.isLoading())n.reject();else{var o=(0,y.X)({},r.loadOptions(),{isLoadingAll:!0,requireTotalCount:!1});r.load(o).done((l,d)=>{l=a._beforeProcessItems(l),l=a._processItems(l,{changeType:"loadingAll"}),n.resolve(l,d&&d.summary)}).fail(n.reject)}else n.resolve([]);return n}getKeyByRowIndex(t,e){var a=this.items(e)[t];if(a)return a.key}getRowIndexByKey(t,e){return F.getIndexByKey(t,this.items(e))}keyOf(t){var e=this.store();if(e)return e.keyOf(t)}byKey(t){var n,e=this.store(),a=this.getRowIndexByKey(t);if(e)return a>=0&&(n=(new w.cY).resolve(this.items()[a].data)),n||e.byKey(t)}key(){var t=this.store();if(t)return t.key()}getRowIndexOffset(t){return 0}getDataByKeys(t){var e=this,a=new w.cY,n=[],r=[];return(0,I.__)(t,(s,o)=>{n.push(e.byKey(o).done(l=>{r[s]=l}))}),w.z7.apply(_.A,n).always(()=>{a.resolve(r)}),a}pageIndex(t){return Nl(this,"pageIndex",t)}pageSize(t){return Nl(this,"pageSize",t)}beginCustomLoading(t){this._isCustomLoading=!0,this._loadingText=t||"",this._fireLoadingChanged()}endCustomLoading(){this._isCustomLoading=!1,this._loadingText=void 0,this._fireLoadingChanged()}refresh(t){!0===t?t={reload:!0,changesOnly:!0}:t||(t={lookup:!0,selection:!0,reload:!0});var e=this,a=e.getDataSource(),{changesOnly:n}=t,r=new w.cY,s=function(){e._repaintChangesOnly=!!n};return(0,w.z7)(!t.lookup||e._columnsController.refresh()).always(()=>{t.load||t.reload?(a&&a.on("customizeLoadResult",s),(0,w.z7)(e.reload(t.reload,n)).always(()=>{a&&a.off("customizeLoadResult",s),e._repaintChangesOnly=void 0}).done(r.resolve).fail(r.reject)):(e.updateItems({repaintChangesOnly:t.changesOnly}),r.resolve())}),r.promise()}getVisibleRows(){return this.items()}_disposeDataSource(){this.setDataSource(null)}dispose(){this._disposeDataSource(),super.dispose()}repaintRows(t,e){((t=Array.isArray(t)?t:[t]).length>1||(0,v.O9)(t[0]))&&this.updateItems({changeType:"update",rowIndices:t,isFullUpdate:!e})}skipProcessingPagingChange(t){return this._skipProcessingPagingChange&&("paging.pageIndex"===t||"paging.pageSize"===t)}getUserState(){return{searchText:this.option("searchPanel.text"),pageIndex:this.pageIndex(),pageSize:this.pageSize()}}getCachedStoreData(){return this._dataSource&&this._dataSource.getCachedStoreData()}isLastPageLoaded(){return this.pageIndex()===this.pageCount()-1}load(){var t;return null===(t=this._dataSource)||void 0===t?void 0:t.load()}reload(t,e){var a;return null===(a=this._dataSource)||void 0===a?void 0:a.reload(t,e)}push(){var t;return null===(t=this._dataSource)||void 0===t?void 0:t.push(...arguments)}itemsCount(){var t;return this._dataSource?null===(t=this._dataSource)||void 0===t?void 0:t.itemsCount():0}totalItemsCount(){var t;return this._dataSource?null===(t=this._dataSource)||void 0===t?void 0:t.totalItemsCount():0}hasKnownLastPage(){var t;return!this._dataSource||(null===(t=this._dataSource)||void 0===t?void 0:t.hasKnownLastPage())}isLoaded(){var t;return!this._dataSource||(null===(t=this._dataSource)||void 0===t?void 0:t.isLoaded())}totalCount(){var t;return this._dataSource?null===(t=this._dataSource)||void 0===t?void 0:t.totalCount():0}}}},Fe=D(1774);const Hl=Z.Controller.inherit(function(){function i(o,l){if(o&&(o=o.slice(0),l))for(var d=0;d<o.length;d++)o[d]=(0,y.X)({key:o[d].key},o[d]),o[d].items=i(o[d].items,l-1);return o}function t(o,l,d){var h={reload:!0,fullReload:!0};return l&&((h={sorting:!F.equalSortParameters(o.sort,l.sort),grouping:!F.equalSortParameters(o.group,l.group,!0),groupExpanding:!F.equalSortParameters(o.group,l.group)||l.groupExpand,filtering:!F.equalFilterParameters(o.filter,l.filter),pageIndex:o.pageIndex!==l.pageIndex,skip:o.skip!==l.skip,take:o.take!==l.take,pageSize:o.pageSize!==l.pageSize,fullReload:d,reload:!1,paging:!1}).reload=d||h.sorting||h.grouping||h.filtering,h.paging=h.pageIndex||h.pageSize||h.take),h}function e(o,l){var d=F.normalizeSortingInfo(o.group||o.storeLoadOptions.group||o.loadOptions.group).length,h=[];if(a(h,o,d))return h;l&&function(u,c,g){var m,f,x=u.length,{storeLoadOptions:b}=c;if(void 0!==b.skip&&b.take&&!g){var S=[];a(S,c,g,!0);var T=S.length;(x||T)&&(c.skip=null!==(m=c.skip)&&void 0!==m?m:b.skip,c.take=null!==(f=c.take)&&void 0!==f?f:b.take),x&&(b.skip+=x,b.take-=x,c.cachedDataPartBegin=u),T&&(b.take-=T,c.cachedDataPartEnd=S.reverse())}}(h,o,d)}function a(o,l,d,h){var u,c,g,m,f,{storeLoadOptions:x}=l,b=null!==(c=null!==(u=l.take)&&void 0!==u?u:x.take)&&void 0!==c?c:0,S=null===(g=l.cachedData)||void 0===g?void 0:g.items;if(b&&S){for(var T=null!==(f=null!==(m=l.skip)&&void 0!==m?m:x.skip)&&void 0!==f?f:0,B=0;B<b;B++){var M=h?b-1-B:B,L=M+T,z=S[L];if(void 0===z&&L in S)return!0;var H=n(l,z,d,M,b);if(!H)return!1;o.push(H)}return!0}return!1}function n(o,l,d,h,u){return d&&l?function m(f,x,b,S){if(x&&f){var T=(0,N.A)({},f),B=b[0]||0,M=S[0],{items:L}=f;if(L){if(void 0===M&&!L[B])return;T.items=[],b.length&&(T.isContinuation=!0),M&&(T.isContinuationOnNextPage=f.count>M);for(var z=0;void 0===M?L[z+B]:z<M;z++){var K=z+1===M,W=m(L[z+B],x-1,0===z?b.slice(1):[],K?S.slice(1):[]);if(void 0===W)return;T.items.push(W)}}return T}return f}(l,d,0===h&&o.skips||[],h===u-1&&o.takes||[]):l}function r(o,l,d,h){if(d&&l){var u=(0,N.A)({},l);delete u.isContinuation,delete u.isContinuationOnNextPage;var c=h[0]||0;return l.items&&(u.items=o?.items||{},l.items.forEach((g,m)=>{var f=m+c,x=0===m?h.slice(1):[];u.items[f]=r(u.items[f],g,d-1,x)})),u}return l}var s={init(o,l){var d=this;d._dataSource=o,d._remoteOperations=l||{},d._isLastPage=!o.isLastPage(),d._hasLastPage=!1,d._currentTotalCount=0,d._cachedData={items:{}},d._lastOperationTypes={},d._eventsStrategy=o._eventsStrategy,d._totalCountCorrection=0,d._isLoadingAll=!1,d.changed=(0,me.A)(),d.loadingChanged=(0,me.A)(),d.loadError=(0,me.A)(),d.customizeStoreLoadOptions=(0,me.A)(),d.changing=(0,me.A)(),d.pushed=(0,me.A)(),d._dataChangedHandler=d._handleDataChanged.bind(d),d._customizeStoreLoadOptionsHandler=d._handleCustomizeStoreLoadOptions.bind(d),d._dataLoadedHandler=d._handleDataLoaded.bind(d),d._loadingChangedHandler=d._handleLoadingChanged.bind(d),d._loadErrorHandler=d._handleLoadError.bind(d),d._pushHandler=d._handlePush.bind(d),d._changingHandler=d._handleChanging.bind(d),o.on("changed",d._dataChangedHandler),o.on("customizeStoreLoadOptions",d._customizeStoreLoadOptionsHandler),o.on("customizeLoadResult",d._dataLoadedHandler),o.on("loadingChanged",d._loadingChangedHandler),o.on("loadError",d._loadErrorHandler),o.on("changing",d._changingHandler),o.store().on("beforePush",d._pushHandler),(0,I.__)(o,(h,u)=>{!d[h]&&(0,v.Tn)(u)&&(d[h]=function(){return this._dataSource[h].apply(this._dataSource,arguments)})})},remoteOperations(){return this._remoteOperations},dispose(o){var l=this._dataSource,d=l.store();l.off("changed",this._dataChangedHandler),l.off("customizeStoreLoadOptions",this._customizeStoreLoadOptionsHandler),l.off("customizeLoadResult",this._dataLoadedHandler),l.off("loadingChanged",this._loadingChangedHandler),l.off("loadError",this._loadErrorHandler),l.off("changing",this._changingHandler),d&&d.off("beforePush",this._pushHandler),o||l.dispose()},refresh(o,l){var d=this._dataSource;l.reload&&(this.resetCurrentTotalCount(),this._isLastPage=!d.paginate(),this._hasLastPage=this._isLastPage)},resetCurrentTotalCount(){this._currentTotalCount=0,this._totalCountCorrection=0},resetCache(){this._cachedStoreData=void 0,this._cachedPagingData=void 0},resetPagesCache(){this._cachedData={items:{}}},_needClearStoreDataCache(){var o=this.remoteOperations(),l=t(this._lastLoadOptions||{},{});return!Object.keys(o).every(h=>!l[h]||!o[h])},push(o,l){var d=this.store();this._needClearStoreDataCache()&&(this._cachedStoreData=void 0),this._cachedPagingData=void 0,this.resetPagesCache(!0),this._cachedStoreData&&(0,Fe.VK)({keyInfo:d,data:this._cachedStoreData,changes:o}),l||this._applyBatch(o),this.pushed.fire(o)},getDataIndexGetter(){if(!this._dataIndexGetter){var o,l,d=this.store();this._dataIndexGetter=h=>{if(!o||l&&l!==this._cachedStoreData){l=this._cachedStoreData||[],o={};for(var c=0;c<l.length;c++)o[(0,V.GP)(d.keyOf(l[c]))]=c}return o[(0,V.GP)(d.keyOf(h))]}}return this._dataIndexGetter},_getKeyInfo(){return this.store()},_needToCopyDataObject:()=>!0,_applyBatch(o,l){var d=this._getKeyInfo(),h=this._dataSource,u=F.normalizeSortingInfo(this.group()).length,c="reshape"===this.option("editing.refreshMode"),g="virtual"===this.option("scrolling.mode");o=o.filter(b=>!h.paginate()||"insert"!==b.type||void 0!==b.index);var m=()=>u?this.itemsCount():this.items().length,f=m();(0,Fe.VK)({keyInfo:d,data:this._items,changes:o,groupCount:u,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(0,Fe.VK)({keyInfo:d,data:h.items(),changes:o,groupCount:u,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(this._currentTotalCount>0||(l||!c)&&g)&&(this._totalCountCorrection+=m()-f),o.splice(0,o.length)},_handlePush(o){var{changes:l}=o;this.push(l,!0)},_handleChanging(o){this.changing.fire(o),this._applyBatch(o.changes,!0)},_needCleanCacheByOperation(o,l){var d=["filtering","sorting","paging"],h=d.indexOf(o);return(h>=0?d.slice(h):[o]).some(c=>l[c])},_customizeRemoteOperations(o,l){var d=this._cachedStoreData,h=this._cachedPagingData,u=this._cachedData;(o.storeLoadOptions.filter&&!o.remoteOperations.filtering||o.storeLoadOptions.sort&&!o.remoteOperations.sorting)&&(o.remoteOperations={filtering:o.remoteOperations.filtering,summary:o.remoteOperations.summary}),l.fullReload?(d=void 0,h=void 0,u={items:{}}):(l.reload?(h=void 0,u={items:{}}):l.groupExpanding&&(u={items:{}}),(0,I.__)(l,(c,g)=>{g&&this._needCleanCacheByOperation(c,o.remoteOperations)&&(d=void 0,h=void 0)})),h&&(o.remoteOperations.paging=!1),o.cachedStoreData=d,o.cachedPagingData=h,o.cachedData=u,o.isCustomLoading||(this._cachedStoreData=d,this._cachedPagingData=h,this._cachedData=u)},_handleCustomizeStoreLoadOptions(o){var l;this._handleDataLoading(o),0!==(null===(l=o.data)||void 0===l?void 0:l.length)&&(o.data=e(o,!0)||o.cachedStoreData)},_handleDataLoading(o){var l=this._dataSource,d=this._lastLoadOptions;this.customizeStoreLoadOptions.fire(o),o.delay=this.option("loadingTimeout"),o.originalStoreLoadOptions=o.storeLoadOptions,o.remoteOperations=(0,y.X)({},this.remoteOperations());var h=!this.isLoaded()&&!this._isRefreshing;this.option("integrationOptions.renderedOnServer")&&!this.isLoaded()&&(o.delay=void 0);var u=(0,y.X)({pageIndex:this.pageIndex(),pageSize:this.pageSize()},o.storeLoadOptions),c=t(u,d,h);if(this._customizeRemoteOperations(o,c),!o.isCustomLoading){var g=this._isRefreshing;o.pageIndex=l.pageIndex(),o.lastLoadOptions=u,o.operationTypes=c,this._loadingOperationTypes=c,this._isRefreshing=!0,(0,w.z7)(g||this._isRefreshed||this.refresh(o,c)).done(()=>{this._lastOperationId===o.operationId&&(this._isRefreshed=!0,this.load().always(()=>{this._isRefreshed=!1}))}).fail(()=>{l.cancel(o.operationId)}).always(()=>{this._isRefreshing=!1}),l.cancel(this._lastOperationId),this._lastOperationId=o.operationId,this._isRefreshing&&l.cancel(this._lastOperationId)}this._handleDataLoadingCore(o)},_handleDataLoadingCore(o){var{remoteOperations:l}=o;o.loadOptions={};var d=o.cachedData.extra,h={filter:!l.filtering,sort:!l.sorting,group:!l.grouping,summary:!l.summary,skip:!l.paging,take:!l.paging,requireTotalCount:d&&"totalCount"in d||!l.paging,langParams:!l.filtering||!l.sorting};(0,I.__)(o.storeLoadOptions,(u,c)=>{h[u]&&(o.loadOptions[u]=c,delete o.storeLoadOptions[u])}),d&&(o.extra=d)},_handleDataLoaded(o){var l,d,{loadOptions:h}=o,u=o.remoteOperations&&!o.remoteOperations.paging,{cachedData:c}=o,{storeLoadOptions:g}=o,m=!1!==this.option("cacheEnabled")&&g,f=m&&!o.isCustomLoading&&c&&(!u||g.group),x=m&&u,b=x&&!o.isCustomLoading;if(h){u&&(o.skip=h.skip,o.take=h.take,delete h.skip,delete h.take),h.group&&(h.group=o.group||h.group);var S=F.normalizeSortingInfo(o.group||g.group||h.group).length;o.cachedDataPartBegin&&(o.data=o.cachedDataPartBegin.concat(o.data)),o.cachedDataPartEnd&&(o.data=o.data.concat(o.cachedDataPartEnd)),(!f||!e(o))&&(x&&o.cachedPagingData?o.data=i(o.cachedPagingData,S):(b&&(this._cachedStoreData?o.mergeStoreLoadData&&(o.data=this._cachedStoreData=this._cachedStoreData.concat(o.data)):this._cachedStoreData=i(o.data,F.normalizeSortingInfo(g.group).length)),new Ta.A(o.data).load(h).done(T=>{o.data=T,b&&(this._cachedPagingData=i(o.data,S))}).fail(T=>{o.data=(new w.cY).reject(T)})),h.requireTotalCount&&u&&(o.extra=(0,v.Qd)(o.extra)?o.extra:{},o.extra.totalCount=o.data.length),o.extra&&o.extra.totalCount>=0&&(!1===g.requireTotalCount||!1===h.requireTotalCount)&&(o.extra.totalCount=-1),!h.data&&(g.requireTotalCount||(null!==(d=null===(l=o.extra)||void 0===l?void 0:l.totalCount)&&void 0!==d?d:-1)>=0)&&(this._totalCountCorrection=0),this._handleDataLoadedCore(o),f&&(c.extra=c.extra||(0,y.X)({},o.extra),(0,w.z7)(o.data).done(T=>{!function(B,M,L){for(var z,H,K,W,{storeLoadOptions:j}=B,oe=null!==(H=null!==(z=B.skip)&&void 0!==z?z:j.skip)&&void 0!==H?H:0,ee=null!==(W=null!==(K=B.take)&&void 0!==K?K:j.take)&&void 0!==W?W:0,fe=0;fe<ee;fe++){var Te=fe+oe,wn=B.cachedData.items;wn[Te]=r(wn[Te],M[fe],L,0===fe&&B.skips||[])}}(o,T,S)}))),(0,w.z7)(o.data).done(()=>{o.lastLoadOptions&&(this._lastLoadOptions=o.lastLoadOptions,Object.keys(o.operationTypes).forEach(T=>{this._lastOperationTypes[T]=this._lastOperationTypes[T]||o.operationTypes[T]}))}),o.storeLoadOptions=o.originalStoreLoadOptions}else this._dataSource.cancel(o.operationId)},_handleDataLoadedCore(o){o.remoteOperations&&!o.remoteOperations.paging&&Array.isArray(o.data)&&(void 0!==o.skip&&(o.data=o.data.slice(o.skip)),void 0!==o.take&&(o.data=o.data.slice(0,o.take)))},_handleLoadingChanged(o){this.loadingChanged.fire(o)},_handleLoadError(o){this.loadError.fire(o),this.changed.fire({changeType:"loadError",error:o})},_loadPageSize(){return this.pageSize()},_handleDataChanged(o){var l,d=this._dataSource,h=!1,u=!o||(0,v.O9)(o.changeType),c=this.itemsCount();u&&(this._isLastPage=!c||!this._loadPageSize()||c<this._loadPageSize(),this._isLastPage&&(this._hasLastPage=!0)),d.totalCount()>=0?d.pageIndex()>=this.pageCount()&&(d.pageIndex(this.pageCount()-1),this.pageIndex(d.pageIndex()),this.resetPagesCache(),d.load(),h=!0):u&&((l=d.pageIndex()*this.pageSize()+c)>this._currentTotalCount&&(this._currentTotalCount=l,(0===d.pageIndex()||!this.option("scrolling.legacyMode"))&&(this._totalCountCorrection=0)),0===c&&d.pageIndex()>=this.pageCount()&&(d.pageIndex(this.pageCount()-1),"infinite"!==this.option("scrolling.mode")&&(d.load(),h=!0))),h||(this._operationTypes=this._lastOperationTypes,this._lastOperationTypes={},this.component._optionCache={},this.changed.fire(o),this.component._optionCache=void 0)},_scheduleCustomLoadCallbacks(o){var l=this;l._isCustomLoading=!0,o.always(()=>{l._isCustomLoading=!1})},loadingOperationTypes(){return this._loadingOperationTypes},operationTypes(){return this._operationTypes},lastLoadOptions(){return this._lastLoadOptions||{}},isLastPage(){return this._isLastPage},_dataSourceTotalCount(){return this._dataSource.totalCount()},totalCount(){return parseInt((this._currentTotalCount||this._dataSourceTotalCount())+this._totalCountCorrection)},totalCountCorrection(){return this._totalCountCorrection},itemsCount(){return this._dataSource.items().length},totalItemsCount(){return this.totalCount()},pageSize(){var o=this._dataSource;return arguments.length||o.paginate()?o.pageSize.apply(o,arguments):0},pageCount(){var o=this.totalItemsCount()-this._totalCountCorrection,l=this.pageSize();return l&&o>0?Math.max(1,Math.ceil(o/l)):1},hasKnownLastPage(){return this._hasLastPage||this._dataSource.totalCount()>=0},loadFromStore(o,l){var d=this._dataSource,h=new w.cY;if(d)return(l=l||d.store()).load(o).done((u,c)=>{u&&!Array.isArray(u)&&Array.isArray(u.data)&&(c=u,u=u.data),h.resolve(u,c)}).fail(h.reject),h},isCustomLoading(){return!!this._isCustomLoading},load(o){var m,f,l=this,d=l._dataSource,h=new w.cY;if(o){var u=d.store(),c=d.loadOptions(),g={storeLoadOptions:(0,y.X)({},o,{langParams:c?.langParams}),isCustomLoading:!0};return(0,I.__)(u._customLoadOptions()||[],(m,f)=>{f in g.storeLoadOptions||(g.storeLoadOptions[f]=c[f])}),this._isLoadingAll=o.isLoadingAll,l._scheduleCustomLoadCallbacks(h),d._scheduleLoadCallbacks(h),l._handleCustomizeStoreLoadOptions(g),m=()=>{if(!d.store())return h.reject("canceled");(0,w.z7)(g.data||l.loadFromStore(g.storeLoadOptions)).done((m,f)=>{g.data=m,g.extra=f||{},l._handleDataLoaded(g),o.requireTotalCount&&void 0===g.extra.totalCount&&(g.extra.totalCount=u.totalCount(g.storeLoadOptions)),(0,w.z7)(g.data,g.extra.totalCount).done((x,b)=>{g.extra.totalCount=b,h.resolve(x,g.extra)}).fail(h.reject)}).fail(h.reject)},f=l.option("loadingTimeout"),(0,v.O9)(f)?(0,V.uG)(m,f):m(),h.fail(function(){l._eventsStrategy.fireEvent("loadError",arguments)}).always(()=>{this._isLoadingAll=!1}).promise()}return d.load()},reload(o){return o?this._dataSource.reload():this._dataSource.load()},getCachedStoreData(){return this._cachedStoreData}};return s}());var{queryByOptions:zl}=$t.A,Da=i=>"fullBranch"===i.option("filterMode"),rr=Hl.inherit(function(){var i=(t,e)=>zl((0,Le.A)(t),{sort:e}).toArray();return{_createKeyGetter(){var t=this.getKeyExpr();return(0,q.Hz)(t)},_createKeySetter(){var t=this.getKeyExpr();return(0,v.Tn)(t)?t:(0,q.vL)(t)},createParentIdGetter(){return(0,q.Hz)(this.option("parentIdExpr"))},createParentIdSetter(){var t=this.option("parentIdExpr");return(0,v.Tn)(t)?t:(0,q.vL)(t)},_createItemsGetter(){return(0,q.Hz)(this.option("itemsExpr"))},_createHasItemsGetter(){var t=this.option("hasItemsExpr");return t&&(0,q.Hz)(t)},_createHasItemsSetter(){var t=this.option("hasItemsExpr");return(0,v.Tn)(t)?t:t&&(0,q.vL)(t)},_updateIndexByKeyObject(t){var e=this;e._indexByKey={},(0,I.__)(t,(a,n)=>{e._indexByKey[n.key]=a})},_calculateHasItems(t,e){var n,{parentIds:a}=e.storeLoadOptions,r=Da(this);return this._hasItemsGetter&&(a||!e.storeLoadOptions.filter||r)&&(n=this._hasItemsGetter(t.data)),void 0===n&&(n=!(this._isChildrenLoaded[t.key]||!e.remoteOperations.filtering||!a&&!r)||(e.loadOptions.filter&&!e.remoteOperations.filtering&&r?t.children.length:t.hasChildren)),!!n},_fillVisibleItemsByNodes(t,e,a){for(var n=0;n<t.length;n++)t[n].visible&&a.push(t[n]),(this.isRowExpanded(t[n].key,e)||!t[n].visible)&&t[n].hasChildren&&t[n].children.length&&this._fillVisibleItemsByNodes(t[n].children,e,a)},_convertItemToNode(t,e,a){var n=this._keyGetter(t),r=this._parentIdGetter(t),s=a[r=(0,v.O9)(r)?r:e]=a[r]||{key:r,children:[]},o=a[n]=a[n]||{key:n,children:[]};return o.data=t,o.parent=s,o},_createNodesByItems(t,e){var s,a=this.option("rootValue"),n={},r=this._nodeByKey={};if(e)for(s=0;s<e.length;s++)n[this._keyGetter(e[s])]=!0;for(s=0;s<t.length;s++){var o=this._convertItemToNode(t[s],a,r);if(void 0===o.key)return;o.visible=!e||!!n[o.key],o.parent&&o.parent.children.push(o)}var l=r[a]||{key:a,children:[]};return l.level=-1,l},_convertDataToPlainStructure(t,e,a){var n;if(this._itemsGetter&&!t.isConverted){a=a||[];for(var r=0;r<t.length;r++){var s=(0,Fe.lj)(t[r]);void 0===(n=this._keyGetter(s))&&this._keySetter(s,n=a.length+1),this._parentIdSetter(s,void 0===e?this.option("rootValue"):e),a.push(s);var o=this._itemsGetter(s);if(o&&o.length){this._convertDataToPlainStructure(o,n,a);var l=this.option("itemsExpr");(0,v.Tn)(l)||delete s[l]}}return a.isConverted=!0,a}return t},_createIdFilter(t,e){for(var a=[],n=0;n<e.length;n++)a.push([t,"=",e[n]]);return F.combineFilters(a,"or")},_customizeRemoteOperations(t,e){this.callBase.apply(this,arguments),t.remoteOperations.paging=!1;var a=!1;this.option("autoExpandAll")&&(t.remoteOperations.sorting=!1,t.remoteOperations.filtering=!1,(!this._lastLoadOptions||e.filtering&&!t.storeLoadOptions.filter)&&!t.isCustomLoading&&(a=!0)),t.isCustomLoading||(this._isReload=this._isReload||e.reload,t.cachedStoreData||(this._isChildrenLoaded={},this._isReload&&(this._nodeByKey={})),this.option("expandNodesOnFiltering")&&(e.filtering||this._isReload&&t.storeLoadOptions.filter)&&(t.storeLoadOptions.filter?a=!0:t.collapseVisibleNodes=!0)),t.expandVisibleNodes=a},_getParentIdsToLoad(t){for(var e=[],a=0;a<t.length;a++){var n=this.getNodeByKey(t[a]);(!n||n.hasChildren&&!n.children.length)&&e.push(t[a])}return e},_handleCustomizeStoreLoadOptions(t){var e=this.option("rootValue"),a=this.option("parentIdExpr"),{parentIds:n}=t.storeLoadOptions;if(n&&(t.isCustomLoading=!1),this.callBase.apply(this,arguments),t.remoteOperations.filtering&&!t.isCustomLoading&&(Da(this)&&t.cachedStoreData||!t.storeLoadOptions.filter)){var r=t.collapseVisibleNodes?[]:this.option("expandedRowKeys");n=[e].concat(r).concat(n||[]);var s=t.data?this._getParentIdsToLoad(n):n;s.length&&(t.cachedPagingData=void 0,t.data=void 0,t.mergeStoreLoadData=!0,t.delay=this.option("loadingTimeout")),t.storeLoadOptions.parentIds=s,t.storeLoadOptions.filter=this._createIdFilter(a,s)}},_generateInfoToLoad(t,e){var a,l,n={},r={},s=[],o=this.option("rootValue");for(l=0;l<t.length;l++)n[a=e?this._parentIdGetter(t[l]):this._keyGetter(t[l])]=!0;for(l=0;l<t.length;l++){a=e?this._keyGetter(t[l]):this._parentIdGetter(t[l]);var d=e?this.isRowExpanded(a):a!==o;!n[a]&&!r[a]&&d&&(r[a]=!0,s.push(a))}return{keyMap:r,keys:s}},_loadParentsOrChildren(t,e,a){var n,r,s,o,l,{keys:d,keyMap:h}=this._generateInfoToLoad(t,a),u=new w.cY,c=e.remoteOperations.filtering,g=this.option("maxFilterLengthInRequest"),m=null!==(r=null===(n=e.storeLoadOptions)||void 0===n?void 0:n.sort)&&void 0!==r?r:null===(s=e.loadOptions)||void 0===s?void 0:s.sort,f=c?e.storeLoadOptions:e.loadOptions,x=M=>(c&&(this._cachedStoreData=i(this._cachedStoreData.concat(M),m)),i(t.concat(M),m));if(!d.length)return u.resolve(t);var b=d.map(M=>this.getNodeByKey(M)).filter(M=>M&&M.data);if(b.length===d.length&&(a&&(b=b.reduce((M,L)=>M.concat(L.children),[])),b.length))return this._loadParentsOrChildren(x(b.map(M=>M.data)),e,a);var S=a?this.option("parentIdExpr"):this.getKeyExpr();o=this._createIdFilter(S,d),encodeURI(JSON.stringify(o)).length>g&&(o=M=>h[a?this._parentIdGetter(M):this._keyGetter(M)],l=c),f=(0,y.X)({},f,{filter:l?null:o});var B=e.fullData?new Ta.A(e.fullData):this._dataSource.store();return this.loadFromStore(f,B).done(M=>{M.length?(l&&(M=(0,Le.A)(M).filter(o).toArray()),this._loadParentsOrChildren(x(M),e,a).done(u.resolve).fail(u.reject)):u.resolve(t)}).fail(u.reject),u},_loadParents(t,e){return this._loadParentsOrChildren(t,e)},_loadChildrenIfNeed(t,e){return Da(this)?this._loadParentsOrChildren(t,e,!0):(0,w.z7)(t)},_updateHasItemsMap(t){var{parentIds:e}=t.storeLoadOptions;if(e)for(var a=0;a<e.length;a++)this._isChildrenLoaded[e[a]]=!0},_getKeyInfo:()=>({key:()=>"key",keyOf:t=>t.key}),_processChanges(t){var e=[];return t.forEach(a=>{"insert"===a.type?e=e.concat(this._applyInsert(a)):"remove"===a.type?e=e.concat(this._applyRemove(a)):"update"===a.type&&e.push({type:a.type,key:a.key,data:{data:a.data}})}),e},_handleChanging(t){this.callBase.apply(this,arguments),t.postProcessChanges=e=>{var a=e.filter(n=>"update"===n.type);return this._processChanges(a)}},_applyBatch(t){var e=this._processChanges(t);this.callBase(e)},_setHasItems(t,e){var a=this._hasItemsSetter;t.hasChildren=e,a&&t.data&&a(t.data,e)},_applyInsert(t){var e=[],a=this.parentKeyOf(t.data),n=this.getNodeByKey(a);if(n){var r=this.option("rootValue"),s=this._convertItemToNode(t.data,r,this._nodeByKey);if(s.hasChildren=!1,s.level=n.level+1,s.visible=!0,n.children.push(s),this._isChildrenLoaded[s.key]=!0,this._setHasItems(n,!0),(!n.parent||this.isRowExpanded(n.key))&&void 0!==t.index){var o=this.items().indexOf(n)+1;o+=t.index>=0?Math.min(t.index,n.children.length):n.children.length,e.push({type:t.type,data:s,index:o})}}return e},_needToCopyDataObject:()=>!1,_applyRemove(t){var e=[],a=this.getNodeByKey(t.key),n=a&&a.parent;if(n){var r=n.children.indexOf(a);r>=0&&(n.children.splice(r,1),n.children.length||this._setHasItems(n,!1),e.push(t),e=e.concat(this.getChildNodeKeys(t.key).map(s=>({type:t.type,key:s}))))}return e},_handleDataLoaded(t){var e=t.data=this._convertDataToPlainStructure(t.data);!t.remoteOperations.filtering&&t.loadOptions.filter&&(t.fullData=zl((0,Le.A)(t.data),{sort:t.loadOptions&&t.loadOptions.sort}).toArray()),this._updateHasItemsMap(t),this.callBase(t),e.isConverted&&this._cachedStoreData&&(this._cachedStoreData.isConverted=!0)},_fillNodes(t,e,a,n){var r=Da(this);n=n||0;for(var s=0;s<t.length;s++){var o=t[s],l=!1;this._fillNodes(t[s].children,e,a,n+1),o.level=n,o.hasChildren=this._calculateHasItems(o,e),o.visible&&o.hasChildren&&(r?o.children.filter(d=>d.visible).length?l=!0:o.children.length&&G.foreachNodes(o.children,d=>{d.visible=!0}):l=!0,e.expandVisibleNodes&&l&&a.push(o.key)),(o.visible||o.hasChildren)&&(o.parent.hasChildren=!0)}},_processTreeStructure(t,e){var{data:a}=t,{parentIds:n}=t.storeLoadOptions,r=[];if(n&&n.length||this._isReload){if(t.fullData&&t.fullData.length>t.data.length&&(a=t.fullData,e=e||t.data),this._rootNode=this._createNodesByItems(a,e),!this._rootNode)return void(t.data=(new w.cY).reject(J.A.Error("E1046",this.getKeyExpr())));this._fillNodes(this._rootNode.children,t,r),this._isNodesInitializing=!0,(t.collapseVisibleNodes||r.length)&&this.option("expandedRowKeys",r),this._isReload=!1,this.executeAction("onNodesInitialized",{root:this._rootNode}),this._isNodesInitializing=!1}var s=[];this._fillVisibleItemsByNodes(this._rootNode.children,t,s),t.data=s,this._totalItemsCount=s.length},_handleDataLoadedCore(t){var o,e=this,{data:a}=t,{callBase:n}=e,r=t.storeLoadOptions.filter||t.loadOptions.filter,s=e.option("filterMode"),{parentIds:l}=t.storeLoadOptions;if(!t.isCustomLoading){if(r&&(!l||!l.length)&&"standard"!==s){var h=t.data=new w.cY;return"matchOnly"===s&&(o=a),e._loadParents(a,t).done(u=>{e._loadChildrenIfNeed(u,t).done(c=>{t.data=c,e._processTreeStructure(t,o),n.call(e,t),h.resolve(t.data)})}).fail(h.reject)}e._processTreeStructure(t)}e.callBase(t)},_handlePush(t){var{changes:e}=t;this._dataSource._reshapeOnPush&&!!e.length&&(this._isReload=!0),e.forEach(r=>{var s;null!==(s=r.index)&&void 0!==s||(r.index=-1)}),this.callBase.apply(this,arguments)},init(t,e){this.callBase.apply(this,arguments);var a=this.option("dataStructure");this._keyGetter=this._createKeyGetter(),this._parentIdGetter=this.createParentIdGetter(),this._hasItemsGetter=this._createHasItemsGetter(),this._hasItemsSetter=this._createHasItemsSetter(),"tree"===a&&(this._itemsGetter=this._createItemsGetter(),this._keySetter=this._createKeySetter(),this._parentIdSetter=this.createParentIdSetter()),this._nodeByKey={},this._isChildrenLoaded={},this._totalItemsCount=0,this.createAction("onNodesInitialized")},getKeyExpr(){var t=this.store(),e=t&&t.key(),a=this.option("keyExpr");if((0,v.O9)(e)&&(0,v.O9)(a)&&!(0,V.RL)(e,a))throw J.A.Error("E1044");return e||a||"id"},keyOf(t){return this._keyGetter&&this._keyGetter(t)},parentKeyOf(t){return this._parentIdGetter&&this._parentIdGetter(t)},getRootNode(){return this._rootNode},totalItemsCount(){return this._totalItemsCount+this._totalCountCorrection},isRowExpanded(t,e){if(e){var{isExpandedByKey:a}=e;return a||(a=e.isExpandedByKey={},this.option("expandedRowKeys").forEach(r=>{a[r]=!0})),!!a[t]}return F.getIndexByKey(t,this.option("expandedRowKeys"),null)>=0},_changeRowExpandCore(t){var e=this.option("expandedRowKeys").slice(),a=F.getIndexByKey(t,e,null);a<0?e.push(t):e.splice(a,1),this.option("expandedRowKeys",e)},changeRowExpand(t){return this._changeRowExpandCore(t),this._isNodesInitializing?(new w.cY).resolve():this.load()},getNodeByKey(t){if(this._nodeByKey)return this._nodeByKey[t]},getNodeLeafKeys(){var t=this,e=[];return(t._rootNode?[t._rootNode.key]:[]).forEach(n=>{var r=t.getNodeByKey(n);r&&G.foreachNodes([r],s=>{!s.children.length&&e.push(s.key)})}),e},getChildNodeKeys(t){var e=this.getNodeByKey(t),a=[];return e&&G.foreachNodes(e.children,n=>{a.push(n.key)}),a},loadDescendants(t,e){var a=this,n=new w.cY,r=a.remoteOperations();if(t=(0,v.O9)(t)?Array.isArray(t)?t:[t]:a.getNodeLeafKeys(),!r.filtering||!t.length)return n.resolve();var s=a._dataSource._createStoreLoadOptions();return s.parentIds=t,a.load(s).done(()=>{if(!e){var o=(l=a,h=[],t.forEach(u=>{var c=l.getNodeByKey(u);c&&c.children.forEach(g=>{h.push(g.key)})}),h);if(o.length)return void a.loadDescendants(o,e).done(n.resolve).fail(n.reject)}var l,h;n.resolve()}).fail(n.reject),n.promise()},forEachNode(){var e,t=[];if(1===arguments.length){e=arguments[0];var a=this.getRootNode();t=a&&a.children||[]}else 2===arguments.length&&(e=arguments[1],t=arguments[0],t=Array.isArray(t)?t:[t]);G.foreachNodes(t,e)}}}());const Kl={extend(i){rr=rr.inherit(i)},create:i=>new rr(i)};var lC=Ra.controllers.data.inherit({_getDataSourceAdapter:()=>Kl,_getNodeLevel(i){for(var t=-1;i.parent;)i.visible&&t++,i=i.parent;return t},_generateDataItem(i,t){return{rowType:"data",node:i,key:i.key,data:i.data,isExpanded:this.isRowExpanded(i.key,t),level:this._getNodeLevel(i)}},_loadOnOptionChange(){this._dataSource.load()},_isItemEquals(i,t){return!(i.isSelected!==t.isSelected||i.node&&t.node&&i.node.hasChildren!==t.node.hasChildren||i.level!==t.level||i.isExpanded!==t.isExpanded)&&this.callBase.apply(this,arguments)},_isCellChanged(i,t,e,a,n){return a===this._columnsController.getFirstDataColumnIndex()&&i.isSelected!==t.isSelected||this.callBase.apply(this,arguments)},init(){this.createAction("onRowExpanding"),this.createAction("onRowExpanded"),this.createAction("onRowCollapsing"),this.createAction("onRowCollapsed"),this.callBase.apply(this,arguments)},keyOf(i){var t=this._dataSource;if(t)return t.keyOf(i)},key(){var i=this._dataSource;if(i)return i.getKeyExpr()},publicMethods(){return this.callBase().concat(["expandRow","collapseRow","isRowExpanded","getRootNode","getNodeByKey","loadDescendants","forEachNode"])},changeRowExpand(i){if(this._dataSource){var t={key:i},e=this.isRowExpanded(i);if(this.executeAction(e?"onRowCollapsing":"onRowExpanding",t),!t.cancel)return this._dataSource.changeRowExpand(i).done(()=>{this.executeAction(e?"onRowCollapsed":"onRowExpanded",t)})}return(new w.cY).resolve()},isRowExpanded(i,t){return this._dataSource&&this._dataSource.isRowExpanded(i,t)},expandRow(i){return this.isRowExpanded(i)?(new w.cY).resolve():this.changeRowExpand(i)},collapseRow(i){return this.isRowExpanded(i)?this.changeRowExpand(i):(new w.cY).resolve()},getRootNode(){return this._dataSource&&this._dataSource.getRootNode()},optionChanged(i){switch(i.name){case"rootValue":case"parentIdExpr":case"itemsExpr":case"filterMode":case"expandNodesOnFiltering":case"autoExpandAll":case"hasItemsExpr":case"dataStructure":this._columnsController.reset(),this._items=[],this._refreshDataSource(),i.handled=!0;break;case"expandedRowKeys":case"onNodesInitialized":this._dataSource&&!this._dataSource._isNodesInitializing&&!(0,V.RL)(i.value,i.previousValue)&&this._loadOnOptionChange(),i.handled=!0;break;case"maxFilterLengthInRequest":i.handled=!0;break;default:this.callBase(i)}},getNodeByKey(i){if(this._dataSource)return this._dataSource.getNodeByKey(i)},getChildNodeKeys(i){if(this._dataSource)return this._dataSource.getChildNodeKeys(i)},loadDescendants(i,t){if(this._dataSource)return this._dataSource.loadDescendants(i,t)},forEachNode(){this._dataSource.forEachNode.apply(this,arguments)}});G.registerModule("data",{defaultOptions:()=>(0,y.X)({},Ra.defaultOptions(),{itemsExpr:"items",parentIdExpr:"parentId",rootValue:0,dataStructure:"plain",expandedRowKeys:[],filterMode:"withAncestors",expandNodesOnFiltering:!0,autoExpandAll:!1,onNodesInitialized:null,maxFilterLengthInRequest:1500,paging:{enabled:!1}}),controllers:{data:lC}});var Wl="dx-sort",Gl="dx-sort-none",Ul="dx-sort-index-icon";const $l={_applyColumnState(i){var t,e,a=this.option("sorting.mode"),{rootElement:n}=i,{column:r}=i,s=this._getIndicatorContainer(n);if("sort"===i.name){n.find(".".concat(Wl)).remove(),!s.children().length&&s.remove();var o="none"!==a&&r.allowSorting,l=this.getController&&!!this.getController("columns").columnOption("sortIndex:1");return!(0,v.O9)(r.groupIndex)&&(o||(0,v.O9)(r.sortOrder))&&(t="asc"===r.sortOrder?"ascending":"descending",e=this.callBase(i).toggleClass("dx-sort-up","asc"===r.sortOrder).toggleClass("dx-sort-down","desc"===r.sortOrder),l&&this.option("sorting.showSortIndexes")&&r.sortIndex>=0&&((0,_.A)("<span>").addClass(Ul).text(r.sortIndex+1).appendTo(e),e.addClass("dx-sort-index")),o&&i.rootElement.addClass(this.addWidgetPrefix("action"))),this._setAriaSortAttribute(r,t,n,l),e}return this.callBase(i)},_setAriaSortAttribute(i,t,e,a){if(e.removeAttr("aria-roledescription"),i.isGrouped){var n=this.localize("dxDataGrid-ariaNotSortedColumn");(0,v.O9)(i.sortOrder)&&(n=this.localize("asc"===i.sortOrder?"dxDataGrid-ariaSortedAscendingColumn":"dxDataGrid-ariaSortedDescendingColumn")),this.setAria("roledescription",n,e)}else if((0,v.O9)(i.sortOrder)){if(this.setAria("sort",t,e),a&&i.sortIndex>=0){var r=A.A.format("dxDataGrid-ariaColumnHeader"),s=A.A.format("dxDataGrid-ariaSortIndex",i.sortIndex+1),o="".concat(r,", ").concat(s);this.setAria("roledescription",o,e)}}else this.setAria("sort","none",e)},_getIndicatorClassName(i){return"sort"===i?Wl:"sortIndex"===i?Ul:this.callBase(i)},_renderIndicator(i){var{column:t}=i,e=i.container,a=i.indicator;if("sort"===i.name){var n=this.option("rtlEnabled");if((0,v.O9)(t.sortOrder)||a&&a.addClass(Gl),e.children().length&&(!n&&"left"===i.columnAlignment||n&&"right"===i.columnAlignment))return void e.prepend(a)}this.callBase(i)},_updateIndicator(i,t,e){if("sort"!==e||!(0,v.O9)(t.groupIndex))return this.callBase.apply(this,arguments)},_getIndicatorElements(i,t){var e=this.callBase(i);return t?e:e&&e.not(".".concat(Gl))}};var pC=(0,y.X)({},$l,{_createRow(i){var t=this.callBase(i);return"header"===i.rowType&&O.A.on(t,(0,P.b4)(ae.U,"dxDataGridColumnHeadersView"),"td",this.createAction(e=>{this._processHeaderAction(e.event,t)})),t},_processHeaderAction(i,t){if((0,_.A)(i.currentTarget).parent().get(0)===t.get(0)){var e=this,a=null,n=(0,_.A)(i.currentTarget),r=n.parent().index(),s=-1;[].slice.call(e.getCellElements(r)).some((c,g)=>{if(c===n.get(0))return s=g,!0});var l=e._columnsController.getVisibleColumns(r)[s],d=e.getController("editing"),h=e.option("editing.mode");d&&d.isEditing()&&("batch"===h||"cell"===h)||!e._isSortableElement((0,_.A)(i.target))||l&&!(0,v.O9)(l.groupIndex)&&!l.command&&(i.shiftKey?a="shift":(0,P.By)(i)&&(a="ctrl"),setTimeout(()=>{e._columnsController.changeSortOrder(l.index,a)}))}},_renderCellContent(i,t){var{column:e}=t;!e.command&&"header"===t.rowType&&this._applyColumnState({name:"sort",rootElement:i,column:e,showColumnLines:this.option("showColumnLines")}),this.callBase.apply(this,arguments)},_columnOptionChanged(i){var{changeTypes:t}=i;1===t.length&&t.sorting?this._updateIndicators("sort"):this.callBase(i)},optionChanged(i){"sorting"===i.name?(this._invalidate(),i.handled=!0):this.callBase(i)}}),_C=(0,y.X)({},$l,{_createGroupPanelItem(i,t){var e=this,a=e.callBase(...arguments);return O.A.on(a,(0,P.b4)(ae.U,"dxDataGridHeaderPanel"),e.createAction(()=>{e._processGroupItemAction(t.index)})),e._applyColumnState({name:"sort",rootElement:a,column:{alignment:e.option("rtlEnabled")?"right":"left",allowSorting:t.allowSorting,sortOrder:"desc"===t.sortOrder?"desc":"asc",isGrouped:!0},showColumnLines:!0}),a},_processGroupItemAction(i){setTimeout(()=>this.getController("columns").changeSortOrder(i))},optionChanged(i){"sorting"===i.name?(this._invalidate(),i.handled=!0):this.callBase(i)}}),Xl={defaultOptions:()=>({sorting:{mode:"single",ascendingText:A.A.format("dxDataGrid-sortingAscendingText"),descendingText:A.A.format("dxDataGrid-sortingDescendingText"),clearText:A.A.format("dxDataGrid-sortingClearText"),showSortIndexes:!0}}),extenders:{views:{columnHeadersView:pC,headerPanel:_C}}};G.registerModule("sorting",Xl);var sr="dx-group-row",Yl="dx-group-cell",Ba="dx-freespace-row",jl="dx-column-lines",Ql="dx-row-alt",ql="dx-last-row-border";function Zl(i){return i?Math.round(i.scrollWidth()-i.clientWidth()):0}function Jl(i){var{rowType:t,column:e}=i;return"group"===t&&(0,v.O9)(e.groupIndex)&&!e.showWhenGrouped&&!e.command}function ed(i){var{element:t,watch:e,getter:a,callBack:n}=i;if(e){var r=e(a,n);O.A.on(t,Ot.N,r)}}var yC=function(i,t){var e=(0,Ze.Im)(t.text)&&"data"===t.rowType,{text:a}=t,n=i.get(0);e?F.setEmptyText(i):t.column.encodeHtml?n.textContent=a:n.innerHTML=a},Fa={defaultOptions:()=>({hoverStateEnabled:!1,scrolling:{useNative:"auto"},loadPanel:{enabled:"auto",text:A.A.format("Loading"),width:200,height:90,showIndicator:!0,indicatorSrc:"",showPane:!0},dataRowTemplate:null,columnAutoWidth:!1,noDataText:A.A.format("dxDataGrid-noDataText"),wordWrapEnabled:!1,showColumnLines:!0,showRowLines:!1,rowAlternationEnabled:!1,activeStateEnabled:!1,twoWayBindingEnabled:!0}),views:{rowsView:class OC extends Ri{_getDefaultTemplate(t){return"empty"===t.command?function(e){e.html("&nbsp;")}:yC}_getDefaultGroupTemplate(t){var e=this.option("summary.texts");return function(a,n){var{data:r}=n,s="".concat(n.column.caption,": ").concat(n.text),o=a.get(0);n.summaryItems&&n.summaryItems.length&&(s+=" ".concat(F.getGroupRowSummaryText(n.summaryItems,e))),r&&(n.groupContinuedMessage&&n.groupContinuesMessage?s+=" (".concat(n.groupContinuedMessage,". ").concat(n.groupContinuesMessage,")"):n.groupContinuesMessage?s+=" (".concat(n.groupContinuesMessage,")"):n.groupContinuedMessage&&(s+=" (".concat(n.groupContinuedMessage,")"))),t.encodeHtml?o.textContent=s:o.innerHTML=s}}_update(t){}_updateCell(t,e){Jl(e)&&t.addClass(Yl),super._updateCell.apply(this,arguments)}_getCellTemplate(t){var{column:e}=t;return Jl(t)?e.groupCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultGroupTemplate(e)}:("data"===t.rowType||e.command)&&e.cellTemplate?e.cellTemplate:{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(e)}}_createRow(t,e){var a=super._createRow.apply(this,arguments);if(t){var n="group"===t.rowType,r="data"===t.rowType;r&&a.addClass("dx-data-row"),r&&this.option("showRowLines")&&a.addClass("dx-row-lines"),this.option("showColumnLines")&&a.addClass(jl),!1===t.visible&&a.hide(),n&&(a.addClass(sr),this.setAria("role","row",a),this.setAriaExpandedAttribute(a,t))}return a}_rowPrepared(t,e,a){"data"===e.rowType&&(this.option("rowAlternationEnabled")&&(this._isAltRow(a)&&t.addClass(Ql),ed({element:t.get(0),watch:e.watch,getter:()=>this._isAltRow(a),callBack:n=>{t.toggleClass(Ql,n)}})),this._setAriaRowIndex(e,t),ed({element:t.get(0),watch:e.watch,getter:()=>e.rowIndex,callBack:()=>this._setAriaRowIndex(e,t)})),super._rowPrepared.apply(this,arguments)}_setAriaRowIndex(t,e){var{component:a}=this,n="standard"===a.option("scrolling.mode")&&!F.isVirtualRowRendering(a),r=t.rowIndex+1;n?r=a.pageIndex()*a.pageSize()+r:r+=this._dataController.getRowIndexOffset(),this.setAria("rowindex",r,e)}setAriaExpandedAttribute(t,e){var a=this.localize(e.isExpanded?"dxDataGrid-ariaExpandedRow":"dxDataGrid-ariaCollapsedRow");this.setAria("roledescription",a,t)}_afterRowPrepared(t){var e=t.args[0],a=this._dataController,n=a.getVisibleRows()[e.rowIndex],r=this.option("integrationOptions.watchMethod");if(e.data&&"data"===e.rowType&&!e.isNewRow&&this.option("twoWayBindingEnabled")&&r&&n){var s=r(()=>a.generateDataValues(e.data,e.columns),()=>{a.repaintRows([n.rowIndex],this.option("repaintChangesOnly"))},{deep:!0,skipImmediate:!0});O.A.on(e.rowElement,Ot.N,s)}}_renderScrollable(t){var e=this.element();if(e.children().length||e.append("<div>"),(t||!this._loadPanel)&&this._renderLoadPanel(e,e.parent(),this._dataController.isLocalStore()),(t||!this.getScrollable())&&this._dataController.isLoaded()){for(var a=this.getColumns(),n=!0,r=0;r<a.length;r++)if(!a[r].width&&!a[r].minWidth){n=!1;break}(this.option("columnAutoWidth")||this._hasHeight||n||this._columnsController._isColumnFixing())&&this._renderScrollableCore(e)}}_handleScroll(t){var e=this.option("rtlEnabled"),a=t.component.option("useNative");this._scrollTop=t.scrollOffset.top,this._scrollLeft=t.scrollOffset.left;var n=t.scrollOffset.left;e&&(this._scrollRight=Zl(t.component)-this._scrollLeft,a&&(n=-this._scrollRight),this.isScrollbarVisible(!0)||(this._scrollLeft=-1)),this.scrollChanged.fire((0,N.A)((0,N.A)({},t.scrollOffset),{left:n}),this.name)}_renderScrollableCore(t){var e=this._createScrollableOptions(),a=this._handleScroll.bind(this);e.onScroll=a,this._scrollable=this._createComponent(t,wt.A,e),this._scrollableContainer=this._scrollable&&(0,_.A)(this._scrollable.container())}_renderLoadPanel(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return F.renderLoadPanel.apply(this,arguments)}_renderContent(t,e,a){return t.empty().append(e),this._findContentElement()}_updateContent(t,e,a){return this._contentChanges.push({newTableElement:t,change:e,isFixedTableRendering:a}),this.waitAsyncTemplates().done(()=>{var n=this._contentChanges;this._contentChanges=[],n.forEach(r=>{var{newTableElement:s,change:o,isFixedTableRendering:l}=r,d=this.getTableElement(l),h=this._findContentElement(l),u=o?.changeType,c=[],g=this.option("highlightChanges"),m=this.addWidgetPrefix("row-inserted-animation");"update"===u?((0,I.__)(o.rowIndices,(f,x)=>{var b,S=this._getRowElements(s).eq(f),T=null===(b=o.changeTypes)||void 0===b?void 0:b[f],B=o.items&&o.items[f];c.push(()=>{var M,L=this._getRowElements(d),z=L.eq(x);switch(T){case"update":if(B){var H=null===(M=o.columnIndices)||void 0===M?void 0:M[f];(0,v.O9)(B.visible)&&B.visible!==z.is(":visible")?z.toggle(B.visible):H?this._updateCells(z,S,H):z.replaceWith(S)}break;case"insert":if(L.length)z.length?S.insertBefore(z):S.insertAfter(L.last());else if(d){var K=S.is("tbody")?d:d.children("tbody");S.prependTo(K)}g&&o.isLiveUpdate&&S.addClass(m);break;case"remove":z.remove()}})}),(0,I.__)(c,function(){this()}),s.remove()):(this.setTableElement(s,l),h.addClass(this.addWidgetPrefix("content")),this._setGridRole(h),this._renderContent(h,s,l))})}).fail(()=>{this._contentChanges=[]})}_getGridRoleName(){return"grid"}_setGridRole(t){var e,a=!(null!==(e=this._dataController)&&void 0!==e&&e.isEmpty()),n=this._getGridRoleName();t?.length&&a&&this.setAria("role",n,t)}_createEmptyRow(t,e,a){var n,r=this._createRow(),s=e?this.getFixedColumns():this.getColumns();r.addClass(t).toggleClass(jl,this.option("showColumnLines"));for(var o=0;o<s.length;o++)n=this._createCell({column:s[o],rowType:"freeSpace",columnIndex:o,columns:s}),(0,v.kf)(a)&&n.css("height",a),r.append(n);return this.setAria("role","presentation",r),r}getFixedColumns(){throw new Error("Method not implemented.")}_appendEmptyRow(t,e,a){var n=this._getBodies(t),r=!n.length||e.is("tbody"),s=r?t:n;if("top"===a){if(s.first().prepend(e),r){var o=s.children("colgroup");s.prepend(o)}}else s.last().append(e)}_renderFreeSpaceRow(t,e){var a=this._createEmptyRow(Ba);a=this._wrapRowIfNeed(t,a,"refresh"===e?.changeType),this._appendEmptyRow(t,a)}_checkRowKeys(t){var e=this,a=e._getRows(t),n=e._dataController.store()&&e._dataController.store().key();n&&a.some(r=>{if("data"===r.rowType&&void 0===r.key)return e._dataController.fireError("E1046",n),!0})}_needUpdateRowHeight(t){return t>0&&!this._rowHeight}_getRowsHeight(t){return(t=t||this._tableElement).children("tbody").children().not(".dx-virtual-row").not(".".concat(Ba)).toArray().reduce((a,n)=>a+(0,se.N)(n).height,0)}_updateRowHeight(){var t=this.getTableElement(),e=this._dataController.items().length;if(t&&this._needUpdateRowHeight(e)){var a=this._getRowsHeight(t);this._rowHeight=a/e}}_findContentElement(t){var e=this.element(),a=this.getScrollable();if(e)return a&&(e=(0,_.A)(a.content())),e.children().first()}_getRowElements(t){var e=super._getRowElements(t);return e&&e.not(".".concat(Ba))}_getFreeSpaceRowElements(t){var e=t||this.getTableElements();return e&&e.children("tbody").children(".".concat(Ba))}_getNoDataText(){return this.option("noDataText")}_rowClick(t){var e=this._dataController.items()[t.rowIndex]||{};this.executeAction("onRowClick",(0,y.X)({evaluate:a=>(0,q.Hz)(a)(e.data)},t,e))}_rowDblClick(t){var e=this._dataController.items()[t.rowIndex]||{};this.executeAction("onRowDblClick",(0,y.X)({},t,e))}_getColumnsCountBeforeGroups(t){for(var e=0;e<t.length;e++)if("groupExpand"===t[e].type)return e;return 0}_getGroupCellOptions(t){var e=this._getColumnsCountBeforeGroups(t.columns),a=(t.row.groupIndex||0)+e;return{columnIndex:a,colspan:t.columns.length-a-1}}_needWrapRow(){return super._needWrapRow.apply(this,arguments)||!!this.option("dataRowTemplate")}_renderCells(t,e){"group"===e.row.rowType?this._renderGroupedCells(t,e):e.row.values&&super._renderCells(t,e)}_renderGroupedCells(t,e){for(var n,o,{row:a}=e,{columns:r}=e,{rowIndex:s}=a,l=this._getGroupCellOptions(e),d=0;d<=l.columnIndex;d++)d===l.columnIndex&&r[d].allowCollapsing&&"infinite"!==e.scrollingMode?(o=!!a.isExpanded,n=r[d]):(o=null,n={command:"expand",cssClass:r[d].cssClass}),this._needRenderCell(d,e.columnIndices)&&this._renderCell(t,{value:o,row:a,rowIndex:s,column:n,columnIndex:d,columnIndices:e.columnIndices,change:e.change});var h=(0,se.n)(this.option("rtlEnabled")),u=(0,y.X)({},r[l.columnIndex],{command:null,type:null,cssClass:null,width:null,showWhenGrouped:!1,alignment:h});l.colspan>1&&(u.colspan=l.colspan),this._needRenderCell(l.columnIndex+1,e.columnIndices)&&this._renderCell(t,{value:a.values[a.groupIndex],row:a,rowIndex:s,column:u,columnIndex:l.columnIndex+1,columnIndices:e.columnIndices,change:e.change})}_renderRows(t,e){var a=this.option("scrolling.mode");super._renderRows(t,(0,y.X)({scrollingMode:a},e)),this._checkRowKeys(e.change),this._renderFreeSpaceRow(t,e.change),this._hasHeight||this.updateFreeSpaceRowHeight(t)}_renderDataRowByTemplate(t,e,a){var{row:n}=e,r=(0,y.X)({columns:e.columns},n),s=this._createRow(n,"tbody");s.appendTo(t),this.renderTemplate(s,a,r,!0,e.change),this._rowPrepared(s,r,e.row)}_renderRow(t,e){var{row:a}=e,{rowTemplate:n}=this.option(),r=this.option("dataRowTemplate");"data"===a.rowType&&r?this._renderDataRowByTemplate(t,e,r):"data"!==a.rowType&&"group"!==a.rowType||(0,v.O9)(a.groupIndex)||!n?super._renderRow(t,e):this.renderTemplate(t,n,(0,y.X)({columns:e.columns},a),!0)}_renderTable(t){var e=this,a=super._renderTable(t);return(0,v.O9)(e.getTableElement())?e._renderScrollable():(e.setTableElement(a),e._renderScrollable(!0),e.resizeCompleted.add(function n(){var r=e.getScrollable();r&&e.element().closest((0,Q.zk)().document).length&&(e.resizeCompleted.remove(n),r._visibilityChanged(!0))})),a}_createTable(){var t=super._createTable.apply(this,arguments);return(this.option().rowTemplate||this.option().dataRowTemplate)&&t.appendTo(this.component.$element()),t}_renderCore(t){var e=this.element();e.addClass(this.addWidgetPrefix("rowsview")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")),e.toggleClass("dx-empty",this._dataController.isEmpty()),this.setAria("role","presentation",e);var a=this._renderTable({change:t}),n=this._updateContent(a,t);return super._renderCore(t),this._lastColumnWidths=null,n}_getRows(t){return t&&t.items||this._dataController.items()}_getCellOptions(t){var{column:e}=t,{row:a}=t,{data:n}=a,r=a&&a.summaryCells,{value:s}=t,o=F.getDisplayValue(e,s,n,a.rowType),l=super._getCellOptions(t);if(l.value=s,l.oldValue=t.oldValue,l.displayValue=o,l.row=a,l.key=a.key,l.data=n,l.rowType=a.rowType,l.values=a.values,l.text=e.command?"":F.formatValue(o,e),l.rowIndex=a.rowIndex,l.summaryItems=r&&r[t.columnIndex],l.resized=e.resizedCallbacks,(0,v.O9)(e.groupIndex)&&!e.command){var d=this.option("grouping.texts"),h=this.option("scrolling.mode");"virtual"!==h&&"infinite"!==h&&(l.groupContinuesMessage=n&&n.isContinuationOnNextPage&&d&&d.groupContinuesMessage,l.groupContinuedMessage=n&&n.isContinuation&&d&&d.groupContinuedMessage)}return l}_setRowsOpacityCore(t,e,a,n){var r=this._columnsController,s=r.getColumns(),o=s&&s[a],l=o&&o.isBand&&o.index;(0,I.__)(t,(d,h)=>{if(!(0,_.A)(h).hasClass(sr))for(var u=0;u<e.length&&(!((0,v.kf)(l)&&r.isParentBandColumn(e[u].index,l)||e[u].index===a)||(t.eq(d).children().eq(u).css({opacity:n}),(0,v.kf)(l)));u++);})}_getDevicePixelRatio(){return(0,Q.zk)().devicePixelRatio}renderNoDataText(){return F.renderNoDataText.apply(this,arguments)}getCellOptions(t,e){var n,r,a=this._dataController.items()[t];return a&&(r=(0,v.Kg)(e)?this._columnsController.columnOption(e):this._columnsController.getVisibleColumns()[e])&&(n=this._getCellOptions({value:r.calculateCellValue(a.data),rowIndex:a.rowIndex,row:a,column:r})),n}getRow(t){if(t>=0){var e=this._getRowElements();if(e.length>t)return(0,_.A)(e[t])}}updateFreeSpaceRowHeight(t){var e=this._dataController,a=e.items(!0).length,n=this._findContentElement(),r=this._getFreeSpaceRowElements(t);if(r&&n&&e.totalCount()>=0){var s=!1;if(a>0)if(this._hasHeight)r.hide(),(0,V.OX)(()=>{var d=this.getScrollbarWidth(!0),h=(0,R.Oq)(this.element())-d,c=h-(0,R.P$)(n)>0,g=this._getRowsHeight(n.children().first()),m=t||this.getTableElements(),b=h-g-Math.ceil(parseFloat(m.css("borderTopWidth")))-this._getHeightCorrection();c&&(0,V.zE)(()=>{r.css("height",b),s=!0,r.show()}),(0,V.zE)(()=>this._updateLastRowBorder(s))});else{var o=e.pageSize()-a,l=this.option("scrolling.mode");o>0&&e.pageCount()>1&&"virtual"!==l&&"infinite"!==l&&((0,ei.k$)(r,o*this._rowHeight),s=!0),!s&&t?(0,ei.k$)(r,0):r.toggle(s),this._updateLastRowBorder(s)}else r.css("height",0),r.show(),this._updateLastRowBorder(!0)}}_getHeightCorrection(){var t=ge.A.webkit&&this._getDevicePixelRatio()>=2,e=ge.A.chrome&&ge.A.version>=91,a=ge.A.mozilla&&ge.A.version>=70&&!this.option("showRowLines");return t||a||e?1:0}_columnOptionChanged(t){var{optionNames:e}=t;t.changeTypes.grouping||(e.width||e.visibleWidth)&&(super._columnOptionChanged(t),this._fireColumnResizedCallbacks())}getScrollable(){return this._scrollable}init(){var t=this,e=t.getController("data");super.init(),t._editorFactoryController=t.getController("editorFactory"),t._rowHeight=0,t._scrollTop=0,t._scrollLeft=-1,t._scrollRight=0,t._hasHeight=void 0,t._contentChanges=[],e.loadingChanged.add((a,n)=>{t.setLoading(a,n)}),e.dataSourceChanged.add(()=>{this._scrollLeft>=0&&!this._dataController.isLoading()&&this._handleScroll({component:this.getScrollable(),forceUpdateScrollPosition:!0,scrollOffset:{top:this._scrollTop,left:this._scrollLeft}})})}_handleDataChanged(t){switch(t.changeType){case"refresh":case"prepend":case"append":case"update":this.render(null,t);break;default:this._update(t)}}publicMethods(){return["isScrollbarVisible","getTopVisibleRowData","getScrollbarWidth","getCellElement","getRowElement","getScrollable"]}contentWidth(){return(0,R.RG)(this.element())-this.getScrollbarWidth()}getScrollbarWidth(t){var e=this._scrollableContainer&&this._scrollableContainer.get(0),a=0;return e&&(t?(a=e.clientHeight?e.offsetHeight-e.clientHeight:0,a+=function(i){var t=i.getScrollable();return t?Math.ceil(parseFloat((0,_.A)(t.content()).css("paddingBottom"))):0}(this)):a=e.clientWidth?e.offsetWidth-e.clientWidth:0),a>0?a:0}_fireColumnResizedCallbacks(){for(var t=this._lastColumnWidths||[],e=[],a=this.getColumns(),n=0;n<a.length;n++)e[n]=a[n].visibleWidth,a[n].resizedCallbacks&&!(0,v.O9)(a[n].groupIndex)&&t[n]!==e[n]&&a[n].resizedCallbacks.fire(e[n]);this._lastColumnWidths=e}_updateLastRowBorder(t){this.option("showBorders")&&this.option("showRowLines")&&!t?this.element().addClass(ql):this.element().removeClass(ql)}_updateScrollable(){var t=wt.A.getInstance(this.element());t&&(t.update(),(t.option("useNative")||!t?.isRenovated())&&this._updateHorizontalScrollPosition())}_updateHorizontalScrollPosition(){var t=this.getScrollable(),e=t&&t.scrollOffset().left;if(this.option("rtlEnabled")){var n=Zl(t);n-e!==this._scrollRight&&(this._scrollLeft=n-this._scrollRight)}this._scrollLeft>=0&&e!==this._scrollLeft&&t.scrollTo({x:this._scrollLeft})}_resizeCore(){var t=this;t._fireColumnResizedCallbacks(),t._updateRowHeight(),(0,V.zE)(()=>{t._renderScrollable(),t.renderNoDataText(),t.updateFreeSpaceRowHeight(),(0,V.OX)(()=>{t._updateScrollable()})})}scrollTo(t){var e=this.element(),a=e&&wt.A.getInstance(e);a&&a.scrollTo(t)}height(t){var e=this.element();if(0===arguments.length)return e?(0,R.P$)(e,!0):0;(0,v.O9)(t)&&e&&(this.hasHeight("auto"!==t),(0,ei.k$)(e,t))}hasHeight(t){if(0===arguments.length)return!!this._hasHeight;this._hasHeight=t}setLoading(t,e){var a=this._loadPanel,n=this._dataController,r=this.option("loadPanel")||{},s=n.isLoaded()?r.animation:null,o=this.element();if((0,Q.Vd)()&&(!a&&void 0!==e&&n.isLocalStore()&&"auto"===r.enabled&&o&&(this._renderLoadPanel(o,o.parent()),a=this._loadPanel),a)){var l={message:e||r.text,animation:s,visible:t};t&&(l.position=F.calculateLoadPanelPosition(o)),clearTimeout(this._hideLoadingTimeoutID),a.option("visible")&&!t?this._hideLoadingTimeoutID=setTimeout(()=>{a.option(l)},200):a.option(l)}}setRowsOpacity(t,e){var a=this._getRowElements().not(".".concat(sr))||[];this._setRowsOpacityCore(a,this.getColumns(),t,e)}_getCellElementsCore(t){var e=super._getCellElementsCore.apply(this,arguments);if(e){var a=e.filter(".".concat(Yl)).index();if(a>=0&&e.length>a+1)return e.slice(0,a+1)}return e}_getBoundaryVisibleItemIndex(t,e){var a=0,n=0,r=0,s=this._scrollTop,o=this._findContentElement(),l=o&&o.offset().top,h=this.getController("data").items(),u=this.getTableElement();if(h.length&&u){var c=this._getRowElements(u).filter(":visible");for(t||(s+=(0,R.P$)(this._hasHeight?this.element():(0,Q.zk)())),a=0;a<h.length;a++){n=r;var m=(0,_.A)(c).eq(a);if(m.length&&(r=m.offset(),(r=(t?r.top:r.top+(0,R.P$)(m))-l)>s)){a&&(e||2*s<Math.round(r+n))&&a--;break}}a&&a===h.length&&a--}return a}getTopVisibleItemIndex(t){return this._getBoundaryVisibleItemIndex(!0,t)}getBottomVisibleItemIndex(t){return this._getBoundaryVisibleItemIndex(!1,t)}getTopVisibleRowData(){var t=this.getTopVisibleItemIndex(),e=this._dataController.items();if(e[t])return e[t].data}_scrollToElement(t,e){var a=this.getScrollable();a&&a.scrollToElement(t,e)}optionChanged(t){switch(super.optionChanged(t),t.name){case"wordWrapEnabled":case"showColumnLines":case"showRowLines":case"rowAlternationEnabled":case"rowTemplate":case"dataRowTemplate":case"twoWayBindingEnabled":this._invalidate(!0,!0),t.handled=!0;break;case"scrolling":this._rowHeight=null,this._tableElement=null,t.handled=!0;break;case"rtlEnabled":this._rowHeight=null,this._tableElement=null;break;case"loadPanel":this._tableElement=null,this._invalidate(!0,"loadPanel.enabled"!==t.fullName),t.handled=!0;break;case"noDataText":this.renderNoDataText(),t.handled=!0}}setAriaOwns(t,e){var a,n=this._findContentElement(),r=this.getTableElement();r?.length&&this.setAria("owns","".concat(t??""," ").concat(null!==(a=r.attr("id"))&&void 0!==a?a:""," ").concat(e??"").trim(),n)}dispose(){super.dispose(),clearTimeout(this._hideLoadingTimeoutID),this._scrollable&&this._scrollable.dispose()}setScrollerSpacing(){}_restoreErrorRow(){}}}},td="dx-treelist-text-content",id="dx-treelist-expanded",ad="dx-treelist-collapsed",RC=Fa.views.rowsView.inherit(function(){var i=function(t,e){var a=(0,_.A)("<div>").addClass("dx-treelist-empty-space");return t&&a.toggleClass(id,e).toggleClass(ad,!e).append((0,_.A)("<span>")),a};return{_renderIconContainer(t,e){var a=(0,_.A)("<div>").addClass("dx-treelist-icon-container").appendTo(t);if(e.watch){var n=e.watch(()=>[e.row.level,e.row.isExpanded,e.row.node.hasChildren],()=>{a.empty(),this._renderIcons(a,e)});O.A.on(a,Ot.N,n)}return t.addClass("dx-treelist-cell-expandable"),this._renderIcons(a,e)},_renderIcons(t,e){for(var{row:a}=e,{level:n}=a,r=0;r<=n;r++)t.append(i(r===n&&a.node.hasChildren,a.isExpanded));return t},_renderCellCommandContent(t,e){return this._renderIconContainer(t,e),!0},_processTemplate(t,e){var a,n=this,s=this.callBase(t),o=n._columnsController.getFirstDataColumnIndex();return s&&(null===(a=e.column)||void 0===a?void 0:a.index)===o?{render(l){var h,d=l.container;n._renderCellCommandContent(d,l.model)&&(l.container=(h=d,(0,_.A)("<div>").addClass(td).appendTo(h))),s.render(l)}}:s},_updateCell(t,e){t=t.hasClass(td)?t.parent():t,this.callBase(t,e)},_rowClick(t){var e=this._dataController,a=(0,_.A)(t.event.target),n=this.isExpandIcon(a),r=e&&e.items()[t.rowIndex];n&&r&&e.changeRowExpand(r.key),this.callBase(t)},_createRow(t){var e=t&&t.node,a=this.callBase.apply(this,arguments);return e&&(this.setAria("level",t.level+1,a),e.hasChildren&&this.setAria("expanded",t.isExpanded,a)),a},_getGridRoleName:()=>"treegrid",isExpandIcon:t=>!!t.closest(".".concat(id,", .").concat(ad)).length,setAriaExpandedAttribute(t,e){var a=e.isExpanded;this.setAria("expanded",(0,v.O9)(a)&&a.toString(),t)}}}());G.registerModule("rows",{defaultOptions:Fa.defaultOptions,views:{rowsView:RC}});var DC=D(6115),BC=D(4407);const MC=class FC extends BC.A{_getPlainItems(){return(0,I.Tj)(this._collectionWidget.option("items"),function t(e){return e.items?[e].concat((0,I.Tj)(e.items,t)):e})}_stringifyItem(t){return JSON.stringify(t,(e,a)=>"template"===e?this._getTemplateString(a):a)}_getTemplateString(t){return"object"==typeof t?(0,_.A)(t).text():t.toString()}};var VC=D(2338),Bi="dx-menu",PC=Bi+"-no-icons",Me=Bi+"-item",kC=Me+"-content",or=Me+"-selected",nd=Me+"-wrapper",NC=Bi+"-items-container",HC=Me+"-expanded",zC=Bi+"-separator",KC=Bi+"-last-group-item",WC=Me+"-has-text",GC=Me+"-has-icon",UC=Me+"-has-submenu",rd=Me+"-popout",$C=rd+"-container",sd=Me+"-text",YC={show:50,hide:300},jC="".concat(sd,"-with-url");const od=(()=>{class i extends ho{_getDefaultOptions(){return(0,y.X)(super._getDefaultOptions(),{items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:{name:"onHover",delay:{show:50,hide:300}},animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectByClick:!1,focusOnSelectedItem:!1,keyExpr:null,_itemAttributes:{role:"menuitem"},useInkRipple:!1})}_itemDataKey(){return"dxMenuItemDataKey"}_itemClass(){return Me}_setAriaSelectionAttribute(){}_selectedItemClass(){return or}_widgetClass(){return"dx-menu-base"}_focusTarget(){return this._itemContainer()}_clean(){this.option("focusedElement",null),super._clean()}_supportedKeys(){return(0,y.X)(super._supportedKeys(),{space:()=>{var e=(0,_.A)(this.option("focusedElement"));!e.length||!this._isSelectionEnabled()||this.selectItem(e[0])},pageUp:V.lQ,pageDown:V.lQ})}_isSelectionEnabled(){return"single"===this.option("selectionMode")}_init(){this._activeStateUnit=".".concat(Me),super._init(),this._renderSelectedItem(),this._initActions()}_getLinkContainer(e,a,n){var{linkAttr:r,url:s}=n;return e?.addClass("dx-icon-with-url"),a?.addClass(jC),super._getLinkContainer(e,a,{linkAttr:r,url:s})}_addContent(e,a){var{html:n,url:r}=a;if(r){e.html(n);var s=this._getLinkContainer(this._getIconContainer(a),this._getTextContainer(a),a);e.append(s)}else super._addContent(e,a);e.append(this._getPopoutContainer(a)),this._addContentClasses(a,e.parent())}_getTextContainer(e){var{text:a}=e;if(a){var n=(0,_.A)("<span>").addClass(sd),r=(0,v.Qd)(e)?a:String(e);return n.text(r)}}_getItemExtraPropNames(){return["url","linkAttr"]}_getPopoutContainer(e){var n,a=e.items;if(a&&a.length){var r=(0,_.A)("<div>").addClass(rd);n=(0,_.A)("<span>").addClass($C).append(r)}return n}_getDataAdapterOptions(){return{rootValue:0,multipleSelection:!1,recursiveSelection:!1,recursiveExpansion:!1,searchValue:""}}_selectByItem(e){if(e){var a=this._dataAdapter.getNodeByItem(e);this._dataAdapter.toggleSelection(a.internalFields.key,!0)}}_renderSelectedItem(){var e=this._dataAdapter.getSelectedNodesKeys(),a=e.length&&e[0],n=this.option("selectedItem");if(a){var r=this._dataAdapter.getNodeByKey(a);if(!1!==r.selectable){if(!n)return void this.option("selectedItem",r.internalFields.item);n!==r.internalFields.item&&(this._dataAdapter.toggleSelection(a,!1),this._selectByItem(n))}}else this._selectByItem(n)}_initActions(){}_initMarkup(){super._initMarkup(),this.option("useInkRipple")&&this._renderInkRipple()}_renderInkRipple(){this._inkRipple=(0,DC.XX)()}_toggleActiveState(e,a,n){if(super._toggleActiveState.apply(this,arguments),this._inkRipple){var r={element:e,event:n};a?this._inkRipple.showWave(r):this._inkRipple.hideWave(r)}}_getShowSubmenuMode(){var e=this.option("showSubmenuMode");return e=(0,v.Gv)(e)?e.name:e,this._isDesktopDevice()?e:"onClick"}_initSelectedItems(){}_isDesktopDevice(){return"desktop"===ne.A.real().deviceType}_initEditStrategy(){this._editStrategy=new MC(this)}_addCustomCssClass(e){e.addClass(this.option("cssClass"))}_itemWrapperSelector(){return".".concat(nd)}_hoverStartHandler(e){var a=this._getItemElementByEventArgs(e);!a||this._isItemDisabled(a)||(e.stopPropagation(),"onHover"===this._getShowSubmenuMode()&&(clearTimeout(this._showSubmenusTimeout),this._showSubmenusTimeout=setTimeout(this._showSubmenu.bind(this,a),this._getSubmenuDelay("show"))))}_getAvailableItems(e){return super._getAvailableItems(e).filter(function(){return"hidden"!==(0,_.A)(this).css("visibility")})}_isItemDisabled(e){return this._disabledGetter(e.data(this._itemDataKey()))}_showSubmenu(e){this._addExpandedClass(e)}_addExpandedClass(e){(0,_.A)(e).addClass(HC)}_getSubmenuDelay(e){var{delay:a}=this.option("showSubmenuMode");return(0,v.O9)(a)?(0,v.Gv)(a)?a[e]:a:YC[e]}_getItemElementByEventArgs(e){var a=(0,_.A)(e.target);if(a.hasClass(this._itemClass())||a.get(0)===e.currentTarget)return a;for(;!a.hasClass(this._itemClass());)if((a=a.parent()).hasClass("dx-submenu"))return null;return a}_hoverEndHandler(){clearTimeout(this._showSubmenusTimeout)}_hasSubmenu(e){return e&&e.internalFields.childrenKeys.length}_renderContentImpl(){this._renderItems(this._dataAdapter.getRootNodes())}_renderItems(e,a){if(e.length){this.hasIcons=!1;var n=this._renderContainer(this.$element(),a),r=-1,s=-1;(0,I.__)(e,(o,l)=>{var d=!1!==l.visible;d&&r<0&&(r=o),r<o&&(l.beginGroup||o===s)&&(s=d?o:o+1),o===s&&r<o&&this._renderSeparator(n),this._renderItem(o,l,n)}),this.hasIcons||n.addClass(PC)}}_renderContainer(e){var a=(0,_.A)("<ul>");return this.setAria("role","none",a),a.appendTo(e).addClass(NC)}_createDOMElement(e){var a=(0,_.A)("<li>");return this.setAria("role","none",a),a.appendTo(e).addClass(nd)}_renderItem(e,a,n,r){var s=this.option("items"),o=r||this._createDOMElement(n);s[e+1]&&s[e+1].beginGroup&&o.addClass(KC);var l=super._renderItem(e,a.internalFields.item,o);a.internalFields.item===this.option("selectedItem")&&l.addClass(or),l.attr("tabIndex",-1),this._hasSubmenu(a)&&this.setAria("haspopup","true",l)}_renderItemFrame(e,a,n){var r=n.children(".".concat(Me));return r.length?r:super._renderItemFrame.apply(this,arguments)}_refreshItem(e,a){var n=this._dataAdapter.getNodeByItem(a),r=e.data(this._itemIndexKey()),s=e.closest("ul"),o=e.closest("li");this._renderItem(r,n,s,o)}_addContentClasses(e,a){var r=!!e.icon,s=!!e.items&&!!e.items.length;a.toggleClass(WC,!!e.text&&!!e.text.length),a.toggleClass(GC,r),this.hasIcons||(this.hasIcons=r),a.toggleClass(UC,s)}_getItemContent(e){var a=super._getItemContent(e);return a.length||(a=e.children(".".concat(kC))),a}_postprocessRenderItem(e){var a=(0,_.A)(e.itemElement),n=this._dataAdapter.getSelectedNodesKeys();n.length&&this._selectedGetter(e.itemData)&&this._isItemSelectable(e.itemData)&&this._dataAdapter.getNodeByItem(e.itemData).internalFields.key===n[0]?(a.addClass(this._selectedItemClass()),this._setAriaSelectionAttribute(a,"true")):this._setAriaSelectionAttribute(a,"false")}_isItemSelectable(e){return!1!==e.selectable}_renderSeparator(e){(0,_.A)("<li>").appendTo(e).addClass(zC)}_itemClickHandler(e){if(!e._skipHandling){var a=this._createAction(this._updateSubmenuVisibilityOnClick.bind(this));this._itemDXEventHandler(e,"onItemClick",{},{beforeExecute:this._itemClick,afterExecute:a.bind(this)}),e._skipHandling=!0}}_itemClick(e){var a=e.args[0],n=a.event.target.getElementsByClassName("dx-item-url")[0];a.itemData.url&&n&&n.click()}_updateSubmenuVisibilityOnClick(e){this._updateSelectedItemOnClick(e),"onClick"===this._getShowSubmenuMode()&&this._addExpandedClass(e.args[0].itemElement)}_updateSelectedItemOnClick(e){var a=e.args?e.args[0]:e;if(this._isItemSelectAllowed(a.itemData)){var n=this._dataAdapter.getSelectedNodesKeys(),r=n.length&&this._dataAdapter.getNodeByKey(n[0]);r&&this._toggleItemSelection(r,!1),r&&r.internalFields.item===a.itemData?(this._fireSelectionChangeEvent(null,this.option("selectedItem")),this._setOptionWithoutOptionChange("selectedItem",null)):this.selectItem(a.itemData)}}_isItemSelectAllowed(e){var a=this._isSelectionEnabled()&&this.option("selectByClick");return!this._isContainerEmpty()&&a&&this._isItemSelectable(e)&&!this._itemsGetter(e)}_isContainerEmpty(){return this._itemContainer().is(":empty")}_syncSelectionOptions(){return(0,V.TA)()}_optionChanged(e){switch(e.name){case"showSubmenuMode":break;case"selectedItem":var a=this._dataAdapter.getNodeByItem(e.value),n=this._dataAdapter.getSelectedNodesKeys()[0];if(a&&a.internalFields.key!==n){if(!1===a.selectable)break;n&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(n),!1),this._toggleItemSelection(a,!0),this._updateSelectedItems()}break;case"cssClass":case"position":case"selectByClick":case"animation":case"useInkRipple":this._invalidate();break;default:super._optionChanged(e)}}_toggleItemSelection(e,a){var n=this._getElementByItem(e.internalFields.item);n&&(0,_.A)(n).toggleClass(or),this._dataAdapter.toggleSelection(e.internalFields.key,a)}_getElementByItem(e){var a;return(0,I.__)(this._itemElements(),(n,r)=>(0,_.A)(r).data(this._itemDataKey())!==e||(a=r,!1)),a}_updateSelectedItems(e,a){(e||a)&&this._fireSelectionChangeEvent(a,e)}_fireSelectionChangeEvent(e,a){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:[e],removedItems:[a]})}selectItem(e){var a=e.nodeType?this._getItemData(e):e,n=this._dataAdapter.getSelectedNodesKeys()[0],r=this.option("selectedItem"),s=this._dataAdapter.getNodeByItem(a);s.internalFields.key!==n&&(n&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(n),!1),this._toggleItemSelection(s,!0),this._updateSelectedItems(r,a),this._setOptionWithoutOptionChange("selectedItem",a))}unselectItem(e){var a=e.nodeType?this._getItemData(e):e,n=this._dataAdapter.getNodeByItem(a),r=this.option("selectedItem");n.internalFields.selected&&(this._toggleItemSelection(n,!1),this._updateSelectedItems(r,null),this._setOptionWithoutOptionChange("selectedItem",null))}}return i.ItemClass=VC.A,i})();var ZC=D(4935),lr=D(4602),ld="dx-menu",Fi=ld+"-item",ri=Fi+"-expanded",Ma=ld+"-items-container",dd=Fi+"-wrapper",Oe="dx-submenu",hd="dx-state-hover",_d=["onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],lf=["up","down","first","last"],vd="dxcontextmenu",df=(0,Q.zk)();class md extends od{getShowEvent(t){var e=null;return(0,v.Gv)(t)?null!==t.name&&(e=t.name||vd):e=t,e}getShowDelay(t){return(0,v.Gv)(t)&&t.delay}_getDefaultOptions(){return(0,y.X)(super._getDefaultOptions(),{showEvent:vd,hideOnOutsideClick:!0,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onSubmenuCreated:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:void 0,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>!(0,Q.Vd)(),options:{animation:null}}])}_setDeprecatedOptions(){super._setDeprecatedOptions(),(0,y.X)(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.2",alias:"hideOnOutsideClick"}})}_initActions(){this._actions={},(0,I.__)(_d,(t,e)=>{this._actions[e]=this._createActionByOption(e)||V.lQ})}_setOptionsByReference(){super._setOptionsByReference(),(0,y.X)(this._optionsByReference,{animation:!0,selectedItem:!0})}_focusInHandler(){}_itemContainer(){return this._overlay?this._overlay.$content():(0,_.A)()}_eventBindingTarget(){return this._itemContainer()}itemsContainer(){return this._overlay?this._overlay.$content():void 0}_supportedKeys(){return(0,y.X)(super._supportedKeys(),{space:()=>{var t=(0,_.A)(this.option("focusedElement"));this.hide(),t.length&&this._isSelectionEnabled()&&this.selectItem(t[0])},escape:this.hide})}_getActiveItem(){var t=this._getAvailableItems(),e=t.filter(".".concat("dx-state-focused")),a=t.filter(".".concat(hd));return a.closest(".".concat(Ma)).find(".".concat(Fi)).index(e)>=0?e:a.length?a:super._getActiveItem()}_moveFocus(t){var o,e=this._getItemsByLocation(t),a=this._getActiveItem(!0),n=this.itemsContainer().find(".".concat(hd)),s=!(!(0,_.A)(this.option("focusedElement")).length&&!n.length);switch(t){case"up":o=s?this._prevItem(e):a,this._setFocusedElement(o),a.is(e.first())&&this._actions.onLeftFirstItem(a);break;case"down":o=s?this._nextItem(e):a,this._setFocusedElement(o),a.is(e.last())&&this._actions.onLeftLastItem(a);break;case"right":o=this.option("rtlEnabled")?this._hideSubmenuHandler():this._expandSubmenuHandler(e,t),this._setFocusedElement(o);break;case"left":o=this.option("rtlEnabled")?this._expandSubmenuHandler(e,t):this._hideSubmenuHandler(),this._setFocusedElement(o);break;case"first":o=e.first(),this._setFocusedElement(o);break;case"last":o=e.last(),this._setFocusedElement(o);break;default:return super._moveFocus(t)}}_setFocusedElement(t){t&&0!==t.length&&this.option("focusedElement",(0,Y.c)(t))}_getItemsByLocation(t){var a,e=this._getActiveItem(!0);return lf.includes(t)&&(a=e.closest(".".concat(Ma)).children().children()),this._getAvailableItems(a)}_getAriaTarget(){return this.$element()}_refreshActiveDescendant(){if((0,v.O9)(this._overlay)){var t=this._overlay.$content();super._refreshActiveDescendant(t)}}_hideSubmenuHandler(){var t=this._getActiveItem(!0),e=t.parents(".".concat(ri)).first();return e.length?(this._hideSubmenusOnSameLevel(e),this._hideSubmenu(t.closest(".".concat(Oe))),e):(this._actions.onCloseRootSubmenu(t),t)}_expandSubmenuHandler(t,e){var a=this._getActiveItem(!0),n=this._getItemData(a),r=this._dataAdapter.getNodeByItem(n),s=this._hasSubmenu(r),o=a.children(".".concat(Oe));if(s&&!a.hasClass("dx-state-disabled"))return(!o.length||"hidden"===o.css("visibility"))&&this._showSubmenu(a),this._nextItem(this._getItemsByLocation(e));this._actions.onExpandLastSubmenu(a)}_clean(){this._overlay&&(this._overlay.$element().remove(),this._overlay=null),this._detachShowContextMenuEvents(this._getTarget()),super._clean()}_initMarkup(){this.$element().addClass("dx-has-context-menu"),super._initMarkup()}_render(){super._render(),this._renderVisibility(this.option("visible")),this._addWidgetClass()}_renderContentImpl(){this._detachShowContextMenuEvents(this._getTarget()),this._attachShowContextMenuEvents()}_attachKeyboardEvents(){!this._keyboardListenerId&&this._focusTarget().length&&super._attachKeyboardEvents()}_renderContextMenuOverlay(){if(!this._overlay){var t=this._getOverlayOptions();this._overlay=this._createComponent((0,_.A)("<div>").appendTo(this._$element),jt.A,t);var e=this._overlay.$content();e.addClass("dx-context-menu"),this._addCustomCssClass(e),this._addPlatformDependentClass(e),this._attachContextMenuEvent()}}preventShowingDefaultContextMenuAboveOverlay(){var t=this._itemContainer(),e=(0,P.b4)(ZC.U,this.NAME);O.A.off(t,e,".".concat(Oe)),O.A.on(t,e,".".concat(Oe),(a=>{a.stopPropagation(),a.preventDefault(),O.A.off(t,e,".".concat(Oe))}).bind(this))}_itemContextMenuHandler(t){super._itemContextMenuHandler(t),t.stopPropagation()}_addPlatformDependentClass(t){ne.A.current().phone&&t.addClass("dx-menu-phone-overlay")}_detachShowContextMenuEvents(t){var e=this.getShowEvent(this.option("showEvent"));if(e){var a=(0,P.b4)(e,this.NAME);this._showContextMenuEventHandler?O.A.off(U.A.getDocument(),a,t,this._showContextMenuEventHandler):O.A.off((0,_.A)(t),a)}}_attachShowContextMenuEvents(){var t=this._getTarget(),e=this.getShowEvent(this.option("showEvent"));if(e){var a=(0,P.b4)(e,this.NAME),n=this._createAction(s=>{var o=this.getShowDelay(this.option("showEvent"));o?setTimeout(()=>this._show(s.event),o):this._show(s.event)},{validatingTargetName:"target"}),r=s=>n({event:s,target:(0,_.A)(s.currentTarget)});n=this._createAction(n),(0,v.Kb)(t)||t.nodeType||(0,v.l6)(t)?(this._showContextMenuEventHandler=void 0,O.A.on(t,a,r)):(this._showContextMenuEventHandler=r,O.A.on(U.A.getDocument(),a,t,this._showContextMenuEventHandler))}}_hoverEndHandler(t){super._hoverEndHandler(t),t.stopPropagation()}_renderDimensions(){}_renderContainer(t,e){var a=e||this._itemContainer();(t=(0,_.A)("<div>")).appendTo(a).addClass(Oe).css("visibility",e?"hidden":"visible"),t.parent().hasClass("dx-overlay-content")||this._addCustomCssClass(t);var n=super._renderContainer(t);return e?n:this.option("width")?n.css("minWidth",this.option("width")):this.option("height")?n.css("minHeight",this.option("height")):n}_renderSubmenuItems(t,e){this._renderItems(this._getChildNodes(t),e),this._actions.onSubmenuCreated({itemElement:(0,Y.c)(e),itemData:t.internalFields.item,submenuElement:(0,Y.c)(e.children(".".concat(Oe)))})}_getOverlayOptions(){var t=this.option("position");return{focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),innerOverlay:!0,hideOnOutsideClick:a=>this._hideOnOutsideClickHandler(a),propagateOutsideClick:!0,hideOnParentScroll:!0,deferRendering:!1,position:{at:t.at,my:t.my,of:this._getTarget(),collision:"flipfit"},shading:!1,showTitle:!1,height:"auto",width:"auto",onShown:this._overlayShownActionHandler.bind(this),onHiding:this._overlayHidingActionHandler.bind(this),onHidden:this._overlayHiddenActionHandler.bind(this),visualContainer:df}}_overlayShownActionHandler(t){this._actions.onShown(t)}_overlayHidingActionHandler(t){this._actions.onHiding(t),t.cancel||(this._hideAllShownSubmenus(),this._setOptionWithoutOptionChange("visible",!1))}_overlayHiddenActionHandler(t){this._actions.onHidden(t)}_shouldHideOnOutsideClick(t){var{closeOnOutsideClick:e,hideOnOutsideClick:a}=this.option();return(0,v.Tn)(a)?a(t):(0,v.Tn)(e)?e(t):a||e}_hideOnOutsideClickHandler(t){if(!this._shouldHideOnOutsideClick(t))return!1;if(U.A.isDocument(t.target))return!0;var e=this._getActiveItemsContainer(t.target),a=this._getItemsContainers(),n=this._searchActiveItem(t.target),r=this.$element().parents(".".concat(Fi)),s=n[0]===r[0]&&n.length&&r.length;return!(this._isIncludeOverlay(e,a)&&n.length)&&!s||("onClick"===this._getShowSubmenuMode()&&this._hideAllShownChildSubmenus(n),!1)}_getActiveItemsContainer(t){return(0,_.A)(t).closest(".".concat(Ma))}_getItemsContainers(){return this._overlay.$content().find(".".concat(Ma))}_searchActiveItem(t){return(0,_.A)(t).closest(".".concat(Fi)).eq(0)}_isIncludeOverlay(t,e){var a=!1;return(0,I.__)(e,(n,r)=>{t.is(r)&&!a&&(a=!0)}),a}_hideAllShownChildSubmenus(t){var e=t.find(".".concat(Oe)),a=(0,y.X)([],this._shownSubmenus);e.length>0&&(0,I.__)(a,(n,r)=>{var s=this._searchActiveItem(r.context).parent();s.parent().is(t.parent().parent())&&!s.is(t.parent())&&this._hideSubmenu(r)})}_showSubmenu(t){var e=this._dataAdapter.getNodeByItem(this._getItemData(t));if(this._hideSubmenusOnSameLevel(t),this._hasSubmenu(e)){var a=t.children(".".concat(Oe)),n=a.length;super._showSubmenu(t),n||this._renderSubmenuItems(e,t),this._isSubmenuVisible(a)||this._drawSubmenu(t)}}_hideSubmenusOnSameLevel(t){var e=t.parent(".".concat(dd)).siblings().find(".".concat(ri));e.length&&(e.removeClass(ri),this._hideSubmenu(e.find(".".concat(Oe))))}_hideSubmenuGroup(t){this._isSubmenuVisible(t)&&this._hideSubmenuCore(t)}_isSubmenuVisible(t){return"visible"===t.css("visibility")}_drawSubmenu(t){var e=this.option("animation")?this.option("animation").show:{},a=t.children(".".concat(Oe)),n=this._getSubmenuPosition(t);this._overlay&&this._overlay.option("visible")&&((0,v.O9)(this._shownSubmenus)||(this._shownSubmenus=[]),this._shownSubmenus.includes(a)||this._shownSubmenus.push(a),e&&ce.A.stop(a),Se.A.setup(a,n),e&&((0,v.Qd)(e.to)&&(e.to.position=n),this._animate(a,e)),a.css("visibility","visible"))}_animate(t,e){ce.A.animate(t,e)}_getSubmenuPosition(t){var e=this.option("submenuDirection").toLowerCase(),n={collision:"flip",of:t.parent(".".concat(dd)),offset:{h:0,v:-1}};switch(e){case"left":n.at="left top",n.my="right top";break;case"right":n.at="right top",n.my="left top";break;default:this.option("rtlEnabled")?(n.at="left top",n.my="right top"):(n.at="right top",n.my="left top")}return n}_updateSubmenuVisibilityOnClick(t){if(t.args.length){var e=t.args[0].itemData,a=this._dataAdapter.getNodeByItem(e);if(a){var n=(0,_.A)(t.args[0].itemElement),r=n.find(".".concat(Oe));if(this._hasSubmenu(a)&&!r.length&&(this._renderSubmenuItems(a,n),r=n.find(".".concat(Oe))),(n.context!==r.context||"visible"!==r.css("visibility"))&&(this._updateSelectedItemOnClick(t),e&&!e.disabled&&(!e||!1!==e.closeMenuOnClick)))if(0===r.length){var l=(0,_.A)(n.parents(".".concat(Oe))[0]);this._hideSubmenu(l),!t.canceled&&this._overlay&&this._overlay.option("visible")&&this.option("visible",!1)}else this._shownSubmenus&&this._shownSubmenus.length>0&&this._shownSubmenus[0].is(r)&&this._hideSubmenu(r),this._showSubmenu(n)}}}_hideSubmenu(t){var e=(0,y.X)([],this._shownSubmenus);(0,I.__)(e,(a,n)=>{(t.is(n)||(0,ht.gR)(t[0],n[0]))&&(n.parent().removeClass(ri),this._hideSubmenuCore(n))})}_hideSubmenuCore(t){var e=this._shownSubmenus.indexOf(t),a=this.option("animation")?this.option("animation").hide:null;e>=0&&this._shownSubmenus.splice(e,1),this._stopAnimate(t),a&&this._animate(t,a),t.css("visibility","hidden")}_stopAnimate(t){ce.A.stop(t,!0)}_hideAllShownSubmenus(){var t=(0,y.X)([],this._shownSubmenus);this._overlay.$content().find(".".concat(ri)).removeClass(ri),(0,I.__)(t,(a,n)=>{this._hideSubmenu(n)})}_visibilityChanged(t){t&&this._renderContentImpl()}_optionChanged(t){if(_d.includes(t.name))this._initActions();else switch(t.name){case"visible":this._renderVisibility(t.value);break;case"showEvent":case"position":case"submenuDirection":this._invalidate();break;case"target":t.previousValue&&this._detachShowContextMenuEvents(t.previousValue),this._invalidate();break;case"closeOnOutsideClick":case"hideOnOutsideClick":break;default:super._optionChanged(t)}}_renderVisibility(t){return t?this._show():this._hide()}_toggleVisibility(){}_show(t){var e={jQEvent:t},a=(new w.cY).reject().promise();if(this._actions.onShowing(e),e.cancel)return a;var r,n=this._positionContextMenu(t);return n&&(this._overlay||(this._renderContextMenuOverlay(),this._overlay.$content().addClass(this._widgetClass()),this._renderFocusState(),this._attachHoverEvents(),this._attachClickEvent(),this._renderItems(this._dataAdapter.getRootNodes())),this._setOptionWithoutOptionChange("visible",!0),this._overlay.option("position",n),a=this._overlay.show(),t&&t.stopPropagation(),this._setAriaAttributes(),(null==t||null===(r=t.originalEvent)||void 0===r?void 0:r.type)===lr.A.name&&this.preventShowingDefaultContextMenuAboveOverlay()),a}_setAriaAttributes(){this._overlayContentId="dx-".concat(new Pe.A),this.setAria("owns",this._overlayContentId),this.setAria({id:this._overlayContentId,role:"menu"},this._overlay.$content())}_cleanAriaAttributes(){this._overlay&&this.setAria("id",null,this._overlay.$content()),this.setAria("owns",void 0)}_getTarget(){return this.option("target")||this.option("position").of||(0,_.A)(U.A.getDocument())}_getContextMenuPosition(){return(0,y.X)({},this.option("position"),{of:this._getTarget()})}_positionContextMenu(t){var e=this._getContextMenuPosition(),a=this._isInitialOptionValue("position"),n=this._createActionByOption("onPositioning");t&&t.preventDefault&&a&&(e.of=t);var r={position:e,event:t};return n(r),r.cancel?e=null:r.event&&(r.event.cancel=!0,t.preventDefault()),e}_refresh(){if((0,Q.Vd)())if(this._overlay){var t=this._overlay.option("position");super._refresh(),this._overlay&&this._overlay.option("position",t)}else super._refresh();else super._refresh()}_hide(){var t;return this._overlay&&(t=this._overlay.hide(),this._setOptionWithoutOptionChange("visible",!1)),this._cleanAriaAttributes(),this.option("focusedElement",null),t||(new w.cY).reject().promise()}toggle(t){var e=this.option("visible");return this._renderVisibility(t=void 0===t?!e:t)}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}}(0,le.A)("dxContextMenu",md);const Cd=md;var uf={columnHeadersView:"header",rowsView:"content",footerView:"footer",headerPanel:"headerPanel"},cf=["columnHeadersView","rowsView","footerView","headerPanel"],gf=Z.ViewController.inherit({init(){this.createAction("onContextMenuPreparing")},getContextMenuItems(i){if(!i)return!1;var a,n,r,s,t=this,e=(0,_.A)(i.target);return(0,I.__)(cf,function(){var o,l,d=t.getView(this);if((a=d&&d.element())&&(a.is(e)||a.find(e).length)){r=e.closest(".dx-row > td, .dx-row > tr"),n=r.parent();var h=d.getRowIndex(n),u=r[0]&&r[0].cellIndex,c=n.data("options"),g={event:i,targetElement:(0,Y.c)(e),target:uf[this],rowIndex:h,row:d._getRows()[h],columnIndex:u,column:null===(l=null===(o=c?.cells)||void 0===o?void 0:o[u])||void 0===l?void 0:l.column};if(g.items=d.getContextMenuItems&&d.getContextMenuItems(g),t.executeAction("onContextMenuPreparing",g),t._contextMenuPrepared(g),s=g.items)return!1}}),s},_contextMenuPrepared:V.lQ}),pf=Z.View.inherit({_renderCore(){var i=this,t=i.element().addClass("dx-context-menu");this.setAria("role","presentation",t),this._createComponent(t,Cd,{onPositioning(e){var{event:a}=e,n=e.component,r=i.getController("contextMenu").getContextMenuItems(a);r?(n.option("items",r),a.stopPropagation()):e.cancel=!0},onItemClick(e){e.itemData.onItemClick&&e.itemData.onItemClick(e)},cssClass:i.getWidgetContainerClass(),target:i.component.$element()})}}),fd={defaultOptions:()=>({onContextMenuPreparing:null}),controllers:{contextMenu:gf},views:{contextMenuView:pf}};G.registerModule("contextMenu",fd);var Mi="dx-error-row",xd="dx-error-message",mf=Z.ViewController.inherit({init(){this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView")},_createErrorRow(i,t){var a,n,e=this,r=this._renderErrorMessage(i);return t?(a=(0,_.A)("<tr>").attr("role","row").addClass(Mi),n=(0,_.A)("<div>").addClass("dx-closebutton").addClass(e.addWidgetPrefix("action")),O.A.on(n,ae.U,e.createAction(s=>{var l,o=s.event,d=(0,_.A)(o.currentTarget).closest(".".concat(Mi)).index();o.stopPropagation(),(0,I.__)(t,(h,u)=>{l=(0,_.A)(u).children("tbody").children("tr").eq(d),e.removeErrorRow(l)}),e.getController("resizing")&&e.getController("resizing").fireContentReadyAction()})),(0,_.A)("<td>").attr({colSpan:e.getController("columns").getVisibleColumns().length,role:"gridcell"}).prepend(n).append(r).appendTo(a),a):r},_renderErrorMessage(i){var t=i.url?i.message.replace(i.url,""):i.message||i,e=(0,_.A)("<div>").attr("role","alert").attr("aria-roledescription",A.A.format("dxDataGrid-ariaError")).addClass(xd).text(t);return i.url&&(0,_.A)("<a>").attr("href",i.url).text(i.url).appendTo(e),e},renderErrorRow(i,t,e){var n,r,a=this;if(e)return e.find(".".concat(xd)).remove(),n=a._createErrorRow(i),e.prepend(n),n;var s=t>=0||!a._columnHeadersView.isVisible()?a._rowsView:a._columnHeadersView,o=s.getTableElements();(0,I.__)(o,(d,h)=>{if(n=a._createErrorRow(i,o),r=r||n,t>=0){var u=s._getRowElements((0,_.A)(h)).eq(t);a.removeErrorRow(u.next()),n.insertAfter(u)}else{var c=(0,_.A)(h).children("tbody"),g=c.children("tr");a._columnHeadersView.isVisible()?(a.removeErrorRow(g.last()),(0,_.A)(h).append(n)):(a.removeErrorRow(g.first()),c.first().prepend(n))}});var l=a.getController("resizing");return l&&l.fireContentReadyAction(),r},removeErrorRow(i){if(!i){var t=this._columnHeadersView&&this._columnHeadersView.element();if(!(i=t&&t.find(".".concat(Mi)))||!i.length){var e=this._rowsView.element();i=e&&e.find(".".concat(Mi))}}i&&i.hasClass(Mi)&&i.remove()},optionChanged(i){"errorRowEnabled"===i.name?i.handled=!0:this.callBase(i)}}),bd={defaultOptions:()=>({errorRowEnabled:!0}),controllers:{errorHandling:mf},extenders:{controllers:{data:{init(){var i=this,t=i.getController("errorHandling");i.callBase(),i.dataErrorOccurred.add((e,a)=>{i.option("errorRowEnabled")&&t.renderErrorRow(e,void 0,a)}),i.changed.add(e=>{if(!e||"loadError"!==e.changeType){var a=i.getController("errorHandling"),n=i.getController("editing");n&&!n.hasChanges()&&a&&a.removeErrorRow()}})}}}}};G.registerModule("errorHandling",bd);var Ed="borders",wd="dx-gridbase-container",Va="adaptiveHidden",dr=["columnsSeparatorView","blockSeparatorView","trackerView","headerPanel","columnHeadersView","rowsView","footerView","columnChooserView","filterPanelView","pagerView","draggingHeaderView","contextMenuView","errorView","headerFilterView","filterBuilderView"],Vi=function(i){return(0,v.Kg)(i)&&i.endsWith("%")},yd=function(i,t){var e=i._rowsView.contentWidth();return e-i._getTotalWidth(t,e)},yf={_initPostRenderHandlers(){this._refreshSizesHandler||(this._refreshSizesHandler=i=>{var t=(new w.cY).resolve(null),e=i?.changeType,a=i?.isDelayed,n=e&&"updateSelection"!==e&&"updateFocusedRow"!==e&&"pageIndex"!==e&&!a;this._dataController.changed.remove(this._refreshSizesHandler),this._checkSize()&&(t=this._refreshSizes(i)),n&&(0,w.z7)(t).done(()=>{this._setAriaLabel(),this.fireContentReadyAction()})},this._dataController.changed.add(()=>{this._dataController.changed.add(this._refreshSizesHandler)}))},_refreshSizes(i){var t,e=(new w.cY).resolve(null),a=i?.changeType,n=i?.isDelayed,r=this._dataController.items();if(i&&"refresh"!==a&&"prepend"!==a&&"append"!==a){if("update"===a){if(0===(null===(t=i.changeTypes)||void 0===t?void 0:t.length))return e;!(r.length>1||"insert"!==i.changeTypes[0])||0===r.length&&"remove"===i.changeTypes[0]||i.needUpdateDimensions?e=this.resize():(e=new w.cY,this._waitAsyncTemplates().done(()=>{(0,V.OX)(()=>(0,V.zE)(()=>(0,V.OX)(()=>{this._setScrollerSpacing(),this._rowsView.resize(),e.resolve()})))}).fail(e.reject))}}else n||(e=this.resize());return e},fireContentReadyAction(){this.component._fireContentReadyAction()},_getWidgetAriaLabel:()=>"dxDataGrid-ariaDataGrid",_setAriaLabel(){var i=Math.max(0,this._dataController.totalItemsCount());this.component.setAria("label",A.A.format(this._getWidgetAriaLabel(),i,this.component.columnCount()),this.component.$element().children(".".concat(wd)))},_getBestFitWidths(){var i,t=this._rowsView,e=this._columnHeadersView,a=t.getColumnWidths();if(!a?.length){var n=e.getTableElement();e.setTableElement(null===(i=t.getTableElement())||void 0===i?void 0:i.children(".dx-header")),a=e.getColumnWidths(),e.setTableElement(n)}return a},_setVisibleWidths(i,t){var e=this._columnsController;e.beginUpdate(),(0,I.__)(i,(a,n)=>{var r=e.getColumnId(n);e.columnOption(r,"visibleWidth",t[a])}),e.endUpdate()},_toggleBestFitModeForView(i,t,e){if(i&&i.isVisible()){var a=this._rowsView.getTableElements(),n=i.getTableElements();(0,I.__)(a,(r,s)=>{var o,l=(0,_.A)(s),d=n.eq(r);d&&d.length&&((o=e?d.children("tbody").appendTo(l):l.children(".".concat(t)).appendTo(d)).toggleClass(t,e),o.toggleClass(this.addWidgetPrefix("best-fit"),e))})}},_toggleBestFitMode(i){var t=this._rowsView.getTableElement(),e=this._rowsView.getTableElements().eq(1);t&&(t.css("tableLayout",i?"auto":"fixed"),t.children("colgroup").css("display",i?"none":""),(0,I.__)(e.find("tr.dx-group-row"),(a,n)=>{(0,_.A)(n).css("display",i?"none":"")}),e.toggleClass(this.addWidgetPrefix("table-fixed"),!i),this._toggleBestFitModeForView(this._columnHeadersView,"dx-header",i),this._toggleBestFitModeForView(this._footerView,"dx-footer",i),this._needStretch()&&(t.get(0).style.width=i?"auto":""))},_toggleContentMinHeight(i){var t=this._rowsView.getScrollable(),e=this._rowsView._findContentElement();!1===t?.option("useNative")&&e.css({minHeight:i?F.getContentHeightLimit(ge.A):""})},_synchronizeColumns(){var o,h,u,i=this._columnsController,t=i.getVisibleColumns(),e=this.option("columnAutoWidth"),a=this.option("wordWrapEnabled"),n=t.some(g=>!(0,v.O9)(g.width)),r=this._needBestFit(),s=!1,l=!1,d=[];!r&&(0,I.__)(t,(g,m)=>{if("auto"===m.width)return r=!0,!1}),(0,I.__)(t,(g,m)=>{if(m.minWidth)return s=!0,!1}),this._setVisibleWidths(t,[]);var c=this.component.$element();r&&(h=U.A.getActiveElement(c.get(0)),u=F.getSelectionRange(h),this._toggleBestFitMode(!0),o=!0),this._toggleContentMinHeight(a),c&&c.get(0)&&this._maxWidth&&(delete this._maxWidth,c[0].style.maxWidth=""),(0,V.OX)(()=>{var m;r?(d=this._getBestFitWidths(),(0,I.__)(t,(m,f)=>{var x=i.getColumnId(f);i.columnOption(x,"bestFitWidth",d[m],!0)})):s&&(d=this._getBestFitWidths()),(0,I.__)(t,function(m){var{width:f}=this;"auto"!==f&&((0,v.O9)(f)?d[m]=(0,v.kf)(f)||function(i){return(0,v.Kg)(i)&&i.endsWith("px")}(f)?parseFloat(f):f:e||(d[m]=void 0))}),o&&(this._toggleBestFitMode(!1),o=!1,h&&h!==U.A.getActiveElement())&&((0,se.N)(h).bottom<0||function(i,t){(function yv(i,t){fa=!0,i.focus({preventScroll:t}),fa=!1})(i,!0),F.setSelectionRange(i,t)}(h,u)),l=this._correctColumnWidths(d,t),e&&((0,I.__)(t,(f,x)=>{"groupExpand"===x.type&&(m=d[f])}),(0,I.__)(t,(f,x)=>{"groupExpand"===x.type&&m&&(d[f]=m)}),this._needStretch()&&this._processStretch(d,t)),(0,V.zE)(()=>{(r||l||n)&&this._setVisibleWidths(t,d),a&&this._toggleContentMinHeight(!1)})})},_needBestFit(){return this.option("columnAutoWidth")},_needStretch(){return this._columnsController.getVisibleColumns().some(i=>"auto"===i.width&&!i.command)},_getAverageColumnsWidth(i){return yd(this,i)/i.filter(a=>void 0===a).length},_correctColumnWidths(i,t){var a,e=this,n=!1,r=!1,s=!1,o=e.component.$element(),l=e._hasWidth,d=function(){var x=a,b=t[x],S=i[x]===Va,T=i[x],{minWidth:B}=b;if(B)if(void 0===T){var M=e._getAverageColumnsWidth(i);T=M}else if(Vi(T)){var L=function(i,t,e,a){return yd(i,a.map((n,r)=>r===t?e:n))}(e,x,B,i);L<0&&(T=-1)}var z=e._getRealColumnWidth(x,i.map((H,K)=>x===K?T:H));B&&!S&&z<B&&(i[x]=B,s=!0,a=-1),(0,v.O9)(b.width)||(r=!0),Vi(b.width)&&(n=!0)};for(a=0;a<t.length;a++)d();if(!r&&i.length){var h=e._rowsView.element(),u=e._rowsView.contentWidth(),c=e._rowsView.getScrollbarWidth(),g=e._getTotalWidth(i,u);if(g<u){var m=F.getLastResizableColumnIndex(t,i);if(m>=0&&(i[m]="auto",s=!0,!1===l&&!n)){var f=e.option("showBorders")?Math.ceil((0,R.Ot)(h)-(0,R.hh)(h)):0;e._maxWidth=g+c+f,o.css("maxWidth",e._maxWidth)}}}return s},_processStretch(i,t){var e=this._rowsView.contentWidth(),a=this._getTotalWidth(i,e),n={length:0};if(i.length){(0,I.__)(t,function(d){(this.width||i[d]===Va)&&(n[d]=!0,n.length++)});var r=e-a,s=Math.floor(r/(i.length-n.length)),o=r-s*(i.length-n.length);if(r>=0)for(var l=0;l<i.length;l++)n[l]||(i[l]+=s,o>0&&(o<1?(i[l]+=o,o=0):(i[l]++,o--)))}},_getRealColumnWidth(i,t,e){var a=1,n=t[i];if(!Vi(n))return parseFloat(n);var r=t.reduce((d,h,u)=>Vi(h)?d+parseFloat(h):d,0),s=t.reduce((d,h)=>!h||h===Va||Vi(h)?d:d+parseFloat(h),0),o=(e=e||this._rowsView.contentWidth())-s,l=r*e/100;return s>0&&l+s>=e&&(a=l>o?o/l:1),parseFloat(n)*e*a/100},_getTotalWidth(i,t){for(var e=0,a=0;a<i.length;a++){var n=i[a];n&&n!==Va&&(e+=this._getRealColumnWidth(a,i,t))}return Math.ceil(e)},_getGroupElement(){return this.component.$element().children().get(0)},updateSize(i){var t=(0,_.A)(i),e=this.addWidgetPrefix("important-margin");if(void 0===this._hasHeight&&t&&t.is(":visible")&&(0,R.RG)(t)){var a=t.children(".".concat(this.getWidgetContainerClass()));a.length&&a.detach(),this._hasHeight=!!(0,R.Oq)(t);var n=(0,R.RG)(t);t.addClass(e),this._hasWidth=(0,R.RG)(t)===n,t.removeClass(e),a.length&&a.appendTo(t)}},publicMethods:()=>["resize","updateDimensions"],_waitAsyncTemplates(){var i,t,e;return(0,w.z7)(null===(i=this._columnHeadersView)||void 0===i?void 0:i.waitAsyncTemplates(!0),null===(t=this._rowsView)||void 0===t?void 0:t.waitAsyncTemplates(!0),null===(e=this._footerView)||void 0===e?void 0:e.waitAsyncTemplates(!0))},resize(){if(!this.component._requireResize){var i=new w.cY;return this._waitAsyncTemplates().done(()=>{(0,w.z7)(this.updateDimensions()).done(i.resolve).fail(i.reject)}).fail(i.reject),i.promise()}},updateDimensions(i){var t=this;if(t._initPostRenderHandlers(),t._checkSize(i)){var e=t._resizeDeferred,a=t._resizeDeferred=new w.cY;return(0,w.z7)(e).always(()=>{(0,V.zE)(()=>{t._dataController.isLoaded()&&t._synchronizeColumns(),t._resetGroupElementHeight(),(0,V.OX)(()=>{(0,V.zE)(()=>{(0,V.OX)(()=>{t._updateDimensionsCore()})})})}).done(a.resolve).fail(a.reject)}),a.promise()}},_resetGroupElementHeight(){var i=this._getGroupElement(),t=this._rowsView.getScrollable();i&&i.style.height&&(!t||!t.scrollTop())&&(i.style.height="")},_checkSize(i){var t=this.component.$element(),e=t.is(":visible"),a=this._lastWidth!==(0,R.RG)(t)||this._lastHeight!==(0,R.Oq)(t)||this._devicePixelRatio!==(0,Q.zk)().devicePixelRatio;return e&&(!i||a)},_setScrollerSpacingCore(){var i=this,t=i._rowsView.getScrollbarWidth(),e=i._rowsView.getScrollbarWidth(!0);(0,V.zE)(()=>{i._columnHeadersView&&i._columnHeadersView.setScrollerSpacing(t),i._footerView&&i._footerView.setScrollerSpacing(t),i._rowsView.setScrollerSpacing(t,e)})},_setScrollerSpacing(){var i=this._rowsView.getScrollable(),t=!0===this.option("scrolling.useNative");!i||t?(0,V.zE)(()=>{(0,V.OX)(()=>{this._setScrollerSpacingCore()})}):this._setScrollerSpacingCore()},_setAriaOwns(){var i,t,e,a=null===(i=this._columnHeadersView)||void 0===i?void 0:i.getTableElement(),n=null===(t=this._footerView)||void 0===t?void 0:t.getTableElement();null===(e=this._rowsView)||void 0===e||e.setAriaOwns(a?.attr("id"),n?.attr("id"))},_updateDimensionsCore(){var i=this,t=i._dataController,e=i.getController("editorFactory"),a=i._rowsView,n=i.component.$element(),r=this._getGroupElement(),s=(0,R.Oq)(n),o=i.option("height")||n.get(0).style.height,l=!!o&&"auto"!==o,d=parseInt(n.css("maxHeight")),h=d&&s>=d,u=r&&r.scrollHeight===r.offsetHeight;i.updateSize(n),(0,V.zE)(()=>{a.hasHeight(i._hasHeight||!!d||l),this._setAriaOwns(),h&&!u&&(0,_.A)(r).css("height",d),t.isLoaded()?(0,V.OX)(()=>{i._updateLastSizes(n),i._setScrollerSpacing(),(0,I.__)(dr,(g,m)=>{var f=i.getView(m);f&&f.resize()}),e&&e.resize()}):a.setLoading(t.isLoading())})},_updateLastSizes(i){this._lastWidth=(0,R.RG)(i),this._lastHeight=(0,R.Oq)(i),this._devicePixelRatio=(0,Q.zk)().devicePixelRatio},optionChanged(i){switch(i.name){case"width":case"height":this.component._renderDimensions(),this.resize();case"renderAsync":return void(i.handled=!0);default:this.callBase(i)}},init(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._footerView=this.getView("footerView"),this._rowsView=this.getView("rowsView")}},Sf=Z.ViewController.inherit(yf),Of=Z.ViewController.inherit({_scrollChangedHandler(i,t,e){for(var a=0;a<i.length;a++)i[a]&&i[a].name!==e&&i[a].scrollTo({left:t.left,top:t.top})},init(){for(var i=[this.getView("columnHeadersView"),this.getView("footerView"),this.getView("rowsView")],t=0;t<i.length;t++){var e=i[t];e&&e.scrollChanged.add(this._scrollChangedHandler.bind(this,i))}}}),If=Z.View.inherit({_endUpdateCore(){this.component._requireResize&&(this.component._requireResize=!1,this._resizingController.resize())},init(){this._resizingController=this.getController("resizing"),this._dataController=this.getController("data")},getView(i){return this.component._views[i]},element(){return this._groupElement},optionChanged(i){(0,v.O9)(this._groupElement)&&"showBorders"===i.name?(this._groupElement.toggleClass(this.addWidgetPrefix(Ed),!!i.value),i.handled=!0):this.callBase(i)},_renderViews(i){var t=this;(0,I.__)(dr,(e,a)=>{var n=t.getView(a);n&&n.render(i)})},_getTableRoleName:()=>"group",render(i){var t=!this._groupElement,e=this._groupElement||(0,_.A)("<div>").addClass(this.getWidgetContainerClass());e.addClass(wd),e.toggleClass(this.addWidgetPrefix(Ed),!!this.option("showBorders")),this.setAria("role","presentation",i),this.component.setAria("role",this._getTableRoleName(),e),this._rootElement=i||this._rootElement,t&&(this._groupElement=e,(0,Q.Vd)()&&this.getController("resizing").updateSize(i),e.appendTo(i)),this._renderViews(e)},update(){var i=this._rootElement,t=this._groupElement,e=this.getController("resizing");i&&t&&(e.resize(),this._dataController.isLoaded()&&this._resizingController.fireContentReadyAction())}}),Pi={defaultOptions:()=>({showBorders:!1,renderAsync:!1}),controllers:{resizing:Sf,synchronizeScrolling:Of},views:{gridView:If},VIEW_NAMES:dr},Af=Pi.controllers.resizing.inherit({_getWidgetAriaLabel:()=>"dxTreeList-ariaTreeList",_toggleBestFitMode(i){this.callBase(i),this._rowsView.getTableElement().find(".dx-treelist-cell-expandable").toggleClass(this.addWidgetPrefix("best-fit"),i)}});G.registerModule("gridView",{defaultOptions:Pi.defaultOptions,controllers:(0,N.A)((0,N.A)({},Pi.controllers),{resizing:Af}),views:Pi.views});var Tf=D(2376),Df=["dxAutocomplete","dxButton","dxCheckBox","dxDateBox","dxMenu","dxSelectBox","dxTabs","dxTextBox","dxButtonGroup","dxDropDownButton"];function Pa(i,t){var e;if(i){var a=i._findItemElementByItem(t);if(a.length){var n=i._getItemData(a),r=!!(null!==(e=n.options)&&void 0!==e&&e.disabled||n.disabled||i.option("disabled")),{widget:s}=n;if(s&&-1!==Df.indexOf(s)){var o=a.find(s.toLowerCase().replace("dx",".dx-"));if(o.length){var l,d,h=function(i){var t=i.data&&i.data(),e=t&&t.dxComponents,a=e&&e[0];return a&&t[a]}(o);if(!h)return;var c,u=null===(l=h._focusTarget)||void 0===l?void 0:l.call(h);u="dxDropDownButton"===s?u&&u.find(".".concat("dx-buttongroup")):null!==(c=u)&&void 0!==c?c:(0,_.A)(h.element());var g=null===(d=n.options)||void 0===d?void 0:d.tabIndex;u.attr("tabIndex",r?-1:g??0)}}}}}class Mf{constructor(t){this._toolbar=t}_initMarkup(){}_updateMenuVisibility(){}_renderMenuItems(){}_renderItem(){}_getMenuItems(){}_getToolbarItems(){var t;return null!==(t=this._toolbar.option("items"))&&void 0!==t?t:[]}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",this._toolbar.itemElements(),!0)}_arrangeItems(){var t=this._toolbar._$toolbarItemsContainer.find(".".concat("dx-toolbar-label")).eq(0);if(t.length){var e=(0,R.RG)(this._toolbar.$element()),a=(0,R.Ot)(t)-(0,R.RG)(t);t.css("maxWidth",e-a)}}_hideOverflowItems(){}_dimensionChanged(){}_itemOptionChanged(){}_optionChanged(){}}var Rt=D(8041),hr="dx-toolbar-menu-action",Sd="dx-toolbar-hidden-button-group",Od="dx-toolbar-menu-section",Id="dx-toolbar-menu-last-section";class kf extends fo.i{_init(){super._init(),this._activeStateUnit=".".concat(hr,":not(.").concat(Sd,")")}_initMarkup(){this._renderSections(),super._initMarkup(),this._setMenuRole()}_getSections(){return this._itemContainer().children()}_itemElements(){return this._getSections().children(this._itemSelector())}_renderSections(){var t=this._itemContainer();(0,I.__)(["before","center","after","menu"],(e,a)=>{var n="_$".concat(a,"Section");this[n]||(this[n]=(0,_.A)("<div>").addClass(Od)),this[n].appendTo(t)})}_renderItems(){super._renderItems.apply(this,arguments),this._updateSections()}_setMenuRole(){this.$element().find(".".concat("dx-scrollview-content")).attr("role","menu")}_updateSections(){var t=this.$element().find(".".concat(Od));t.removeClass(Id),t.not(":empty").eq(-1).addClass(Id)}_renderItem(t,e,a,n){var r,s=null!==(r=e.location)&&void 0!==r?r:"menu",o=this["_$".concat(s,"Section")],l=super._renderItem(t,e,o,n);return this._getItemTemplateName({itemData:e})&&l.addClass("dx-toolbar-menu-custom"),("menu"===s||"dxButton"===e.widget||"dxButtonGroup"===e.widget||e.isAction)&&l.addClass(hr),"dxButton"===e.widget&&l.addClass("dx-toolbar-hidden-button"),"dxButtonGroup"===e.widget&&l.addClass(Sd),l.addClass(e.cssClass),l}_getItemTemplateName(t){var e=super._getItemTemplateName(t),a=t.itemData;return a&&a.menuItemTemplate||e}_dataSourceOptions(){return{paginate:!1}}_itemClickHandler(t,e,a){(0,_.A)(t.target).closest(".".concat(hr)).length&&super._itemClickHandler(t,e,a)}_clean(){this._getSections().empty(),super._clean()}}var Nf=D(9902);let Ad=(()=>{class i extends ze.A{_getDefaultOptions(){return(0,y.X)(super._getDefaultOptions(),{preventScrollEvents:!1})}_getToolbarName(){return"dxToolbar"}}return i.defaultOptions=function(t){ze.A.defaultOptions(t)},i})();(0,le.A)("dxPopup",Ad);class Xf extends Rt.A{_supportedKeys(){var t={};return(!this.option("opened")||!this._list.option("focusedElement"))&&(t=this._button._supportedKeys()),(0,y.X)(super._supportedKeys(),t,{tab:function(){this._popup&&this._popup.hide()}})}_getDefaultOptions(){return(0,y.X)(super._getDefaultOptions(),{items:[],onItemClick:null,dataSource:null,itemTemplate:"item",onButtonClick:null,activeStateEnabled:!0,hoverStateEnabled:!0,opened:!1,onItemRendered:null,closeOnClick:!0,useInkRipple:!1,container:void 0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",to:0}}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return"desktop"===ne.A.real().deviceType&&!ne.A.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,de.Nt)()},options:{useInkRipple:!0,animation:{show:{type:"pop",duration:200,from:{scale:0},to:{scale:1}},hide:{type:"pop",duration:200,from:{scale:1},to:{scale:0}}}}}])}_init(){super._init(),this.$element().addClass("dx-dropdownmenu"),this._initItemClickAction(),this._initButtonClickAction()}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initButtonClickAction(){this._buttonClickAction=this._createActionByOption("onButtonClick")}_initTemplates(){this._templateManager.addDefaultTemplates({content:new Nf.M("content")}),super._initTemplates()}_initMarkup(){this._renderButton(),super._initMarkup()}_render(){super._render(),this.setAria({haspopup:!0,expanded:this.option("opened")})}_renderContentImpl(){this.option("opened")&&this._renderPopup()}_clean(){this._cleanFocusState(),this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove(),delete this._list,delete this._popup}_renderButton(){var t=this.$element().addClass("dx-dropdownmenu-button");this._button=this._createComponent(t,_e.A,{icon:"overflow",template:"content",stylingMode:(0,de.Ft)()?"text":"contained",useInkRipple:this.option("useInkRipple"),hoverStateEnabled:!1,focusStateEnabled:!1,onClick:e=>{this.option("opened",!this.option("opened")),this._buttonClickAction(e)}})}_toggleActiveState(t,e,a){this._button._toggleActiveState(t,e,a)}_toggleMenuVisibility(t){var e=t??!this._popup.option("visible");t&&this._renderPopup(),this._popup.toggle(e),this.setAria("expanded",e)}_renderPopup(){if(!this._$popup){this._$popup=(0,_.A)("<div>").appendTo(this.$element());var{rtlEnabled:t,container:e,animation:a}=this.option();this._popup=this._createComponent(this._$popup,"dxPopup",{onInitialized(n){var{component:r}=n;r.$wrapper().addClass("dx-dropdownmenu-popup-wrapper").addClass("dx-dropdownmenu-popup")},deferRendering:!1,contentTemplate:n=>this._renderList(n),_ignoreFunctionValueDeprecation:!0,maxHeight:()=>this._getMaxHeight(),position:{my:"top ".concat(t?"left":"right"),at:"bottom ".concat(t?"left":"right"),collision:"fit flip",offset:{v:3},of:this.$element()},animation:a,onOptionChanged:n=>{var{name:r,value:s}=n;"visible"===r&&this.option("opened",s)},container:e,autoResizeEnabled:!1,height:"auto",width:"auto",hideOnOutsideClick:n=>this._closeOutsideDropDownHandler(n),hideOnParentScroll:!0,shading:!1,dragEnabled:!1,showTitle:!1,fullScreen:!1,_fixWrapperPosition:!0})}}_getMaxHeight(){var t=this.$element(),e=t.offset().top,a=(0,R.P$)((0,Q.zk)()),n=Math.max(e,a-e-(0,R.P$)(t));return Math.min(a,n-3-10)}_closeOutsideDropDownHandler(t){return!(0,_.A)(t.target).closest(this.$element()).length}_renderList(t){var e=(0,_.A)(t);e.addClass("dx-dropdownmenu-list"),this._list=this._createComponent(e,kf,{dataSource:this._getListDataSource(),pageLoadMode:"scrollBottom",indicateLoading:!1,noDataText:"",itemTemplate:this.option("itemTemplate"),onItemClick:a=>{this.option("closeOnClick")&&this.option("opened",!1),this._itemClickAction(a)},tabIndex:-1,focusStateEnabled:!1,activeStateEnabled:!0,onItemRendered:this.option("onItemRendered"),_itemAttributes:{role:"menuitem"}})}_itemOptionChanged(t,e,a){var n;null===(n=this._list)||void 0===n||n._itemOptionChanged(t,e,a),Pa(this._list,t)}_getListDataSource(){var t;return null!==(t=this.option("dataSource"))&&void 0!==t?t:this.option("items")}_setListDataSource(){var t;null===(t=this._list)||void 0===t||t.option("dataSource",this._getListDataSource()),delete this._deferRendering}_getKeyboardListeners(){return super._getKeyboardListeners().concat([this._list])}_toggleVisibility(t){super._toggleVisibility(t),this._button.option("visible",t)}_optionChanged(t){var e,a,n,{name:r,value:s}=t;switch(r){case"items":case"dataSource":this.option("opened")?this._setListDataSource():this._deferRendering=!0;break;case"itemTemplate":null===(e=this._list)||void 0===e||e.option(r,this._getTemplate(s));break;case"onItemClick":this._initItemClickAction();break;case"onButtonClick":this._buttonClickAction();break;case"useInkRipple":this._invalidate();break;case"focusStateEnabled":null===(a=this._list)||void 0===a||a.option(r,s),super._optionChanged(t);break;case"onItemRendered":null===(n=this._list)||void 0===n||n.option(r,s);break;case"opened":this._deferRendering&&this._setListDataSource(),this._toggleMenuVisibility(s),this._updateFocusableItemsTabIndex();break;case"closeOnClick":break;case"container":this._popup&&this._popup.option(r,s);break;case"disabled":this._list&&this._updateFocusableItemsTabIndex();break;default:super._optionChanged(t)}}_updateFocusableItemsTabIndex(){this.option("items").forEach(t=>Pa(this._list,t))}}var Rd="dx-state-invisible",La="dx-toolbar-item-auto-hide",ur="dx-toolbar-item-invisible";class Qf{constructor(t){this._toolbar=t}_initMarkup(){(0,V.zE)(()=>{this._renderOverflowMenu(),this._renderMenuItems()})}_renderOverflowMenu(){if(this._hasVisibleMenuItems()){this._renderMenuButtonContainer();var t=(0,_.A)("<div>").appendTo(this._overflowMenuContainer()),e=this._toolbar._createActionByOption("onItemClick"),a=this._toolbar._getTemplateByOption("menuItemTemplate");this._menu=this._toolbar._createComponent(t,Xf,{disabled:this._toolbar.option("disabled"),itemTemplate:()=>a,onItemClick:n=>{e(n)},container:this._toolbar.option("menuContainer"),onOptionChanged:n=>{var{name:r,value:s}=n;"opened"===r&&this._toolbar.option("overflowMenuVisible",s),"items"===r&&this._updateMenuVisibility(s)}})}}renderMenuItems(){this._menu||this._renderOverflowMenu(),this._menu&&this._menu.option("items",this._getMenuItems()),this._menu&&!this._menu.option("items").length&&this._menu.option("opened",!1)}_renderMenuButtonContainer(){this._$overflowMenuContainer=(0,_.A)("<div>").appendTo(this._toolbar._$afterSection).addClass("dx-toolbar-button").addClass("dx-toolbar-menu-container")}_overflowMenuContainer(){return this._$overflowMenuContainer}_updateMenuVisibility(t){var e=t??this._getMenuItems(),a=e.length&&this._hasVisibleMenuItems(e);this._toggleMenuVisibility(a)}_toggleMenuVisibility(t){this._overflowMenuContainer()&&this._overflowMenuContainer().toggleClass(Rd,!t)}_renderMenuItems(){(0,V.zE)(()=>{this.renderMenuItems()})}_dimensionChanged(){this.renderMenuItems()}_getToolbarItems(){var t;return(0,V.VM)(null!==(t=this._toolbar.option("items"))&&void 0!==t?t:[],e=>!this._toolbar._isMenuItem(e))}_getHiddenItems(){return this._toolbar._itemContainer().children(".".concat(La,".").concat(ur)).not(".".concat(Rd))}_getMenuItems(){var t,e,a=(0,V.VM)(null!==(t=this._toolbar.option("items"))&&void 0!==t?t:[],s=>this._toolbar._isMenuItem(s)),n=this._getHiddenItems();return this._restoreItems=null!==(e=this._restoreItems)&&void 0!==e?e:[],[...[].slice.call(n).map(s=>{var o=this._toolbar._getItemData(s),l=(0,_.A)(s),d=l.children();return(0,y.X)({menuItemTemplate:()=>(this._restoreItems.push({container:l,item:d}),(0,_.A)("<div>").addClass(La).append(d))},o)}),...a]}_hasVisibleMenuItems(t){var e=t??this._toolbar.option("items"),a=!1,n=(0,q.Hz)("visible"),r=(0,q.Hz)("locateInMenu");return(0,I.__)(e,function(s,o){var l=n(o,{functionsAsIs:!0}),d=r(o,{functionsAsIs:!0});(!1!==l&&("auto"===d||"always"===d)||"menu"===o.location)&&(a=!0)}),a}_arrangeItems(){var t;this._toolbar._$centerSection.css({margin:"0 auto",float:"none"}),(0,I.__)(null!==(t=this._restoreItems)&&void 0!==t?t:[],function(a,n){(0,_.A)(n.container).append(n.item)}),this._restoreItems=[];var e=(0,R.RG)(this._toolbar.$element());return this._hideOverflowItems(e),e}_hideOverflowItems(t){var e,a=this._toolbar.$element().find(".".concat(La));if(a.length){t=null!==(e=t)&&void 0!==e?e:(0,R.RG)(this._toolbar.$element()),(0,_.A)(a).removeClass(ur);for(var n=this._getItemsWidth();a.length&&t<n;)a.eq(-1).addClass(ur),n=this._getItemsWidth(),a.splice(-1,1)}}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",[this._toolbar._$beforeSection,this._toolbar._$centerSection,this._toolbar._$afterSection])}_itemOptionChanged(t,e,a){var n;"disabled"!==e&&"options.disabled"!==e||!this._toolbar._isMenuItem(t)?this.renderMenuItems():null===(n=this._menu)||void 0===n||n._itemOptionChanged(t,e,a)}_renderItem(t,e){"auto"===t.locateInMenu&&e.addClass(La)}_optionChanged(t,e){var a,n,r,s,o;switch(t){case"disabled":null===(a=this._menu)||void 0===a||a.option(t,e);break;case"overflowMenuVisible":null===(n=this._menu)||void 0===n||n.option("opened",e);break;case"onItemClick":null===(r=this._menu)||void 0===r||r.option(t,e);break;case"menuContainer":null===(s=this._menu)||void 0===s||s.option("container",e);break;case"menuItemTemplate":null===(o=this._menu)||void 0===o||o.option("itemTemplate",e)}}}class Dd extends Tf.A{_getDefaultOptions(){return(0,y.X)(super._getDefaultOptions(),{menuItemTemplate:"menuItem",menuContainer:void 0,overflowMenuVisible:!1,multiline:!1})}_isMultiline(){return this.option("multiline")}_dimensionChanged(t){"height"!==t&&(super._dimensionChanged(),this._layoutStrategy._dimensionChanged())}_initMarkup(){super._initMarkup(),this._updateFocusableItemsTabIndex(),this._layoutStrategy._initMarkup()}_renderToolbar(){super._renderToolbar(),this._renderLayoutStrategy()}_itemContainer(){return this._isMultiline()?this._$toolbarItemsContainer:super._itemContainer()}_renderLayoutStrategy(){this.$element().toggleClass("dx-toolbar-multiline",this._isMultiline()),this._layoutStrategy=this._isMultiline()?new Mf(this):new Qf(this)}_renderSections(){if(!this._isMultiline())return super._renderSections()}_postProcessRenderItems(){this._layoutStrategy._hideOverflowItems(),this._layoutStrategy._updateMenuVisibility(),super._postProcessRenderItems(),this._layoutStrategy._renderMenuItems()}_renderItem(t,e,a,n){var r=super._renderItem(t,e,a,n);this._layoutStrategy._renderItem(e,r);var{widget:s,showText:o}=e;return"dxButton"===s&&"inMenu"===o&&r.toggleClass("dx-toolbar-text-auto-hide"),r}_getItemsWidth(){return this._layoutStrategy._getItemsWidth()}_getMenuItems(){return this._layoutStrategy._getMenuItems()}_getToolbarItems(){return this._layoutStrategy._getToolbarItems()}_arrangeItems(){if(!this.$element().is(":hidden")){var t=this._layoutStrategy._arrangeItems();this._isMultiline()||super._arrangeItems(t)}}_itemOptionChanged(t,e,a){this._isMenuItem(t)||super._itemOptionChanged(t,e,a),this._layoutStrategy._itemOptionChanged(t,e,a),("disabled"===e||"options.disabled"===e)&&Pa(this,t),"location"===e&&this.repaint()}_updateFocusableItemsTabIndex(){this._getToolbarItems().forEach(t=>Pa(this,t))}_isMenuItem(t){return"menu"===t.location||"always"===t.locateInMenu}_isToolbarItem(t){return void 0===t.location||"never"===t.locateInMenu}_optionChanged(t){var{name:e,value:a}=t;switch(this._layoutStrategy._optionChanged(e,a),e){case"menuContainer":case"menuItemTemplate":case"overflowMenuVisible":break;case"multiline":this._invalidate();break;case"disabled":super._optionChanged.apply(this,arguments),this._updateFocusableItemsTabIndex();break;default:super._optionChanged.apply(this,arguments)}}updateDimensions(){this._dimensionChanged()}}(0,le.A)("dxToolbar",Dd);const Jf=Dd;var Bd="toolbar-button",Fd=["addRowButton","applyFilterButton","columnChooserButton","exportButton","groupPanel","revertButton","saveButton","searchPanel"],cr={defaultOptions:()=>({}),views:{headerPanel:class ix extends Ri{_getToolbarItems(){return[]}_getButtonContainer(){return(0,_.A)("<div>").addClass(this.addWidgetPrefix(Bd))}_getToolbarButtonClass(t){var e=t?" ".concat(t):"";return this.addWidgetPrefix(Bd)+e}_getToolbarOptions(){var t=this.option("toolbar"),e={toolbarOptions:{items:this._getToolbarItems(),visible:t?.visible,disabled:t?.disabled,onItemRendered(r){var s=r.itemData.onItemRendered;s&&s(r)}}},a=t?.items;if(e.toolbarOptions.items=this._normalizeToolbarItems(e.toolbarOptions.items,a),this.executeAction("onToolbarPreparing",e),e.toolbarOptions&&!(0,v.O9)(e.toolbarOptions.visible)){var n=e.toolbarOptions.items;e.toolbarOptions.visible=!!n?.length}return e.toolbarOptions}_normalizeToolbarItems(t,e){t.forEach(o=>{if(!Fd.includes(o.name))throw new Error("Default toolbar item '".concat(o.name,"' is not added to DEFAULT_TOOLBAR_ITEM_NAMES"))});var a={location:"after"},n=Array.isArray(e);if(!(0,v.O9)(e))return t;n||(e=[e]);var r={};t.forEach(o=>{r[o.name]=o});var s=e.map(o=>((0,v.Kg)(o)&&(o={name:o}),(0,v.O9)(o.name)&&((0,v.O9)(r[o.name])?o=(0,y.X)(!0,{},r[o.name],o):Fd.includes(o.name)&&(o=(0,N.A)((0,N.A)({},o),{visible:!1}))),(0,y.X)(!0,{},a,o)));return n?s:s[0]}_renderCore(){if(this._toolbar)this._toolbar.option(this._toolbarOptions);else{var t=this.element();t.addClass(this.addWidgetPrefix("header-panel"));var e=A.A.format(this.component.NAME+"-ariaToolbar"),a=(0,_.A)("<div>").attr("aria-label",e).appendTo(t);this._toolbar=this._createComponent(a,Jf,this._toolbarOptions)}}_columnOptionChanged(){}_handleDataChanged(){this._requireReady&&this.render()}_isDisabledDefinedByUser(t){var e,a=null===(e=this.option("toolbar"))||void 0===e?void 0:e.items,n=a?.find(r=>r?.name===t);return(0,v.O9)(n?.disabled)}init(){super.init(),this.createAction("onToolbarPreparing",{excludeValidators:["disabled","readOnly"]})}render(){this._toolbarOptions=this._getToolbarOptions(),super.render.apply(this,arguments)}setToolbarItemDisabled(t,e){var a,n=this._toolbar,r=this._isDisabledDefinedByUser(t);if(n&&!r){var o=(null!==(a=n.option("items"))&&void 0!==a?a:[]).findIndex(d=>d.name===t);if(!(o<0)){var l=n.option("items[".concat(o,"]"));n.option("items[".concat(o,"].disabled"),e),l.options&&n.option("items[".concat(o,"].options.disabled"),e)}}}updateToolbarDimensions(){var t;null===(t=this._toolbar)||void 0===t||t.updateDimensions()}getHeaderPanel(){return this.element()}getHeight(){return this.getElementHeight()}optionChanged(t){if("onToolbarPreparing"===t.name&&(this._invalidate(),t.handled=!0),"toolbar"===t.name&&(t.handled=!0,this._toolbar)){var e=(0,q.u7)(t.fullName),a=t.fullName.replace(/^toolbar\./,"");if(1===e.length){var n=this._getToolbarOptions();this._toolbar.option(n)}else if("items"===e[1])if(2===e.length){var r=this._getToolbarOptions();this._toolbar.option("items",r.items)}else if(3===e.length){var s=this._normalizeToolbarItems(this._getToolbarItems(),t.value);this._toolbar.option(a,s)}else e.length>=4&&this._toolbar.option(a,t.value);else this._toolbar.option(a,t.value)}super.optionChanged(t)}isVisible(){return!(!this._toolbarOptions||!this._toolbarOptions.visible)}allowDragging(){}hasGroupedColumns(){}}},extenders:{controllers:{resizing:{_updateDimensionsCore(){this.callBase.apply(this,arguments),this.getView("headerPanel").updateToolbarDimensions()}}}}};G.registerModule("headerPanel",cr);var{callModuleItemsMethod:Li}=G;G.registerModulesOrder(["stateStoring","columns","selection","editorFactory","columnChooser","editingRowBased","editingFormBased","editingCellBased","editing","grouping","masterDetail","validating","adaptivity","data","virtualScrolling","columnHeaders","filterRow","headerPanel","headerFilter","sorting","search","rows","pager","columnsResizingReordering","contextMenu","keyboardNavigation","errorHandling","summary","columnFixing","export","gridView"]);var gr=Rt.A.inherit({_activeStateUnit:".dx-row",_getDefaultOptions(){var i=this.callBase();return(0,I.__)(G.modules,function(){(0,v.Tn)(this.defaultOptions)&&(0,y.X)(!0,i,this.defaultOptions())}),i},_setDeprecatedOptions(){this.callBase(),(0,y.X)(this._deprecatedOptions,{"columnChooser.allowSearch":{since:"23.1",message:'Use the "columnChooser.search.enabled" option instead'},"columnChooser.searchTimeout":{since:"23.1",message:'Use the "columnChooser.search.timeout" option instead'}})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>(0,de.Nt)(),options:{showRowLines:!0,showColumnLines:!1,headerFilter:{height:315},editing:{useIcons:!0}}}])},_init(){this.callBase(),this.option("_disableDeprecationWarnings")||F.logHeaderFilterDeprecatedWarningIfNeed(this),G.processModules(this,G),Li(this,"init")},_clean:V.lQ,_optionChanged(i){Li(this,"optionChanged",[i]),i.handled||this.callBase(i)},_dimensionChanged(){this.updateDimensions(!0)},_visibilityChanged(i){i&&this.updateDimensions()},_initMarkup(){this.callBase.apply(this,arguments),this.$element().addClass("dx-treelist"),this.getView("gridView").render(this.$element())},_renderContentImpl(){this.getView("gridView").update()},_renderContent(){var i=this;(0,V.zE)(()=>{i._renderContentImpl()})},_dispose(){this.callBase(),Li(this,"dispose")},isReady(){return this.getController("data").isReady()},beginUpdate(){this.callBase(),Li(this,"beginUpdate")},endUpdate(){Li(this,"endUpdate"),this.callBase()},getController(i){return this._controllers[i]},getView(i){return this._views[i]},focus(i){this.callBase(),(0,v.O9)(i)&&this.getController("keyboardNavigation").focus(i)}});gr.registerModule=G.registerModule.bind(G),(0,le.A)("dxTreeList",gr);var sx=D(2378),ox=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,lx=function i(t){t&&(0,I.__)(t,(e,a)=>{if((0,v.Qd)(a)||Array.isArray(a))i(a);else if("string"==typeof a){var n=ox.exec(a);n&&(t[e]=new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6])))}})},dx=Z.ViewController.inherit(function(){var i=function(e){var a="sessionStorage"===e.type?(0,sx.s)():(0,Q.zk)().localStorage;if(!a)throw new Error("E1007");return a},t=function(e){return(0,v.O9)(e.storageKey)?e.storageKey:"storage"};return{_loadState(){var e=this.option("stateStoring");if("custom"===e.type)return e.customLoad&&e.customLoad();try{return JSON.parse(i(e).getItem(t(e)))}catch(a){J.A.log("W1022","State storing",a.message)}},_saveState(e){var a=this.option("stateStoring");if("custom"!==a.type)try{i(a).setItem(t(a),JSON.stringify(e))}catch(n){J.A.log(n.message)}else a.customSave&&a.customSave(e)},publicMethods:()=>["state"],isEnabled(){return this.option("stateStoring.enabled")},init(){var e=this;return e._state={},e._isLoaded=!1,e._isLoading=!1,e._windowUnloadHandler=function(){void 0!==e._savingTimeoutID&&e._saveState(e.state())},O.A.on((0,Q.zk)(),"unload",e._windowUnloadHandler),e},isLoaded(){return this._isLoaded},isLoading(){return this._isLoading},load(){this._isLoading=!0;var e=(0,w.Sx)(this._loadState());return e.always(()=>{this._isLoaded=!0,this._isLoading=!1}).done(a=>{null!==a&&!(0,v.RI)(a)&&this.state(a)}),e},state(e){if(!arguments.length)return(0,y.X)(!0,{},this._state);this._state=(0,y.X)({},e),lx(this._state)},save(){var e=this;clearTimeout(e._savingTimeoutID),e._savingTimeoutID=setTimeout(()=>{e._saveState(e.state()),e._savingTimeoutID=void 0},e.option("stateStoring.savingTimeout"))},optionChanged(e){"stateStoring"===e.name?(this.isEnabled()&&!this.isLoading()&&this.load(),e.handled=!0):this.callBase(e)},dispose(){clearTimeout(this._savingTimeoutID),O.A.off((0,Q.zk)(),"unload",this._windowUnloadHandler)}}}()),pr={defaultOptions:()=>({stateStoring:{enabled:!1,storageKey:null,type:"localStorage",customLoad:null,customSave:null,savingTimeout:2e3}}),controllers:{stateStoring:dx},extenders:{views:{rowsView:{init(){var i=this,t=i.getController("data");i.callBase(),t.stateLoaded.add(()=>{if(t.isLoaded()&&!t.getDataSource()){i.setLoading(!1),i.renderNoDataText();var e=i.component.getView("columnHeadersView");e&&e.render(),i.component._fireContentReadyAction()}})}}},controllers:{stateStoring:{init(){this.callBase.apply(this,arguments),(i=>{var t=i.getController("columns"),e=i.getController("selection"),a=i.getController("export"),n=i.getController("data");t&&t.columnsChanged.add(()=>{i.updateState({columns:t.getUserState()})}),e&&e.selectionChanged.add(r=>{i.updateState({selectedRowKeys:r.selectedRowKeys,selectionFilter:r.selectionFilter})}),n&&(i._initialPageSize=i.option("paging.pageSize"),i._initialFilterValue=i.option("filterValue"),n.changed.add(()=>{var r=(i=>{var t=i.getView("pagerView"),e=i.getController("data"),a={allowedPageSizes:t?t.getPageSizes():void 0,filterPanel:{filterEnabled:i.option("filterPanel.filterEnabled")},filterValue:i.option("filterValue"),focusedRowKey:i.option("focusedRowEnabled")?i.option("focusedRowKey"):void 0};return(0,y.X)(a,e.getUserState())})(i);i.updateState(r)})),a&&a.selectionOnlyChanged.add(()=>{i.updateState({exportSelectionOnly:a.selectionOnly()})})})(this)},isLoading(){return this.callBase()||this.getController("data").isStateLoading()},state(i){var t=this.callBase.apply(this,arguments);return void 0!==i&&this.applyState((0,y.X)(!0,{},i)),t},updateState(i){if(this.isEnabled()){var t=this.state(),e=(0,y.X)({},t,i),a=(0,V.GP)(t),n=(0,V.GP)(e);(0,V.RL)(a,n)||(i=(0,y.X)(!0,{},i),(0,y.X)(this._state,i),this.save())}else(0,y.X)(this._state,i)},applyState(i){var t,{allowedPageSizes:e}=i,{searchText:a}=i,{selectedRowKeys:n}=i,{selectionFilter:r}=i,s=this.getController("export"),o=this.getController("columns"),l=this.getController("data"),d=this.option("scrolling.mode"),h="virtual"===d||"infinite"===d,u=!0===this.option("pager.visible")&&this.option("pager.showPageSizeSelector"),c=null===(t=this.getView("rowsView"))||void 0===t?void 0:t.hasHeight();this.component.beginUpdate(),o&&o.setUserState(i.columns),s&&s.selectionOnly(i.exportSelectionOnly),this.option("selection.deferred")||this.option("selectedRowKeys",n||[]),this.option("selectionFilter",r),e&&"auto"===this.option("pager.allowedPageSizes")&&(this.option("pager").allowedPageSizes=e),this.option("focusedRowEnabled")&&(this.option("focusedRowIndex",-1),this.option("focusedRowKey",i.focusedRowKey||null)),this.component.endUpdate(),this.option("searchPanel.text",a||""),this.option("filterValue",((i,t)=>{var e=i.getController("filterSync"),a=i.getController("columns");return e?t.columns||void 0!==t.filterValue?t.filterValue||e.getFilterValueFromColumns(t.columns):i._initialFilterValue||e.getFilterValueFromColumns(a.getColumns()):null})(this,i)),this.option("filterPanel.filterEnabled",!i.filterPanel||i.filterPanel.filterEnabled),this.option("paging.pageIndex",(!h||c)&&i.pageIndex||0),this.option("paging.pageSize",h&&!u||!(0,v.O9)(i.pageSize)?this._initialPageSize:i.pageSize),l&&l.reset()}},columns:{_shouldReturnVisibleColumns(){var i=this.callBase.apply(this,arguments),t=this.getController("stateStoring");return i&&(!t.isEnabled()||t.isLoaded())}},data:{callbackNames(){return this.callBase().concat(["stateLoaded"])},_refreshDataSource(){var{callBase:i}=this,t=this.getController("stateStoring");if(t.isEnabled()&&!t.isLoaded()){clearTimeout(this._restoreStateTimeoutID);var e=new w.cY;return this._restoreStateTimeoutID=setTimeout(()=>{t.load().always(()=>{this._restoreStateTimeoutID=null}).done(()=>{i.call(this),this.stateLoaded.fire(),e.resolve()}).fail(a=>{this.stateLoaded.fire(),this._handleLoadError(a||"Unknown error"),e.reject()})}),e.promise()}this.isStateLoading()||i.call(this)},isLoading(){var i=this.getController("stateStoring");return this.callBase()||i.isLoading()},isStateLoading(){return(0,v.O9)(this._restoreStateTimeoutID)},isLoaded(){return this.callBase()&&!this.isStateLoading()},dispose(){clearTimeout(this._restoreStateTimeoutID),this.callBase()}},selection:{_fireSelectionChanged(i){var t=this.getController("stateStoring"),e=this.option("selection.deferred");t.isLoading()&&e||this.callBase.apply(this,arguments)}}}}},_x=pr.extenders.controllers.stateStoring.applyState;G.registerModule("stateStoring",(0,y.X)(!0,{},pr,{extenders:{controllers:{stateStoring:{applyState(i){_x.apply(this,arguments),this.option("expandedRowKeys",i.expandedRowKeys?i.expandedRowKeys.slice():[])}},data:{getUserState(){var i=this.callBase.apply(this,arguments);return this.option("autoExpandAll")||(i.expandedRowKeys=this.option("expandedRowKeys")),i}}}}}));var Md="column-chooser-button",Vd="notouch-action",Pd="column-chooser",Ld="dx-column-chooser-item",bx=["showInColumnChooser","caption","allowHiding","visible","cssClass","ownerBand"],wx={renderShowColumnChooserButton(i){var r,t=this,e=t.addWidgetPrefix(Md),a=t.option("columnChooser.enabled"),n=i.find(".".concat(e));a?n.length?n.show():(r=(0,_.A)("<div>").addClass(e).appendTo(i),t._createComponent(r,_e.A,{icon:Pd,onClick(){t.getView("columnChooserView").showColumnChooser()},hint:t.option("columnChooser.title"),integrationOptions:{}})):n.hide()},getPosition(){var i=this.getView("rowsView"),t=this.option("columnChooser.position");return(0,v.O9)(t)?t:{my:"right bottom",at:"right bottom",of:i&&i.element(),collision:"fit",offset:"-2 -2",boundaryOffset:"2 2"}}},yx=Z.ViewController.inherit(wx),Sx={_resizeCore:V.lQ,_isWinDevice:()=>!!ne.A.real().win,_initializePopupContainer(){var i=this,t=i.addWidgetPrefix("column-chooser"),e=i.element().addClass(t),a=i.option("columnChooser"),n=(0,de.ss)(),r=(0,de.AE)(n),s=(0,de.gx)(n),o={visible:!1,shading:!1,showCloseButton:!1,dragEnabled:!0,resizeEnabled:!0,wrapperAttr:{class:t},toolbarItems:[{text:a.title,toolbar:"top",location:r||s?"before":"center"}],position:i.getController("columnChooser").getPosition(),width:a.width,height:a.height,rtlEnabled:i.option("rtlEnabled"),onHidden(){i._isWinDevice()&&(0,_.A)("body").removeClass(i.addWidgetPrefix(Vd))},container:a.container};r||s?(0,y.X)(o,{showCloseButton:!0}):o.toolbarItems[o.toolbarItems.length]={shortcut:"cancel"},(0,v.O9)(this._popupContainer)?this._popupContainer.option(o):(i._popupContainer=i._createComponent(e,ze.A,o),i._popupContainer.on("optionChanged",l=>{"visible"===l.name&&i.renderCompleted.fire()})),this.setPopupAttributes()},setPopupAttributes(){var i=this.isSelectMode(),t=this._columnsController.isBandColumnsUsed();this._popupContainer.setAria({role:"dialog",label:A.A.format("dxDataGrid-columnChooserTitle")}),this._popupContainer.$wrapper().toggleClass(this.addWidgetPrefix("column-chooser-mode-drag"),!i).toggleClass(this.addWidgetPrefix("column-chooser-mode-select"),i),this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-list")),i&&!t&&this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-plain"))},_renderCore(i){if(this._popupContainer){var t=!this.isSelectMode();this._columnChooserList&&"full"!==i?t&&this._updateItems():this._renderTreeView()}},_renderTreeView(){var i,t,e,a=this,n=this._popupContainer.$content(),r=this.option("columnChooser"),s=this.isSelectMode(),d={dataStructure:"plain",activeStateEnabled:!0,focusStateEnabled:!0,hoverStateEnabled:!0,itemTemplate:"item",showCheckBoxesMode:"none",rootValue:null,searchEnabled:(0,v.O9)(r.allowSearch)?r.allowSearch:null===(i=r.search)||void 0===i?void 0:i.enabled,searchTimeout:(0,v.O9)(r.searchTimeout)?r.searchTimeout:null===(t=r.search)||void 0===t?void 0:t.timeout,searchEditorOptions:null===(e=r.search)||void 0===e?void 0:e.editorOptions};if(this._isWinDevice()&&(d.useNativeScrolling=!1),(0,y.X)(d,s?this._prepareSelectModeConfig():this._prepareDragModeConfig()),this._columnChooserList)d.searchEnabled||(d.searchValue=""),this._columnChooserList.option(d),this._updateItems();else{this._columnChooserList=this._createComponent(n,Si,d),this._updateItems();var h=0;this._columnChooserList.on("optionChanged",u=>{var c=u.component.getScrollable();h=c.scrollTop()}),this._columnChooserList.on("contentReady",u=>{(0,V.OX)(()=>{u.component.getScrollable().scrollTo({y:h}),a.renderCompleted.fire()})})}},_prepareDragModeConfig(){return{noDataText:this.option("columnChooser").emptyPanelText,activeStateEnabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,itemTemplate(t,e,a){(0,_.A)(a).text(t.text).parent().addClass(t.cssClass).addClass(Ld)}}},_prepareSelectModeConfig(){var i=this,t=this.option("columnChooser.selection")||{},e=!1;return{selectByClick:t.selectByClick,selectNodesRecursive:t.recursive,showCheckBoxesMode:t.allowSelectAll?"selectAll":"normal",onSelectionChanged:a=>{if(!e){var n=(r=a.component.getNodes(),(s=(o,l)=>o.reduce((d,h)=>(d.push(h),h.children.length&&s(h.children,d),d),l))(r,[]));a.component.beginUpdate(),e=!0,((r,s)=>{s.filter(o=>!1===o.itemData.allowHiding).forEach(o=>r.component.selectItem(o.key))})(a,n),a.component.endUpdate(),e=!1,i.component.beginUpdate(),this._isUpdatingColumnVisibility=!0,(r=>{r.forEach(s=>{i._columnsController.columnOption(s.itemData.id,"visible",!1!==s.selected)})})(n),i.component.endUpdate(),this._isUpdatingColumnVisibility=!1}var r,s}}},_updateItems(){var i=this.isSelectMode(),e=function(i,t){var e=[],a=i.isSelectMode(),n=i.option("columnChooser.selection.recursive");return t.length&&(0,I.__)(t,(r,s)=>{var o={text:s.caption,cssClass:s.cssClass,allowHiding:s.allowHiding,expanded:!0,id:s.index,disabled:!1===s.allowHiding,parentId:(0,v.O9)(s.ownerBand)?s.ownerBand:null};a&&!(n&&s.hasColumns)&&(o.selected=s.visible),e.push(o)}),e}(this,this._columnsController.getChooserColumns(i));this._columnChooserList.option("items",e)},_updateItemsSelection(i){var t=i?.map(e=>this._columnsController.columnOption(e));this._columnChooserList.beginUpdate(),t?.forEach(e=>{var{visible:a,index:n}=e;a?this._columnChooserList.selectItem(n):this._columnChooserList.unselectItem(n)}),this._columnChooserList.endUpdate()},_columnOptionChanged(i){if(this.callBase(i),this.isSelectMode()&&this._columnChooserList&&!0!==this._isUpdatingColumnVisibility){var{optionNames:e}=i,a=e.visible&&1===e.length,n=(0,v.O9)(i.columnIndex)?[i.columnIndex]:i.columnIndices;(bx.some(s=>e[s])||i.changeTypes.columns&&e.all)&&(this._updateItemsSelection(n),a||this._updateItems())}},optionChanged(i){"columnChooser"===i.name?(this._initializePopupContainer(),this.render(null,"full")):this.callBase(i)},getColumnElements(){var i=[],t=this.isSelectMode(),e=this._columnsController.getChooserColumns(t),a=this._popupContainer&&this._popupContainer.$content(),n=a&&a.find(".dx-treeview-node");return n&&e.forEach(r=>{var s=n.filter("[data-item-id = '".concat(r.index,"']")),o=s.length?s.children(".".concat(Ld)).get(0):null;i.push(o)}),(0,_.A)(i)},getName:()=>"columnChooser",getColumns(){return this._columnsController.getChooserColumns()},allowDragging(i){var t=this._columnsController.isParentColumnVisible(i.index),e=!i.visible&&i.allowHiding;return this.isColumnChooserVisible()&&t&&e},allowColumnHeaderDragging(i){return!this.isSelectMode()&&this.isColumnChooserVisible()&&i.allowHiding},getBoundingRect(){var i=this._popupContainer&&this._popupContainer.$overlayContent();if(i&&i.is(":visible")){var t=i.offset();return{left:t.left,top:t.top,right:t.left+(0,R.Ot)(i),bottom:t.top+(0,R.P$)(i)}}return null},showColumnChooser(){this._popupContainer||(this._initializePopupContainer(),this.render()),this._popupContainer.show(),this._isWinDevice()&&(0,_.A)("body").addClass(this.addWidgetPrefix(Vd))},hideColumnChooser(){this._popupContainer&&this._popupContainer.hide()},isColumnChooserVisible(){var i=this._popupContainer;return i&&i.option("visible")},isSelectMode(){return"select"===this.option("columnChooser.mode")},hasHiddenColumns(){var i=this.option("columnChooser.enabled"),t=this.getColumns().filter(e=>!e.visible);return i&&t.length},publicMethods:()=>["showColumnChooser","hideColumnChooser"]},ka={defaultOptions:()=>({columnChooser:{enabled:!1,search:{enabled:!1,timeout:500,editorOptions:{}},selection:{allowSelectAll:!1,selectByClick:!1,recursive:!1},position:void 0,mode:"dragAndDrop",width:250,height:260,title:A.A.format("dxDataGrid-columnChooserTitle"),emptyPanelText:A.A.format("dxDataGrid-columnChooserEmptyText"),container:void 0}}),controllers:{columnChooser:yx},views:{columnChooserView:Ri.inherit(Sx)},extenders:{views:{headerPanel:{_getToolbarItems(){var i=this.callBase();return this._appendColumnChooserItem(i)},_appendColumnChooserItem(i){var t=this;if(t.option("columnChooser.enabled")){var a=t.option("columnChooser.title");i.push({widget:"dxButton",options:{icon:Pd,onClick:function(){t.component.getView("columnChooserView").showColumnChooser()},hint:a,text:a,onInitialized:function(r){(0,_.A)(r.element).addClass(t._getToolbarButtonClass(t.addWidgetPrefix(Md)))},elementAttr:{"aria-haspopup":"dialog"}},showText:"inMenu",location:"after",name:"columnChooserButton",locateInMenu:"auto",sortIndex:40})}return i},optionChanged(i){"columnChooser"===i.name?(this._invalidate(),i.handled=!0):this.callBase(i)},isVisible(){var i=this.option("columnChooser.enabled");return this.callBase()||i}},columnHeadersView:{allowDragging(i){var t=this.component.getView("columnChooserView"),e=!t.isSelectMode(),a=t.isColumnChooserVisible();return e&&a&&i.allowHiding||this.callBase(i)}}},controllers:{columns:{allowMoveColumn(i,t,e,a){return!("select"===this.option("columnChooser.mode")&&"columnChooser"===a)&&this.callBase(i,t,e,a)}}}}};G.registerModule("columnChooser",ka);var kd="dx-master-detail-row",Nd={defaultOptions:()=>({masterDetail:{enabled:!1,autoExpandAll:!1,template:null}}),extenders:{controllers:{columns:{_getExpandColumnsCore(){var i=this.callBase();return this.option("masterDetail.enabled")&&i.push({type:"detailExpand",cellTemplate:F.getExpandCellTemplate()}),i}},data:function(){var i=function(t){t._expandedItems=[],t._isExpandAll=t.option("masterDetail.autoExpandAll")};return{init(){i(this),this.callBase()},expandAll(t){t<0?(this._isExpandAll=!0,this._expandedItems=[],this.updateItems()):this.callBase.apply(this,arguments)},collapseAll(t){t<0?(this._isExpandAll=!1,this._expandedItems=[],this.updateItems()):this.callBase.apply(this,arguments)},isRowExpanded(t){var e=F.getIndexByKey(t,this._expandedItems);return Array.isArray(t)?this.callBase.apply(this,arguments):!!(this._isExpandAll^(e>=0&&this._expandedItems[e].visible))},_getRowIndicesForExpand(t){var e=this.getRowIndexByKey(t);return[e,e+1]},_changeRowExpandCore(t){var e;if(Array.isArray(t))e=this.callBase.apply(this,arguments);else{var a=F.getIndexByKey(t,this._expandedItems);if(a>=0){var{visible:n}=this._expandedItems[a];this._expandedItems[a].visible=!n}else this._expandedItems.push({key:t,visible:!0});this.updateItems({changeType:"update",rowIndices:this._getRowIndicesForExpand(t)}),e=(new w.cY).resolve()}return e},_processDataItem(t,e){var a=this.callBase.apply(this,arguments);return a.isExpanded=this.isRowExpanded(a.key),void 0===e.detailColumnIndex&&(e.detailColumnIndex=-1,(0,I.__)(e.visibleColumns,(n,r)=>{if("expand"===r.command&&!(0,v.O9)(r.groupIndex))return e.detailColumnIndex=n,!1})),e.detailColumnIndex>=0&&(a.values[e.detailColumnIndex]=a.isExpanded),a},_processItems(t,e){var a=this,{changeType:n}=e,r=[];return t=a.callBase.apply(a,arguments),"loadingAll"===n?t:("refresh"===n&&(a._expandedItems=(0,V.VM)(a._expandedItems,s=>s.visible)),(0,I.__)(t,(s,o)=>{r.push(o);var l=F.getIndexByKey(o.key,a._expandedItems);"data"===o.rowType&&(o.isExpanded||l>=0)&&!o.isNewRow&&r.push({visible:o.isExpanded,rowType:"detail",key:o.key,data:o.data,values:[]})}),r)},optionChanged(t){var e,a;if("masterDetail"===t.name){switch(t.name="dataSource",t.fullName){case"masterDetail":var n=t.value||{},r=t.previousValue||{};e=n.enabled!==r.enabled,a=n.autoExpandAll!==r.autoExpandAll;break;case"masterDetail.template":i(this);break;case"masterDetail.enabled":e=!0;break;case"masterDetail.autoExpandAll":a=!0}(e||a)&&i(this)}this.callBase(t)}}}(),resizing:{fireContentReadyAction(){this.callBase.apply(this,arguments),this._updateParentDataGrids(this.component.$element())},_updateParentDataGrids(i){var t=i.closest(".".concat(kd));t.length&&(0,w.z7)(this._updateMasterDataGrid(t,i)).done(()=>{this._updateParentDataGrids(t.parent())})},_updateMasterDataGrid(i,t){var e=(0,_.A)(i).data("options"),a=(0,_.A)(i).closest(".".concat(this.getWidgetContainerClass())).parent().data("dxDataGrid");if(e&&a)return this._updateMasterDataGridCore(a,e)},_updateMasterDataGridCore(i,t){var e=(0,w.cY)();if(i.getView("rowsView").isFixedColumns())this._updateFixedMasterDetailGrids(i,t.rowIndex,(0,_.A)(t.rowElement)).done(e.resolve);else{if(!0===i.option("scrolling.useNative"))return void i.updateDimensions().done(()=>e.resolve(!0));var a=i.getScrollable();a?a?.update().done(()=>e.resolve()):e.resolve()}return e.promise()},_updateFixedMasterDetailGrids(i,t,e){var a=(0,w.cY)(),n=(0,_.A)(i.getRowElement(t)),r=(0,_.A)(i.getView("rowsView").getTableElements()),s=2===n?.length&&(0,R.Oq)(n.eq(0))!==(0,R.Oq)(n.eq(1)),o=2===r?.length&&(0,R.Oq)(r.eq(0))!==(0,R.Oq)(r.eq(1));if(s||o){var l=(0,R.RG)(e);return i.updateDimensions().done(()=>{var d=this.option("columnAutoWidth")&&!0===i.option("scrolling.useNative"),h=d&&l!==(0,R.RG)(e);d&&h?this.updateDimensions().done(()=>a.resolve(!0)):a.resolve(!0)}),a.promise()}return(0,w.cY)().resolve()},_toggleBestFitMode(i){if(this.callBase.apply(this,arguments),this.option("masterDetail.template")){var t=this._rowsView.getTableElement();t&&t.find(".dx-master-detail-cell").css("maxWidth",i?0:"")}}}},views:{rowsView:{_getCellTemplate(i){var{column:t}=i,e=this.getController("editing"),a=e&&e.isEditRow(i.rowIndex);return"detail"!==t.command||a?this.callBase.apply(this,arguments):this.option("masterDetail.template")||{allowRenderToDetachedContainer:!1,render:this._getDefaultTemplate(t)}},_isDetailRow:i=>i&&i.rowType&&0===i.rowType.indexOf("detail"),_createRow(i){var t=this.callBase.apply(this,arguments);return i&&this._isDetailRow(i)&&(this.option("showRowLines")&&t.addClass("dx-row-lines"),t.addClass(kd),(0,v.O9)(i.visible)&&t.toggle(i.visible)),t},_renderCells(i,t){var{row:e}=t,n=this._columnsController.getVisibleColumns();e.rowType&&this._isDetailRow(e)?this._needRenderCell(0,t.columnIndices)&&this._renderCell(i,{value:null,row:e,rowIndex:e.rowIndex,column:{command:"detail"},columnIndex:0,change:t.change}).addClass("dx-cell-focus-disabled").addClass("dx-master-detail-cell").attr("colSpan",n.length):this.callBase.apply(this,arguments)}}}}};G.registerModule("masterDetail",(0,y.X)(!0,{},Nd,{extenders:{controllers:{data:{isRowExpanded(){return this.callBase.apply(this,arguments)},_processItems(){return this.callBase.apply(this,arguments)},_processDataItem(){return this.callBase.apply(this,arguments)}}}}}));var Hd=D(8709),{isWrapped:Rx}=xa.A,Fx=function(){var i=function(h,u){return(0,y.X)(h,{readOnly:u.readOnly,placeholder:u.placeholder,inputAttr:{id:u.id,"aria-labelledby":u["aria-labelledby"]},tabIndex:u.tabIndex},u.editorOptions)},t=function(){return ge.A.mozilla||ne.A.real().ios},e=function(h){var u={},c=t(),g=h.sharedData||u;return i({placeholder:h.placeholder,width:h.width,value:h.value,onValueChanged:function(m){var f="filterRow"===h.parentType||"searchPanel"===h.parentType,x=m.event&&("input"===m.event.type||"keyup"===m.event.type),b=function(S,T){h&&h.setValue(S.value,T)};clearTimeout(u.valueChangeTimeout),x&&f?g.valueChangeTimeout=u.valueChangeTimeout=setTimeout(function(){b(m,u.valueChangeTimeout!==g.valueChangeTimeout)},(0,v.O9)(h.updateValueTimeout)?h.updateValueTimeout:0):b(m)},onKeyDown:function(m){c&&"enter"===(0,P.YD)(m.event)&&O.A.trigger((0,_.A)(m.component._input()),"change")},valueChangeEvent:"change"+("filterRow"===h.parentType?" keyup input":"")},h)},a=function(h){h.editorName="dxDateBox",h.editorOptions=i({value:h.value,onValueChanged:function(u){h.setValue(u.value)},onKeyDown:function(u){var{component:c,event:g}=u,m=c.option("useMaskBehavior");(t()||m)&&"enter"===(0,P.YD)(g)&&(c.blur(),c.focus())},displayFormat:h.format,type:h.dataType,dateSerializationFormat:null,width:"filterBuilder"===h.parentType?void 0:"auto"},h)},n=function(h){var g,u=e(h),c="searchPanel"===h.parentType;u.value=h.editorType&&"dxTextBox"!==h.editorType?h.value:(0,v.O9)(g=h.value)?g.toString():"",u.valueChangeEvent+=c?" keyup input search":"",u.mode=u.mode||(c?"search":"text"),h.editorName="dxTextBox",h.editorOptions=u},r=function(h){var u=e(h);u.value=(0,v.O9)(h.value)?h.value:null,h.editorName="dxNumberBox",h.editorOptions=u};function s(h){var c,g,m,u=h.lookup,f="filterRow"===h.parentType;if(u){var x;c=(0,q.Hz)(u.displayExpr),(0,v.Tn)(g=u.dataSource)&&!Rx(g)&&(g=g(h.row||{}),function(S){if(S.row&&S.row.watch&&"dataRow"===S.parentType){var T=S.editorOptions||{};S.editorOptions=T;var B,M=T.onInitialized;T.onInitialized=function(H){M&&M.apply(this,arguments),(B=H.component).on("disposing",z)};var L,z=S.row.watch(()=>(L=S.lookup.dataSource(S.row))&&L.filter,()=>{B.option("dataSource",L)},H=>{S.row=H})}}(h)),((0,v.Gv)(g)||Array.isArray(g))&&(g=(0,vi.ho)(g),f&&(m=g.postProcess,g.postProcess=function(S){return 0===this.pageIndex()&&(S=S.slice(0)).unshift(null),m?m.call(this,S):S}));var b=!(!u.allowClearing||f);h.editorName=null!==(x=h.editorType)&&void 0!==x?x:"dxSelectBox",h.editorOptions=i({searchEnabled:!0,value:h.value,valueExpr:h.lookup.valueExpr,searchExpr:h.lookup.searchExpr||h.lookup.displayExpr,allowClearing:b,showClearButton:b,displayExpr:function(S){return null===S?h.showAllText:c(S)},dataSource:g,onValueChanged:function(S){var T=[S.value];!f&&T.push(S.component.option("text")),h.setValue.apply(this,T)}},h)}}function o(h){h.editorName="dxCheckBox",h.editorOptions=i({elementAttr:{id:h.id},value:(0,v.O9)(h.value)?h.value:void 0,hoverStateEnabled:!h.readOnly,focusStateEnabled:!h.readOnly,activeStateEnabled:!1,onValueChanged:function(u){h.setValue&&h.setValue(u.value,u)}},h)}var l=h=>{h.editorName=h.editorType,h.editorOptions=i({value:h.value,onValueChanged:function(u){h.setValue(u.value)}},h)},d=h=>{var g,u={dxDateBox:a,dxCheckBox:o,dxNumberBox:r,dxTextBox:n};if(h.lookup)s(h);else if(h.editorType){var c;(null!==(c=u[h.editorType])&&void 0!==c?c:l)(h)}else switch(h.dataType){case"date":case"datetime":a(h);break;case"boolean":"filterRow"===(g=h).parentType||"filterBuilder"===g.parentType?s((0,y.X)(g,{lookup:{displayExpr:function(m){return!0===m?g.trueText||"true":!1===m?g.falseText||"false":void 0},dataSource:[!0,!1]}})):o(g);break;case"number":r(h);break;default:n(h)}};return{createEditor:function(h,u){u.cancel=!1,u.editorElement=(0,Y.c)(h),(0,v.O9)(u.tabIndex)||(u.tabIndex=this.option("tabIndex")),d(u),this.executeAction("onEditorPreparing",u),!u.cancel&&("dataRow"===u.parentType&&!u.isOnForm&&!(0,v.O9)(u.editorOptions.showValidationMark)&&(u.editorOptions.showValidationMark=!1),function(c,g){var m=(0,_.A)(g.editorElement);if(g.editorName&&g.editorOptions&&m[g.editorName]){if(("dxCheckBox"===g.editorName||"dxSwitch"===g.editorName)&&(g.isOnForm||(m.addClass(c.addWidgetPrefix("checkbox-size")),m.parent().addClass("dx-editor-inline-block"))),c._createComponent(m,g.editorName,g.editorOptions),"dxDateBox"===g.editorName){var f=m.dxDateBox("instance"),x=f._supportedKeys().enter;f.registerKeyHandler("enter",b=>(f.option("opened")&&x(b),!0))}"dxTextArea"===g.editorName&&m.dxTextArea("instance").registerKeyHandler("enter",function(b){"enter"===(0,P.YD)(b)&&!b.ctrlKey&&!b.shiftKey&&b.stopPropagation()})}}(this,u),this.executeAction("onEditorPrepared",u))}}}();const zd=Fx;var _r="dx-cell-focus-disabled",Kd="focus-overlay",vr="dx-focused",Wd="dxDataGridEditorFactory",Gd=(0,P.b4)([te.A.down,"focusin",ae.U].join(" "),Wd),mr="dx-hidden",zx=Z.ViewController.inherit(zd),Ud={defaultOptions:()=>({}),controllers:{editorFactory:class Kx extends zx{_getFocusedElement(t){var e=this.option("focusedRowEnabled")?"tr[tabindex]:focus":"tr[tabindex]:not(.dx-data-row):focus",a="td[tabindex]:focus, ".concat(e,", input:focus, textarea:focus, .dx-lookup-field:focus, .dx-checkbox:focus, .dx-switch:focus, .dx-dropdownbutton .dx-buttongroup:focus, .dx-adaptive-item-text:focus"),n=t.find(a);return this.elementIsInsideGrid(n)&&n}_getFocusCellSelector(){return".dx-row > td"}_updateFocusCore(){var t=this.component&&this.component.$element();if(t){var e=this._getFocusedElement(t);if(e&&e.length){var a;if(!e.hasClass(_r)&&!e.hasClass("dx-row")){var n=e.closest("".concat(this._getFocusCellSelector(),", .").concat(_r));n.get(0)!==e.get(0)&&(a=this._needHideBorder(n),e=n)}if(e.length&&!e.hasClass(_r))return void this.focus(e,a)}}this.loseFocus()}_needHideBorder(t){return t.hasClass("dx-editor-inline-block")}_updateFocus(t){var e=this,a=t&&t.event&&(0,_.A)(t.event.target).hasClass(e.addWidgetPrefix(Kd));e._isFocusOverlay=e._isFocusOverlay||a,clearTimeout(e._updateFocusTimeoutID),e._updateFocusTimeoutID=setTimeout(()=>{delete e._updateFocusTimeoutID,e._isFocusOverlay||e._updateFocusCore(),e._isFocusOverlay=!1})}_updateFocusOverlaySize(t,e){t.hide();var a=Se.A.calculate(t,(0,y.X)({collision:"fit"},e));a.h.oversize>0&&(0,R.iT)(t,(0,R.Ot)(t)-a.h.oversize),a.v.oversize>0&&(0,R.NG)(t,(0,R.P$)(t)-a.v.oversize),t.show()}callbackNames(){return["focused"]}focus(t,e){var a=this;if(void 0===t)return a._$focusedElement;t&&(t.is(a._$focusedElement)||a._$focusedElement&&a._$focusedElement.removeClass(vr),a._$focusedElement=t,clearTimeout(a._focusTimeoutID),a._focusTimeoutID=setTimeout(()=>{delete a._focusTimeoutID,a.renderFocusOverlay(t,e),t.addClass(vr),a.focused.fire(t)}))}refocus(){var t=this.focus();this.focus(t)}renderFocusOverlay(t,e){if(F.isElementInCurrentGrid(this,t))if(this._$focusOverlay||(this._$focusOverlay=(0,_.A)("<div>").addClass(this.addWidgetPrefix(Kd))),e)this._$focusOverlay.addClass(mr);else if(t.length){var a=ge.A.mozilla?"right bottom":"left top",n=t.closest(".".concat(this.addWidgetPrefix("content"))),r=(0,se.N)(t.get(0)),s=t.hasClass(this.addWidgetPrefix("invalid")),o=t.hasClass("dx-cell-modified")&&!s;this._$focusOverlay.removeClass(mr).toggleClass("dx-focused-cell-invalid",s).toggleClass("dx-focused-cell-modified",o).appendTo(n),(0,R.NG)(this._$focusOverlay,r.bottom-r.top+1),(0,R.iT)(this._$focusOverlay,r.right-r.left+1);var l={precise:!0,my:a,at:a,of:t,boundary:n.length&&n};this._updateFocusOverlaySize(this._$focusOverlay,l),Se.A.setup(this._$focusOverlay,l),this._$focusOverlay.css("visibility","visible")}}resize(){var t=this._$focusedElement;t&&this.focus(t)}loseFocus(){this._$focusedElement&&this._$focusedElement.removeClass(vr),this._$focusedElement=null,this._$focusOverlay&&this._$focusOverlay.addClass(mr)}init(){this.createAction("onEditorPreparing",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onEditorPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this._updateFocusHandler=this._updateFocusHandler||this.createAction(this._updateFocus.bind(this)),this._subscribedContainerRoot=this._getContainerRoot(),O.A.on(this._subscribedContainerRoot,Gd,this._updateFocusHandler),this._attachContainerEventHandlers()}_getContainerRoot(){var t,e=null===(t=this.component)||void 0===t?void 0:t.$element(),a=U.A.getRootNode(e?.get(0));return a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||a.host?a:U.A.getDocument()}_attachContainerEventHandlers(){var t=this,e=t.component&&t.component.$element();e&&O.A.on(e,(0,P.b4)("keydown",Wd),a=>{"tab"===(0,P.YD)(a)&&t._updateFocusHandler(a)})}dispose(){clearTimeout(this._focusTimeoutID),clearTimeout(this._updateFocusTimeoutID),O.A.off(this._subscribedContainerRoot,Gd,this._updateFocusHandler)}}}};G.registerModule("editorFactory",Ud);var Wx=D(4122),Na="dx-editor-cell",pt="dx-row",$d="dx-selection",Ha="edit-form",Ue="insert",tt="remove",za="editing.popup",Cr="editing.form",De="editing.editRowKey",Dt="editing.editColumnName",Xd="targetComponent",fr="input:not([type='hidden'])",xr="[tabindex]:not([disabled]), ".concat(fr,":not([disabled])"),Bt="batch",it="row",si="cell",oi="form",br="popup",Ka="last",jd="pageBottom",Er="pageTop",Qd="viewportBottom",qd="viewportTop",Ux=[Bt,it,si,oi,br],$x=[it,oi,br],Xx=[Bt,si],Yx=[Bt,it,si],jx=[it,oi],Zd="dx-command-edit",Jd="".concat(Zd,"-with-icons"),_t="__DX_INSERT_INDEX__",eh="dx-cell-modified",ki="update",sb={save:"dx-link-save",cancel:"dx-link-cancel",edit:"dx-link-edit",undelete:"dx-link-undelete",delete:"dx-link-delete",add:"dx-link-add"},ob={save:"save",cancel:"revert",edit:"edit",undelete:"revert",delete:"trash",add:"add"},lb={edit:"editRow",delete:"deleteRow",undelete:"undeleteRow",save:"saveEditData",cancel:"cancelEditData",add:"addRowByRowIndex"},db={add:"allowAdding",edit:"allowUpdating",delete:"allowDeleting"},hb=["edit","save","cancel","delete","undelete"],at="editing.changes",th="edit-form-item",fb=wt.A.IS_RENOVATED_WIDGET?"dx-scrollable":"dx-scrollable-container",ih="dx-edit-row",wr="_DX_KEY_",Ni=function(i){return function(t){var e=t instanceof Error?t:new Error(t&&String(t)||"Unknown error");i.reject(e)}},ah=function(i,t){return t.isEditing||i&&t.column.allowEditing},nh=function(i,t){var e=!!t.column.command,a=ah(i,t);return"data"===t.rowType&&!e&&(a||t.column.showEditorAlways)},li=(i,t)=>{var e=-1;return i.some((a,n)=>{if(rh(a)===t)return e=n,!0}),e};function rh(i){return(0,v.Gv)(i)?i.name:i}var sh=(i,t)=>{i.forEach(e=>{e.items||e.tabs?sh(e.items||e.tabs,t):t(e)})},vt={defaultOptions:()=>({editing:{mode:"row",refreshMode:"full",newRowPosition:qd,allowAdding:!1,allowUpdating:!1,allowDeleting:!1,useIcons:!1,selectTextOnEditStart:!1,confirmDelete:!0,texts:{editRow:A.A.format("dxDataGrid-editingEditRow"),saveAllChanges:A.A.format("dxDataGrid-editingSaveAllChanges"),saveRowChanges:A.A.format("dxDataGrid-editingSaveRowChanges"),cancelAllChanges:A.A.format("dxDataGrid-editingCancelAllChanges"),cancelRowChanges:A.A.format("dxDataGrid-editingCancelRowChanges"),addRow:A.A.format("dxDataGrid-editingAddRow"),deleteRow:A.A.format("dxDataGrid-editingDeleteRow"),undeleteRow:A.A.format("dxDataGrid-editingUndeleteRow"),confirmDeleteMessage:A.A.format("dxDataGrid-editingConfirmDeleteMessage"),confirmDeleteTitle:""},form:{colCount:2},popup:{},startEditAction:"click",editRowKey:null,editColumnName:null,changes:[]},useLegacyColumnButtonTemplate:!1}),controllers:{editing:class Ab extends Z.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._rowsView=this.getView("rowsView"),this._lastOperation=null,this._changes=[],this._deferreds&&this._deferreds.forEach(t=>{t.reject("cancel")}),this._deferreds=[],this._dataChangedHandler||(this._dataChangedHandler=this._handleDataChanged.bind(this),this._dataController.changed.add(this._dataChangedHandler)),this._saveEditorHandler||(this.createAction("onInitNewRow",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserting",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserted",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditingStart",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdating",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdated",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceling",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceled",{excludeValidators:["disabled","readOnly"]})),this._updateEditColumn(),this._updateEditButtons(),this._internalState||(this._internalState=[]),this.component._optionsByReference[De]=!0,this.component._optionsByReference[at]=!0}getEditMode(){var t,e=null!==(t=this.option("editing.mode"))&&void 0!==t?t:it;return Ux.includes(e)?e:it}isCellBasedEditMode(){var t=this.getEditMode();return Xx.includes(t)}_getDefaultEditorTemplate(){return(t,e)=>{var a=(0,_.A)("<div>").appendTo(t),n=(0,y.X)({},e.column,{value:e.value,setValue:e.setValue,row:e.row,parentType:"dataRow",width:null,readOnly:!e.setValue,isOnForm:e.isOnForm,id:e.id});Yx.includes(this.getEditMode())&&(n["aria-labelledby"]=e.column.headerId),this.getController("editorFactory").createEditor(a,n)}}_getNewRowPosition(){var t=this.option("editing.newRowPosition");if("virtual"===this.option("scrolling.mode"))switch(t){case Er:return qd;case jd:return Qd;default:return t}return t}getChanges(){return this.option(at)}getInsertRowCount(){return this.option(at).filter(e=>"insert"===e.type).length}resetChanges(){var t=this.getChanges(),e=t?.length;e&&this._silentOption(at,[])}_getInternalData(t){return this._internalState.filter(e=>(0,V.RL)(e.key,t))[0]}_addInternalData(t){var e=this._getInternalData(t.key);return e?(0,y.X)(e,t):(this._internalState.push(t),t)}_getOldData(t){var e;return null===(e=this._getInternalData(t))||void 0===e?void 0:e.oldData}getUpdatedData(t){var e=this._dataController.keyOf(t),a=this.getChanges(),n=F.getIndexByKey(e,a);return a[n]?(0,Fe.lj)(t,a[n].data):t}getInsertedData(){return this.getChanges().filter(t=>t.data&&t.type===Ue).map(t=>t.data)}getRemovedData(){return this.getChanges().filter(t=>this._getOldData(t.key)&&t.type===tt).map(t=>this._getOldData(t.key))}_fireDataErrorOccurred(t){if("cancel"!==t){var e=this.getPopupContent();this._dataController.dataErrorOccurred.fire(t,e)}}_needToCloseEditableCell(t){}_closeEditItem(t){}_handleDataChanged(t){}_isDefaultButtonVisible(t,e){var a=!0;switch(t.name){case"delete":a=this.allowDeleting(e);break;case"undelete":a=!1}return a}_isButtonVisible(t,e){var{visible:a}=t;return(0,v.O9)(a)?(0,v.Tn)(a)?a.call(t,{component:e.component,row:e.row,column:e.column}):a:this._isDefaultButtonVisible(t,e)}_isButtonDisabled(t,e){var{disabled:a}=t;return(0,v.Tn)(a)?a.call(t,{component:e.component,row:e.row,column:e.column}):!!a}_getButtonConfig(t,e){var a=(0,v.Gv)(t)?t:{},n=rh(t),r=(i=>{var t=i.component.option("editing.texts")||{};return{save:t.saveRowChanges,cancel:t.cancelRowChanges,edit:t.editRow,undelete:t.undeleteRow,delete:t.deleteRow,add:t.addRowToNode}})(e),s=lb[n],o=this.option("editing"),l=db[n],d=!l||o[l];return(0,y.X)({name:n,text:r[n],cssClass:sb[n]},{onClick:s&&(h=>{var{event:u}=h;u.stopPropagation(),u.preventDefault(),setTimeout(()=>{e.row&&d&&this[s]&&this[s](e.row.rowIndex)})})},a)}_getEditingButtons(t){var e,a=!!t.column.buttons,n=(t.column.buttons||[]).slice();return a?((e=li(n,"edit"))>=0&&(li(n,"save")<0&&n.splice(e+1,0,"save"),li(n,"cancel")<0&&n.splice(li(n,"save")+1,0,"cancel")),(e=li(n,"delete"))>=0&&li(n,"undelete")<0&&n.splice(e+1,0,"undelete")):n=hb.slice(),n.map(r=>this._getButtonConfig(r,t))}_renderEditingButtons(t,e,a,n){e.forEach(r=>{this._isButtonVisible(r,a)&&this._createButton(t,r,a,n)})}_getEditCommandCellTemplate(){return(t,e,a)=>{var n=(0,_.A)(t);if("data"===e.rowType){var r=this._getEditingButtons(e);if(this._renderEditingButtons(n,r,e,a),e.watch){var s=e.watch(()=>r.map(o=>({visible:this._isButtonVisible(o,e),disabled:this._isButtonDisabled(o,e)})),()=>{n.empty(),this._renderEditingButtons(n,r,e)});O.A.on(n,Ot.N,s)}}else F.setEmptyText(n)}}isRowBasedEditMode(){var t=this.getEditMode();return $x.includes(t)}getFirstEditableColumnIndex(){var e,a=this.getController("columns").getVisibleColumns();return(0,I.__)(a,(n,r)=>{if(r.allowEditing)return e=n,!1}),e}getFirstEditableCellInRow(t){var e=this.getView("rowsView"),a=this.getFirstEditableColumnIndex();return e?._getCellElement(t||0,a)}getFocusedCellInRow(t){return this.getFirstEditableCellInRow(t)}getIndexByKey(t,e){return F.getIndexByKey(t,e)}hasChanges(t){for(var e=this.getChanges(),a=!1,n=0;n<e?.length;n++)if(e[n].type&&(!(0,v.O9)(t)||this._dataController.getRowIndexByKey(e[n].key)===t)){a=!0;break}return a}dispose(){super.dispose(),clearTimeout(this._inputFocusTimeoutID),O.A.off(U.A.getDocument(),te.A.up,this._pointerUpEditorHandler),O.A.off(U.A.getDocument(),te.A.down,this._pointerDownEditorHandler),O.A.off(U.A.getDocument(),ae.U,this._saveEditorHandler)}_silentOption(t,e){"editing.changes"===t&&(this._changes=(0,We.tm)([],e)),super._silentOption(t,e)}optionChanged(t){if("editing"===t.name){var{fullName:e}=t;e===De?this._handleEditRowKeyChange(t):e===at?(0,V.RL)(t.value,this._changes,{maxDepth:4})||(this._changes=(0,We.tm)([],t.value),this._handleChangesChange(t)):t.handled||(this._columnsController.reinit(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey()),t.handled=!0}else super.optionChanged(t)}_handleEditRowKeyChange(t){var e=this._dataController.getRowIndexByKey(t.value),a=this._getEditRowIndexCorrection(),n=this._dataController.getRowIndexByKey(t.previousValue)+a;(0,v.O9)(t.value)?t.value!==t.previousValue&&this._editRowFromOptionChanged(e,n):this.cancelEditData()}_handleChangesChange(t){var e=this._dataController;!t.value.length&&!t.previousValue.length||(t.value.forEach(n=>{var r;if("insert"===n.type)this._addInsertInfo(n);else{var s=e.getCachedStoreData()||(null===(r=e.items())||void 0===r?void 0:r.map(l=>l.data)),o=F.getIndexByKey(n.key,s,e.key());this._addInternalData({key:n.key,oldData:s[o]})}}),e.updateItems({repaintChangesOnly:!0,isLiveUpdate:!1,isOptionChanged:!0}))}publicMethods(){return["addRow","deleteRow","undeleteRow","editRow","saveEditData","cancelEditData","hasEditData"]}refresh(){(0,v.O9)(this._pageIndex)&&this._refreshCore.apply(this,arguments)}_refreshCore(t){}isEditing(){return(0,v.O9)(this.option(De))}isEditRow(t){return!1}_setEditRowKey(t,e){e?this._silentOption(De,t):this.option(De,t),this._refocusEditCell&&(this._refocusEditCell=!1,this._focusEditingCell())}_setEditRowKeyByIndex(t,e){var a=this._dataController.getKeyByRowIndex(t);void 0!==a?this._setEditRowKey(a,e):this._dataController.fireError("E1043")}getEditRowIndex(){return this._getVisibleEditRowIndex()}getEditFormRowIndex(){return-1}isEditRowByIndex(t){var e=this._dataController.getKeyByRowIndex(t);return(0,v.O9)(e)&&(0,V.RL)(this.option(De),e)&&this._getVisibleEditRowIndex()===t}isEditCell(t,e){return this.isEditRowByIndex(t)&&this._getVisibleEditColumnIndex()===e}getPopupContent(){}_isProcessedItem(t){return!1}_getInsertRowIndex(t,e,a){var n=-1,r=this._dataController,s=this._getInsertAfterOrBeforeKey(e);return(0,v.O9)(s)||0!==t.length?(0,v.O9)(s)&&t.some((o,l)=>{var d=a||this._isProcessedItem(o);if((0,v.Gv)(o)&&(d||(0,v.O9)(o[_t])?(0,V.RL)(o.key,s)&&(n=l):(0,V.RL)(r.keyOf(o),s)&&(n=l)),n>=0){var h=t[n+1];return h&&("detail"===h.rowType||"detailAdaptive"===h.rowType)&&(0,v.O9)(e.insertAfterKey)?void 0:((0,v.O9)(e.insertAfterKey)&&(n+=1),!0)}}):n=0,n}_generateNewItem(t){var e,a={key:t},n=null===(e=this._getInternalData(t))||void 0===e?void 0:e.insertInfo;return n?.[_t]&&(a[_t]=n[_t]),a}_getLoadedRowIndex(t,e,a){var n=this._getInsertRowIndex(t,e,a),r=this._dataController;if(n<0){var s=this._getNewRowPosition(),o=r.pageIndex(),l=this._getInsertAfterOrBeforeKey(e);s===Ka||0!==o||(0,v.O9)(l)?s===Ka&&r.isLastPageLoaded()&&(n=t.length):n=0}return n}processItems(t,e){var{changeType:a}=e;return this.update(a),this.getChanges().forEach(r=>{var s;if(r.type===Ue){var{key:l}=r,d=null===(s=this._getInternalData(l))||void 0===s?void 0:s.insertInfo;(!(0,v.O9)(l)||!(0,v.O9)(d))&&(l=(d=this._addInsertInfo(r)).key);var h=this._getLoadedRowIndex(t,r),u=this._generateNewItem(l);h>=0&&t.splice(h,0,u)}}),t}processDataItem(t,e,a){var n=e.visibleColumns,r=t.data[_t]?t.data.key:t.key,s=this.getChanges(),o=F.getIndexByKey(r,s);t.isEditing=!1,o>=0&&this._processDataItemCore(t,s[o],r,n,a)}_processDataItemCore(t,e,a,n,r){var{data:s,type:o}=e;switch(o){case Ue:t.isNewRow=!0,t.key=a,t.data=s;break;case ki:t.modified=!0,t.oldData=t.data,t.data=(0,Fe.lj)(t.data,s),t.modifiedValues=r(s,n,!0);break;case tt:t.removed=!0}}_initNewRow(t){if(this.executeAction("onInitNewRow",t),t.promise){var e=new w.cY;return(0,w.z7)((0,w.Sx)(t.promise)).done(e.resolve).fail(Ni(e)).fail(a=>this._fireDataErrorOccurred(a)),e}}_createInsertInfo(){var t={};return t[_t]=this._getInsertIndex(),t}_addInsertInfo(t,e){var a,n;t.key=this.getChangeKeyValue(t);var{key:r}=t;if(n=null===(a=this._getInternalData(r))||void 0===a?void 0:a.insertInfo,!(0,v.O9)(n)){var s=this._getInsertAfterOrBeforeKey(t);n=this._createInsertInfo(),(0,v.O9)(s)||this._setInsertAfterOrBeforeKey(t,e)}return this._addInternalData({insertInfo:n,key:r}),{insertInfo:n,key:r}}getChangeKeyValue(t){if((0,v.O9)(t.key))return t.key;var a,e=this._dataController.key();return t.data&&e&&!Array.isArray(e)&&(a=t.data[e]),(0,v.O9)(a)||(a="".concat(wr).concat(new Pe.A)),a}_setInsertAfterOrBeforeKey(t,e){var a=this._dataController,n=a.items(!0),r=this.getView("rowsView"),s=this._getNewRowPosition();switch(s){case"first":case Ka:break;case Er:case jd:if(n.length){var o=s===Er?0:n.length-1;t[0===o?"insertBeforeKey":"insertAfterKey"]=n[o].key}break;default:var d=s===Qd?r?.getBottomVisibleItemIndex():r?.getTopVisibleItemIndex(),h=a.getVisibleRows()[d];h&&(!h.isEditing&&"detail"===h.rowType||"detailAdaptive"===h.rowType)&&d++;var u=a.getKeyByRowIndex(d);(0,v.O9)(u)&&(t.insertBeforeKey=u)}}_getInsertIndex(){var t=0;return this.getChanges().forEach(e=>{var a,n=null===(a=this._getInternalData(e.key))||void 0===a?void 0:a.insertInfo;(0,v.O9)(n)&&e.type===Ue&&n[_t]>t&&(t=n[_t])}),t+1}_getInsertAfterOrBeforeKey(t){var e;return null!==(e=t.insertAfterKey)&&void 0!==e?e:t.insertBeforeKey}_getPageIndexToInsertRow(){var t=this._getNewRowPosition(),e=this._dataController,a=e.pageIndex(),n=e.pageCount()-1;return"first"===t&&0!==a?0:t===Ka&&a!==n?n:-1}addRow(t){var e=this._dataController;return e.store()?this._addRow(t):(e.fireError("E1052",this.component.NAME),(new w.cY).reject())}_addRow(t){var a=this._dataController.store(),n=a&&a.key(),r={data:{}},s=this._getVisibleEditRowIndex(),o=new w.cY;return this.refresh({allowCancelEditing:!0}),this._allowRowAdding()?(n||(r.data.__KEY__=String(new Pe.A)),(0,w.z7)(this._initNewRow(r,t)).done(()=>{this._allowRowAdding()?(0,w.z7)(this._addRowCore(r.data,t,s)).done(o.resolve).fail(o.reject):o.reject("cancel")}).fail(o.reject),o.promise()):((0,w.z7)(this._navigateToNewRow(s)).done(o.resolve).fail(o.reject),o.promise())}_allowRowAdding(t){return!(this._getInsertIndex()>1)}_addRowCore(t,e,a){var n={data:t,type:Ue},r=this._getVisibleEditRowIndex(),s=this._addInsertInfo(n,e),{key:o}=s;return this._setEditRowKey(o,!0),this._addChange(n),this._navigateToNewRow(a,n,r)}_navigateToNewRow(t,e,a){var n=new w.cY,r=this._dataController,s=this.getController("focus");if(a=a??-1,!(e=e??this.getChanges().filter(u=>u.type===Ue)[0]))return n.reject("cancel").promise();var o=this._getPageIndexToInsertRow(),l=this._getLoadedRowIndex(r.items(),e,!0),d=u=>{(0,w.z7)(s?.navigateToRow(u)).done(()=>{l=r.getRowIndexByKey(e.key),n.resolve()})},h=this._getInsertAfterOrBeforeKey(e);return o>=0?r.pageIndex(o).done(()=>{d(e.key)}).fail(n.reject):l<0&&(0,v.O9)(h)?d(h):(r.updateItems({changeType:"update",rowIndices:[t,a,l]}),(l=r.getRowIndexByKey(e.key))<0?d(e.key):n.resolve()),n.done(()=>{var u;null===(u=this._rowsView)||void 0===u||u.waitAsyncTemplates(!0).done(()=>{this._showAddedRow(l),this._afterInsertRow(e.key)})}),n.promise()}_showAddedRow(t){this._focusFirstEditableCellInRow(t)}_beforeFocusElementInRow(t){}_focusFirstEditableCellInRow(t){var e=this._dataController,a=this.getController("keyboardNavigation"),n=e.getKeyByRowIndex(t),r=this.getFirstEditableCellInRow(t);a?.focus(r),this.option("focusedRowKey",n),this._editCellInProgress=!0,this._delayedInputFocus(r,()=>{t=e.getRowIndexByKey(n),this._editCellInProgress=!1,this._beforeFocusElementInRow(t)})}_isEditingStart(t){return this.executeAction("onEditingStart",t),t.cancel}_beforeUpdateItems(){}_getVisibleEditColumnIndex(){var t=this.option(Dt);return(0,v.O9)(t)?this._columnsController.getVisibleColumnIndex(t):-1}_setEditColumnNameByIndex(t,e){var a,n=this._columnsController.getVisibleColumns();this._setEditColumnName(null===(a=n[t])||void 0===a?void 0:a.name,e)}_setEditColumnName(t,e){e?this._silentOption(Dt,t):this.option(Dt,t)}_resetEditColumnName(){this._setEditColumnName(null,!0)}_getEditColumn(){var t=this.option(Dt);return this._getColumnByName(t)}_getColumnByName(t){var a,e=this._columnsController.getVisibleColumns();return(0,v.O9)(t)&&e.some(n=>{if(n.name===t)return a=n,!0}),a}_getVisibleEditRowIndex(t){var e=this._dataController,a=this.option(De),n=e.getRowIndexByKey(a);return-1===n?n:n+this._getEditRowIndexCorrection(t)}_getEditRowIndexCorrection(t){var e=t?this._getColumnByName(t):this._getEditColumn();return"adaptiveHidden"===e?.visibleWidth?1:0}_resetEditRowKey(){this._refocusEditCell=!1,this._setEditRowKey(null,!0)}_resetEditIndices(){this._resetEditColumnName(),this._resetEditRowKey()}editRow(t){var e,a=this._dataController,r=a.items()[t],s={data:r&&r.data,cancel:!1},o=this._getVisibleEditRowIndex();if(r){if(t===o)return!0;if(void 0===r.key)return void this._dataController.fireError("E1043");r.isNewRow||(s.key=r.key),!this._isEditingStart(s)&&(this.resetChanges(),this.init(),this._resetEditColumnName(),this._pageIndex=a.pageIndex(),this._addInternalData({key:r.key,oldData:null!==(e=r.oldData)&&void 0!==e?e:r.data}),this._setEditRowKey(r.key))}}_editRowFromOptionChanged(t,e){var a=[e,t];this._beforeUpdateItems(a,t,e),this._editRowFromOptionChangedCore(a,t)}_editRowFromOptionChangedCore(t,e,a){this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices:t,cancel:a})}_focusEditorIfNeed(){}_showEditPopup(t,e){}_repaintEditPopup(){}_getEditPopupHiddenHandler(){return t=>{this.isEditing()&&this.cancelEditData()}}_getPopupEditFormTemplate(t){}_getSaveButtonConfig(){var t={text:this.option("editing.texts.saveRowChanges"),onClick:this.saveEditData.bind(this)};return(0,de.Ft)((0,de.ss)())&&(t.stylingMode="contained",t.type="default"),t}_getCancelButtonConfig(){var t={text:this.option("editing.texts.cancelRowChanges"),onClick:this.cancelEditData.bind(this)};return(0,de.Ft)((0,de.ss)())&&(t.stylingMode="outlined"),t}_removeInternalData(t){var e=this._getInternalData(t),a=this._internalState.indexOf(e);a>-1&&this._internalState.splice(a,1)}_updateInsertAfterOrBeforeKeys(t,e){var a=t[e];t.forEach(n=>{var r=this._getInsertAfterOrBeforeKey(n);(0,V.RL)(r,a.key)&&(n[(0,v.O9)(n.insertAfterKey)?"insertAfterKey":"insertBeforeKey"]=this._getInsertAfterOrBeforeKey(a))})}_removeChange(t){if(t>=0){var e=[...this.getChanges()],{key:a}=e[t];this._removeInternalData(a),this._updateInsertAfterOrBeforeKeys(e,t),e.splice(t,1),this._silentOption(at,e),(0,V.RL)(this.option(De),a)&&this._resetEditIndices()}}executeOperation(t,e){this._lastOperation&&this._lastOperation.reject(),this._lastOperation=t,this.waitForDeferredOperations().done(()=>{"rejected"!==t.state()&&(e(),this._lastOperation=null)}).fail(()=>{t.reject(),this._lastOperation=null})}waitForDeferredOperations(){return(0,w.z7)(...this._deferreds)}_processCanceledEditingCell(){}_repaintEditCell(t,e,a){this._needFocusEditor=!0,!t||!t.showEditorAlways||e&&!e.showEditorAlways?(this._editCellInProgress=!0,this.getController("editorFactory").loseFocus(),this._dataController.updateItems({changeType:"update",rowIndices:[a,this._getVisibleEditRowIndex()]})):t!==e&&this._dataController.updateItems({changeType:"update",rowIndices:[]})}_delayedInputFocus(t,e,a){var n=()=>{if(e&&e(),t){var r=t.find(xr).first();F.focusAndSelectElement(this,r)}this._beforeFocusCallback=null};ne.A.real().ios||ne.A.real().android?n():(this._beforeFocusCallback&&this._beforeFocusCallback(),clearTimeout(this._inputFocusTimeoutID),a&&(this._beforeFocusCallback=e),this._inputFocusTimeoutID=setTimeout(n))}_focusEditingCell(t,e,a){var n=this.getView("rowsView"),r=this._getVisibleEditColumnIndex();(e=e||n&&n._getCellElement(this._getVisibleEditRowIndex(),r))&&this._delayedInputFocus(e,t,a)}deleteRow(t){this._checkAndDeleteRow(t)}_checkAndDeleteRow(t){var e=this.option("editing"),a=e?.texts,n=e?.confirmDelete,r=a?.confirmDeleteMessage,s=this._dataController.items()[t],o=!this.isEditing()||s.isNewRow;if(s&&o)if(n&&r){var l=a&&a.confirmDeleteTitle,d=(0,v.O9)(l)&&l.length>0;(0,Wx.lJ)(r,l,d).done(h=>{h&&this._deleteRowCore(t)})}else this._deleteRowCore(t)}_deleteRowCore(t){var a=this._dataController.items()[t],n=a&&a.key,r=this._getVisibleEditRowIndex();this.refresh();var s=this.getChanges(),o=F.getIndexByKey(n,s);return o>=0?s[o].type===Ue?this._removeChange(o):this._addChange({key:n,type:tt}):this._addChange({key:n,oldData:a.data,type:tt}),this._afterDeleteRow(t,r)}_afterDeleteRow(t,e){return this.saveEditData()}undeleteRow(t){var e=this._dataController,a=e.items()[t],n=this._getVisibleEditRowIndex(),r=a&&a.key,s=this.getChanges();if(a){var o=F.getIndexByKey(r,s);if(o>=0){var{data:l}=s[o];(0,v.RI)(l)?this._removeChange(o):this._addChange({key:r,type:ki}),e.updateItems({changeType:"update",rowIndices:[n,t]})}}}_fireOnSaving(){var t={cancel:!1,promise:null,changes:[...this.getChanges()]};this.executeAction("onSaving",t);var e=new w.cY;return(0,w.z7)((0,w.Sx)(t.promise)).done(()=>{e.resolve(t)}).fail(a=>{Ni(e),this._fireDataErrorOccurred(a),e.resolve({cancel:!0})}),e}_executeEditingAction(t,e,a){if(this.component._disposed)return null;var n=new w.cY;return this.executeAction(t,e),(0,w.z7)((0,w.Sx)(e.cancel)).done(r=>{r?setTimeout(()=>{n.resolve("cancel")}):a(e).done(n.resolve).fail(Ni(n))}).fail(Ni(n)),n}_processChanges(t,e,a,n){var r=this._dataController.store();(0,I.__)(n,(s,o)=>{var c,g,l=this._getOldData(o.key),{data:d,type:h}=o,u=(0,N.A)({},o);if(!this._beforeSaveEditData(o,s)){switch(h){case tt:c=this._executeEditingAction("onRowRemoving",g={data:l,key:o.key,cancel:!1},()=>r.remove(o.key).done(f=>{a.push({type:"remove",key:f})}));break;case Ue:c=this._executeEditingAction("onRowInserting",g={data:d,cancel:!1},()=>r.insert(g.data).done((f,x)=>{(0,v.O9)(x)&&(u.key=x),f&&(0,v.Gv)(f)&&f!==g.data&&(u.data=f),a.push({type:"insert",data:f,index:0})}));break;case ki:c=this._executeEditingAction("onRowUpdating",g={newData:d,oldData:l,key:o.key,cancel:!1},()=>r.update(o.key,g.newData).done((f,x)=>{f&&(0,v.Gv)(f)&&f!==g.newData&&(u.data=f),a.push({type:"update",key:x,data:f})}))}if(n[s]=u,c){var m=new w.cY;c.always(f=>{e.push({key:o.key,result:f})}).always(m.resolve),t.push(m.promise())}}})}_processRemoveIfError(t,e){var a=t[e];return a?.type===tt&&e>=0&&t.splice(e,1),!0}_processRemove(t,e,a){var n=t[e];if(!a||!n||n.type===tt)return this._processRemoveCore(t,e,!a||!n)}_processRemoveCore(t,e,a){return e>=0&&t.splice(e,1),!0}_processSaveEditDataResult(t){for(var e=!1,a=[...this.getChanges()],n=a.length,r=0;r<t.length;r++){var s=t[r].result,o="cancel"===s,l=F.getIndexByKey(t[r].key,a),d=a[l];if(s&&s instanceof Error){if(d&&this._addInternalData({key:d.key,error:s}),this._fireDataErrorOccurred(s),this._processRemoveIfError(a,l))break}else this._processRemove(a,l,o)&&(e=!o)}return a.length<n&&this._silentOption(at,a),e}_fireSaveEditDataEvents(t){(0,I.__)(t,(e,a)=>{var{data:n,key:r,type:s}=a,o=this._addInternalData({key:r}),l={key:r,data:n};switch(o.error&&(l.error=o.error),s){case tt:this.executeAction("onRowRemoved",(0,y.X)({},l,{data:o.oldData}));break;case Ue:this.executeAction("onRowInserted",l);break;case ki:this.executeAction("onRowUpdated",l)}}),this.executeAction("onSaved",{changes:t})}saveEditData(){var t=new w.cY;return this.waitForDeferredOperations().done(()=>{this.isSaving()?this._resolveAfterSave(t):(0,w.z7)(this._beforeSaveEditData()).done(e=>{e?this._resolveAfterSave(t,{cancel:e}):(this._saving=!0,this._saveEditDataInner().always(()=>{this._saving=!1,this._refocusEditCell&&this._focusEditingCell()}).done(t.resolve).fail(t.reject))}).fail(t.reject)}).fail(t.reject),t.promise()}_resolveAfterSave(t){var{cancel:e,error:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,w.z7)(this._afterSaveEditData(e)).done(()=>{t.resolve(a)}).fail(t.reject)}_saveEditDataInner(){var t=new w.cY,e=[],a=[],n=[],r=this._dataController.dataSource();return(0,w.z7)(this._fireOnSaving()).done(s=>{var{cancel:o,changes:l}=s;return o?t.resolve().promise():(this._processChanges(a,e,n,l),a.length?(this._refocusEditCell=!0,r?.beginLoading(),(0,w.z7)(...a).done(()=>{this._processSaveEditDataResult(e)?this._endSaving(n,l,t):(r?.endLoading(),t.resolve())}).fail(d=>{r?.endLoading(),t.resolve(d)}),t.always(()=>{this._refocusEditCell=!0}).promise()):void this._cancelSaving(t))}).fail(t.reject),t.promise()}_beforeEndSaving(t){this._resetEditIndices()}_endSaving(t,e,a){var n=this._dataController.dataSource();this._beforeEndSaving(e),n?.endLoading(),this._refreshDataAfterSave(t,e,a)}_cancelSaving(t){this.executeAction("onSaved",{changes:[]}),this._resolveAfterSave(t)}_refreshDataAfterSave(t,e,a){var n=this._dataController,r=this.option("editing.refreshMode"),s="reshape"!==r&&"repaint"!==r;s||n.push(t),(0,w.z7)(n.refresh({selection:s,reload:s,load:"reshape"===r,changesOnly:this.option("repaintChangesOnly")})).always(()=>{this._fireSaveEditDataEvents(e)}).done(()=>{this._resolveAfterSave(a)}).fail(o=>{this._resolveAfterSave(a,{error:o})})}isSaving(){return this._saving}_updateEditColumn(){var t=this._isEditColumnVisible(),e=this.option("editing.useIcons"),a=Zd+(e?" ".concat(Jd):"");this._columnsController.addCommandColumn({type:"buttons",command:"edit",visible:t,cssClass:a,width:"auto",alignment:"center",cellTemplate:this._getEditCommandCellTemplate(),fixedPosition:"right"}),this._columnsController.columnOption("command:edit",{visible:t,cssClass:a})}_isEditColumnVisible(){return this.option("editing").allowDeleting}_isEditButtonDisabled(){var t=this.hasChanges();return!((0,v.O9)(this.option("editing.editRowKey"))||t)}_updateEditButtons(){var t=this.getView("headerPanel"),e=this._isEditButtonDisabled();t&&(t.setToolbarItemDisabled("saveButton",e),t.setToolbarItemDisabled("revertButton",e))}_applyModified(t,e){t&&t.addClass(eh)}_beforeCloseEditCellInBatchMode(t){}cancelEditData(){var t=this.getChanges(),e={cancel:!1,changes:t};this.executeAction("onEditCanceling",e),e.cancel||(this._cancelEditDataCore(),this.executeAction("onEditCanceled",{changes:t}))}_cancelEditDataCore(){var t=this._getVisibleEditRowIndex();this._beforeCancelEditData(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey(),this._afterCancelEditData(t)}_afterCancelEditData(t){this._dataController.updateItems({repaintChangesOnly:this.option("repaintChangesOnly")})}_hideEditPopup(){}hasEditData(){return this.hasChanges()}update(t){var e=this._dataController;e&&this._pageIndex!==e.pageIndex()&&("refresh"===t&&this.refresh({isPageChanged:!0}),this._pageIndex=e.pageIndex()),this._updateEditButtons()}_getRowIndicesForCascadeUpdating(t,e){return e?[]:[t.rowIndex]}addDeferred(t){this._deferreds.includes(t)||(this._deferreds.push(t),t.always(()=>{var e=this._deferreds.indexOf(t);e>=0&&this._deferreds.splice(e,1)}))}_prepareChange(t,e,a){var n,r={},s=null===(n=t.row)||void 0===n?void 0:n.data,o=t.key,l=new w.cY;return void 0!==o&&(t.value=e,(0,w.Sx)(t.column.setCellValue(r,e,(0,y.X)(!0,{},s),a)).done(()=>{l.resolve({data:r,key:o,oldData:s,type:ki})}).fail(Ni(l)).fail(h=>this._fireDataErrorOccurred(h)),(0,v.O9)(a)&&t.column.displayValueMap&&(t.column.displayValueMap[e]=a),this._updateRowValues(t),this.addDeferred(l)),l}_updateRowValues(t){if(t.values){var e=this._dataController,a=e.getRowIndexByKey(t.key),n=e.getVisibleRows()[a];n&&(t.row.values=n.values,t.values=n.values),t.values[t.columnIndex]=t.value}}updateFieldValue(t,e,a,n){var r=t.key,s=new w.cY;return void 0===r&&this._dataController.fireError("E1043"),t.column.setCellValue?this._prepareChange(t,e,a).done(o=>{(0,w.z7)(this._applyChange(t,o,n)).always(()=>{s.resolve()})}):s.resolve(),s.promise()}_focusPreviousEditingCellIfNeed(t){if(this.hasEditData()&&!this.isEditCell(t.rowIndex,t.columnIndex))return this._focusEditingCell(),this._updateEditRow(t.row,!0),!0}_needUpdateRow(t){var e=this._columnsController.getVisibleColumns();t||(t=this._getEditColumn());var a=t&&t.setCellValue!==t.defaultSetCellValue,n=e.some(r=>r.calculateCellValue!==r.defaultCalculateCellValue);return a||n}_applyChange(t,e,a){var n=(0,N.A)((0,N.A)({},t),{forceUpdateRow:a});return this._addChange(e,n),this._updateEditButtons(),this._applyChangeCore(t,n.forceUpdateRow)}_applyChangeCore(t,e){var a=t.column.setCellValue!==t.column.defaultSetCellValue,{row:n}=t;n&&(e||a?this._updateEditRow(n,e,a):n.update&&n.update())}_updateEditRowCore(t,e,a){this._dataController.updateItems({changeType:"update",rowIndices:this._getRowIndicesForCascadeUpdating(t,e)})}_updateEditRow(t,e,a){e?this._updateRowImmediately(t,e,a):this._updateRowWithDelay(t,a)}_updateRowImmediately(t,e,a){this._updateEditRowCore(t,!e,a),this._validateEditFormAfterUpdate(t,a),e||this._focusEditingCell()}_updateRowWithDelay(t,e){var a=new w.cY;this.addDeferred(a),setTimeout(()=>{var n,r=(null===(n=this._editForm)||void 0===n?void 0:n.element())||this.component.$element().get(0),s=(0,_.A)(U.A.getActiveElement(r)),o=this._rowsView.getCellIndex(s,t.rowIndex),l=s.get(0),d=F.getSelectionRange(l);if(this._updateEditRowCore(t,!1,e),this._validateEditFormAfterUpdate(t,e),o>=0){var h=this._rowsView._getCellElement(t.rowIndex,o);this._delayedInputFocus(h,()=>{setTimeout(()=>{var u;l=U.A.getActiveElement(null===(u=this.component.$element())||void 0===u?void 0:u.get(0)),d.selectionStart>=0&&F.setSelectionRange(l,d)})})}a.resolve()})}_validateEditFormAfterUpdate(){}_addChange(t,e){var a,n=e?.row,r=[...this.getChanges()],s=F.getIndexByKey(t.key,r);s<0&&(s=r.length,this._addInternalData({key:t.key,oldData:t.oldData}),delete t.oldData,r.push(t));var o=(0,N.A)({},r[s]);return o&&(t.data&&(o.data=(0,Fe.lj)(o.data,t.data)),(!o.type||!t.data)&&t.type&&(o.type=t.type),n&&(n.oldData=this._getOldData(n.key),n.data=(0,Fe.lj)(n.data,t.data))),r[s]=o,this._silentOption(at,r),e&&o!==(null===(a=this.getChanges())||void 0===a?void 0:a[s])&&(e.forceUpdateRow=!0),o}_getFormEditItemTemplate(t,e){return e.editCellTemplate||this._getDefaultEditorTemplate()}getColumnTemplate(t){var n,l,{column:e}=t,a=t.row&&t.row.rowIndex,r=this.isRowBasedEditMode(),s=this.isEditRow(a),o=this.isEditCell(a,t.columnIndex);return!(e.showEditorAlways||e.setCellValue&&(s&&e.allowEditing||o))||"data"!==t.rowType&&"detailAdaptive"!==t.rowType||e.command?"detail"===e.command&&"detail"===t.rowType&&s&&(n=null==this?void 0:this.getEditFormTemplate(t)):(((this.allowUpdating(t)||s)&&e.allowEditing||o)&&(s||!r)&&(e.showEditorAlways&&!r&&this._isEditingStart(l={cancel:!1,key:t.row.isNewRow?void 0:t.row.key,data:t.row.data,column:e}),(!l||!l.cancel)&&(t.setValue=(h,u)=>{this.updateFieldValue(t,h,u)})),n=e.editCellTemplate||this._getDefaultEditorTemplate()),n}_createButton(t,e,a,n){var r=ob[e.name],s=this.option("editing.useIcons"),o=this.option("useLegacyColumnButtonTemplate"),l=(0,_.A)("<a>").attr("href","#").addClass("dx-link").addClass(e.cssClass);if(e.template&&o)this._rowsView.renderTemplate(t,e.template,a,!0);else{if(e.template)l=(0,_.A)("<span>").addClass(e.cssClass);else if(s&&r||e.icon){var d=bt.F(r=e.icon||r);"image"===d||"svg"===d?l=bt.N(r).addClass(e.cssClass):l.addClass("dx-icon".concat("dxIcon"===d?"-":" ").concat(r)).attr("title",e.text),l.addClass("dx-link-icon"),t.addClass(Jd);var h=this.getButtonLocalizationNames()[e.name];h&&l.attr("aria-label",A.A.format(h))}else l.text(e.text);(0,v.O9)(e.hint)&&l.attr("title",e.hint),this._isButtonDisabled(e,a)?l.addClass("dx-state-disabled"):(!e.template||e.onClick)&&O.A.on(l,(0,P.b4)("click","dxDataGridEditing"),this.createAction(u=>{var c;null===(c=e.onClick)||void 0===c||c.call(e,(0,y.X)({},u,{row:a.row,column:a.column})),u.event.preventDefault(),u.event.stopPropagation()})),t.append(l,"&nbsp;"),e.template&&(a.renderAsync=!1,this._rowsView.renderTemplate(l,e.template,a,!0,n))}}getButtonLocalizationNames(){return{edit:"dxDataGrid-editingEditRow",save:"dxDataGrid-editingSaveRowChanges",delete:"dxDataGrid-editingDeleteRow",undelete:"dxDataGrid-editingUndeleteRow",cancel:"dxDataGrid-editingCancelRowChanges"}}prepareButtonItem(t,e,a,n){var r,s=null!==(r=this.option("editing.texts"))&&void 0!==r?r:{},l={revert:"cancel",save:"save",addRow:"addrow"}[e],d={revert:s.cancelAllChanges,save:s.saveAllChanges,addRow:s.addRow}[e],h=("save"===l||"cancel"===l)&&this._isEditButtonDisabled();return{widget:"dxButton",options:{onInitialized:u=>{(0,_.A)(u.element).addClass(t._getToolbarButtonClass("".concat("dx-edit-button"," ").concat(this.addWidgetPrefix(l),"-button")))},icon:"edit-button-".concat(l),disabled:h,onClick:()=>{setTimeout(()=>{this[a]()})},text:d,hint:d},showText:"inMenu",name:"".concat(e,"Button"),location:"after",locateInMenu:"auto",sortIndex:n}}prepareEditButtons(t){var e,n=[];return(null!==(e=this.option("editing"))&&void 0!==e?e:{}).allowAdding&&n.push(this.prepareButtonItem(t,"addRow","addRow",20)),n}highlightDataCell(t,e){this.shouldHighlightCell(e)&&t.addClass(eh)}_afterInsertRow(){}_beforeSaveEditData(t){if(t&&!(0,v.O9)(t.key)&&(0,v.O9)(t.type))return!0}_afterSaveEditData(){}_beforeCancelEditData(){}_allowEditAction(t,e){var a=this.option("editing.".concat(t));return(0,v.Tn)(a)&&(a=a({component:this.component,row:e.row})),a}allowUpdating(t,e){var a,n=null!==(a=this.option("editing.startEditAction"))&&void 0!==a?a:"click";return(!(arguments.length>1)||n===e||"down"===e)&&this._allowEditAction("allowUpdating",t)}allowDeleting(t){return this._allowEditAction("allowDeleting",t)}isCellModified(t){var e,a,n,{columnIndex:r}=t,s=null===(a=null===(e=t?.row)||void 0===e?void 0:e.modifiedValues)||void 0===a?void 0:a[r];return!(null===(n=t?.row)||void 0===n)&&n.isNewRow&&(s=t.value),void 0!==s}isNewRowInEditMode(){var t=this._getVisibleEditRowIndex(),e=this._dataController.items();return t>=0&&e[t].isNewRow}_isRowDeleteAllowed(){}shouldHighlightCell(t){return this.isCellModified(t)&&t.column.setCellValue&&(this.getEditMode()!==it||!t.row.isEditing)}}},extenders:{controllers:{data:{init(){this._editingController=this.getController("editing"),this.callBase()},reload(i,t){return!t&&this._editingController.refresh(),this.callBase.apply(this,arguments)},repaintRows(){if(!this.getController("editing").isSaving())return this.callBase.apply(this,arguments)},_updateEditRow(i){var t,e=this.option(De),n=i[F.getIndexByKey(e,i)];n&&(n.isEditing=!0,null===(t=this._updateEditItem)||void 0===t||t.call(this,n))},_updateItemsCore(i){this.callBase(i),this._updateEditRow(this.items(!0))},_applyChangeUpdate(i){this._updateEditRow(i.items),this.callBase(i)},_applyChangesOnly(i){this._updateEditRow(i.items),this.callBase(i)},_processItems(i,t){return i=this._editingController.processItems(i,t),this.callBase(i,t)},_processDataItem(i,t){return this._editingController.processDataItem(i,t,this.generateDataValues),this.callBase(i,t)},_processItem(i,t){return(i=this.callBase(i,t)).isNewRow&&(t.dataIndex--,delete i.dataIndex),i},_getChangedColumnIndices(i,t,e,a){if(i.isNewRow===t.isNewRow&&i.removed===t.removed)return this.callBase.apply(this,arguments)},_isCellChanged(i,t,e,a,n){var r=this.getController("editing"),s=i.cells&&i.cells[a],o=r&&r.isEditCell(e,a);return(!n||!o)&&(!(!s||!s.column||s.column.showEditorAlways||s.isEditing===o)||this.callBase.apply(this,arguments))},needToRefreshOnDataSourceChange(i){var t=this.getController("editing");return!(Array.isArray(i.value)&&i.value===i.previousValue&&t.isSaving())},_handleDataSourceChange(i){var t=this.callBase(i),e=this.option("editing.changes"),a=i.value;if(Array.isArray(a)&&e.length){var n=a.map(l=>this.keyOf(l)),r=e.filter(l=>"insert"===l.type||n.some(d=>(0,V.RL)(l.key,d)));r.length!==e.length&&this.option("editing.changes",r);var s=this.option("editing.editRowKey");!r.some(l=>"insert"===l.type&&(0,V.RL)(s,l.key))&&n.every(l=>!(0,V.RL)(s,l))&&this.option("editing.editRowKey",null)}return t}}},views:{rowsView:{init(){this.callBase(),this._editingController=this.getController("editing")},getCellIndex(i,t){if(!i.is("td")&&t>=0){var e=this.getCellElements(t),a=-1;return(0,I.__)(e,(n,r)=>{(0,_.A)(r).find(i).length&&(a=n)}),a}return this.callBase.apply(this,arguments)},publicMethods(){return this.callBase().concat(["cellValue"])},_getCellTemplate(i){return this._editingController.getColumnTemplate(i)||this.callBase(i)},_createRow(i){var t=this.callBase.apply(this,arguments);if(i){var e=!!i.removed,a=!!i.isNewRow,n=!!i.modified;a&&t.addClass("dx-row-inserted"),n&&t.addClass("dx-row-modified"),(a||e)&&t.removeClass("dx-selection")}return t},_getColumnIndexByElement(i){for(var t=i.closest("table"),e=this.getTableElements();t.length&&!e.filter(t).length;)i=t.closest("td"),t=i.closest("table");return this._getColumnIndexByElementCore(i)},_getColumnIndexByElementCore(i){var t=i.closest(".".concat(pt,"> td:not(.dx-master-detail-cell)"));return this.getCellIndex(t)},_editCellByClick(i,t){var e=this._editingController,a=(0,_.A)(i.event.target),n=this._getColumnIndexByElement(a),r=this._dataController.items()[i.rowIndex],s=e.allowUpdating({row:r},t)||r&&r.isNewRow,o=this._columnsController.getVisibleColumns()[n],l=e.isEditCell(i.rowIndex,n),d=s&&o&&(o.allowEditing||l),h=this.option("editing.startEditAction")||"click",u=o&&o.showEditorAlways;if(l)return!0;if("down"===t)return(ne.A.real().ios||ne.A.real().android)&&(0,ht.GX)(),u&&d&&e.editCell(i.rowIndex,n);if("click"===t&&"dblClick"===h){var c=r?.isNewRow;e.closeEditCell(!1,c)}return d&&t===h?e.editCell(i.rowIndex,n)||e.isEditRow(i.rowIndex):void 0},_rowPointerDown(i){this._pointerDownTimeout=setTimeout(()=>{this._editCellByClick(i,"down")})},_rowClick(i){var t=(0,_.A)(i.rowElement).hasClass(this.addWidgetPrefix(Ha));i.event[Xd]=this.component,!this._editCellByClick(i,"click")&&!t&&this.callBase.apply(this,arguments)},_rowDblClick(i){this._editCellByClick(i,"dblClick")||this.callBase.apply(this,arguments)},_cellPrepared(i,t){var e,a=this._editingController,n=!!t.column.command,r=t.setValue,s=a.isEditRow(t.rowIndex),o=ah(s,t);if(nh(s,t)){var{alignment:l}=t.column;i.toggleClass(this.addWidgetPrefix("readonly"),!r).toggleClass("dx-cell-focus-disabled",!r),l&&i.find(fr).first().css("textAlign",l)}o&&this._editCellPrepared(i);var d=!(null===(e=t.column)||void 0===e||!e.cellTemplate);t.column&&!n&&(!d||a.shouldHighlightCell(t))&&a.highlightDataCell(i,t),this.callBase.apply(this,arguments)},_editCellPrepared:V.lQ,_formItemPrepared:V.lQ,_getCellOptions(i){var t=this.callBase(i),{columnIndex:e,row:a}=i;return t.isEditing=this._editingController.isEditCell(t.rowIndex,t.columnIndex),t.removed=a.removed,a.modified&&(t.modified=void 0!==a.modifiedValues[e]),t},_setCellAriaAttributes(i,t){this.callBase(i,t),t.removed&&this.setAria("roledescription",A.A.format("dxDataGrid-ariaDeletedCell"),i),t.modified&&this.setAria("roledescription",A.A.format("dxDataGrid-ariaModifiedCell"),i),t.column.allowEditing&&!t.removed&&!t.modified&&"data"===t.rowType&&t.column.calculateCellValue===t.column.defaultCalculateCellValue&&this._editingController.isCellBasedEditMode()&&this.setAria("roledescription",A.A.format("dxDataGrid-ariaEditableCell"),i)},_createCell(i){var t=this.callBase(i),e=this._editingController.isEditRow(i.rowIndex);return nh(e,i)&&t.addClass(Na),t},cellValue(i,t,e,a){var n=this.getCellOptions(i,t);if(n){if(void 0===e)return n.value;this._editingController.updateFieldValue(n,e,a,!0)}},dispose(){this.callBase.apply(this,arguments),clearTimeout(this._pointerDownTimeout)},_renderCore(){return this.callBase.apply(this,arguments),this.waitAsyncTemplates(!0).done(()=>{this._editingController._focusEditorIfNeed()})}},headerPanel:{_getToolbarItems(){var i=this.callBase();return this.getController("editing").prepareEditButtons(this).concat(i)},optionChanged(i){var{fullName:t}=i;switch(i.name){case"editing":t&&![za,at,Dt,De].some(n=>n===t)&&this._invalidate(),this.callBase(i);break;case"useLegacyColumnButtonTemplate":i.handled=!0;break;default:this.callBase(i)}},isVisible(){var i=this.getController("editing").option("editing");return this.callBase()||i?.allowAdding}}}}},oh="dx-treelist-icon-container",Db=vt.controllers.editing.inherit({_generateNewItem(i){var t=this.callBase(i);return t.data={key:i},t.children=[],t.level=0,t.parentKey=this.option("rootValue"),t},_isProcessedItem:()=>!0,_setInsertAfterOrBeforeKey(i,t){void 0!==t&&t!==this.option("rootValue")?i.insertAfterKey=t:this.callBase.apply(this,arguments)},_getLoadedRowIndex(i,t){var a=this.getController("data").dataSource(),n=a?.parentKeyOf(t.data);if(void 0!==n&&n!==this.option("rootValue")){var r=F.getIndexByKey(n,i);return r>=0&&this._dataController.isRowExpanded(n)?r+1:-1}return this.callBase.apply(this,arguments)},_isEditColumnVisible(){var i=this.callBase.apply(this,arguments),t=this.option("editing");return i||t.allowAdding},_isDefaultButtonVisible(i,t){var e=this.callBase.apply(this,arguments),{row:a}=t;return"add"===i.name?this.allowAdding(t)&&a.rowIndex!==this._getVisibleEditRowIndex()&&!(a.removed||a.isNewRow):e},_getEditingButtons(i){var t=this.callBase.apply(this,arguments);return i.column.buttons||t.unshift(this._getButtonConfig("add",i)),t},_beforeSaveEditData(i){var t=this._dataController,e=this.callBase.apply(this,arguments);if(i&&"insert"!==i.type){var a=t?.store(),n=a?.key();if(!(0,v.O9)(n))throw J.A.Error("E1045")}return e},addRowByRowIndex(i){var e=this.getController("data").getVisibleRows()[i];return this.addRow(e?e.key:void 0)},addRow(i){return void 0===i&&(i=this.option("rootValue")),this.callBase.call(this,i)},_addRowCore(i,t,e){var{callBase:a}=this,n=this.option("rootValue"),r=this.getController("data"),o=r.dataSource().createParentIdGetter();if(void 0!==(t=o(i))&&t!==n&&!r.isRowExpanded(t)){var l=new w.cY;return r.expandRow(t).done(()=>{setTimeout(()=>{a.call(this,i,t,e).done(l.resolve).fail(l.reject)})}).fail(l.reject),l.promise()}return a.call(this,i,t,e)},_initNewRow(i,t){return this.getController("data").dataSource().createParentIdSetter()(i.data,t),this.callBase.apply(this,arguments)},allowAdding(i){return this._allowEditAction("allowAdding",i)},_needToCloseEditableCell(i){return this.callBase.apply(this,arguments)||i.closest(".".concat(oh)).length&&this.isEditing()},getButtonLocalizationNames(){var i=this.callBase.apply(this);return i.add="dxTreeList-editingAddRowToNode",i}}),Bb=vt.extenders.views.rowsView._rowClick,Fb=vt.extenders.views.rowsView._rowDblClick,lh=function(i){var t=(0,_.A)(i.event.target),e="dxdblclick"===i.event.type?Fb:Bb;return!t.closest(".".concat("dx-select-checkbox")).length&&!Mb.call(this,i,e)};function Mb(i,t){return!(0,_.A)(i.event.target).closest(".".concat(oh)).length&&(t.call(this,i),!0)}var Vb=(0,y.X)({},vt.extenders.views.rowsView,{_renderCellCommandContent(i,t){var a=t.row&&this._editingController.isEditRow(t.row.rowIndex);return!(t.isEditing||a)&&this.callBase.apply(this,arguments)},_rowClick(i){lh.call(this,i)&&this.callBase.apply(this,arguments)},_rowDblClick(i){lh.call(this,i)&&this.callBase.apply(this,arguments)}});G.registerModule("editing",{defaultOptions:()=>(0,y.X)(!0,vt.defaultOptions(),{editing:{texts:{addRowToNode:A.A.format("dxTreeList-editingAddRowToNode")}}}),controllers:{editing:Db},extenders:{controllers:(0,y.X)(!0,{},vt.extenders.controllers,{data:{changeRowExpand(){return this._editingController.refresh(),this.callBase.apply(this,arguments)}}}),views:{rowsView:Vb,headerPanel:vt.extenders.views.headerPanel}}});var dh={extenders:{controllers:{editing:i=>class extends i{isRowEditMode(){return this.getEditMode()===it}_afterCancelEditData(t){var e=this._dataController;this.isRowBasedEditMode()&&t>=0?e.updateItems({changeType:"update",rowIndices:[t,t+1]}):super._afterCancelEditData(t)}_isDefaultButtonVisible(t,e){var a=this.isRowBasedEditMode(),n=e.row&&(0,V.RL)(e.row.key,this.option(De));if(a)switch(t.name){case"edit":return!n&&this.allowUpdating(e);case"delete":return super._isDefaultButtonVisible(t,e)&&!n;case"save":case"cancel":return n;default:return super._isDefaultButtonVisible(t,e)}return super._isDefaultButtonVisible(t,e)}isEditRow(t){return this.isRowBasedEditMode()&&this.isEditRowByIndex(t)}_cancelSaving(t){this.isRowBasedEditMode()&&(this.hasChanges()||this._cancelEditDataCore()),super._cancelSaving(t)}_refreshCore(t){var{allowCancelEditing:e}=t??{};if(this.isRowBasedEditMode()){var a=this.getChanges().filter(n=>"update"===n.type).length>0;this.init(),e&&a&&this._cancelEditDataCore()}super._refreshCore(t)}_isEditColumnVisible(){var t=super._isEditColumnVisible(),e=this.option("editing"),a=this.isRowEditMode();return t||a&&(e.allowUpdating||e.allowAdding)}_focusEditorIfNeed(){var t=this.getEditMode();if(this._needFocusEditor){if(jx.includes(t)){var e=this.getFocusedCellInRow(this._getVisibleEditRowIndex());this._delayedInputFocus(e,()=>{e&&this.component.focus(e)})}this._needFocusEditor=!1}}},data:{_getChangedColumnIndices(i,t,e,a){if(!this.getController("editing").isRowBasedEditMode()||i.isEditing===t.isEditing)return this.callBase.apply(this,arguments)}}},views:{rowsView:{_createRow(i){var t=this.callBase.apply(this,arguments);return i&&this._editingController.isEditRow(i.rowIndex)&&(t.addClass(ih),t.removeClass($d),"detail"===i.rowType&&t.addClass(this.addWidgetPrefix(Ha))),t},_update(i){this.callBase(i),"updateSelection"===i.changeType&&this.getTableElements().children("tbody").children(".".concat(ih)).removeClass($d)}}}}};G.registerModule("editingRowBased",dh);var hh=D(9737),uh={extenders:{controllers:{editing:i=>class extends i{init(){this._editForm=null,this._updateEditFormDeferred=null,super.init()}isFormOrPopupEditMode(){return this.isPopupEditMode()||this.isFormEditMode()}isPopupEditMode(){return this.option("editing.mode")===br}isFormEditMode(){return this.option("editing.mode")===oi}getFirstEditableColumnIndex(){var t=this._firstFormItem;if(this.isFormEditMode()&&t){var e=this.option(De),a=this._dataController.getRowIndexByKey(e),n=this._rowsView.getCellElements(a);return this._rowsView._getEditFormEditorVisibleIndex(n,t.column)}return super.getFirstEditableColumnIndex()}getEditFormRowIndex(){return this.isFormOrPopupEditMode()?this._getVisibleEditRowIndex():super.getEditFormRowIndex()}_isEditColumnVisible(){var t=super._isEditColumnVisible(),e=this.option("editing");return this.isFormOrPopupEditMode()&&e.allowUpdating||t}_handleDataChanged(t){var e,a;if(this.isPopupEditMode()){var n=this.option("editing.editRowKey"),r=null===(e=t?.items)||void 0===e?void 0:e.some(o=>(0,V.RL)(o.key,n)),s=(null===(a=t.changeTypes)||void 0===a?void 0:a.length)&&t.changeTypes.every(o=>"insert"===o);("refresh"===t.changeType||r&&t.isOptionChanged)&&!s&&this._repaintEditPopup()}super._handleDataChanged(t)}getPopupContent(){var t,e=null===(t=this._editPopup)||void 0===t?void 0:t.option("visible");if(this.isPopupEditMode()&&e)return this._$popupContent}_showAddedRow(t){this.isPopupEditMode()?this._showEditPopup(t):super._showAddedRow(t)}_cancelEditDataCore(){super._cancelEditDataCore(),this.isPopupEditMode()&&this._hideEditPopup()}_updateEditRowCore(t,e,a){var n,r=this._editForm;this.isPopupEditMode()?this.option("repaintChangesOnly")?(null===(n=t.update)||void 0===n||n.call(t,t),this._rowsView.renderDelayedTemplates()):r&&(this._updateEditFormDeferred=(new w.cY).done(()=>r.repaint()),this._updateLockCount||this._updateEditFormDeferred.resolve()):super._updateEditRowCore(t,e,a)}_showEditPopup(t,e){var a="desktop"!==ne.A.current().deviceType,n=this.addWidgetPrefix("edit-popup"),r=(0,y.X)({showTitle:!1,fullScreen:a,wrapperAttr:{class:n},toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getSaveButtonConfig()},{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getCancelButtonConfig()}],contentTemplate:this._getPopupEditFormTemplate(t)},this.option(za));if(!this._editPopup){var s=(0,_.A)("<div>").appendTo(this.component.$element()).addClass(n);this._editPopup=this._createComponent(s,ze.A),this._editPopup.on("hiding",this._getEditPopupHiddenHandler()),this._editPopup.on("shown",o=>{var l;O.A.trigger(o.component.$content().find(xr).not(".".concat(fb)).first(),"focus"),e&&(null===(l=this._editForm)||void 0===l||l.repaint())})}this._editPopup.option(r),this._editPopup.show(),super._showEditPopup(t,e)}_getPopupEditFormTemplate(t){var e=this.component.getVisibleRows()[t],a={row:e,values:e.values,rowType:e.rowType,key:e.key,rowIndex:t};return this._rowsView._addWatchMethod(a,e),n=>{var r=this.getEditFormTemplate(),s=this._createComponent((0,_.A)("<div>").appendTo(n),wt.A);this._$popupContent=(0,_.A)(s.content()),r(this._$popupContent,a,{isPopupForm:!0}),this._rowsView.renderDelayedTemplates(),(0,_.A)(n).parent().attr("aria-label",this.localize("dxDataGrid-ariaEditForm"))}}_repaintEditPopup(){var t,e,a=this._getVisibleEditRowIndex();if(a>=0){var n=null===(t=this._editPopup)||void 0===t?void 0:t.option("animation");null===(e=this._editPopup)||void 0===e||e.option("animation",null),this._showEditPopup(a,!0),void 0!==n&&this._editPopup.option("animation",n)}}_hideEditPopup(){var t;null===(t=this._editPopup)||void 0===t||t.option("visible",!1)}optionChanged(t){if("editing"===t.name&&this.isFormOrPopupEditMode()){var{fullName:e}=t;0===e.indexOf(Cr)?(this._handleFormOptionChange(t),t.handled=!0):0===e.indexOf(za)&&(this._handlePopupOptionChange(t),t.handled=!0)}super.optionChanged(t)}_handleFormOptionChange(t){var e;if(this.isFormEditMode()){var a=this._getVisibleEditRowIndex();a>=0&&this._dataController.updateItems({changeType:"update",rowIndices:[a]})}else null!==(e=this._editPopup)&&void 0!==e&&e.option("visible")&&0===t.fullName.indexOf(Cr)&&this._repaintEditPopup()}_handlePopupOptionChange(t){var e=this._editPopup;if(e){var a=t.fullName.slice(14);a?e.option(a,t.value):e.option(t.value)}}renderFormEditorTemplate(t,e,a,n,r){var s=this,o=(0,_.A)(n),{column:l}=e,d=(i=>{var t,{column:e}=i;return i.isCustomEditorType?i.editorType:null===(t=e.formItem)||void 0===t?void 0:t.editorType})(e),h=t?.row.data,u=a.component,{label:c,labelMark:g,labelMode:m}=a.editorOptions||{},f=(0,y.X)({},t,{data:h,cellElement:null,isOnForm:!0,item:e,id:u.getItemID(e.name||e.dataField),column:(0,y.X)({},l,{editorType:d,editorOptions:(0,y.X)({label:c,labelMark:g,labelMode:m},l.editorOptions,e.editorOptions)}),columnIndex:l.index,setValue:!r&&l.allowEditing&&function(b,S){s.updateFieldValue(f,b,S)}});f.value=l.calculateCellValue(h);var x=this._getFormEditItemTemplate.bind(this)(f,l);return this._rowsView.renderTemplate(o,x,f,!!(0,ht.A1)(o)).done(()=>{this._rowsView._updateCell(o,f)}),f}getFormEditorTemplate(t,e){var a=this.component.columnOption(e.name||e.dataField);return(n,r)=>{var s=(0,_.A)(r),{row:o}=t;if(o?.watch){var l=o.watch(()=>a.selector(o.data),()=>{var d=s.find(".dx-widget").first(),h=d.data("dxValidator"),u=h?.option();s.contents().remove(),t=this.renderFormEditorTemplate.bind(this)(t,e,n,s),h=(d=s.find(".dx-widget").first()).data("dxValidator"),u&&!h&&d.dxValidator({validationRules:u.validationRules,validationGroup:u.validationGroup,dataGetter:u.dataGetter})});O.A.on(s,Ot.N,l)}t=this.renderFormEditorTemplate.bind(this)(t,e,n,s)}}getEditFormOptions(t){var e,a=null===(e=this._getValidationGroupsInForm)||void 0===e?void 0:e.call(this,t),n=this.option("editing.form.customizeItem"),r=this.addWidgetPrefix(th),s=this.option("editing.form.items"),o={};if(s)sh(s,d=>{var h=d?.name||d?.dataField;h&&(o[h]=!!d.editorType)});else{var l=this.getController("columns").getColumns();s=[],(0,I.__)(l,(d,h)=>{!h.isBand&&!h.type&&s.push({column:h,name:h.name,dataField:h.dataField})})}return(0,y.X)({},a,{items:s,formID:"dx-".concat(new Pe.A),customizeItem:d=>{var h,u=d.name||d.dataField;if((d.column||u)&&(h=d.column||this._columnsController.columnOption(d.name?"name:".concat(d.name):"dataField:".concat(d.dataField))),h){if(d.label=d.label||{},d.label.text=d.label.text||h.caption,"boolean"===h.dataType&&void 0===d.label.visible){var c=this.option("editing.form.labelMode");("floating"===c||"static"===c)&&(d.label.visible=!0)}d.template=d.template||this.getFormEditorTemplate(t,d),d.column=h,d.isCustomEditorType=o[u],h.formItem&&(0,y.X)(d,h.formItem),void 0===d.isRequired&&h.validationRules&&(d.isRequired=h.validationRules.some(m=>"required"===m.type),d.validationRules=[]);var g=!(0,v.O9)(d.visible)||d.visible;!this._firstFormItem&&g&&(this._firstFormItem=d)}n?.call(this,d),d.cssClass=(0,v.Kg)(d.cssClass)?"".concat(d.cssClass," ").concat(r):r}})}getEditFormTemplate(){return(t,e,a)=>{var n=this.option(Cr),r=this.getEditFormOptions(e),s=(0,_.A)("<div>").appendTo(t),o=a?.isPopupForm;if(this._firstFormItem=void 0,o&&s.addClass(this.addWidgetPrefix("edit-popup-form")),this._editForm=this._createComponent(s,hh.A,(0,y.X)({},n,r)),!o){var l=(0,_.A)("<div>").addClass(this.addWidgetPrefix("form-buttons-container")).appendTo(t);this._createComponent((0,_.A)("<div>").appendTo(l),_e.A,this._getSaveButtonConfig()),this._createComponent((0,_.A)("<div>").appendTo(l),_e.A,this._getCancelButtonConfig())}this._editForm.on("contentReady",()=>{var d;this._rowsView.renderDelayedTemplates(),null===(d=this._editPopup)||void 0===d||d.repaint()})}}getEditForm(){return this._editForm}_endUpdateCore(){var t;null===(t=this._updateEditFormDeferred)||void 0===t||t.resolve()}_beforeEndSaving(t){var e;super._beforeEndSaving(t),this.isPopupEditMode()&&(null===(e=this._editPopup)||void 0===e||e.hide())}_processDataItemCore(t,e,a,n,r){var{type:s}=e;this.isPopupEditMode()&&s===Ue&&(t.visible=!1),super._processDataItemCore(t,e,a,n,r)}_editRowFromOptionChangedCore(t,e){var a=this.isPopupEditMode();super._editRowFromOptionChangedCore(t,e,a),a&&this._showEditPopup(e)}},data:{_updateEditItem(i){this._editingController.isFormEditMode()&&(i.rowType="detail")},_getChangedColumnIndices(i,t,e,a){if(!1!==a||!t.isEditing||!this._editingController.isFormEditMode())return this.callBase.apply(this,arguments)}}},views:{rowsView:{_renderCellContent(i,t){"data"===t.rowType&&this._editingController.isPopupEditMode()&&!1===t.row.visible||this.callBase.apply(this,arguments)},getCellElements(i){var t=this.callBase(i),e=this._editingController,a=e.getEditForm();return e.getEditFormRowIndex()===i&&t&&a?a.$element().find(".".concat(this.addWidgetPrefix(th),", .").concat("dx-button")):t},_getVisibleColumnIndex(i,t,e){if(this._editingController.getEditFormRowIndex()===t&&(0,v.Kg)(e)){var n=this._columnsController.columnOption(e);return this._getEditFormEditorVisibleIndex(i,n)}return this.callBase.apply(this,arguments)},_getEditFormEditorVisibleIndex(i,t){var e=-1;return(0,I.__)(i,(a,n)=>{var r=(0,_.A)(n).find(".dx-field-item-content").data("dx-form-item");if(r?.column&&t&&r.column.index===t.index)return e=a,!1}),e},_isFormItem(i){var t="detail"===i.rowType||"detailAdaptive"===i.rowType,e="data"===i.rowType&&this._editingController.isPopupEditMode();return(t||e)&&i.item},_updateCell(i,t){this._isFormItem(t)?this._formItemPrepared(t,i):this.callBase(i,t)}}}}};G.registerModule("editingFormBased",uh);var ch={extenders:{controllers:{editing:i=>class extends i{init(){var e,a,t=!this._saveEditorHandler;super.init(),t&&(this._pointerUpEditorHandler=()=>{var n;a=null===(n=this.getController("columnsResizer"))||void 0===n?void 0:n.isResizing()},this._pointerDownEditorHandler=n=>e=(0,_.A)(n.target),this._saveEditorHandler=this.createAction(function(n){var{event:r}=n,s=(0,_.A)(r.target),o=r[Xd],{component:l}=this;if((!function Ob(i){return i&&(i.is("input")||i.is("textarea"))}(e)||e.is(s))&&this.isCellOrBatchEditMode()&&!this._editCellInProgress){var h=d(s)||d(o?.$element()),u=o&&!o._disposed&&o!==this.component,c=!!s.closest(".".concat(this.addWidgetPrefix("addrow-button"))).length,g=s.hasClass(this.addWidgetPrefix("focus-overlay")),m=this.isCellEditMode();!a&&!h&&!g&&!(c&&m&&this.isEditing())&&((0,ht.A1)(s)||u)&&this._closeEditItem.bind(this)(s)}function d(f){if(!f)return!1;var x=f.closest(".".concat("dx-dropdowneditor-overlay")),b=l.$element();return x.length>0&&0===b.closest(x).length}}),O.A.on(U.A.getDocument(),te.A.up,this._pointerUpEditorHandler),O.A.on(U.A.getDocument(),te.A.down,this._pointerDownEditorHandler),O.A.on(U.A.getDocument(),ae.U,this._saveEditorHandler))}isCellEditMode(){return this.option("editing.mode")===si}isBatchEditMode(){return this.option("editing.mode")===Bt}isCellOrBatchEditMode(){return this.isCellEditMode()||this.isBatchEditMode()}_needToCloseEditableCell(t){var e,a=this.component.$element(),n=this.isEditing();if((!a||t.closest(a).length)&&t.closest(".".concat("dx-data-row")).length){var o=this.getView("rowsView"),l=t.closest(".".concat(pt,"> td")),d=o.getRowIndex(l.parent()),h=o.getCellElements(d);if(h?.length){var u=h.index(l),g=null===(e=this._columnsController.getVisibleColumns()[u])||void 0===e?void 0:e.allowEditing,m=this.isEditCell(d,u);n=n&&!g&&!m}}return n||super._needToCloseEditableCell(t)}_closeEditItem(t){this._needToCloseEditableCell(t)&&this.closeEditCell()}_focusEditorIfNeed(){var t;if(this._needFocusEditor&&this.isCellOrBatchEditMode()){var e=this._getVisibleEditColumnIndex(),a=null===(t=this._rowsView)||void 0===t?void 0:t._getCellElement(this._getVisibleEditRowIndex(),e);a&&!a.find(":focus").length?this._focusEditingCell(()=>{this._editCellInProgress=!1},a,!0):this._editCellInProgress=!1,this._needFocusEditor=!1}else super._focusEditorIfNeed()}isEditing(){if(this.isCellOrBatchEditMode()){var t=(0,v.O9)(this.option(De)),e=(0,v.O9)(this.option(Dt));return t&&e}return super.isEditing()}_handleEditColumnNameChange(t){var e=this._getVisibleEditRowIndex(t.previousValue);if(this.isCellOrBatchEditMode()&&-1!==e&&(0,v.O9)(t.value)&&t.value!==t.previousValue){var a=this._columnsController.getVisibleColumnIndex(t.value),n=this._columnsController.getVisibleColumnIndex(t.previousValue);this._editCellFromOptionChanged(a,n,e)}}_addRow(t){if(this.isCellEditMode()&&this.hasChanges()){var e=new w.cY;return this.saveEditData().done(()=>{this.hasChanges()?e.reject("cancel"):this.addRow(t).done(e.resolve).fail(e.reject)}),e.promise()}return super._addRow(t)}editCell(t,e){return this._editCell({rowIndex:t,columnIndex:e})}_editCell(t){var a,e=new w.cY;return this.executeOperation(e,()=>{a=this._editCellCore(t),(0,w.z7)(a).done(e.resolve).fail(e.reject)}),void 0!==a?a:e.promise()}_editCellCore(t){var e=this._dataController,a=(0,v.O9)(t.oldColumnIndex)||(0,v.O9)(t.oldRowIndex),{columnIndex:n,rowIndex:r,column:s,item:o}=this._getNormalizedEditCellOptions(t),l={data:o?.data,cancel:!1,column:s};if(void 0!==o.key){if(s&&("data"===o.rowType||"detailAdaptive"===o.rowType)&&!o.removed&&this.isCellOrBatchEditMode()){if(!a&&this.isEditCell(r,n))return!0;var d=r+e.getRowIndexOffset();return(0,w.z7)(this._beforeEditCell(r,n,o)).done(h=>{h||this._prepareEditCell(l,o,n,d)||this._processCanceledEditingCell()})}return!1}this._dataController.fireError("E1043")}_beforeEditCell(t,e,a){if(this.isCellEditMode()&&!a.isNewRow&&this.hasChanges()){var n=new w.cY;return this.saveEditData().always(()=>{n.resolve(this.hasChanges())}),this.addDeferred(n),n}return!1}publicMethods(){return super.publicMethods().concat(["editCell","closeEditCell"])}_getNormalizedEditCellOptions(t){var h,{oldColumnIndex:e,oldRowIndex:a,columnIndex:n,rowIndex:r}=t,s=this._columnsController,o=s.getVisibleColumns(),d=this._dataController.items()[r];return h=(0,v.O9)(e)?o[e]:this._getEditColumn(),(0,v.O9)(a)||(a=this._getVisibleEditRowIndex()),(0,v.Kg)(n)&&(n=s.columnOption(n,"index"),n=s.getVisibleIndex(n)),{oldColumn:h,columnIndex:n,oldRowIndex:a,rowIndex:r,column:o[n],item:d}}_prepareEditCell(t,e,a,n){var r;return e.isNewRow||(t.key=e.key),!this._isEditingStart(t)&&(this._pageIndex=this._dataController.pageIndex(),this._setEditRowKey(e.key),this._setEditColumnNameByIndex(a),t.column.showEditorAlways||this._addInternalData({key:e.key,oldData:null!==(r=e.oldData)&&void 0!==r?r:e.data}),!0)}closeEditCell(t,e){var a=(0,w.z7)(),n=this._getVisibleEditRowIndex();if(this.isCellOrBatchEditMode()){var r=new w.cY;a=new w.cY,this.executeOperation(r,()=>{this._closeEditCellCore(t,n,e).always(a.resolve)})}return a.promise()}_closeEditCellCore(t,e,a){var n=this._dataController,r=new w.cY,s=r.promise();if(this.isCellEditMode()&&this.hasChanges()){if(!a)return this.saveEditData().done(l=>{this.hasChanges()?r.resolve():this.closeEditCell(!!l).always(r.resolve)}),s}else if(this._resetEditRowKey(),this._resetEditColumnName(),e>=0){var o=[e];this._beforeCloseEditCellInBatchMode(o),t||n.updateItems({changeType:"update",rowIndices:o})}return r.resolve(),s}_resetModifiedClassCells(t){if(this.isBatchEditMode()){var e=this._columnsController.getVisibleColumns().length;t.forEach(a=>{for(var{key:n}=a,r=this._dataController.getRowIndexByKey(n),s=0;s<e;s++){var o=this._rowsView._getCellElement(r,s);o?.removeClass("dx-cell-modified")}})}}_prepareChange(t,e,a){var n=(0,_.A)(t.cellElement);return this.isBatchEditMode()&&void 0!==t.key&&this._applyModified(n,t),super._prepareChange(t,e,a)}_cancelSaving(t){var e=this._dataController;this.isCellOrBatchEditMode()&&(this.isBatchEditMode()&&this._resetEditIndices(),e.updateItems()),super._cancelSaving(t)}optionChanged(t){var{fullName:e}=t;"editing"===t.name&&e===Dt?(this._handleEditColumnNameChange(t),t.handled=!0):super.optionChanged(t)}_editCellFromOptionChanged(t,e,a){var n=this._columnsController.getVisibleColumns();t>-1&&(0,V.zE)(()=>{this._repaintEditCell(n[t],n[e],a)})}_handleEditRowKeyChange(t){var e;if(this.isCellOrBatchEditMode()){var a=this._getVisibleEditColumnIndex(),n=this._getEditRowIndexCorrection(),r=this._dataController.getRowIndexByKey(t.previousValue)+n;(0,v.O9)(t.value)&&t.value!==t.previousValue&&(null===(e=this._editCellFromOptionChanged)||void 0===e||e.call(this,a,a,r))}else super._handleEditRowKeyChange(t)}deleteRow(t){if(this.isCellEditMode()&&this.isEditing()){var{isNewRow:e}=this._dataController.items()[t],a=this._dataController.getKeyByRowIndex(t);this.closeEditCell(null,e).always(()=>{t=this._dataController.getRowIndexByKey(a),this._checkAndDeleteRow(t)})}else super.deleteRow(t)}_checkAndDeleteRow(t){this.isBatchEditMode()?this._deleteRowCore(t):super._checkAndDeleteRow(t)}_refreshCore(t){var{isPageChanged:e}=t??{},a=this.isBatchEditMode()||e&&"virtual"!==this.option("scrolling.mode");this.isCellOrBatchEditMode()?a&&(this._resetEditColumnName(),this._resetEditRowKey()):super._refreshCore(t)}_allowRowAdding(t){return!!this.isBatchEditMode()||super._allowRowAdding(t)}_afterDeleteRow(t,e){var a=this._dataController;return this.isBatchEditMode()?(a.updateItems({changeType:"update",rowIndices:[e,t]}),(new w.cY).resolve()):super._afterDeleteRow(t,e)}_updateEditRow(t,e,a){this.isCellOrBatchEditMode()?this._updateRowImmediately(t,e,a):super._updateEditRow(t,e,a)}_isDefaultButtonVisible(t,e){if(this.isCellOrBatchEditMode()){var a=this.isBatchEditMode();switch(t.name){case"save":case"cancel":case"edit":return!1;case"delete":return super._isDefaultButtonVisible(t,e)&&(!a||!e.row.removed);case"undelete":return a&&this.allowDeleting(e)&&e.row.removed;default:return super._isDefaultButtonVisible(t,e)}}return super._isDefaultButtonVisible(t,e)}_isRowDeleteAllowed(){return super._isRowDeleteAllowed()||this.isBatchEditMode()}_beforeEndSaving(t){var e;this.isCellEditMode()?"update"!==(null===(e=t[0])||void 0===e?void 0:e.type)&&super._beforeEndSaving(t):(this.isBatchEditMode()&&this._resetModifiedClassCells(t),super._beforeEndSaving(t))}prepareEditButtons(t){var e,a=null!==(e=this.option("editing"))&&void 0!==e?e:{},n=super.prepareEditButtons(t);return(a.allowUpdating||a.allowAdding||a.allowDeleting)&&this.isBatchEditMode()&&(n.push(this.prepareButtonItem(t,"save","saveEditData",21)),n.push(this.prepareButtonItem(t,"revert","cancelEditData",22))),n}_saveEditDataInner(){var r,t=this._dataController.getVisibleRows()[this.getEditRowIndex()],e=this._getEditColumn(),a=e?.showEditorAlways;return this.isCellEditMode()&&!t?.isNewRow&&a&&(r=new w.cY,this.addDeferred(r)),super._saveEditDataInner().always(r?.resolve)}_applyChange(t,e,a){var n=this.isCellEditMode()&&t.row&&!t.row.isNewRow,{showEditorAlways:r}=t.column,s=t.column.setCellValue!==t.column.defaultSetCellValue;return r&&!a&&n&&this.hasEditData()&&!this.isEditCell(t.rowIndex,t.columnIndex)?(this._focusEditingCell(),void this._updateEditRow(t.row,!0,s)):super._applyChange(t,e,a)}_applyChangeCore(t,e){var{showEditorAlways:a}=t.column,n=this.isCellEditMode()&&t.row&&!t.row.isNewRow;if(a&&!e){if(n)return this._setEditRowKey(t.row.key,!0),this._setEditColumnNameByIndex(t.columnIndex,!0),this.saveEditData();if(this.isBatchEditMode())return e=this._needUpdateRow(t.column),super._applyChangeCore(t,e)}return super._applyChangeCore(t,e)}_processDataItemCore(t,e,a,n,r){var{data:s,type:o}=e;this.isBatchEditMode()&&o===tt&&(t.data=(0,Fe.lj)(t.data,s)),super._processDataItemCore(t,e,a,n,r)}_processRemoveCore(t,e,a){if(!this.isBatchEditMode()||a)return super._processRemoveCore(t,e,a)}_processRemoveIfError(t,e){if(!this.isBatchEditMode())return super._processRemoveIfError(t,e)}_beforeFocusElementInRow(t){super._beforeFocusElementInRow(t);var e=t>=0?t:0,a=this.getFirstEditableColumnIndex();a>=0&&this.editCell(e,a)}}},views:{rowsView:{_createTable(){var i=this.callBase.apply(this,arguments),t=this._editingController;return t.isCellOrBatchEditMode()&&this.option("editing.allowUpdating")&&O.A.on(i,(0,P.b4)(lr.A.name,"dxDataGridRowsView"),"td:not(.".concat(Na,")"),this.createAction(()=>{t.isEditing()&&t.closeEditCell()})),i},_createRow(i){var t=this.callBase.apply(this,arguments);if(i){var a=!!i.removed;this._editingController.isBatchEditMode()&&a&&t.addClass("dx-row-removed")}return t}},headerPanel:{isVisible(){var i=this.getController("editing").option("editing");return this.callBase()||i&&(i.allowUpdating||i.allowDeleting)&&i.mode===Bt}}}}};G.registerModule("editingCellBased",ch);var Hi=D(9130),yr=D(5966),gh=D(1063),ph="invalid",Sr="revert-tooltip",_h="dx-invalid-message",vh="dxInvalidMessage",Or="invalid-message",mh="dx-invalid-message-always",Ch="dxRevertButton",fh="validator",Ir="dx-pending-indicator",xh="dx-validation-pending",bh="content",Eh="__DX_INSERT_INDEX__",wh="row",Wa="batch",di="cell",yh=["popup","form"],zi="insert",Ki="cancel",Wi=function(i){return(0,v.O9)(i)&&i!==Ki},Sh=function(i,t){return void 0!==i||void 0===i&&t&&!t.isNewRow},$b=Z.Controller.inherit({init(){this._editingController=this.getController("editing"),this.createAction("onRowValidating"),this._validationState||this.initValidationState()},initValidationState(){this._validationState=[],this._validationStateCache={}},_rowIsValidated(i){var t=this._getValidationData(i?.key);return!!t&&!!t.validated},_getValidationData(i,t){var n,e=(0,V.GP)(i),a=(0,v.Gv)(e);return!(n=a?this._validationState.filter(r=>(0,V.RL)(r.key,i))[0]:this._validationStateCache[e])&&t&&(this._validationState.push(n={key:i,isValid:!0}),a||(this._validationStateCache[e]=n)),n},_getBrokenRules:(i,t)=>t?t.brokenRules||t.brokenRule&&[t.brokenRule]:i.brokenRules||[],_rowValidating(i,t){var e=new w.cY,a=this._editingController.getChangeByKey(i?.key),n=this._getBrokenRules(i,t),s={brokenRules:n,isValid:t?t.isValid:i.isValid,key:a.key,newData:a.data,oldData:this._editingController._getOldData(a.key),promise:null,errorText:this.getHiddenValidatorsErrorText(n)};return this.executeAction("onRowValidating",s),(0,w.z7)((0,w.Sx)(s.promise)).always(()=>{i.isValid=s.isValid,i.errorText=s.errorText,e.resolve(s)}),e.promise()},getHiddenValidatorsErrorText(i){var t=[];return(0,I.__)(i,(e,a)=>{var{column:n}=a,r=n&&void 0!==n.groupIndex&&!n.showWhenGrouped,s=n&&n.visible;!a.validator.$element().parent().length&&(!s||r)&&t.push(a.message)}),t.join(", ")},validate(i){var t=!0,e=this._editingController,a=new w.cY,n=[],r=e.getEditMode();if(i=i||r===wh,this._isValidationInProgress)return a.resolve(!1).promise();if(this._isValidationInProgress=!0,i){e.addDeferred(a);var s=e.getChanges();(0,I.__)(s,(l,d)=>{var{type:h,key:u}=d;if("remove"!==h){var c=this._getValidationData(u,!0),g=this.validateGroup(c);n.push(g),g.done(m=>{c.validated=!0,t=t&&m.isValid})}})}else if(this._currentCellValidator){var o=this.validateGroup(this._currentCellValidator._findGroup());n.push(o),o.done(l=>{t=l.isValid})}return(0,w.z7)(...n).done(()=>{this._isValidationInProgress=!1,a.resolve(t)}),a.promise()},validateGroup(i){var a,t=new w.cY,e=i&&Hi.A.getGroupConfig(i);return e?.validators.length&&(this.resetRowValidationResults(i),a=Hi.A.validateGroup(i)),(0,w.z7)(a?.complete||a).done(n=>{(0,w.z7)(this._rowValidating(i,n)).done(t.resolve)}),t.promise()},isRowDataModified:i=>!(0,v.RI)(i.data),updateValidationState(i){var t=this._editingController.getEditMode(),{key:e}=i,a=this._getValidationData(e,!0);if(yh.includes(t))a.isValid=!0;else{if(i.type===zi&&!this.isRowDataModified(i))return void(a.isValid=!0);if(this.setDisableApplyValidationResults(!0),Hi.A.getGroupConfig(a)){var r=Hi.A.validateGroup(a);(0,w.z7)(r.complete||r).done(s=>{a.isValid=s.isValid,a.brokenRules=s.brokenRules})}else(!a.brokenRules||!a.brokenRules.length)&&(a.isValid=!0);this.setDisableApplyValidationResults(!1)}},setValidator(i){this._currentCellValidator=i},renderCellPendingIndicator(i){var t=i.find(".".concat(Ir));if(!t.length){var e=i;t=(0,_.A)("<div>").appendTo(e).addClass(Ir),this._createComponent(t,yt.A),i.addClass(xh)}},disposeCellPendingIndicator(i){var t=i.find(".".concat(Ir));if(t.length){var e=yt.A.getInstance(t);e&&(e.dispose(),e.$element().remove()),i.removeClass(xh)}},validationStatusChanged(i){var{validator:t}=i,e=t.option("validationGroup"),{column:a}=t.option("dataGetter")();this.updateCellValidationResult({rowKey:e.key,columnIndex:a.index,validationResult:i})},validatorInitialized(i){i.component.on("validating",this.validationStatusChanged.bind(this)),i.component.on("validated",this.validationStatusChanged.bind(this))},validatorDisposing(i){var t=i.component,e=t.option("validationGroup"),{column:a}=t.option("dataGetter")(),n=this.getCellValidationResult({rowKey:e?.key,columnIndex:a.index});Wi(n)&&"pending"===n.status&&this.cancelCellValidationResult({change:e,columnIndex:a.index})},applyValidationResult(i,t){var{validator:e}=t,a=e.option("validationGroup"),{column:n}=e.option("dataGetter")();if(t.brokenRules&&t.brokenRules.forEach(d=>{d.columnIndex=n.index,d.column=n}),i){var r=this.getCellValidationResult({rowKey:a.key,columnIndex:n.index}),s=Wi(r)&&r.disabledPendingId===t.id;if(this._disableApplyValidationResults||s)return;if("invalid"===t.status){var o=i.find(":focus");(0,gh.in)(o)||(O.A.trigger(o,"focus"),O.A.trigger(o,te.A.down))}var l=!n.editCellTemplate&&this.getController("editorFactory").getEditorInstance(i);"pending"===t.status?l?l.option("validationStatus","pending"):this.renderCellPendingIndicator(i):l?l.option("validationStatus","valid"):this.disposeCellPendingIndicator(i),i.toggleClass(this.addWidgetPrefix(ph),"invalid"===t.status)}},_syncInternalEditingData(i){var t,e=this._editingController,a=e.getChangeByKey(i.key),n=e._getOldData(i.key),r=null===(t=i.row)||void 0===t?void 0:t.oldData;a&&r&&!n&&e._addInternalData({key:i.key,oldData:r})},createValidator(i,t){var e,a,n=this._editingController,{column:r}=i,{showEditorAlways:s}=r;if(!(0,v.O9)(r.command)&&r.validationRules&&Array.isArray(r.validationRules)&&r.validationRules.length){var l=n.getIndexByKey(i.key,n.getChanges())>-1;if(!l){if(!s){var d=this.getController("columns");s=(d?.getVisibleColumns()||[]).some(B=>B.showEditorAlways)}var u=(0,V.RL)(this.option("editing.editRowKey"),i.key),c=n.isCellOrBatchEditMode()&&n.allowUpdating({row:i.row});l=u||c&&s,c&&s&&n._addInternalData({key:i.key,oldData:null!==(a=null===(e=i.row)||void 0===e?void 0:e.oldData)&&void 0!==a?a:i.data})}if(l){if(t&&!t.length)return void J.A.log("E1050");this._syncInternalEditingData(i);var g=this._getValidationData(i.key,!0),m=()=>{var B=n.getChangeByKey(g?.key),M=r.calculateCellValue(B?.data||{});return void 0!==M?M:i.value},f=t&&t.hasClass("dx-widget");t&&t.addClass(this.addWidgetPrefix(fh));var x=new yr.A(t||(0,_.A)("<div>"),{name:r.caption,validationRules:(0,y.X)(!0,[],r.validationRules),validationGroup:g,adapter:f?null:{getValue:m,applyValidationResults:B=>{this.applyValidationResult(t,B)}},dataGetter(){var B=g?.key,M=n.getChangeByKey(B),L=n._getOldData(B);return{data:(0,Fe.lj)(L,M?.data),column:r}},onInitialized:this.validatorInitialized.bind(this),onDisposing:this.validatorDisposing.bind(this)});if(f){var b=x.option("adapter");if(b){var S=b.bypass,T=()=>i.row.isNewRow&&!this._isValidationInProgress&&!n.isCellModified(i);b.getValue=m,b.validationRequestsCallbacks=[],b.bypass=()=>S.call(b)||T()}}return x}}},setDisableApplyValidationResults(i){this._disableApplyValidationResults=i},getDisableApplyValidationResults(){return this._disableApplyValidationResults},isCurrentValidatorProcessing(i){var{rowKey:t,columnIndex:e}=i;return this._currentCellValidator&&(0,V.RL)(this._currentCellValidator.option("validationGroup").key,t)&&this._currentCellValidator.option("dataGetter")().column.index===e},validateCell(i){var t={rowKey:i.option("validationGroup").key,columnIndex:i.option("dataGetter")().column.index},e=this.getCellValidationResult(t),a=Wi(e),n=i.option("adapter");if(a){var r=n.getValue();(0,V.RL)(r,e.value)||(e=i.validate())}else e=i.validate();var s=new w.cY;return a&&"pending"===e.status&&(this.updateCellValidationResult(t),n.applyValidationResults(e)),(0,w.z7)(e.complete||e).done(o=>{a&&n.applyValidationResults(o),s.resolve(o)}),s.promise()},updateCellValidationResult(i){var{rowKey:t,columnIndex:e,validationResult:a}=i,n=this._getValidationData(t);if(n){var r;if(n.validationResults||(n.validationResults={}),a){if(r=(0,y.X)({},a),n.validationResults[e]=r,"pending"===a.status&&(this._editingController.getEditMode()===di&&(r.deferred=new w.cY,r.complete.always(()=>{r.deferred.resolve()}),this._editingController.addDeferred(r.deferred)),this._disableApplyValidationResults))return void(r.disabledPendingId=a.id)}else r=n.validationResults[e];r&&r.disabledPendingId&&delete r.disabledPendingId}},getCellValidationResult(i){var a,{rowKey:t,columnIndex:e}=i,n=this._getValidationData(t,!0);return null===(a=n?.validationResults)||void 0===a?void 0:a[e]},removeCellValidationResult(i){var{change:t,columnIndex:e}=i,a=this._getValidationData(t?.key);a&&a.validationResults&&(this.cancelCellValidationResult({change:t,columnIndex:e}),delete a.validationResults[e])},cancelCellValidationResult(i){var{change:t,columnIndex:e}=i,a=this._getValidationData(t.key);if(t&&a.validationResults){var n=a.validationResults[e];n&&(n.deferred&&n.deferred.reject(Ki),a.validationResults[e]=Ki)}},resetRowValidationResults(i){i&&(i.validationResults&&delete i.validationResults,delete i.validated)},isInvalidCell(i){var{rowKey:t,columnIndex:e}=i,a=this.getCellValidationResult({rowKey:t,columnIndex:e});return Wi(a)&&"invalid"===a.status},getCellValidator(i){var{rowKey:t,columnIndex:e}=i,a=this._getValidationData(t),n=a&&Hi.A.getGroupConfig(a),r=n&&n.validators;return r&&r.filter(s=>{var{column:o}=s.option("dataGetter")();return!!o&&o.index===e})[0]},setCellValidationStatus(i){var t=this.getCellValidationResult({rowKey:i.key,columnIndex:i.column.index});(0,v.O9)(t)?i.validationStatus=t!==Ki?t.status:Ki:delete i.validationStatus}}),hi={defaultOptions:()=>({editing:{texts:{validationCancelChanges:A.A.format("dxDataGrid-validationCancelChanges")}}}),controllers:{validating:$b},extenders:{controllers:{editing:{_addChange(i){var t=this.callBase.apply(this,arguments),e=this.getController("validating");return t&&"remove"!==i.type&&e.updateValidationState(t),t},_handleChangesChange(i){this.callBase.apply(this,arguments);var t=this.getController("validating");i.value.forEach(e=>{void 0===t._getValidationData(e.key)&&t.updateValidationState(e)})},_updateRowAndPageIndices(){var i=this,t=i.getView("rowsView").getTopVisibleItemIndex(),e=t;(0,I.__)(i.getChanges(),(a,n)=>{var{key:r,type:s}=n,o=this.getController("validating")._getValidationData(r);o&&!o.isValid&&o.pageIndex!==i._pageIndex&&(o.pageIndex=i._pageIndex,o.rowIndex=s===zi?t:e,e++)})},_getValidationGroupsInForm(i){return{validationGroup:this.getController("validating")._getValidationData(i.key,!0)}},_validateEditFormAfterUpdate(i,t){t&&this._editForm&&this._editForm.validate(),this.callBase.apply(this,arguments)},_prepareEditCell(i){var t=this.callBase.apply(this,arguments),e=this.getController("validating");return t&&i.column.showEditorAlways&&e.updateValidationState({key:i.key}),t},processItems(i,t){var e=this.getChanges(),a=this.getController("data"),n=this.getController("validating"),r=(i=this.callBase(i,t)).length;return this.getEditMode()===Wa&&"prepend"!==t&&"append"!==t&&e.forEach(o=>{var{key:l}=o,d=n._getValidationData(l);d&&o.type&&d.pageIndex===this._pageIndex&&o?.pageIndex!==this._pageIndex&&function(o,l){var d={key:o.key};if(!(function(c,g){var m=-1,f=c.type===zi,{key:x}=c;return(0,I.__)(g,(b,S)=>{if((0,V.RL)(x,f?S.key:a.keyOf(S)))return m=b,!1}),m}(o,i)>=0)){l.rowIndex=l.rowIndex>r?l.rowIndex%r:l.rowIndex;var{rowIndex:u}=l;d[Eh]=1,i.splice(u,0,d)}}(o,d)}),i},processDataItem(i){var t=i.data[Eh],e=t?i.data.key:i.key;if(this.getEditMode()===Wa&&t&&e){var n=this.getChanges(),r=F.getIndexByKey(e,n);if(r>=0){var s=n[r];if(s.type!==zi){var o=this._getOldData(s.key);i.data=(0,y.X)(!0,{},o,s.data),i.key=e}}}this.callBase.apply(this,arguments)},_createInvisibleColumnValidators(i){var t=this,e=this.getController("validating"),a=this.getController("columns"),n=a.getColumns(),r=a.getInvisibleColumns().filter(d=>!d.isBand),s=a.getGroupColumns().filter(d=>!d.showWhenGrouped&&-1===r.indexOf(d)),o=[],l=(d,h)=>this._dataController.getRowIndexByKey(h)>=0&&r.indexOf(d)<0;return r.push(...s),yh.includes(this.getEditMode())||(0,I.__)(n,(d,h)=>{i.forEach(u=>{var c;if(!l(h,u.key)){if(u.type===zi)c=u.data;else if("update"===u.type){var g=t._getOldData(u.key);if(!(0,v.O9)(g))return;c=(0,Fe.lj)(g,u.data)}if(c){var m=e.createValidator({column:h,key:u.key,value:h.calculateCellValue(c)});m&&o.push(m)}}})}),function(){o.forEach(d=>{d.dispose()})}},_beforeSaveEditData(i,t){var e=this.callBase.apply(this,arguments),a=this.getController("validating"),n=a._getValidationData(i?.key);if(i)e=e||!("remove"===i.type||n.isValid);else{var s=this._createInvisibleColumnValidators(this.getChanges());e=new w.cY,this.executeOperation(e,()=>{a.validate(!0).done(o=>{switch(s(),this._updateRowAndPageIndices(),this.getEditMode()){case di:o||this._focusEditingCell();break;case Wa:o||(this._resetEditRowKey(),this._resetEditColumnName(),this.getController("data").updateItems())}e.resolve(!o)})})}return e.promise?e.promise():e},_beforeEditCell(i,t,e){var a=this.callBase(i,t,e);if(this.getEditMode()===di){var n=this._rowsView._getCellElement(i,t),r=n&&n.data("dxValidator"),s=n&&n.closest(".dx-row").data("options"),o=r&&r.option("adapter").getValue();if(r&&Sh(o,s)){var l=this.getController("validating"),d=new w.cY;return(0,w.z7)(l.validateCell(r),a).done((h,u)=>{d.resolve("valid"===h.status&&u)}),d.promise()}if(!r)return a}return!1},_afterSaveEditData(i){var t,e=this.getEditMode()===di;if((0,I.__)(this.getChanges(),(l,d)=>{var h=this._showErrorRow(d);t=t||h}),t){var a=this._rowsView.getScrollable();a&&(a.update(),a.scrollToElement(t))}if(i&&e&&this._needUpdateRow()){var n=this.getEditRowIndex();this._dataController.updateItems({changeType:"update",rowIndices:[n]}),this._focusEditingCell()}else if(!i){var r=!0;e&&(r=!(this.getController("columns").getColumns().filter(l=>{var d;return l.showEditorAlways&&(null===(d=l.validationRules)||void 0===d?void 0:d.length)>0}).length>0)),r&&this.getController("validating").initValidationState()}},_handleDataChanged(i){var t=this.getController("validating")._validationState;"standard"===this.option("scrolling.mode")&&this.resetRowAndPageIndices(),"prepend"===i.changeType&&(0,I.__)(t,(e,a)=>{a.rowIndex+=i.items.length}),this.callBase(i)},resetRowAndPageIndices(){var i=this.getController("validating")._validationState;(0,I.__)(i,(t,e)=>{e.pageIndex!==this._pageIndex&&(delete e.pageIndex,delete e.rowIndex)})},_beforeCancelEditData(){this.getController("validating").initValidationState(),this.callBase()},_showErrorRow(i){var t,e=this.getController("errorHandling"),a=this.getController("data").items(),n=this.getIndexByKey(i.key,a),r=this.getController("validating")._getValidationData(i.key);if(!r?.isValid&&r?.errorText&&n>=0)return t=this.getPopupContent(),e&&e.renderErrorRow(r?.errorText,n,t)},updateFieldValue(i){var t=this.getController("validating"),e=new w.cY;return t.removeCellValidationResult({change:this.getChangeByKey(i.key),columnIndex:i.column.index}),this.callBase.apply(this,arguments).done(()=>{var a=t.getCellValidator({rowKey:i.key,columnIndex:i.column.index});(0,w.z7)(a&&t.validateCell(a)).done(n=>{this.getController("editorFactory").refocus(),e.resolve(n)})}),e.promise()},highlightDataCell(i,t){this.callBase.apply(this,arguments);var e=this.getController("validating");e.setCellValidationStatus(t);var a=!!t.setValue,n=this.isCellModified(t),r=(0,v.O9)(t.validationStatus);if(n&&t.column.setCellValue||a&&!n&&!t.row.isNewRow&&r){var o=i.data("dxValidator");o&&(0,w.z7)(this.getController("validating").validateCell(o)).done(()=>{e.setCellValidationStatus(t)})}},getChangeByKey(i){var t=this.getChanges();return t[F.getIndexByKey(i,t)]},isCellModified(i){var t=this.callBase(i),e=this.getChangeByKey(i.key),a=!!i.row&&this.getController("validating").isInvalidCell({rowKey:i.key,columnIndex:i.column.index});return t||this.getController("validating")._rowIsValidated(e)&&a}},editorFactory:{_showRevertButton(i){var t,e=null===(t=this._revertTooltip)||void 0===t?void 0:t.$element();if(!i||!i.length)return e?.remove(),void(this._revertTooltip=void 0);if(!i.find(e).length){var a=i.closest(".".concat(this.addWidgetPrefix(bh))).parent(),n=this.addWidgetPrefix(Sr);e?.remove(),e=(0,_.A)("<div>").addClass(n).appendTo(i);var r={animation:null,visible:!0,width:"auto",height:"auto",shading:!1,container:a,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{class:n},contentTemplate:()=>{var s=(0,_.A)("<div>").addClass("dx-revert-button"),o={icon:"revert",hint:this.option("editing.texts.validationCancelChanges"),elementAttr:{id:Ch,"aria-label":A.A.format("dxDataGrid-ariaRevertButton")},onClick:()=>{this._editingController.cancelEditData()}};return new _e.A(s,o).$element()},position:{my:"left top",at:"right top",offset:"1 0",collision:"flip",boundaryOffset:"0 0",boundary:this._rowsView.element(),of:i},onPositioned:this._positionedHandler.bind(this)};this._revertTooltip=new jt.A(e,r)}},_hideFixedGroupCell(i,t){var e,a,n=this._rowsView.isFixedColumns(),r=this._editingController.isFormOrPopupEditMode();if(n&&!r){var s=i.closest(".dx-row").next().data("options");s&&"group"===s.rowType&&(e=(0,_.A)(this._rowsView.getRowElement(s.rowIndex)).last(),(a=e.find(".".concat("dx-group-cell"))).length&&"hidden"!==a.get(0).style.visibility&&(a.css("visibility","hidden"),t.onDisposing=function(){a.css("visibility","")}))}},_positionedHandler(i,t){if(!i.component.__skipPositionProcessing){var e=(0,_.A)(i.element).hasClass(this.addWidgetPrefix(Sr)),a=!e&&this._rowsView.updateFreeSpaceRowHeight(),n=this._normalizeValidationMessagePositionAndMaxWidth(i,e,t);i.component.__skipPositionProcessing=!(!a&&!n),n?i.component.option(n):a&&i.component.repaint()}},_showValidationMessage(i,t,e){var a,n=i.find(".dx-dropdowneditor-overlay").data("dxPopup"),r=n&&n.option("visible"),s=r?"top right":"top ".concat(e),o=r?"top left":"bottom ".concat(e),d=(null===(a=this._columnsController.getFixedColumns())||void 0===a?void 0:a.length)>0?this.getView("rowsView").element():i.closest(".".concat(this.addWidgetPrefix(bh))),h="";t&&t.forEach(m=>{h+=(h.length?"<br/>":"")+(0,Ze.o4)(m)});var u=this.addWidgetPrefix(Or);this._rowsView.element().find(".".concat(u)).remove();var c=(0,_.A)("<div>").addClass(_h).addClass(mh).addClass(u).html(h).appendTo(i),g={container:d,shading:!1,width:"auto",height:"auto",visible:!0,animation:!1,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{id:vh,class:"".concat(_h," ").concat(mh," ").concat(u)},position:{collision:"flip",boundary:this._rowsView.element(),boundaryOffset:"0 0",offset:{x:0,y:!r&&ge.A.mozilla?-1:0},my:s,at:o,of:i},onPositioned:m=>{this._positionedHandler(m,r),this._shiftValidationMessageIfNeed(m.component.$content(),i)}};this._hideFixedGroupCell(i,g),new jt.A(c,g)},_hideValidationMessage(){var i,t=null===(i=this._rowsView.element())||void 0===i?void 0:i.find(this._getValidationMessagesSelector());t?.remove()},_normalizeValidationMessagePositionAndMaxWidth(i,t,e){var f,x,b,a=this._columnsController.getFixedColumns();if(a&&a.length){var n,l,d,r=!t&&(l=(0,_.A)(i.element).closest("tr").index(),d=(0,_.A)(this._rowsView.getRowElement(l)).first().children().filter(":not(.dx-hidden-cell)"),this._rowsView._getWidths(d).reduce((f,x)=>f+x,0)),h=i.component.$content(),u=(0,R.Ot)(h,!0),c=!t&&u>r,g=this._rowsView.getCellIndex((0,_.A)(i.element).closest("td")),m=((f=a).some((S,T)=>{if("transparent"===S.command)return x=0===T?-1:T,b=T===f.length-1?-1:T+S.colspan-1,!0}),{startColumnIndex:x,endColumnIndex:b});return t||g!==m.startColumnIndex&&!c?g===m.endColumnIndex&&(n={collision:"none flip",my:"top right",at:t||e?"top left":"bottom right"},t&&(n.offset="-1 0")):n={collision:"none flip",my:"top left",at:e?"top right":"bottom left"},n&&{position:n,maxWidth:c?r-2:void 0}}},_shiftValidationMessageIfNeed(i,t){var e=this._revertTooltip&&this._revertTooltip.$content();if(e){var a=i.offset(),n=e.offset();if(a.top===n.top&&a.left+(0,R.RG)(i)>n.left){var r=(0,R.RG)(e)+2;i.css("left",n.left<t.offset().left?-r:r)}}},_getRevertTooltipsSelector(){var i=this.addWidgetPrefix(Sr);return".dx-editor-cell .".concat(i)},_getValidationMessagesSelector(){var i=this.addWidgetPrefix(Or);return".dx-editor-cell .".concat(i,", .dx-cell-modified .").concat(i)},init(){this.callBase(),this._editingController=this.getController("editing"),this._columnsController=this.getController("columns"),this._rowsView=this.getView("rowsView")},loseFocus(i){i||this.getController("validating").setValidator(null),this.callBase()},updateCellState(i,t,e){var a,n=i?.closest(this._getFocusCellSelector()),r=n?.is("td")?n:null,s=n?.closest(".dx-row").data("options"),o=s?this.getController("editing").getChangeByKey(s.key):null,l=r&&this.getController("columns").getVisibleColumns()[r.index()],d=void 0!==(null===(a=o?.data)||void 0===a?void 0:a[l?.name])&&!this._editingController.isSaving(),h=[];if(this._editingController.getEditMode()===di&&("invalid"===t?.status||d?(this._showRevertButton(n),h.push(Ch)):this._revertTooltip&&this._revertTooltip.$element().remove()),t&&"invalid"===t.status&&r&&l&&t&&t.brokenRules){var c=[];t.brokenRules.forEach(g=>{g.message&&c.push(g.message)}),c.length&&(this._showValidationMessage(n,c,l.alignment||"left"),h.push(vh))}this._updateAriaValidationAttributes(n,h),!e&&this._rowsView.element()&&this._rowsView.updateFreeSpaceRowHeight()},_updateAriaValidationAttributes(i,t){if(0!==t.length){var e=this._editingController.getEditMode();if([di,Wa,wh].includes(e)){var n=this._getCurrentFocusElement(i);n.attr("aria-labelledby",t.join(" ")),n.attr("aria-invalid",!0)}}},_getCurrentFocusElement(i){return this._editingController.isEditing()?i.find(fr).first():i},focus(i,t){if(!arguments.length)return this.callBase();if(this._hideValidationMessage(),i?.hasClass("dx-row")||i?.hasClass("dx-master-detail-cell"))return this.callBase(i,t);var d,e=i?.closest(this._getFocusCellSelector()),{callBase:a}=this,n=e&&(e.data("dxValidator")||i.find(".".concat(this.addWidgetPrefix(fh))).eq(0).data("dxValidator")),r=e&&e.closest(".dx-row").data("options"),s=this.getController("editing"),o=r?s.getChangeByKey(r.key):null,l=this.getController("validating");if(n){l.setValidator(n);var h=n.option("adapter").getValue();if(Sh(h,r)||l._rowIsValidated(o))return s.waitForDeferredOperations().done(()=>{(0,w.z7)(l.validateCell(n)).done(u=>{d=u;var{column:c}=d.validator.option("dataGetter")();o&&c&&!l.isCurrentValidatorProcessing({rowKey:o.key,columnIndex:c.index})||(!(0,de.Ft)((0,de.ss)())&&"invalid"===d.status&&(t=!0),this.updateCellState(i,d,t),a.call(this,i,t))})}),this.callBase(i,t)}return this.updateCellState(i,d,t),this.callBase(i,t)},getEditorInstance(i){var t=i.find(".dx-texteditor").eq(0);return F.getWidgetInstance(t)}},data:{_getValidationStatus:i=>(Wi(i)?i.status:i)||"valid",_isCellChanged(i,t,e,a,n){var r,s,o=null===(r=i.cells)||void 0===r?void 0:r[a],l=this._getValidationStatus({status:o?.validationStatus}),d=this.getController("validating"),h=d.getCellValidationResult({rowKey:i.key,columnIndex:a}),u=d._getValidationData(i.key),c=this._getValidationStatus(h),g=JSON.stringify(t.modifiedValues)!==JSON.stringify(i.modifiedValues),m=l!==c&&g,f=(0,_.A)(o?.cellElement).hasClass(this.addWidgetPrefix(ph)),x=null===(s=o?.column.validationRules)||void 0===s?void 0:s.length;return!!(i.isEditing!==t.isEditing&&x||m||u.isValid&&f)||this.callBase.apply(this,arguments)}}},views:{rowsView:{updateFreeSpaceRowHeight(i){var t,e,a,n=this.element(),r=n&&n.find(".".concat(this.addWidgetPrefix(Or)," .dx-overlay-content"));if(this.callBase(i),r&&r.length&&(t=this._getRowElements(),(e=(a=this._getFreeSpaceRowElements(i)).first())&&1===t.length&&(!e.is(":visible")||(0,R.P$)(r)>(0,R.P$)(e))))return a.show(),(0,R.k$)(a,(0,R.P$)(r)),!0},_formItemPrepared(i,t){this.callBase.apply(this,arguments),(0,V.OX)(()=>{var e=t.find(".dx-widget").first();e.length&&!e.children().length||this.getController("validating").createValidator(i,e)})},_cellPrepared(i,t){this.getController("editing").isFormOrPopupEditMode()||this.getController("validating").createValidator(t,i),this.callBase.apply(this,arguments)},_restoreErrorRow(i){var t=this.getController("editing");t&&t.hasChanges()&&this._getRowElements(i).each((e,a)=>{var n=(0,_.A)(a).data("options");if(n){var r=t.getChangeByKey(n.key);r&&t._showErrorRow(r)}})}}}}},Ar=(0,y.X)({},hi.extenders.controllers.editing);delete Ar.processItems,delete Ar.processDataItem,G.registerModule("validating",{defaultOptions:hi.defaultOptions,controllers:hi.controllers,extenders:{controllers:{editing:Ar,editorFactory:hi.extenders.controllers.editorFactory},views:hi.extenders.views}});var Tr="scrolling.legacyMode",Oh=i=>i.option("scrolling.loadTwoPagesOnStart")||i._controller.isVirtual()||i._controller.getViewportItemIndex()>0,Ga=i=>i._cache.length?i._cache[0].pageIndex:-1,Rr=i=>i._cache.length?i._cache[i._cache.length-1].pageIndex:-1,Ua=(i,t,e)=>{i._isChangedFiring=!0,t(e),i._isChangedFiring=!1},Ih=(i,t,e)=>{if(i._isDelayChanged)return i._isDelayChanged=!1,Ua(i,t,e),!0},$a=(i,t)=>{var e=i.option("scrolling.preloadEnabled"),a=(i=>{var t=i._dataOptions.pageSize();if(i.option("scrolling.preventPreload"))return 0;var a=i._controller.viewportSize();if(i._controller.isVirtualMode()&&i.option("scrolling.removeInvisiblePages")){a=0;for(var n=i._controller.viewportSize()*i._controller.viewportItemSize(),r=i._controller.getContentOffset(),s=i._controller.getViewportPosition(),o=i._controller.virtualItemsCount(),l=i._dataOptions.totalItemsCount(),d=o.begin;d<l&&!(r>=s+n);d++)(r+=i._controller.getItemSizes()[d]||i._controller.viewportItemSize())>=s&&a++}return t&&a>0?Math.ceil(a/t):1})(i),n=i._controller.isAppendMode();return a&&(t?a=e?1:0:(e&&a++,(n||!Oh(i))&&a--)),a},Ah=(i,t,e,a,n)=>{var r=i._dataOptions,s=r.items().slice(),o=(0,v.Gv)(e)?e:void 0,l="prepend"===e,d=r.viewportItems();e&&(0,v.Kg)(e)&&!i._isDelayChanged&&(o={changeType:e,items:s},n&&(o.removeCount=n.itemsCount,o.removeCount&&r.correctCount&&(o.removeCount=r.correctCount(d,o.removeCount,l))));var h=n?n.itemsLength:0;h&&r.correctCount&&(h=r.correctCount(d,h,l)),"append"===e?(d.push.apply(d,s),n&&d.splice(0,h)):l?(d.unshift.apply(d,s),n&&d.splice(-h)):i._dataOptions.viewportItems(s),r.updateLoading(),i._lastPageIndex=i.pageIndex(),i._isDelayChanged=a,a||Ua(i,t,o)};class Qb{constructor(t,e){this._dataOptions=e,this._controller=t,this._pageIndex=this._lastPageIndex=e.pageIndex(),this._cache=[],this._loadingPageIndexes={}}option(){return this._controller.option.apply(this._controller,arguments)}viewportItemIndexChanged(t){var o,e=this._dataOptions.pageSize(),a=this._dataOptions.pageCount(),n=this._controller.isVirtualMode(),r=this._controller.isAppendMode(),s=this._dataOptions.totalItemsCount();if(e&&(n||r)&&s>=0){var l=this._controller.viewportSize();if(l&&t+l>=s&&!this._controller.isVirtual())if(this._dataOptions.hasKnownLastPage()){var d=s%e;(o=a-1)>0&&d>0&&d<l&&o--}else o=a;else{o=Math.floor(t/e);var h=a-1;o=Math.max(o,0),o=Math.min(o,h)}return this.pageIndex(o),this.load()}}pageIndex(t){var e=this._controller.isVirtualMode(),a=this._controller.isAppendMode();return!1!==this.option(Tr)&&(e||a)?(void 0!==t&&(this._pageIndex=t),this._pageIndex):this._dataOptions.pageIndex(t)}beginPageIndex(t){var e=Ga(this);return e<0&&(e=void 0!==t?t:this.pageIndex()),e}endPageIndex(){var t=Rr(this);return t>0?t:this._lastPageIndex}pageSize(){return this._dataOptions.pageSize()}load(){var e,t=this._dataOptions,a=this._controller.isVirtualMode(),n=this._controller.isAppendMode();if(!1!==this.option(Tr)&&(a||n)){var r=(i=>{var t=-1,e=Ga(i),a=i._dataOptions;return e<0?t=i._pageIndex:i._cache[i._pageIndex-e]?e>=0&&i._controller.viewportSize()>=0&&(e>0&&(Rr(i)+1===a.pageCount()&&i._cache.length<$a(i)+1||i._pageIndex===e&&$a(i,!0))&&(t=e-1),t<0&&e+i._cache.length<=i._pageIndex+$a(i)&&(t=e+i._cache.length)):t=i._pageIndex,i._loadingPageIndexes[t]&&(t=-1),t})(this);if(r>=0){var s=((i,t)=>{var e=i._dataOptions;if(t===i.pageIndex()||!e.isLoading()&&t<e.pageCount()||!e.hasKnownLastPage()&&t===e.pageCount())return e.pageIndex(t),i._loadingPageIndexes[t]=!0,(0,w.z7)(e.load()).always(()=>{i._loadingPageIndexes[t]=!1})})(this,r);s&&(e=new w.cY,s.done(()=>{var o=this._delayDeferred;o?o.done(e.resolve).fail(e.reject):e.resolve()}).fail(e.reject),t.updateLoading())}}else e=t.load();return!e&&this._lastPageIndex!==this.pageIndex()&&this._dataOptions.onChanged({changeType:"pageIndex"}),e||(new w.cY).resolve()}loadIfNeed(){var t=this._controller.isVirtualMode(),e=this._controller.isAppendMode();if((t||e)&&!this._dataOptions.isLoading()&&(!this._isChangedFiring||this._controller.isVirtual())){var a=this._controller.getViewportPosition();a>0?this._controller._setViewportPositionCore(a):this.load()}}handleDataChanged(t,e){var r,s,a=this._dataOptions,n=this._cache.length,o=this._controller.isVirtualMode(),l=this._controller.isAppendMode();if(e&&e.changes)Ua(this,t,e);else if(!1!==this.option(Tr)&&(o||l)){var d=Ga(this);if(d>=0&&(o&&d+this._cache.length!==a.pageIndex()&&d-1!==a.pageIndex()&&(n=0,this._cache=[]),l))if(0===a.pageIndex())this._cache=[];else if(a.pageIndex()<Rr(this))return void Ua(this,t,{changeType:"append",items:[]});var u,h={pageIndex:a.pageIndex(),itemsLength:a.items(!0).length,itemsCount:this.itemsCount(!0)};this.option("scrolling.removeInvisiblePages")&&o?s=this._cache.length>Math.max($a(this)+(this.option("scrolling.preloadEnabled")?1:0),2):Ih(this,t,{isDelayed:!0}),d===a.pageIndex()+1?(s&&(u=this._cache.pop()),r="prepend",this._cache.unshift(h)):(s&&(u=this._cache.shift()),r="append",this._cache.push(h));var c=o&&0===n&&Oh(this);Ah(this,t,this._cache.length>1?r:void 0,c,u),this._delayDeferred=this.load().done(()=>{Ih(this,t)&&this.load()})}else Ah(this,t,e)}getDelayDeferred(){return this._delayDeferred}itemsCount(t){var e=0,a=this._controller.isVirtualMode();return!t&&a?this._cache.forEach(n=>{e+=n.itemsCount}):e=this._dataOptions.itemsCount(),e}virtualItemsCount(){var t=Ga(this);t<0&&(t=this._dataOptions.pageIndex());var e=t*this._dataOptions.pageSize(),a=this._cache.length*this._dataOptions.pageSize();return{begin:e,end:Math.max(0,this._dataOptions.totalItemsCount()-a-e)}}reset(){this._loadingPageIndexes={},this._cache=[]}}var Th="virtual",Xa="scrolling.legacyMode",Rh=i=>i.option("scrolling.mode")===Th||i._isVirtual;function Dh(i,t,e){var a,n=[],r=[],s=[];function o(u){var c=u.element?u.$element():u,g=Se.A.offset(c);return g?u.scrollTop()-(g.top-i.offset().top):i.offset().top}var u,c,l={on(u,c,g){u.on("scroll",g)},off(u,c,g){u.off("scroll",g)}};function d(u){var c="#document"===u.get(0).nodeName,g=u.get(0).nodeType===(0,Q.zk)().Node.ELEMENT_NODE,m=u.data("dxScrollable"),f=l;if(m||(m=c&&(0,_.A)((0,Q.zk)())||g&&"auto"===u.css("overflowY")&&u,f=O.A,m)){var x=function(b){return function(){var S=b.scrollTop()-o(b);t(S=S>0?S:0)}}(m);f.on(m,"scroll",x),r.push(b=>{var S=o(m);b-S>=0&&m[m.scrollTo?"scrollTo":"scrollTop"](b+S)}),n.push(m),s.push(()=>{f.off(m,"scroll",x)})}}for(a=(e=e||i).parent();a.length;void 0,a=(0,_.A)(null!==(c=(u=a).get(0).parentNode)&&void 0!==c?c:u.get(0).host))d(a);return{scrollTo(u){(0,I.__)(r,(c,g)=>{g(u)})},dispose(){(0,I.__)(s,(u,c)=>{c()})}}}var i,Dr=ut.A.inherit((i={ctor(t,e,a){this._dataOptions=e,this.component=t,this._viewportSize=!1===t.option(Xa)?15:0,this._viewportItemSize=20,this._viewportItemIndex=0,this._position=0,this._isScrollingBack=!1,this._contentSize=0,this._itemSizes={},this._sizeRatio=1,this._isVirtual=a,this.positionChanged=(0,me.A)(),this._dataLoader=new Qb(this,this._dataOptions)},getItemSizes(){return this._itemSizes},option(){return this.component.option.apply(this.component,arguments)},isVirtual(){return this._isVirtual},virtualItemsCount(){if(Rh(this)){var t=this._dataOptions,e=t.totalItemsCount();if(!1===this.option(Xa)&&-1!==e){var a=this.getViewportParams(),n=t.loadedOffset(),r=t.loadedItemCount(),s=Math.max(a.skip,n),o=Math.min(a.take,r);return{begin:s,end:Math.max(e-(s+o),0)}}return this._dataLoader.virtualItemsCount.apply(this._dataLoader,arguments)}},getScrollingTimeout(){var t,e=this.option("scrolling.renderAsync"),a=0;return(0,v.O9)(e)?e&&(a=null!==(t=this.option("scrolling.timeout"))&&void 0!==t?t:0):(a=Math.min(this.option("scrolling.timeout")||0,this._dataOptions.changingDuration()))<this.option("scrolling.renderingThreshold")&&(a=this.option("scrolling.minTimeout")||0),a},setViewportPosition(t){var e=new w.cY,a=this.getScrollingTimeout();return clearTimeout(this._scrollTimeoutID),a>0?this._scrollTimeoutID=setTimeout(()=>{this._setViewportPositionCore(t),e.resolve()},a):(this._setViewportPositionCore(t),e.resolve()),e.promise()},getViewportPosition(){return this._position},getItemIndexByPosition(t,e,a){t=t??this._position;for(var n=this.getItemSize(),r=0,s=0,o=Object.keys(this._itemSizes).concat(-1),l=0;l<o.length&&r<t;l++){var d=parseInt(o[l]),h=(t-r)/n;if(d<0||s+h<d){s+=h,this._sizeRatio<1&&(0,v.O9)(e)&&(s=e+a/this._viewportItemSize);break}r+=(h=d-s)*n,s+=h;var u=this._itemSizes[d];s+=(r+=u)<t?1:(t-r+u)/u}return Math.round(50*s)/50},isScrollingBack(){return this._isScrollingBack},_setViewportPositionCore(t){var e=this._position||0;this._position=t,e!==this._position&&(this._isScrollingBack=this._position<e);var a=this.getItemIndexByPosition(),n=this.setViewportItemIndex(a);return this.positionChanged.fire(),n},setContentItemSizes(t){var e=this.virtualItemsCount();if(this._contentSize=t.reduce((r,s)=>r+s,0),e){t.forEach((r,s)=>{this._itemSizes[e.begin+s]=r});var a=(e.begin+e.end+this.itemsCount())*this._viewportItemSize,n=F.getContentHeightLimit(ge.A);this._sizeRatio=a>n?n/a:1}},getItemSize(){return this._viewportItemSize*this._sizeRatio},getItemOffset(t,e){var a=this.virtualItemsCount(),n=t;if(!a)return 0;var r=0,s=this._dataOptions.totalItemsCount();return Object.keys(this._itemSizes).forEach(o=>{n&&(e?o>=s-t:o<t)&&(r+=this._itemSizes[o],n--)}),Math.floor(r+n*this._viewportItemSize*this._sizeRatio)},getContentOffset(t){var e="end"===t,a=this.virtualItemsCount();return a?this.getItemOffset(e?a.end:a.begin,e):0},getVirtualContentSize(){return this.virtualItemsCount()?this.getContentOffset("begin")+this.getContentOffset("end")+this._contentSize:0},getViewportItemIndex(){return this._viewportItemIndex},setViewportItemIndex(t){if(this._viewportItemIndex=t,!1!==this.option(Xa))return this._dataLoader.viewportItemIndexChanged.apply(this._dataLoader,arguments)},viewportItemSize(t){return void 0!==t&&(this._viewportItemSize=t),this._viewportItemSize},viewportSize(t){return void 0!==t&&(this._viewportSize=t),this._viewportSize},viewportHeight(t,e){var a=e??this._position,n=this.getItemIndexByPosition(a),r=this.getItemIndexByPosition(a+t,n,t);this.viewportSize(Math.ceil(r-n)),!(0,v.O9)(e)&&this._viewportItemIndex!==n&&this._setViewportPositionCore(a)},reset(t){this._dataLoader.reset(),t||(this._itemSizes={})},subscribeToWindowScrollEvents(t){this._windowScroll=this._windowScroll||Dh(t,e=>{this.viewportItemSize()&&this.setViewportPosition(e)})},dispose(){clearTimeout(this._scrollTimeoutID),this._windowScroll&&this._windowScroll.dispose(),this._windowScroll=null},scrollTo(t){this._windowScroll&&this._windowScroll.scrollTo(t)},isVirtualMode(){return Rh(this)},isAppendMode(){return(i=>"infinite"===i.option("scrolling.mode")&&!i._isVirtual)(this)},getViewportParams(){var t,e=this.option("scrolling.mode")===Th,a=this._dataOptions.totalItemsCount(),r=this._dataOptions.hasKnownLastPage()&&this._viewportItemIndex>a?a:this._viewportItemIndex,s=this._viewportSize+r,o=this.option("scrolling.prerenderedRowChunkSize")||1,l=this.isScrollingBack(),d=null!==(t=this.option("scrolling.prerenderedRowCount"))&&void 0!==t?t:1,u=l?0:d,c=Math.floor(Math.max(0,r-(l?d:0))/o)*o,g=Math.ceil((s+u-c)/o)*o;if(e){var m=Math.max(0,a-c);g=Math.min(g,m)}return{skip:c,take:g}},itemsCount(){return this.option(Xa)?this._dataLoader.itemsCount.apply(this._dataLoader,arguments):this._dataOptions.itemsCount()}},["pageIndex","beginPageIndex","endPageIndex","pageSize","load","loadIfNeed","handleDataChanged","getDelayDeferred"].forEach(t=>{i[t]=function(){return this._dataLoader[t].apply(this._dataLoader,arguments)}}),i)),Bh="bottom-load-panel",Fh="dx-freespace-row",Ya="dx-virtual-row",$="scrolling.legacyMode",Br="paging.pageIndex",be=function(i){return"virtual"===i.option("scrolling.mode")},$e=function(i){return"infinite"===i.option("scrolling.mode")},Ne=function(i){return be(i)||$e(i)},Vh=function(i,t,e,a){for(var n=0;n<t+1;n++){var r=i[e?i.length-1-n:n];r&&!a(r,n===t,e)&&t++}return t},ja=function(i,t){return"data"===i.rowType&&!i.isNewRow||"group"===i.rowType&&t.isGroupItemCountable(i.data)},rE=function(){var i=function(e){var a=e._virtualScrollController.beginPageIndex(-1);be(e)&&(a<0||e.viewportSize()>=0&&e.getViewportItemIndex()>=0&&(a*e.pageSize()>e.getViewportItemIndex()||a*e.pageSize()+e.itemsCount()<e.getViewportItemIndex()+e.viewportSize())&&e._dataSource.isLoading()?e._isLoading||(e._isLoading=!0,e.loadingChanged.fire(!0)):e._isLoading&&(e._isLoading=!1,e.loadingChanged.fire(!1)))},t={init(){this.callBase.apply(this,arguments),this._items=[],this._totalCount=-1,this._isLoaded=!0,this._loadPageCount=1,this._virtualScrollController=new Dr(this.component,this._getVirtualScrollDataOptions())},_getVirtualScrollDataOptions(){var e=this;return{pageSize:()=>e.pageSize(),totalItemsCount:()=>e.totalItemsCount(),hasKnownLastPage:()=>e.hasKnownLastPage(),pageIndex:a=>e._dataSource.pageIndex(a),isLoading:()=>e._dataSource.isLoading()&&!e.isCustomLoading(),pageCount:()=>e.pageCount(),load:()=>e._dataSource.load(),updateLoading(){i(e)},itemsCount:()=>e.itemsCount(!0),items:()=>e._dataSource.items(),viewportItems:a=>(a&&(e._items=a),e._items),onChanged(a){e.changed.fire(a)},changingDuration:()=>e.isLoading()?300:e._renderTime||0}},_handleLoadingChanged(e){!1!==this.option($)?((!be(this)||this._isLoadingAll)&&(this._isLoading=e,this.callBase.apply(this,arguments)),this._startLoadTime=e?new Date:void 0):this.callBase.apply(this,arguments)},_handleLoadError(){!1!==this.option($)&&(this._isLoading=!1,this.loadingChanged.fire(!1)),this.callBase.apply(this,arguments)},_handleDataChanged(e){if(!1===this.option($))return this._items=this._dataSource.items().slice(),this._totalCount=this._dataSourceTotalCount(!0),void this.callBase.apply(this,arguments);var a=this.callBase.bind(this);this._virtualScrollController.handleDataChanged(a,e)},_customizeRemoteOperations(e,a){var n=!1===this.option($),r=this.option("scrolling.renderAsync");(0,v.O9)(r)||(r=this._renderTime>=this.option("scrolling.renderingThreshold")),(be(this)||$e(this)&&n)&&!a.reload&&(a.skip||n)&&!r&&(e.delay=void 0),this.callBase.apply(this,arguments)},items(){return this._items},_dataSourceTotalCount(e){return!1===this.option($)&&be(this)&&!e?this._totalCount:this.callBase()},itemsCount(e){return e||!1===this.option($)?this.callBase():this._virtualScrollController.itemsCount()},load(e){return!1===this.option($)||e?this.callBase(e):this._virtualScrollController.load()},isLoading(){return!1===this.option($)?this._dataSource.isLoading():this._isLoading},isLoaded(){return this._dataSource.isLoaded()&&this._isLoaded},resetPagesCache(e){e||this._virtualScrollController.reset(!0),this.callBase.apply(this,arguments)},_changeRowExpandCore(){var e=this.callBase.apply(this,arguments);return!1===this.option($)||(this.resetPagesCache(),i(this)),e},reload(){this._dataSource.pageIndex(this.pageIndex());var e=this._virtualScrollController;if(!1!==this.option($)&&e){var a=new w.cY;return this.callBase.apply(this,arguments).done(n=>{var r=e.getDelayDeferred();r?r.done(a.resolve).fail(a.reject):a.resolve(n)}).fail(a.reject),a}return this.callBase.apply(this,arguments)},refresh(e,a){if(!1!==this.option($)){var{storeLoadOptions:n}=e,r=this._dataSource;a.reload?(this._virtualScrollController.reset(),r.items().length=0,this._isLoaded=!1,i(this),this._isLoaded=!0,$e(this)?(this.pageIndex(0),r.pageIndex(0),n.pageIndex=0,e.pageIndex=0,n.skip=0):(r.pageIndex(this.pageIndex()),r.paginate()&&(e.pageIndex=this.pageIndex(),n.skip=this.pageIndex()*this.pageSize()))):$e(this)&&n.skip&&this._totalCountCorrection<0&&(n.skip+=this._totalCountCorrection)}return this.callBase.apply(this,arguments)},dispose(){this._virtualScrollController.dispose(),this.callBase.apply(this,arguments)},loadPageCount(e){if(!(0,v.O9)(e))return this._loadPageCount;this._loadPageCount=e},_handleDataLoading(e){var a=this.loadPageCount(),n=this.pageSize(),r=!1===this.option($),{storeLoadOptions:s}=e,o=(0,v.O9)(s.take);e.loadPageCount=a,!e.isCustomLoading&&r&&o&&a>1&&n>0&&(s.take=a*n),this.callBase.apply(this,arguments)},_loadPageSize(){return this.callBase.apply(this,arguments)*this.loadPageCount()}};return["beginPageIndex","endPageIndex","pageIndex"].forEach(e=>{t[e]=function(){if(!1===this.option($)){var a=this._dataSource;return a.pageIndex.apply(a,arguments)}var n=this._virtualScrollController;return n[e].apply(n,arguments)}}),["virtualItemsCount","getContentOffset","getVirtualContentSize","setContentItemSizes","setViewportPosition","getViewportItemIndex","setViewportItemIndex","getItemIndexByPosition","viewportSize","viewportItemSize","getItemSize","getItemSizes","loadIfNeed"].forEach(e=>{t[e]=function(){var a=this._virtualScrollController;return a[e].apply(a,arguments)}}),t}(),sE=function(){var i=function(t,e){var a=t.toArray().map(s=>(0,_.A)(s).parent(".".concat(e)).get(0)).filter(s=>s);a.length&&(t=(0,_.A)(a));for(var n=e===Fh?t.length-1:t.length,r=0;r<n;r++)t.eq(r).remove()};return{init(){var t,e=this.getController("data");this.callBase(),e.pageChanged.add(a=>{var n=this._scrollTop;this.scrollToPage(a??e.pageIndex()),!1===this.option($)&&this._scrollTop===n&&e.updateViewport()}),e.dataSourceChanged.add(()=>{!this._scrollTop&&this._scrollToCurrentPageOnResize()}),null===(t=e.stateLoaded)||void 0===t||t.add(()=>{this._scrollToCurrentPageOnResize()}),this._scrollToCurrentPageOnResize()},_scrollToCurrentPageOnResize(){var t=this.getController("data");if(t.pageIndex()>0){var e=()=>{this.resizeCompleted.remove(e),this.scrollToPage(t.pageIndex())};this.resizeCompleted.add(e)}},scrollToPage(t){var n,e=this._dataController,a=e?e.pageSize():0;if(be(this)||$e(this)){var r=e.getItemSize(),s=e.getItemSizes(),o=t*a;for(var l in n=o*r,s)parseInt(l)<o&&(n+=s[l]-r)}else n=0;this.scrollTo({y:n,x:this._scrollLeft})},renderDelayedTemplates(){this.waitAsyncTemplates().done(()=>{this._updateContentPosition(!0)}),this.callBase.apply(this,arguments)},_renderCore(t){var e=new Date,a=this.callBase.apply(this,arguments),n=this._dataController._dataSource;if(n&&t){var r=t.items?t.items.length:20,s=this._dataController.viewportSize()||20;n._renderTime=F.isVirtualRowRendering(this)&&r>0&&!1!==this.option($)?(new Date-e)*s/r:new Date-e}return a},_getRowElements(t){var e=this.callBase(t);return e&&e.not(".".concat(Ya))},_removeRowsElements(t,e,a){var n=this._getRowElements(t).toArray();n="append"===a?n.slice(0,e):n.slice(-e);var r=this.getController("errorHandling");n.map(s=>{var o=(0,_.A)(s);r&&r.removeErrorRow(o.next()),o.remove()})},_updateContent(t,e){var a,n=this._findContentElement(),r=e&&e.changeType,s=(0,w.cY)(),o=n.children().first();return"append"===r||"prepend"===r?this.waitAsyncTemplates().done(()=>{var l=this._getBodies(t);1===l.length?this._getBodies(o)["append"===r?"append":"prepend"](l.children()):l["append"===r?"appendTo":"prependTo"](o),t.remove(),a=this._getFreeSpaceRowElements(o),i(a,Fh),e.removeCount&&this._removeRowsElements(o,e.removeCount,r),this._restoreErrorRow(o),s.resolve()}).fail(s.reject):this.callBase.apply(this,arguments).done(()=>{"update"===r&&this._restoreErrorRow(o),s.resolve()}).fail(s.reject),s.promise().done(()=>{this._updateBottomLoading()})},_addVirtualRow(t,e,a,n){if(n){var r=this._createEmptyRow(Ya,e,n);r=this._wrapRowIfNeed(t,r),this._appendEmptyRow(t,r,a)}},_updateContentItemSizes(){var t=this._getRowHeights(),e=this._correctRowHeights(t);this._dataController.setContentItemSizes(e)},_updateViewportSize(t,e){(0,v.O9)(t)||(t=(0,R.P$)(this._hasHeight?this.element():(0,Q.zk)())),this._dataController.viewportHeight(t,e)},_getRowHeights(){var t,e,a=null===(e=null===(t=this.getController("editing"))||void 0===t?void 0:t.isPopupEditMode)||void 0===e?void 0:e.call(t),n=this._getRowElements(this._tableElement).toArray();return a&&(n=n.filter(r=>!(0,_.A)(r).hasClass("dx-row-inserted"))),n.map(r=>(0,se.N)(r).height)},_correctRowHeights(t){for(var e=this._dataController,a=e._dataSource,n=[],r=e.getVisibleRows(),s=0,o=!0,l=-1,d=0;d<t.length;d++){var h=r[d];(0,v.O9)(h)&&(!1===this.option($)?(l>=0&&l!==h.loadIndex&&(n.push(s),s=0),l=h.loadIndex):ja(h,a)&&(o?o=!1:(n.push(s),s=0)),s+=t[d])}return s>0&&n.push(s),n},_updateContentPosition(t){var e=this._dataController;if(e.viewportItemSize(this._rowHeight||20),be(this)||F.isVirtualRowRendering(this)){t||this._updateContentItemSizes();var n=e.getContentOffset("begin"),r=e.getContentOffset("end"),s=this.getTableElements(),o=s.children("tbody").children(".".concat(Ya));i(o,Ya),s.each((l,d)=>{var h=l>0,u=this._isFixedTableRendering;this._isFixedTableRendering=h,this._addVirtualRow((0,_.A)(d),h,"top",n),this._addVirtualRow((0,_.A)(d),h,"bottom",r),this._isFixedTableRendering=u})}},_isTableLinesDisplaysCorrect(t){return t.find(".".concat("dx-column-lines")).length>0===this.option("showColumnLines")},_isColumnElementsEqual(t,e){var a=t.length===e.length;return a&&(0,I.__)(t,(n,r)=>{if(r.style.width!==e[n].style.width)return a=!1}),a},_getCellClasses(t){var e=[],{cssClass:a}=t,n="expand"===t.command;return a&&e.push(a),n&&e.push(this.addWidgetPrefix("group-space")),e},_findBottomLoadPanel(t){var e=t||this.element(),a=e&&e.find(".".concat(this.addWidgetPrefix(Bh)));if(a&&a.length)return a},_updateBottomLoading(){var t=be(this),e=$e(this),a=!this._dataController.hasKnownLastPage()&&this._dataController.isLoaded()&&(t||e),n=this._findContentElement(),r=this._findBottomLoadPanel(n);a?r||(0,_.A)("<div>").addClass(this.addWidgetPrefix(Bh)).append(this._createComponent((0,_.A)("<div>"),yt.A).$element()).appendTo(n):r&&r.remove()},_handleScroll(t){var e=!0===this.option($);(this._scrollTop!==t.scrollOffset.top||t.forceUpdateScrollPosition)&&(this._hasHeight||!e&&0===t.scrollOffset.top)&&this._rowHeight&&(this._scrollTop=t.scrollOffset.top,(be(this)||"standard"!==this.option("scrolling.rowRenderingMode"))&&!1===this.option($)&&(this._updateContentItemSizes(),this._updateViewportSize(null,this._scrollTop)),this._dataController.setViewportPosition(t.scrollOffset.top)),this.callBase.apply(this,arguments)},_needUpdateRowHeight(t){return this.callBase.apply(this,arguments)||t>0&&$e(this)&&!F.isVirtualRowRendering(this)},_updateRowHeight(){if(this.callBase.apply(this,arguments),this._rowHeight){this._updateContentPosition();var t=(0,R.P$)(this._hasHeight?this.element():(0,Q.zk)()),e=this._dataController;!1===this.option($)?(this._updateViewportSize(t),e.updateViewport()):e.viewportSize(Math.ceil(t/this._rowHeight))}},updateFreeSpaceRowHeight(){var t=this.callBase.apply(this,arguments);return t&&this._updateContentPosition(),t},setLoading(t,e){var a=this._dataController,n=a.pageIndex()>0&&a.isLoaded()&&!!this._findBottomLoadPanel();!1===this.option($)&&t&&a.isViewportChanging()||(n&&(t=!1),this.callBase.call(this,t,e))},throwHeightWarningIfNeed(){void 0!==this._hasHeight&&!this._hasHeight&&Ne(this)&&!this._heightWarningIsThrown&&(this._heightWarningIsThrown=!0,J.A.log("W1025"))},_resizeCore(){var t=this,e=t.element();t.callBase(),this.throwHeightWarningIfNeed(),t.component.$element()&&!t._windowScroll&&(0,ht.A1)(e)&&(t._windowScroll=Dh(e,a=>{!t._hasHeight&&t._rowHeight&&t._dataController.setViewportPosition(a)},t.component.$element()),t.on("disposing",()=>{t._windowScroll.dispose()})),!1!==this.option($)&&t.loadIfNeed()},loadIfNeed(){var t,e=this._dataController;null===(t=e?.loadIfNeed)||void 0===t||t.call(e)},_restoreErrorRow(){if(!1===this.option($)){var t=this.getController("errorHandling");t?.removeErrorRow()}this.callBase.apply(this,arguments)},dispose(){clearTimeout(this._scrollTimeoutID),this.callBase()}}}(),nt={defaultOptions:()=>({scrolling:{timeout:300,updateTimeout:300,minTimeout:0,renderingThreshold:100,removeInvisiblePages:!0,rowPageSize:5,prerenderedRowChunkSize:1,mode:"standard",preloadEnabled:!1,rowRenderingMode:"standard",loadTwoPagesOnStart:!1,legacyMode:!1,prerenderedRowCount:1}}),extenders:{dataSourceAdapter:rE,controllers:{data:function(){var i={_refreshDataSource(){var t=this.callBase.apply(this,arguments)||(new w.cY).resolve().promise();return t.done(this.initVirtualRows.bind(this)),t},_loadDataSource(){var t;if(this._rowsScrollController&&Ne(this)){var{loadPageCount:e}=(0,v.O9)(this._loadViewportParams)?this.getLoadPageParams():{loadPageCount:void 0};e>=1&&(null===(t=this._dataSource)||void 0===t||t.loadPageCount(e))}return this.callBase.apply(this,arguments)},getRowPageSize(){var t=this.option("scrolling.rowPageSize"),e=this.pageSize();return e&&e<t?e:t},reload(){var t=this._rowsScrollController||this._dataSource,e=t&&t.getItemIndexByPosition(),a=this.callBase.apply(this,arguments);return a&&a.done(()=>{var n;if(be(this)||F.isVirtualRowRendering(this)){var r=this.getRowIndexOffset(),s=Math.floor(e)-r,{component:o}=this,l=o.getScrollable&&o.getScrollable(),d=this.dataSource().operationTypes().sorting;if(l&&!d&&s>=0){var h=o.getRowElement(s),u=h&&h[0]&&(0,_.A)(h[0]),c=u&&u.position().top,g=ge.A.chrome&&Number(null!==(n=ge.A.version)&&void 0!==n?n:0)>=91;c>(ge.A.mozilla||g?1:0)&&(c=Math.round(c+(0,R.P$)(u)*(e%1)),l.scrollTo({y:c}))}}})},initVirtualRows(){var t=F.isVirtualRowRendering(this);if(this._allItems=null,this._loadViewportParams=null,"virtual"!==this.option("scrolling.mode")&&!t||!t||!1!==this.option($)&&!this.option("scrolling.rowPageSize"))return this._visibleItems=null,void(this._rowsScrollController=null);var e=!be(this)&&this.pageIndex()>=this.pageCount()?this.pageCount()-1:this.pageIndex();this._rowPageIndex=Math.ceil(e*this.pageSize()/this.getRowPageSize()),this._visibleItems=!1===this.option($)?null:[],this._viewportChanging=!1,this._needUpdateViewportAfterLoading=!1,this._rowsScrollController||(this._rowsScrollController=new Dr(this.component,this._getRowsScrollDataOptions(),!0),this._rowsScrollController.positionChanged.add(()=>{var a;if(!1===this.option($))return this._viewportChanging=!0,this.loadViewport(),void(this._viewportChanging=!1);null===(a=this._dataSource)||void 0===a||a.setViewportItemIndex(this._rowsScrollController.getViewportItemIndex())})),!1===this.option($)&&this._updateLoadViewportParams(),this.isLoaded()&&!1!==this.option($)&&this._rowsScrollController.load()},isViewportChanging(){return this._viewportChanging},_getRowsScrollDataOptions(){var t=this,e=function(a){return ja(a,t._dataSource)};return{pageSize:()=>t.getRowPageSize(),loadedOffset(){var a;return be(t)&&(null===(a=t._dataSource)||void 0===a?void 0:a.lastLoadOptions().skip)||0},loadedItemCount:()=>t._itemCount,totalItemsCount:()=>Ne(t)?t.totalItemsCount():!1===t.option($)?t._itemCount:t._items.filter(e).length,hasKnownLastPage:()=>!1!==t.option($)||t.hasKnownLastPage(),pageIndex:a=>(void 0!==a&&(t._rowPageIndex=a),t._rowPageIndex),isLoading:()=>t.isLoading(),pageCount(){return Math.ceil(this.totalItemsCount()/this.pageSize())||1},load(){t._rowsScrollController.pageIndex()>=this.pageCount()&&(t._rowPageIndex=this.pageCount()-1,t._rowsScrollController.pageIndex(t._rowPageIndex)),(this.items().length||!this.totalItemsCount())&&t._rowsScrollController.handleDataChanged(a=>{(a=a||{}).changeType=a.changeType||"refresh",a.items=a.items||t._visibleItems,t._visibleItems.forEach((n,r)=>{n.rowIndex=r}),t._fireChanged(a)})},updateLoading(){},itemsCount(){return this.items(!0).length},correctCount:(a,n,r)=>Vh(a,n,r,(s,o,l)=>s.isNewRow?o&&!l:o&&l?!s.isNewRow:e(s)),items(a){var n=t._items;if(t.option($)){var r=t.dataSource(),s=r?.virtualItemsCount(),o=s?s.begin:0,l=t.getRowPageSize(),d=t._rowPageIndex*l-o,h=l;if(d<0)return[];d&&(d=this.correctCount(n,d),n=n.slice(d)),h&&(h=this.correctCount(n,h),n=n.slice(0,h))}return a?n.filter(e):n},viewportItems:a=>(a&&!1!==t.option($)&&(t._visibleItems=a),t._visibleItems),onChanged(){},changingDuration(){var a=t.dataSource();return a?.isLoading()&&!1!==t.option($)?300:a?._renderTime||0}}},_updateItemsCore(t){var e=this.getRowIndexDelta();if(this.callBase.apply(this,arguments),!1===this.option($)&&F.isVirtualRowRendering(this))"update"===t.changeType&&0===t.rowIndices.length&&t.cancelEmptyChanges&&(t.cancel=!0);else{var a=this._rowsScrollController;if(a){var n=this._visibleItems,r="refresh"===t.changeType||t.isLiveUpdate;if("append"===t.changeType&&t.items&&!t.items.length)return;r||"append"===t.changeType||"prepend"===t.changeType?(t.cancel=!0,r&&a.reset(!0),a.load()):("update"===t.changeType?t.rowIndices.forEach((s,o)=>{var l=t.changeTypes[o],d=t.items[o];"update"===l?n[s]=d:"insert"===l?n.splice(s,0,d):"remove"===l&&n.splice(s,1)}):(n.forEach((s,o)=>{n[o]=this._items[o+e]||n[o]}),t.items=n),function(i){i.forEach((t,e)=>{t.rowIndex=e})}(n))}}},_updateLoadViewportParams(){var t=this._rowsScrollController.getViewportParams(),e=this.pageSize();if(t&&!Ne(this)&&e>0){var a=this.pageIndex()*e;t.skip+=a}this._loadViewportParams=t},_processItems(){var t,e=this.callBase.apply(this,arguments);if(!1===this.option($)){var r,s,o,a=this._dataSource,n=null!==(t=a?.lastLoadOptions().skip)&&void 0!==t?t:0,l=!1,d=[];e.forEach(h=>{var{rowType:u}=h,c=ja(h,a),g="group"===u&&(r||c||"group"!==s&&n>0),m="data"===u&&c&&(r||"group"!==s);!h.isNewRow&&(0,v.O9)(r)&&(g||m)&&(!o||l)&&n++,(g||m)&&(l=!0),h.isNewRow?d.push(h):(d.forEach(x=>{x.loadIndex=n}),d=[]),h.loadIndex=n,r=c,s=u,o=h.isNewRow}),d.forEach(h=>{h.loadIndex=n})}return e},_afterProcessItems(t){if(this._itemCount=t.filter(s=>ja(s,this._dataSource)).length,(0,v.O9)(this._loadViewportParams)){this._updateLoadViewportParams();var e=t;if(this._allItems=t,t.length){var{skipForCurrentPage:a}=this.getLoadPageParams(!0),n=t[0].loadIndex+a,{take:r}=this._loadViewportParams;e=t.filter(s=>s.loadIndex>=n&&(s.loadIndex<n+r||s.isNewRow&&s.loadIndex===n&&0===r))}return e}return this.callBase.apply(this,arguments)},_applyChange(t){var e=this,{items:a}=t,{changeType:n}=t,{removeCount:r}=t;switch(r&&(r=Vh(e._items,r,"prepend"===n,(o,l)=>"data"===o.rowType&&!o.isNewRow||"group"===o.rowType&&(e._dataSource.isGroupItemCountable(o.data)||l)),t.removeCount=r),n){case"prepend":e._items.unshift.apply(e._items,a),r&&e._items.splice(-r);break;case"append":e._items.push.apply(e._items,a),r&&e._items.splice(0,r);break;default:e.callBase(t)}},items(t){return t?this._allItems||this._items:this._visibleItems||this._items},getRowIndexDelta(){var t=0;if(this.option($)){var e=this._visibleItems;e&&e[0]&&(t=this._items.indexOf(e[0]))}return t<0?0:t},getRowIndexOffset(t,e){var a,n,r=0,s=this.dataSource(),o=this._rowsScrollController,l=!1===this.option($),d=Ne(this);if(o&&!t)if(l&&(0,v.O9)(this._loadViewportParams)){var{skipForCurrentPage:h,pageIndex:u}=this.getLoadPageParams(!0),c=this.items(!0);if(r=d?u*this.pageSize():0,c.length){var g=c[0].loadIndex;r+=c.filter(f=>f.loadIndex<g+h).length}}else r=o.beginPageIndex()*o.pageSize();else if(d&&l&&s){var m=s.lastLoadOptions();r=e&&null!==(a=m.skips)&&void 0!==a&&a.length?m.skips.reduce((f,x)=>f+x,0):null!==(n=m.skip)&&void 0!==n?n:0}else be(this)&&s&&(r=s.beginPageIndex()*s.pageSize());return r},getDataIndex(){return!1===this.option($)?this.getRowIndexOffset(!0,!0):this.callBase.apply(this,arguments)},viewportSize(){var t=this._rowsScrollController,e=this._dataSource,a=t?.viewportSize.apply(t,arguments);return!1===this.option($)?a:e?.viewportSize.apply(e,arguments)},viewportHeight(t,e){var a;null===(a=this._rowsScrollController)||void 0===a||a.viewportHeight(t,e)},viewportItemSize(){var t=this._rowsScrollController,e=this._dataSource,a=t?.viewportItemSize.apply(t,arguments);return!1===this.option($)?a:e?.viewportItemSize.apply(e,arguments)},setViewportPosition(){var t=this._rowsScrollController,e=this._dataSource;this._isPaging=!1,t?t.setViewportPosition.apply(t,arguments):e?.setViewportPosition.apply(e,arguments)},setContentItemSizes(t){var e=this._rowsScrollController,a=this._dataSource,n=e?.setContentItemSizes(t);return!1===this.option($)?n:a?.setContentItemSizes(t)},getPreloadedRowCount(){var t=this.option("scrolling.preloadedRowCount"),e=this.option("scrolling.preloadEnabled");if((0,v.O9)(t))return t;var a=this.viewportSize();return e?2*a:a},getLoadPageParams(t){var e,a,n=this.pageSize(),r=this._loadViewportParams,s=null===(e=this._dataSource)||void 0===e?void 0:e.lastLoadOptions(),o=s?.pageIndex||0,l=s?.take||0,d=this._rowsScrollController.isScrollingBack(),h=d?this.getPreloadedRowCount():0,u=d?0:this.getPreloadedRowCount(),c=(null===(a=this._dataSource)||void 0===a?void 0:a.totalCountCorrection())||0,g=Math.max(0,r.skip-h),m=t?o:Math.floor(n?g/n:0),x=r.skip-m*n,T=Math.ceil(n?(t?l:r.take+x+u-c)/n:0);return{pageIndex:m,loadPageCount:Math.max(1,T),skipForCurrentPage:Math.max(0,x)}},_updateVisiblePageIndex(t){if(this._rowsScrollController){if((0,v.O9)(t))return this._silentOption(Br,t),void this.pageChanged.fire();var e=this._rowsScrollController.getViewportItemIndex(),a=Math.floor(e/this.pageSize());this.pageIndex()!==a&&(this._silentOption(Br,a),this.updateItems({changeType:"pageIndex"}))}},_getChangedLoadParams(){var t=this.getLoadPageParams(!0),{pageIndex:e,loadPageCount:a}=this.getLoadPageParams(),n=this._pageIndexIsValid(e),r=null;return!this._isLoading&&n&&(e!==t.pageIndex||a!==t.loadPageCount)&&(r={pageIndex:e,loadPageCount:a}),r},_pageIndexIsValid(t){var e=!0;return($e(this)&&this.hasKnownLastPage()||be(this))&&(e=t*this.pageSize()<this.totalItemsCount()),e},_loadItems(t,e){var a,n,r=Ne(this),s=this._dataSource,o=this._getChangedLoadParams(),l=null!==(a=s?.loadPageCount())&&void 0!==a?a:0,d=this.pageSize()*l,h=null!==(n=s?.pageIndex())&&void 0!==n?n:0,u=o?.pageIndex===h,c=$e(this)&&this.totalItemsCount()<d,g="repaint"===this.option("editing.refreshMode"),f=!1;if(!s||r&&t&&(g&&e||o?.pageIndex>h||u&&c))return f;if(r&&this._isLoading&&(this._needUpdateViewportAfterLoading=!0),r&&o){f=!0,s.pageIndex(o.pageIndex),s.loadPageCount(o.loadPageCount),this._repaintChangesOnly=!0,this._needUpdateDimensions=!0;var x=this._viewportChanging;this.load().always(()=>{this._repaintChangesOnly=void 0,this._needUpdateDimensions=void 0}).done(()=>{var b=this.pageCount()>0&&this.pageIndex()===this.pageCount()-1;(x||b)&&this._updateVisiblePageIndex(),this._needUpdateViewportAfterLoading&&(this._needUpdateViewportAfterLoading=!1,this.loadViewport({checkLoadedParamsOnly:!0}))})}return f},loadViewport(t){var e,a,n,{checkLoadedParamsOnly:r,checkLoading:s,viewportIsNotFilled:o}=t??{};if(Ne(this)||F.isVirtualRowRendering(this)){this._updateLoadViewportParams();var d=this._loadItems(s,!o),h=null===(e=this._dataSource)||void 0===e?void 0:e.isCustomLoading();if(!(d||s&&!h&&this._isLoading||r)){var g=!(null!==(n=null===(a=this.getController("editing"))||void 0===a?void 0:a.getChanges())&&void 0!==n&&n.length);this.updateItems({repaintChangesOnly:!0,needUpdateDimensions:!0,useProcessedItemsCache:g,cancelEmptyChanges:!0})}}},updateViewport(){var t,e,a=this.viewportSize(),n=this.items().length,r=a>n,s=null!==(e=null===(t=this._loadViewportParams)||void 0===t?void 0:t.take)&&void 0!==e?e:0,o=this._rowsScrollController,l=o?.getViewportParams().take;(r||s<l)&&!this._isPaging&&n&&this.loadViewport({checkLoading:!0,viewportIsNotFilled:r})},loadIfNeed(){if(!1!==this.option($)){var t=this._rowsScrollController;t&&t.loadIfNeed();var e=this._dataSource;return e&&e.loadIfNeed()}},getItemSize(){var t=this._rowsScrollController;if(t)return t.getItemSize.apply(t,arguments);var e=this._dataSource;return e&&e.getItemSize.apply(e,arguments)},getItemSizes(){var t=this._rowsScrollController;if(t)return t.getItemSizes.apply(t,arguments);var e=this._dataSource;return e&&e.getItemSizes.apply(e,arguments)},getContentOffset(){var t=this._rowsScrollController;if(t)return t.getContentOffset.apply(t,arguments);var e=this._dataSource;return e&&e.getContentOffset.apply(e,arguments)},refresh(t){var e=this._dataSource;return e&&t&&t.load&&$e(this)&&e.resetCurrentTotalCount(),this.callBase.apply(this,arguments)},dispose(){var t=this._rowsScrollController;t&&t.dispose(),this.callBase.apply(this,arguments)},topItemIndex(){var t;return null===(t=this._loadViewportParams)||void 0===t?void 0:t.skip},bottomItemIndex(){var t=this._loadViewportParams;return t&&t.skip+t.take},virtualItemsCount(){var t=this._rowsScrollController;if(t)return t.virtualItemsCount.apply(t,arguments);var e=this._dataSource;return e?.virtualItemsCount.apply(e,arguments)},pageIndex(t){var e,a=Ne(this),n=this._rowsScrollController;return!1===this.option($)&&a&&n&&void 0===t?null!==(e=this.option(Br))&&void 0!==e?e:0:this.callBase.apply(this,arguments)},_fireChanged(t){this.callBase.apply(this,arguments);var{operationTypes:e}=t;if(!1===this.option($)&&Ne(this)&&e){var{fullReload:a,pageIndex:n}=e;t.isDataChanged&&!a&&n&&this._updateVisiblePageIndex(this._dataSource.pageIndex())}},_getPagingOptionValue(t){var e=this.callBase.apply(this,arguments);return!1===this.option($)&&Ne(this)&&(e=this[t]()),e},isEmpty(){return!1===this.option($)?!this.items(!0).length:this.callBase(this,arguments)},isLastPageLoaded(){var t=!1;if(!1===this.option($)&&Ne(this)){var{pageIndex:e,loadPageCount:a}=this.getLoadPageParams(!0);t=e+a>=this.pageCount()}else t=this.callBase.apply(this,arguments);return t},reset(){this._itemCount=0,this._allItems=null,this.callBase.apply(this,arguments)},_applyFilter(){var t;null===(t=this._dataSource)||void 0===t||t.loadPageCount(1),this.callBase.apply(this,arguments)}};return F.proxyMethod(i,"getVirtualContentSize"),F.proxyMethod(i,"setViewportItemIndex"),i}(),resizing:{_updateMasterDataGridCore(i){return(0,w.z7)(this.callBase.apply(this,arguments)).done(t=>{var e=be(i)&&!1===i.option($);!t&&e&&i.getScrollable()&&i.updateDimensions()})},hasResizeTimeout(){return!!this._resizeTimeout},resize(){var t,{callBase:i}=this;if(be(this)||F.isVirtualRowRendering(this)){clearTimeout(this._resizeTimeout),this._resizeTimeout=null;var e=new Date-this._lastTime,a=this.option("scrolling.updateTimeout");this._lastTime&&e<a?(t=new w.cY,this._resizeTimeout=setTimeout(()=>{this._resizeTimeout=null,i.apply(this).done(t.resolve).fail(t.reject),this._lastTime=new Date},a),this._lastTime=new Date):(t=i.apply(this),this._dataController.isLoaded()&&(this._lastTime=new Date))}else t=i.apply(this);return t},dispose(){this.callBase.apply(this,arguments),clearTimeout(this._resizeTimeout)}}},views:{rowsView:sE}}},oE=nt.defaultOptions,dE=nt.extenders.dataSourceAdapter;nt.extenders.controllers.data=(0,y.X)({},nt.extenders.controllers.data,{_loadOnOptionChange(){var i=this._dataSource&&this._dataSource._virtualScrollController;i&&i.reset(),this.callBase()}}),nt.extenders.dataSourceAdapter=(0,y.X)({},dE,{changeRowExpand(){return this.callBase.apply(this,arguments).done(()=>{var i=this.getViewportItemIndex();i>=0&&this.setViewportItemIndex(i)})}}),G.registerModule("virtualScrolling",(0,y.X)({},nt,{defaultOptions:()=>(0,y.X)(!0,oE(),{scrolling:{mode:"virtual"}})})),Kl.extend(nt.extenders.dataSourceAdapter);var Qa=D(4831),Ph=(i,t)=>{var n,e=(0,_.A)((0,Q.zk)()),{top:a}=i.offset();if((0,v.kf)(t)){if(t<a)return a-t;n=(0,R.yV)(e)-t+e.scrollTop()}else{var r=a-e.scrollTop(),s=(0,R.yV)(e)-r-(0,R.P$)(i);n=Math.max(r,s)}return.9*n},uE=D(4017);const Fr=class pE extends Cd{_getDefaultOptions(){return(0,y.X)(super._getDefaultOptions(),{orientation:"horizontal",tabIndex:null,onHoverStart:V.lQ})}_initDataAdapter(){this._dataAdapter=this.option("_dataAdapter"),this._dataAdapter||super._initDataAdapter()}_renderContentImpl(){this._renderContextMenuOverlay(),super._renderContentImpl();var t=this._dataAdapter.getNodeByKey(this.option("_parentKey"));t&&this._renderItems(this._getChildNodes(t)),this._renderDelimiter()}_renderDelimiter(){this.$contentDelimiter=(0,_.A)("<div>").appendTo(this._itemContainer()).addClass("dx-context-menu-content-delimiter")}_getOverlayOptions(){return(0,y.X)(!0,super._getOverlayOptions(),{onPositioned:this._overlayPositionedActionHandler.bind(this),position:{precise:!0}})}_overlayPositionedActionHandler(t){this._showDelimiter(t)}_hoverEndHandler(t){super._hoverEndHandler(t),this._toggleFocusClass(!1,t.currentTarget)}_isMenuHorizontal(){return"horizontal"===this.option("orientation")}_hoverStartHandler(t){this.option("onHoverStart")(t),super._hoverStartHandler(t),this._toggleFocusClass(!0,t.currentTarget)}_drawSubmenu(t){this._actions.onShowing({rootItem:(0,Y.c)(t),submenu:this}),super._drawSubmenu(t),this._actions.onShown({rootItem:(0,Y.c)(t),submenu:this})}_hideSubmenu(t){this._actions.onHiding({cancel:!0,rootItem:(0,Y.c)(t),submenu:this}),super._hideSubmenu(t),this._actions.onHidden({rootItem:(0,Y.c)(t),submenu:this})}_showDelimiter(t){if(this.$contentDelimiter){var e=this._itemContainer().children(".".concat("dx-submenu")).eq(0),a=this.option("position").of.find(".dx-context-menu-container-border"),n={of:e,precise:!0},r=t.position,s=r.v.location,o=r.h.location,l=a.offset(),d=Math.round(l.left),h=Math.round(l.top),u=(0,R.RG)(a),c=(0,R.Oq)(a),g=(0,R.RG)(e),m=(0,R.Oq)(e);this.$contentDelimiter.css("display","block"),(0,R.zj)(this.$contentDelimiter,this._isMenuHorizontal()?u<g?u:g:3),(0,R.k$)(this.$contentDelimiter,this._isMenuHorizontal()?3:c<m?c:m),this._isMenuHorizontal()?s>h?Math.round(o)===d?(n.offset="0 -2.5",n.at=n.my="left top"):(n.offset="0 -2.5",n.at=n.my="right top"):((0,R.k$)(this.$contentDelimiter,5),Math.round(o)===d?(n.offset="0 5",n.at=n.my="left bottom"):(n.offset="0 5",n.at=n.my="right bottom")):o>d?Math.round(s)===h?(n.offset="-2.5 0",n.at=n.my="left top"):(n.offset="-2.5 0",n.at=n.my="left bottom"):Math.round(s)===h?(n.offset="2.5 0",n.at=n.my="right top"):(n.offset="2.5 0",n.at=n.my="right bottom"),Se.A.setup(this.$contentDelimiter,n)}}_getContextMenuPosition(){return this.option("position")}isOverlayVisible(){return this._overlay.option("visible")}getOverlayContent(){return this._overlay.$content()}};var Ft="dx-menu",_E=Ft+"-vertical",Lh=Ft+"-horizontal",Mr=Ft+"-item",kh=Ft+"-items-container",Vr=Mr+"-expanded",qa="dx-context-menu",Pr=qa+"-container-border",Nh="dx-state-hover",Za=Ft+"-adaptive-mode",Hh=Ft+"-hamburger-button",xE=Za+"-overlay-wrapper",Gi="showSubmenu",ui="nextItem",mt="prevItem",SE={show:50,hide:300},zh=["onSubmenuShowing","onSubmenuShown","onSubmenuHiding","onSubmenuHidden","onItemContextMenu","onItemClick","onSelectionChanged","onItemRendered"];class Kh extends od{_getDefaultOptions(){return(0,y.X)(super._getDefaultOptions(),{orientation:"horizontal",submenuDirection:"auto",showFirstSubmenuMode:{name:"onClick",delay:{show:50,hide:300}},hideSubmenuOnMouseLeave:!1,onSubmenuShowing:null,onSubmenuShown:null,onSubmenuHiding:null,onSubmenuHidden:null,adaptivityEnabled:!1})}_setOptionsByReference(){super._setOptionsByReference(),(0,y.X)(this._optionsByReference,{animation:!0,selectedItem:!0})}_itemElements(){var t=super._itemElements(),e=this._submenuItemElements();return t.add(e)}_submenuItemElements(){var t=[],e=".".concat(Mr),a=this._submenus.length&&this._submenus[0];return a&&a.itemsContainer()&&(t=a.itemsContainer().find(e)),t}_focusTarget(){return this.$element()}_isMenuHorizontal(){return"horizontal"===this.option("orientation")}_moveFocus(t){var s,l,e=this._getAvailableItems(),a=this._isMenuHorizontal(),n=this._getActiveItem(!0);switch(t){case"up":s=a?Gi:this._getItemsNavigationOperation(mt),l=this._getKeyboardNavigationAction(s,a?n:e)();break;case"down":s=a?Gi:this._getItemsNavigationOperation(ui),l=this._getKeyboardNavigationAction(s,a?n:e)();break;case"right":s=a?this._getItemsNavigationOperation(ui):Gi,l=this._getKeyboardNavigationAction(s,a?e:n)();break;case"left":s=a?this._getItemsNavigationOperation(mt):Gi,l=this._getKeyboardNavigationAction(s,a?e:n)();break;default:return super._moveFocus(t)}l&&0!==l.length&&this.option("focusedElement",(0,Y.c)(l))}_getItemsNavigationOperation(t){var e=t;return this.option("rtlEnabled")&&(e=t===mt?ui:mt),e}_getKeyboardNavigationAction(t,e){var a=V.lQ;switch(t){case Gi:e.hasClass("dx-state-disabled")||(a=this._showSubmenu.bind(this,e));break;case ui:a=this._nextItem.bind(this,e);break;case mt:a=this._prevItem.bind(this,e)}return a}_clean(){super._clean(),this.option("templatesRenderAsynchronously")&&clearTimeout(this._resizeEventTimer)}_visibilityChanged(t){t&&(this._menuItemsWidth||this._updateItemsWidthCache(),this._dimensionChanged())}_isAdaptivityEnabled(){return this.option("adaptivityEnabled")&&"horizontal"===this.option("orientation")}_updateItemsWidthCache(){var t=this.$element().find("ul").first().children("li").children(".".concat(Mr));this._menuItemsWidth=this._getSummaryItemsSize("width",t,!0)}_dimensionChanged(){if(this._isAdaptivityEnabled()){var t=(0,R.Ot)(this.$element());this._toggleAdaptiveMode(this._menuItemsWidth>t)}}_init(){super._init(),this._submenus=[]}_initActions(){this._actions={},(0,I.__)(zh,(t,e)=>{this._actions[e]=this._createActionByOption(e)})}_initMarkup(){this._visibleSubmenu=null,this.$element().addClass(Ft),super._initMarkup(),this._addCustomCssClass(this.$element()),this.setAria("role","menubar")}_render(){super._render(),this._initAdaptivity()}_renderHamburgerButton(){return this._hamburger=new _e.A((0,_.A)("<div>").addClass(Hh),{icon:"menu",activeStateEnabled:!1,onClick:this._toggleTreeView.bind(this)}),this._hamburger.$element()}_toggleTreeView(t){(0,v.Qd)(t)&&(t=!this._overlay.option("visible")),this._overlay.option("visible",t),this._toggleHamburgerActiveState(t)}_toggleHamburgerActiveState(t){this._hamburger&&this._hamburger.$element().toggleClass("dx-state-active",t)}_toggleAdaptiveMode(t){var e=this.$element().find(".".concat(Lh)),a=this.$element().find(".".concat(Za));t?this._hideVisibleSubmenu():(this._treeView&&this._treeView.collapseAll(),this._overlay&&this._toggleTreeView(t)),e.toggle(!t),a.toggle(t)}_removeAdaptivity(){this._$adaptiveContainer&&(this._toggleAdaptiveMode(!1),this._$adaptiveContainer.remove(),this._$adaptiveContainer=null,this._treeView=null,this._hamburger=null,this._overlay=null)}_treeviewItemClickHandler(t){this._actions.onItemClick(t),t.node.children.length||this._toggleTreeView(!1)}_getAdaptiveOverlayOptions(){var e=this.option("rtlEnabled")?"right":"left";return{_ignoreFunctionValueDeprecation:!0,maxHeight:()=>Ph(this.$element()),deferRendering:!1,shading:!1,animation:!1,hideOnParentScroll:!0,onHidden:()=>{this._toggleHamburgerActiveState(!1)},height:"auto",hideOnOutsideClick:a=>!(0,_.A)(a.target).closest(".".concat(Hh)).length,position:{collision:"flipfit",at:"bottom "+e,my:"top "+e,of:this._hamburger.$element()}}}_getTreeViewOptions(){var t={};return(0,I.__)(["rtlEnabled","width","accessKey","activeStateEnabled","animation","dataSource","disabled","displayExpr","displayExpr","focusStateEnabled","hint","hoverStateEnabled","itemsExpr","items","itemTemplate","selectedExpr","selectionMode","tabIndex","visible"],(e,a)=>{t[a]=this.option(a)}),(0,I.__)(["onItemContextMenu","onSelectionChanged","onItemRendered"],(e,a)=>{t[a]=n=>{this._actions[a](n)}}),(0,y.X)(t,{dataSource:this.getDataSource(),animationEnabled:!!this.option("animation"),onItemClick:this._treeviewItemClickHandler.bind(this),onItemExpanded:e=>{this._overlay.repaint(),this._actions.onSubmenuShown(e)},onItemCollapsed:e=>{this._overlay.repaint(),this._actions.onSubmenuHidden(e)},selectNodesRecursive:!1,selectByClick:this.option("selectByClick"),expandEvent:"click"})}_initAdaptivity(){if(this._isAdaptivityEnabled()){this._$adaptiveContainer=(0,_.A)("<div>").addClass(Za);var t=this._renderHamburgerButton();this._treeView=this._createComponent((0,_.A)("<div>"),Si,this._getTreeViewOptions()),this._overlay=this._createComponent((0,_.A)("<div>"),jt.A,this._getAdaptiveOverlayOptions()),this._overlay.$content().append(this._treeView.$element()).addClass(Za).addClass(this.option("cssClass")),this._overlay.$wrapper().addClass(xE),this._$adaptiveContainer.append(t),this._$adaptiveContainer.append(this._overlay.$element()),this.$element().append(this._$adaptiveContainer),this._updateItemsWidthCache(),this._dimensionChanged()}}_getDelay(t){var e=this.option("showFirstSubmenuMode").delay;return(0,v.O9)(e)?(0,v.Gv)(e)?e[t]:e:SE[t]}_keyboardHandler(t){return super._keyboardHandler(t,!!this._visibleSubmenu)}_renderContainer(){var t=(0,_.A)("<div>");return t.appendTo(this.$element()).addClass(this._isMenuHorizontal()?Lh:_E),super._renderContainer(t)}_renderSubmenuItems(t,e){var a=this._createSubmenu(t,e);return this._submenus.push(a),this._renderBorderElement(e),a}_getKeyboardListeners(){return super._getKeyboardListeners().concat(this._visibleSubmenu)}_createSubmenu(t,e){var a=(0,_.A)("<div>").addClass(qa).appendTo(e),n=this._getChildNodes(t),r=this._createComponent(a,Fr,(0,y.X)(this._getSubmenuOptions(),{_dataAdapter:this._dataAdapter,_parentKey:t.internalFields.key,items:n,onHoverStart:this._clearTimeouts.bind(this),position:this.getSubmenuPosition(e)}));return this._attachSubmenuHandlers(e,r),r}_getSubmenuOptions(){var t=(0,_.A)("<div>"),e=this._isMenuHorizontal();return{itemTemplate:this.option("itemTemplate"),target:t,orientation:this.option("orientation"),selectionMode:this.option("selectionMode"),cssClass:this.option("cssClass"),selectByClick:this.option("selectByClick"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),showSubmenuMode:this.option("showSubmenuMode"),displayExpr:this.option("displayExpr"),disabledExpr:this.option("disabledExpr"),selectedExpr:this.option("selectedExpr"),itemsExpr:this.option("itemsExpr"),onFocusedItemChanged:a=>{a.component.option("visible")&&this.option("focusedElement",a.component.option("focusedElement"))},onSelectionChanged:this._nestedItemOnSelectionChangedHandler.bind(this),onItemClick:this._nestedItemOnItemClickHandler.bind(this),onItemRendered:this._nestedItemOnItemRenderedHandler.bind(this),onLeftFirstItem:e?null:this._moveMainMenuFocus.bind(this,mt),onLeftLastItem:e?null:this._moveMainMenuFocus.bind(this,ui),onCloseRootSubmenu:this._moveMainMenuFocus.bind(this,e?mt:null),onExpandLastSubmenu:e?this._moveMainMenuFocus.bind(this,ui):null}}_getShowFirstSubmenuMode(){if(!this._isDesktopDevice())return"onClick";var t=this.option("showFirstSubmenuMode");return(0,v.Gv)(t)?t.name:t}_moveMainMenuFocus(t){var e=this._getAvailableItems(),a=e.length,n=e.filter(".".concat(Vr)).eq(0),r=e.index(n);this._hideSubmenu(this._visibleSubmenu),(r+=t===mt?-1:1)>=a?r=0:r<0&&(r=a-1);var s=e.eq(r);this.option("focusedElement",(0,Y.c)(s))}_nestedItemOnSelectionChangedHandler(t){var e=t.addedItems.length&&t.addedItems[0],a=Fr.getInstance(t.element);(0,this._actions.onSelectionChanged)(t),e&&this._clearSelectionInSubmenus(e[0],a),this._clearRootSelection(),this._setOptionWithoutOptionChange("selectedItem",e)}_clearSelectionInSubmenus(t,e){var a=!arguments.length;(0,I.__)(this._submenus,(n,r)=>{var s=r._itemContainer(),o=!s.is(e&&e._itemContainer()),l=s.find(".".concat(this._selectedItemClass()));if(o&&l.length||a){l.removeClass(this._selectedItemClass());var d=this._getItemData(l);d&&(d.selected=!1),r._clearSelectedItems()}})}_clearRootSelection(){var t=this.$element().find(".".concat(kh)).first().children().children().filter(".".concat(this._selectedItemClass()));t.length&&(this._getItemData(t).selected=!1,t.removeClass(this._selectedItemClass()))}_nestedItemOnItemClickHandler(t){this._actions.onItemClick(t)}_nestedItemOnItemRenderedHandler(t){this._actions.onItemRendered(t)}_attachSubmenuHandlers(t,e){var n=e.getOverlayContent().find(".".concat("dx-submenu")),r=(0,P.b4)(uE._,this.NAME+"_submenu");e.option({onShowing:this._submenuOnShowingHandler.bind(this,t,e),onShown:this._submenuOnShownHandler.bind(this,t,e),onHiding:this._submenuOnHidingHandler.bind(this,t,e),onHidden:this._submenuOnHiddenHandler.bind(this,t,e)}),(0,I.__)(n,(s,o)=>{O.A.off(o,r),O.A.on(o,r,null,this._submenuMouseLeaveHandler.bind(this,t))})}_submenuOnShowingHandler(t,e){var a=t.children(".".concat(Pr));this._actions.onSubmenuShowing({rootItem:(0,Y.c)(t),submenu:e}),a.show(),t.addClass(Vr)}_submenuOnShownHandler(t,e){this._actions.onSubmenuShown({rootItem:(0,Y.c)(t),submenu:e})}_submenuOnHidingHandler(t,e,a){var n=t.children(".".concat(Pr)),r=a;r.rootItem=(0,Y.c)(t),r.submenu=e,this._actions.onSubmenuHiding(r),(a=r).cancel||(this._visibleSubmenu===e&&(this._visibleSubmenu=null),n.hide(),t.removeClass(Vr))}_submenuOnHiddenHandler(t,e){this._actions.onSubmenuHidden({rootItem:(0,Y.c)(t),submenu:e})}_submenuMouseLeaveHandler(t,e){var a=(0,_.A)(e.relatedTarget).parents(".".concat(qa))[0],n=this._getSubmenuByRootElement(t).getOverlayContent()[0];this.option("hideSubmenuOnMouseLeave")&&a!==n&&(this._clearTimeouts(),setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide")))}_hideSubmenuAfterTimeout(){if(this._visibleSubmenu){var t=(0,_.A)(this._visibleSubmenu.$element().context).hasClass(Nh),e=this._visibleSubmenu.getOverlayContent().find(".".concat(Nh)).length;!this._visibleSubmenu.getOverlayContent().get(0).querySelector(":hover")&&!e&&!t&&this._visibleSubmenu.hide()}}_getSubmenuByRootElement(t){if(!t)return!1;var e=t.children(".".concat(qa));return e.length&&Fr.getInstance(e)}getSubmenuPosition(t){var e=this._isMenuHorizontal(),a=this.option("submenuDirection").toLowerCase(),n=this.option("rtlEnabled"),r={collision:"flip",of:t,precise:!0};switch(a){case"leftortop":r.at="left top",r.my=e?"left bottom":"right top";break;case"rightorbottom":r.at=e?"left bottom":"right top",r.my="left top";break;default:e?(r.at=n?"right bottom":"left bottom",r.my=n?"right top":"left top"):(r.at=n?"left top":"right top",r.my=n?"right top":"left top")}return r}_renderBorderElement(t){(0,_.A)("<div>").appendTo(t).addClass(Pr).hide()}_itemPointerDownHandler(t){(0,_.A)(t.target).closest(this._itemElements()).hasClass("dx-menu-item-has-submenu")?this.option("focusedElement",null):super._itemPointerDownHandler(t)}_hoverStartHandler(t){var e=(0,P.b4)(te.A.move,this.NAME),a=this._getItemElementByEventArgs(t),n=this._dataAdapter.getNodeByItem(this._getItemData(a)),r=(0,v.O9)(t.buttons)&&1===t.buttons||!(0,v.O9)(t.buttons)&&1===t.which;if(!this._isItemDisabled(a)){if(O.A.off(a,e),!this._hasChildren(n))return void(this._showSubmenuTimer=setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide")));if("onHover"===this._getShowFirstSubmenuMode()&&!r){var s=this._getSubmenuByElement(a);this._clearTimeouts(),s.isOverlayVisible()||(O.A.on(a,e,this._itemMouseMoveHandler.bind(this)),this._showSubmenuTimer=this._getDelay("hide"))}}}_hoverEndHandler(t){var e=this._getItemElementByEventArgs(t),a=(0,_.A)(t.relatedTarget);super._hoverEndHandler(t),this._clearTimeouts(),!this._isItemDisabled(e)&&(a.hasClass("dx-context-menu-content-delimiter")||this.option("hideSubmenuOnMouseLeave")&&!a.hasClass(kh)&&(this._hideSubmenuTimer=setTimeout(()=>{this._hideSubmenuAfterTimeout()},this._getDelay("hide"))))}_hideVisibleSubmenu(){return!!this._visibleSubmenu&&(this._hideSubmenu(this._visibleSubmenu),!0)}_showSubmenu(t){var e=this._getSubmenuByElement(t);this._visibleSubmenu!==e&&this._hideVisibleSubmenu(),e&&(this._clearTimeouts(),this.focus(),e.show(),this.option("focusedElement",e.option("focusedElement"))),this._visibleSubmenu=e,this._hoveredRootItem=t}_hideSubmenu(t){t&&t.hide(),this._visibleSubmenu===t&&(this._visibleSubmenu=null),this._hoveredRootItem=null}_itemMouseMoveHandler(t){if(!t.pointers||!t.pointers.length){var e=(0,_.A)(t.currentTarget);(0,v.O9)(this._showSubmenuTimer)&&(this._clearTimeouts(),this._showSubmenuTimer=setTimeout(()=>{var a=this._getSubmenuByElement(e);a&&!a.isOverlayVisible()&&this._showSubmenu(e)},this._getDelay("show")))}}_clearTimeouts(){clearTimeout(this._hideSubmenuTimer),clearTimeout(this._showSubmenuTimer)}_getSubmenuByElement(t,e){var a=this._getSubmenuByRootElement(t);if(a)return a;e=e||this._getItemData(t);var n=this._dataAdapter.getNodeByItem(e);return this._hasChildren(n)&&this._renderSubmenuItems(n,t)}_updateSubmenuVisibilityOnClick(t){var e=t.args.length&&t.args[0];if(e&&!this._disabledGetter(e.itemData)){var a=(0,_.A)(e.itemElement),n=this._getSubmenuByElement(a,e.itemData);if(this._updateSelectedItemOnClick(t),this._visibleSubmenu){if(this._visibleSubmenu===n)return void("onClick"===this.option("showFirstSubmenuMode")&&this._hideSubmenu(this._visibleSubmenu));this._hideSubmenu(this._visibleSubmenu)}if(n&&!n.isOverlayVisible())return void this._showSubmenu(a)}}_optionChanged(t){if(zh.indexOf(t.name)>=0)this._initActions();else switch(t.name){case"orientation":case"submenuDirection":this._invalidate();break;case"showFirstSubmenuMode":case"hideSubmenuOnMouseLeave":break;case"showSubmenuMode":this._changeSubmenusOption(t.name,t.value);break;case"adaptivityEnabled":t.value?this._initAdaptivity():this._removeAdaptivity();break;case"width":this._isAdaptivityEnabled()&&(this._treeView.option(t.name,t.value),this._overlay.option(t.name,t.value)),super._optionChanged(t),this._dimensionChanged();break;case"animation":this._isAdaptivityEnabled()&&this._treeView.option("animationEnabled",!!t.value),super._optionChanged(t);break;default:this._isAdaptivityEnabled()&&(t.name===t.fullName||"items"===t.name)&&this._treeView.option(t.fullName,t.value),super._optionChanged(t)}}_changeSubmenusOption(t,e){(0,I.__)(this._submenus,(a,n)=>{n.option(t,e)})}selectItem(t){this._hideSubmenu(this._visibleSubmenu),super.selectItem(t)}unselectItem(t){this._hideSubmenu(this._visibleSubmenu),super.selectItem(t)}}(0,le.A)("dxMenu",Kh);const Wh=Kh;var Lr={"=":"filter-operation-equals","<>":"filter-operation-not-equals","<":"filter-operation-less","<=":"filter-operation-less-equal",">":"filter-operation-greater",">=":"filter-operation-greater-equal",default:"filter-operation-default",notcontains:"filter-operation-not-contains",contains:"filter-operation-contains",startswith:"filter-operation-starts-with",endswith:"filter-operation-ends-with",between:"filter-operation-between"},Gh={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",between:"between"},Ui="filter-row",Ja="filter-range-overlay",en="filter-range-start",$h="dx-menu",Xh="dx-editor-with-menu",Mt="dx-editor-container",kr="dx-editor-cell",Nr="dx-highlight-outline",Yh="dx-focused",Hr="dx-filter-range-content",zr="dx-filter-modified",$i="input:not([type='hidden'])",DE=["date","datetime","number"],BE=A.A.format("dxDataGrid-ariaSearchBox");function ci(i){return"onClick"===i.option("filterRow.applyFilter")}var Kr=function(i){var t=i&&i.children(),e=t&&t.data("dxComponents"),a=e&&e.length&&t.data(e[0]);return a instanceof Qa.A?a:null},FE=function(){var i=function(r,s){var o="",l="",d=t(r,s),h=F.getFormatOptionsByColumn(s,"filterRow");return Array.isArray(d)?(o=F.formatValue(d[0],h),""!==(l=F.formatValue(d[1],h))&&(o+=" - ".concat(l))):(0,v.O9)(d)&&(o=F.formatValue(d,h)),o};function t(r,s){if(s)return ci(r)&&void 0!==s.bufferedFilterValue?s.bufferedFilterValue:s.filterValue}var e=function(r,s){if(s)return ci(r)&&void 0!==s.bufferedSelectedFilterOperation?s.bufferedSelectedFilterOperation:s.selectedFilterOperation},a=function(r,s,o){var c,g,l=r._columnsController.columnOption(s),d=t(r,l),h=o.closest(".".concat(r.addWidgetPrefix(Ja))).length,u=o.hasClass(r.addWidgetPrefix(en));return d&&Array.isArray(d)&&"between"===e(r,l)?u?d[0]:d[1]:h||(c=d,(g=l)&&DE.includes(g.dataType)&&Array.isArray(c)||void 0===c)?null:d};return{_updateEditorValue(r,s){var o=Kr(s);o&&o.option("value",a(this,r.index,s))},_columnOptionChanged(r){var o,l,d,h,{optionNames:s}=r;if(F.checkChanges(s,["filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","filterValues","filterType"])&&void 0!==r.columnIndex){var u=this._columnsController.getVisibleIndex(r.columnIndex),c=this._columnsController.columnOption(r.columnIndex);if(l=(o=this._getCellElement(this.element().find(".".concat(this.addWidgetPrefix(Ui))).index(),u)||(0,_.A)()).find(".".concat(Mt)).first(),s.filterValue||s.bufferedFilterValue){this._updateEditorValue(c,l);var g=o.find(".".concat(this.addWidgetPrefix(Ja))).data("dxOverlay");g&&(d=g.$content().find(".".concat(Mt)),this._updateEditorValue(c,d.first()),this._updateEditorValue(c,d.last())),(!g||!g.option("visible"))&&this._updateFilterRangeContent(o,i(this,c))}(s.selectedFilterOperation||s.bufferedSelectedFilterOperation)&&u>=0&&c&&(h=o.find(".".concat($h))).length&&(this._updateFilterOperationChooser(h,c,l),"between"===e(this,c)?this._renderFilterRangeContent(o,c):l.find(".".concat(Hr)).length&&(this._renderEditor(l,this._getEditorOptions(l,c)),this._hideFilterRange()))}else this.callBase(r)},_renderCore(){return this._filterRangeOverlayInstance=null,this.callBase.apply(this,arguments)},_resizeCore(){this.callBase.apply(this,arguments),this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.repaint()},isFilterRowVisible(){return this._isElementVisible(this.option("filterRow"))},isVisible(){return this.callBase()||this.isFilterRowVisible()},init(){this.callBase(),this._applyFilterViewController=this.getController("applyFilter")},_initFilterRangeOverlay(r,s){var o=this,l={},d=r.find(".dx-editor-container"),h=o.addWidgetPrefix(Ja),u=(0,_.A)("<div>").addClass(h).appendTo(r);return o._createComponent(u,jt.A,{height:"auto",shading:!1,showTitle:!1,focusStateEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:h},animation:!1,position:{my:"top",at:"top",of:d.length&&d||r,offset:"0 -1"},contentTemplate(c){var g,m=(0,_.A)("<div>").addClass("".concat(Mt," ").concat(o.addWidgetPrefix(en))).appendTo(c);return s=o._columnsController.columnOption(s.index),(g=o._getEditorOptions(m,s)).sharedData=l,o._renderEditor(m,g),O.A.on(m.find($i),"keydown",f=>{var x=r.find("[tabindex]").not(f.target).first();"tab"===(0,P.YD)(f)&&f.shiftKey&&(f.preventDefault(),o._hideFilterRange(),x.length||(x=r.prev().find("[tabindex]").last()),O.A.trigger(x,"focus"))}),m=(0,_.A)("<div>").addClass("".concat(Mt," ").concat(o.addWidgetPrefix("filter-range-end"))).appendTo(c),(g=o._getEditorOptions(m,s)).sharedData=l,o._renderEditor(m,g),O.A.on(m.find($i),"keydown",f=>{"tab"===(0,P.YD)(f)&&!f.shiftKey&&(f.preventDefault(),o._hideFilterRange(),O.A.trigger(r.next().find("[tabindex]").first(),"focus"))}),(0,_.A)(c).addClass(o.getWidgetContainerClass())},onShown(c){var g=c.component.$content().find(".".concat(Mt)).first();O.A.trigger(g.find($i),"focus")},onHidden(){s=o._columnsController.columnOption(s.index),r.find(".".concat($h)).parent().addClass(Xh),"between"===e(o,s)&&(o._updateFilterRangeContent(r,i(o,s)),o.component.updateDimensions())}})},_updateFilterRangeOverlay(r){var s=this._filterRangeOverlayInstance;s&&s.option(r)},_showFilterRange(r,s){var o=r.children(".".concat(this.addWidgetPrefix(Ja))),l=o.length&&o.data("dxOverlay");!l&&s&&(l=this._initFilterRangeOverlay(r,s)),l.option("visible")||(this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.hide(),this._filterRangeOverlayInstance=l,this._updateFilterRangeOverlay({width:(0,R.Ot)(r,!0)+1}),this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.show())},_hideFilterRange(){var r=this._filterRangeOverlayInstance;r&&r.hide()},getFilterRangeOverlayInstance(){return this._filterRangeOverlayInstance},_createRow(r){var s=this.callBase(r);return"filter"===r.rowType&&(s.addClass(this.addWidgetPrefix(Ui)),this.option("useLegacyKeyboardNavigation")||O.A.on(s,"keydown",o=>Kn("filterRow",this,o))),s},_getRows(){var r=this.callBase();return this.isFilterRowVisible()&&r.push({rowType:"filter"}),r},_renderFilterCell(r,s){var{column:o}=s,l=(0,_.A)(r);this.component.option("showColumnHeaders")&&this.setAria("describedby",o.headerId,l),this.setAria("label",A.A.format("dxDataGrid-ariaFilterCell"),l),l.addClass(kr);var d=(0,_.A)("<div>").appendTo(l),h=(0,_.A)("<div>").addClass(Mt).appendTo(d);if("between"===e(this,o))this._renderFilterRangeContent(l,o);else{var u=this._getEditorOptions(h,o);this._renderEditor(h,u)}var{alignment:c}=o;c&&"center"!==c&&l.find($i).first().css("textAlign",o.alignment),o.filterOperations&&o.filterOperations.length&&this._renderFilterOperationChooser(d,o,h)},_renderCellContent(r,s){var o=this,{column:l}=s;if("filter"===s.rowType)if(l.command)r.html("&nbsp;");else if(l.allowFiltering)return void o.renderTemplate(r,o._renderFilterCell.bind(o),s).done(()=>{o._updateCell(r,s)});this.callBase.apply(this,arguments)},_getEditorOptions(r,s){var o=this,l={editorOptions:{inputAttr:o._getFilterInputAccessibilityAttributes(s)}},d=(0,y.X)(l,s,{value:a(o,s.index,r),parentType:"filterRow",showAllText:o.option("filterRow.showAllText"),updateValueTimeout:"onClick"===o.option("filterRow.applyFilter")?0:700,width:null,setValue(h,u){!function(r,s){var o=""===s.value?null:s.value,l=s.container,d=r._columnsController.columnOption(s.column.index),h=a(r,d.index,l);if((0,v.O9)(h)||(0,v.O9)(o)){r._applyFilterViewController.setHighLight(l,h!==o);var u=ci(r)?"bufferedFilterValue":"filterValue",c=function(f,x,b,S){if("between"===e(f,b)){var T=t(f,b);return S.hasClass(f.addWidgetPrefix(en))?[x,Array.isArray(T)?T[1]:void 0]:[Array.isArray(T)?T[0]:T,x]}return x}(r,o,d,l),g="between"===e(r,d),m=s.notFireEvent||g&&Array.isArray(c)&&c.includes(void 0);r._columnsController.columnOption(d.index,u,c,m)}}(o,{column:s,value:h,container:r,notFireEvent:u})}});return"between"===e(o,s)&&(d.placeholder=r.hasClass(o.addWidgetPrefix(en))?o.option("filterRow.betweenStartText"):o.option("filterRow.betweenEndText")),d},_getFilterInputAccessibilityAttributes(r){var s=A.A.format("dxDataGrid-ariaFilterCell");return this.component.option("showColumnHeaders")?{"aria-label":s,"aria-describedby":r.headerId}:{"aria-label":s}},_renderEditor(r,s){r.empty();var o=(0,_.A)("<div>").appendTo(r),l=this.getController("editorFactory"),d=this.getController("data").dataSource(),h=this.getController("applyFilter");if(s.lookup&&this.option("syncLookupFilterValues")){h.setCurrentColumnForFiltering(s);var u=this.getController("data").getCombinedFilter();h.setCurrentColumnForFiltering(null);var c=F.getWrappedLookupDataSource(s,d,u),g=(0,N.A)((0,N.A)({},s),{lookup:(0,N.A)((0,N.A)({},s.lookup),{dataSource:c})});return l.createEditor(o,g)}return l.createEditor(o,s)},_renderFilterRangeContent(r,s){var o=this,l=r.find(".".concat(Mt)).first();l.empty();var d=(0,_.A)("<div>").addClass(Hr).attr("tabindex",this.option("tabIndex"));O.A.on(d,"focusin",()=>{o._showFilterRange(r,s)}),d.appendTo(l),o._updateFilterRangeContent(r,i(o,s))},_updateFilterRangeContent(r,s){var o=r.find(".".concat(Hr));o.length&&(""===s?o.html("&nbsp;"):o.text(s))},_updateFilterOperationChooser(r,s,o){var d,l=this,h=function(){var u=Wh.getInstance(r);u&&u.option("focusedElement",null),d&&l._focusEditor(o)};l._createComponent(r,Wh,{integrationOptions:{},activeStateEnabled:!1,selectionMode:"single",cssClass:"".concat(l.getWidgetContainerClass()," ").concat("dx-cell-focus-disabled"," ").concat("dx-filter-menu"),showFirstSubmenuMode:"onHover",hideSubmenuOnMouseLeave:!0,items:[{disabled:!(s.filterOperations&&s.filterOperations.length),icon:Lr[e(l,s)||"default"],selectable:!1,items:l._getFilterOperationMenuItems(s)}],onItemRendered:u=>{var{itemElement:c}=u;this.setAria("label",BE,(0,_.A)(c))},onItemClick(u){var c=u.itemData.name,g=e(l,s),m=!1,f=ci(l),x={};if(!(u.itemData.items||c&&c===g)){if(c?(x[f?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=c,("between"===c||"between"===g)&&(m="between"===c,x[f?"bufferedFilterValue":"filterValue"]=null)):(x[f?"bufferedFilterValue":"filterValue"]=null,x[f?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=s.defaultSelectedFilterOperation||null),l._columnsController.columnOption(s.index,x),l._applyFilterViewController.setHighLight(o,!0),!c){var b=Kr(o);b&&"dxDateBox"===b.NAME&&!b.option("isValid")&&(b.clear(),b.option("isValid",!0))}m?l._showFilterRange(o.closest(".".concat(kr)),s):l._focusEditor(o)}},onSubmenuShowing(){d=l._isEditorFocused(o),l.getController("editorFactory").loseFocus()},onSubmenuHiding(){O.A.trigger(r,"blur"),h()},onContentReady(u){O.A.on(r,"blur",()=>{u.component._hideSubmenuAfterTimeout(),h()})},rtlEnabled:l.option("rtlEnabled")})},_isEditorFocused:r=>r.hasClass(Yh)||r.parents(".".concat(Yh)).length,_focusEditor(r){this.getController("editorFactory").focus(r),O.A.trigger(r.find($i),"focus")},_renderFilterOperationChooser(r,s,o){var l;this.option("filterRow.showOperationChooser")&&(r.addClass(Xh),l=(0,_.A)("<div>").prependTo(r),this._updateFilterOperationChooser(l,s,o))},_getFilterOperationMenuItems(r){var s=this,o=[{}],l=s.option("filterRow"),d=l&&l.operationDescriptions||{};if(r.filterOperations&&r.filterOperations.length){var h=r.filterOperations.filter(u=>(0,v.O9)(Gh[u]));(o=(0,I.Tj)(h,u=>{var c=Gh[u];return{name:u,selected:(e(s,r)||r.defaultFilterOperation)===u,text:d[c],icon:Lr[u]}})).push({name:null,text:l&&l.resetOperationText,icon:Lr.default})}return o},_handleDataChanged(r){var s,o,l;this.callBase.apply(this,arguments),(null!==(s=r.operationTypes)&&void 0!==s&&s.filtering||null!==(o=r.operationTypes)&&void 0!==o&&o.fullReload)&&this.updateLookupDataSource(null===(l=r.operationTypes)||void 0===l?void 0:l.filtering)},updateLookupDataSource(r){if(this.option("syncLookupFilterValues")&&this.element()){var s=this._columnsController.getVisibleColumns(),o=this._dataController.dataSource(),l=this._applyFilterViewController,d=this.element().find(".".concat(this.addWidgetPrefix(Ui))).index();-1!==d&&s.forEach((h,u)=>{if(h.lookup&&h.calculateCellValue===h.defaultCalculateCellValue){var c=this._getCellElement(d,u),g=Kr(c?.find(".dx-editor-container"));if(g){l.setCurrentColumnForFiltering(h);var m=this._dataController.getCombinedFilter()||null;l.setCurrentColumnForFiltering(null);var f=g.option("dataSource");if(!r||!(0,V.RL)(f.__dataGridSourceFilter,m)){var b=F.getWrappedLookupDataSource(h,o,m);g.option("dataSource",b)}}}})}},optionChanged(r){switch(r.name){case"filterRow":case"showColumnLines":this._invalidate(!0,!0),r.handled=!0;break;case"syncLookupFilterValues":r.value?this.updateLookupDataSource():this.render(),r.handled=!0;break;default:this.callBase(r)}}}}(),ME={skipCalculateColumnFilters:()=>!1,_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return this.callBase();var i=[this.callBase()],t=this._columnsController.getVisibleColumns(null,!0),e=this.getController("applyFilter");return(0,I.__)(t,function(){var a,n=(null===(a=e.getCurrentColumnForFiltering())||void 0===a?void 0:a.index)===this.index;if(this.allowFiltering&&this.calculateFilterExpression&&(0,v.O9)(this.filterValue)&&!n){var r=this.createFilterExpression(this.filterValue,this.selectedFilterOperation||this.defaultFilterOperation,"filterRow");i.push(r)}}),F.combineFilters(i)}},VE=Z.ViewController.inherit({_getHeaderPanel(){return this._headerPanel||(this._headerPanel=this.getView("headerPanel")),this._headerPanel},setHighLight(i,t){ci(this)&&(i&&i.toggleClass(Nr,t)&&i.closest(".".concat(kr)).toggleClass(zr,t),this._getHeaderPanel().enableApplyButton(t))},applyFilter(){var i=this.getController("columns"),t=i.getColumns();i.beginUpdate();for(var e=0;e<t.length;e++){var a=t[e];void 0!==a.bufferedFilterValue&&(i.columnOption(e,"filterValue",a.bufferedFilterValue),a.bufferedFilterValue=void 0),void 0!==a.bufferedSelectedFilterOperation&&(i.columnOption(e,"selectedFilterOperation",a.bufferedSelectedFilterOperation),a.bufferedSelectedFilterOperation=void 0)}i.endUpdate(),this.removeHighLights()},removeHighLights(){if(ci(this)){var i=this.getView("columnHeadersView").element();i.find(".".concat(this.addWidgetPrefix(Ui)," .").concat(Nr)).removeClass(Nr),i.find(".".concat(this.addWidgetPrefix(Ui)," .").concat(zr)).removeClass(zr),this._getHeaderPanel().enableApplyButton(!1)}},setCurrentColumnForFiltering(i){this._currentColumn=i},getCurrentColumnForFiltering(){return this._currentColumn}}),jh={defaultOptions:()=>({syncLookupFilterValues:!0,filterRow:{visible:!1,showOperationChooser:!0,showAllText:A.A.format("dxDataGrid-filterRowShowAllText"),resetOperationText:A.A.format("dxDataGrid-filterRowResetOperationText"),applyFilter:"auto",applyFilterText:A.A.format("dxDataGrid-applyFilterText"),operationDescriptions:{equal:A.A.format("dxDataGrid-filterRowOperationEquals"),notEqual:A.A.format("dxDataGrid-filterRowOperationNotEquals"),lessThan:A.A.format("dxDataGrid-filterRowOperationLess"),lessThanOrEqual:A.A.format("dxDataGrid-filterRowOperationLessOrEquals"),greaterThan:A.A.format("dxDataGrid-filterRowOperationGreater"),greaterThanOrEqual:A.A.format("dxDataGrid-filterRowOperationGreaterOrEquals"),startsWith:A.A.format("dxDataGrid-filterRowOperationStartsWith"),contains:A.A.format("dxDataGrid-filterRowOperationContains"),notContains:A.A.format("dxDataGrid-filterRowOperationNotContains"),endsWith:A.A.format("dxDataGrid-filterRowOperationEndsWith"),between:A.A.format("dxDataGrid-filterRowOperationBetween"),isBlank:A.A.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:A.A.format("dxFilterBuilder-filterOperationIsNotBlank")},betweenStartText:A.A.format("dxDataGrid-filterRowOperationBetweenStartText"),betweenEndText:A.A.format("dxDataGrid-filterRowOperationBetweenEndText")}}),controllers:{applyFilter:VE},extenders:{controllers:{data:ME,columnsResizer:{_startResizing(){if(this.callBase.apply(this,arguments),this.isResizing()){var i=this._columnHeadersView.getFilterRangeOverlayInstance();if(i){var t=i.$element().closest("td").index();(t===this._targetPoint.columnIndex||t===this._targetPoint.columnIndex+1)&&i.$content().hide()}}},_endResizing(){var i;if(this.isResizing()){var t=this._columnHeadersView.getFilterRangeOverlayInstance();t&&(i=t.$element().closest("td"),this._columnHeadersView._updateFilterRangeOverlay({width:(0,R.Ot)(i,!0)+1}),t.$content().show())}this.callBase.apply(this,arguments)}},editing:{updateFieldValue(i){return i.column.lookup&&(this._needUpdateLookupDataSource=!0),this.callBase.apply(this,arguments)},_afterSaveEditData(i){var t;return this._needUpdateLookupDataSource&&!i&&(null===(t=this.getView("columnHeadersView"))||void 0===t||t.updateLookupDataSource()),this._needUpdateLookupDataSource=!1,this.callBase.apply(this,arguments)},_afterCancelEditData(){return this._needUpdateLookupDataSource=!1,this.callBase.apply(this,arguments)}}},views:{columnHeadersView:FE,headerPanel:{_getToolbarItems(){var i=this.callBase();return this._prepareFilterItem(i).concat(i)},_prepareFilterItem(){var i=this,t=[];if(i._isShowApplyFilterButton()){var e=i.option("filterRow.applyFilterText"),n=!i._columnsController.getColumns().filter(s=>void 0!==s.bufferedFilterValue).length;t.push({widget:"dxButton",options:{icon:"apply-filter",disabled:n,onClick:function(){i._applyFilterViewController.applyFilter()},hint:e,text:e,onInitialized:function(s){(0,_.A)(s.element).addClass(i._getToolbarButtonClass("dx-apply-button"))}},showText:"inMenu",name:"applyFilterButton",location:"after",locateInMenu:"auto",sortIndex:10})}return t},_isShowApplyFilterButton(){var i=this.option("filterRow");return i&&i.visible&&"onClick"===i.applyFilter},init(){this.callBase(),this._dataController=this.getController("data"),this._applyFilterViewController=this.getController("applyFilter")},enableApplyButton(i){this.setToolbarItemDisabled("applyFilterButton",!i)},isVisible(){return this.callBase()||this._isShowApplyFilterButton()},optionChanged(i){"filterRow"===i.name?(this._invalidate(),i.handled=!0):this.callBase(i)}}}}};G.registerModule("filterRow",jh);var Qh="dx-header-filter",qh="dx-header-filter-menu";function Zh(i){i=i||[];for(var t=0;t<i.length;t++)i[t].selected=!1,Zh(i[t].items)}function Jh(i){var t="dxTreeView"===i.NAME?".dx-treeview-select-all-item":".dx-list-select-all-checkbox";return i.$element().find(t).dxCheckBox("instance")}function eu(i,t){if(!i.component.option("searchValue")){var e=Jh(i.component);e&&t&&t.length&&e.option("value",void 0)}}function LE(i,t,e){if(t^e){if(i.selected=!0,e&&i.items)for(var a=0;a<i.items.length;a++)if(!i.items[a].selected){i.selected=void 0;break}}else(e||i.selected)&&(i.selected=!1,Zh(i.items))}var kE=Z.View.inherit({getPopupContainer(){return this._popupContainer},getListComponent(){return this._listComponent},applyHeaderFilter(i){var t=this.getListComponent(),e=t.option("searchValue"),a=Jh(t),r=[];e||i.isFilterBuilder||!a?.option("value")?"tree"===i.type&&(i.filterType&&(i.filterType="include"),function s(o,l,d){(0,I.__)(l,(h,u)=>{if(void 0!==u.selected&&!!u.selected^d){var c=t._getNode(u),m=t._hasChildren(c)&&u.items&&u.items.some(f=>f.selected);if(!e||!m)return void o.push(u.value)}u.items&&u.items.length&&s(o,u.items,d)})}(r,t.option("items"),!1),i.filterValues=r):("tree"===i.type&&(i.filterType="exclude"),Array.isArray(i.filterValues)&&(i.filterValues=[])),i.filterValues&&!i.filterValues.length&&(i.filterValues=null),i.apply(),this.hideHeaderFilterMenu()},showHeaderFilterMenu(i,t){if(t){this._initializePopupContainer(t);var e=this.getPopupContainer();this.hideHeaderFilterMenu(),this.updatePopup(i,t),e.show()}},hideHeaderFilterMenu(){var i=this.getPopupContainer();i&&i.hide()},updatePopup(i,t){var e=this.option("showColumnLines"),a="right"===t.alignment^!e?"left":"right";this._popupContainer.setAria({role:"dialog",label:A.A.format("dxDataGrid-headerFilterLabel")}),this._popupContainer&&(this._cleanPopupContent(),this._popupContainer.option("position",{my:"".concat(a," top"),at:"".concat(a," bottom"),of:i,collision:"fit fit"}))},_getSearchExpr(i,t){var{lookup:e}=i,{useDefaultSearchExpr:a}=i,n=t.dataSource,r=t.search.searchExpr;if(r)return r;if(a||(0,v.O9)(n)&&!(0,v.Tn)(n))return"text";if(e)return e.displayExpr||"this";if(i.dataSource){var{group:s}=i.dataSource;if(Array.isArray(s)&&s.length>0)return s[0].selector;if((0,v.Tn)(s)&&!i.remoteFiltering)return s}return i.dataField||i.selector},_cleanPopupContent(){this._popupContainer&&this._popupContainer.$content().empty()},_initializePopupContainer(i){var t=this,e=t.element(),a=this._normalizeHeaderFilterOptions(i),{height:n,width:r}=a,s={width:r,height:n,visible:!1,shading:!1,showTitle:!1,showCloseButton:!1,hideOnParentScroll:!1,dragEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:qh},focusStateEnabled:!1,toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:a.texts.ok,onClick(){t.applyHeaderFilter(i)}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:a.texts.cancel,onClick(){t.hideHeaderFilterMenu()}}}],resizeEnabled:!0,onShowing(o){o.component.$content().parent().addClass("dx-dropdowneditor-overlay"),t._initializeListContainer(i,a),i.onShowing&&i.onShowing(o)},onShown(){t.getListComponent().focus()},onHidden:i.onHidden,onInitialized(o){var{component:l}=o;l.option("animation",l._getDefaultOptions().animation)}};(0,v.O9)(t._popupContainer)?t._popupContainer.option(s):t._popupContainer=t._createComponent(e,ze.A,s)},_initializeListContainer(i,t){var e=this,a=e._popupContainer.$content(),n=!i.isFilterBuilder&&t.allowSelectAll,r={searchEnabled:t.search.enabled,searchTimeout:t.search.timeout,searchEditorOptions:t.search.editorOptions,searchMode:t.search.mode||"",dataSource:i.dataSource,onContentReady(){e.renderCompleted.fire()},itemTemplate(o,l,d){var h=(0,_.A)(d);return i.encodeHtml?h.text(o.text):h.html(o.text)}};function s(o){"searchValue"===o.fullName&&n&&!1!==e.option("headerFilter.hideSelectAllOnSearch")&&("tree"===i.type?o.component.option("showCheckBoxesMode",o.value?"normal":"selectAll"):o.component.option("selectionMode",o.value?"multiple":"all"))}e._listComponent="tree"===i.type?e._createComponent((0,_.A)("<div>").appendTo(a),Si,(0,y.X)(r,{showCheckBoxesMode:n?"selectAll":"normal",onOptionChanged:s,keyExpr:"id"})):e._createComponent((0,_.A)("<div>").appendTo(a),Ca.A,(0,y.X)(r,{searchExpr:e._getSearchExpr(i,t),pageLoadMode:"scrollBottom",showSelectionControls:!0,selectionMode:n?"all":"multiple",onOptionChanged:s,onSelectionChanged(o){var l=o.component.option("items"),d=o.component.option("selectedItems");if(!o.component._selectedItemsUpdating&&!o.component.option("searchValue")&&!i.isFilterBuilder){var h=i.filterValues||[];0===d.length&&l.length&&(h.length<=1||"exclude"===i.filterType&&h.length===l.length-1)?(i.filterType="include",i.filterValues=[]):d.length===l.length&&(i.filterType="exclude",i.filterValues=[])}(0,I.__)(l,(c,g)=>{var m=F.getIndexByKey(g,d,null)>=0;if(!!g.selected!==m){g.selected=m,i.filterValues=i.filterValues||[];var x=F.getIndexByKey(g.value,i.filterValues,null);x>=0&&i.filterValues.splice(x,1),m^"exclude"===i.filterType&&i.filterValues.push(g.value)}}),eu(o,i.filterValues)},onContentReady(o){var{component:l}=o,d=l.option("items"),h=[];(0,I.__)(d,function(){this.selected&&h.push(this)}),l._selectedItemsUpdating=!0,l.option("selectedItems",h),l._selectedItemsUpdating=!1,eu(o,i.filterValues)}}))},_normalizeHeaderFilterOptions(i){var t=this.option("headerFilter")||{},e=i.headerFilter||{};return(0,y.X)(!0,{},t,{search:{enabled:t.allowSearch,timeout:t.searchTimeout}},e,{search:{enabled:e.allowSearch,mode:e.searchMode,timeout:e.searchTimeout}})},_renderCore(){this.element().addClass(qh)}}),tn=function(i){return(0,v.O9)(i.allowHeaderFiltering)?i.allowHeaderFiltering:i.allowFiltering},tu={_applyColumnState(i){var t,{rootElement:e}=i,{column:a}=i;if("headerFilter"===i.name){if(e.find(".".concat(Qh)).remove(),tn(a)){t=this.callBase(i).toggleClass("dx-header-filter-empty",this._isHeaderFilterEmpty(a)),this.option("useLegacyKeyboardNavigation")||t.attr("tabindex",this.option("tabindex")||0);var n=A.A.format("dxDataGrid-headerFilterIndicatorLabel",a.caption);t.attr("aria-label",n),t.attr("aria-haspopup","dialog"),t.attr("role","button")}return t}return this.callBase(i)},_isHeaderFilterEmpty:i=>!i.filterValues||!i.filterValues.length,_getIndicatorClassName(i){return"headerFilter"===i?Qh:this.callBase(i)},_renderIndicator(i){var t=i.container,e=i.indicator;if("headerFilter"===i.name){var a=this.option("rtlEnabled");if(t.children().length&&(!a&&"right"===i.columnAlignment||a&&"left"===i.columnAlignment))return void t.prepend(e)}this.callBase(i)},optionChanged(i){if("headerFilter"===i.name){var t="columnHeadersView"===this.name;this._invalidate(t,t),i.handled=!0}else this.callBase(i)}},NE={month:i=>et.A.getMonthNames()[i-1],quarter:i=>et.A.format(new Date(2e3,3*i-1),"quarter")};function iu(i,t,e){return t=t||[],e=e||[],i.forEach(a=>{if((0,v.O9)(a.key)){if(t.push(1===t.length?a.key-1:a.key),a.items)iu(a.items,t,e);else{var r=new Date(Date.UTC.apply(Date,t));e.push(r)}t.pop()}else e.push(null)}),e}function HE(i,t){var e=iu(i),a=(0,Le.A)(e),n=F.getHeaderFilterGroupParameters((0,N.A)((0,N.A)({},t),{calculateCellValue:r=>r}));return $t.A.queryByOptions(a,{group:n}).toArray()}var KE=Z.ViewController.inherit({init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._headerFilterView=this.getView("headerFilterView")},_updateSelectedState(i,t){for(var e=i.length,a="exclude"===t.filterType;e--;){var n=i[e];"items"in i[e]&&this._updateSelectedState(i[e].items,t),LE(n,F.getIndexByKey(i[e].value,t.filterValues,null)>-1,a)}},_normalizeGroupItem(i,t,e){var a,n,{path:r}=e,{valueSelector:s}=e,{displaySelector:o}=e,{column:l}=e;return s&&o?(a=s(i),n=o(i)):n=a=i.key,i=(0,v.Gv)(i)?(0,y.X)({},i):{},r.push(a),i.value=1===r.length?r[0]:r.join("/"),i.text=this.getHeaderItemText(n,l,t,e.headerFilterOptions),i},getHeaderItemText(i,t,e,a){var r,s,o,l,d,n=F.formatValue(i,(r=i,o=e,l=It.getGroupInterval(s=t),d=F.getFormatOptionsByColumn(s,"headerFilter"),l&&(d.groupInterval=l[o],F.isDateType(s.dataType)?d.format=NE[l[o]]:"number"===s.dataType&&(d.getDisplayFormat=function(){var h={format:s.format,target:"headerFilter"},u=F.formatValue(r,h),g=F.formatValue(r+l[o],h);return u&&g?"".concat(u," - ").concat(g):""})),d));return n||(n=a.texts.emptyValue),n},_processGroupItems(i,t,e,a){var n,r,{column:s}=a,{lookup:o}=s,{level:l}=a;e=e||[],t=t||0,o&&(n=(0,q.Hz)(o.displayExpr),r=(0,q.Hz)(o.valueExpr));for(var d=0;d<i.length;d++)i[d]=this._normalizeGroupItem(i[d],t,{column:a.column,headerFilterOptions:a.headerFilterOptions,displaySelector:n,valueSelector:r,path:e}),"items"in i[d]&&(t!==l&&(0,v.O9)(i[d].value)?this._processGroupItems(i[d].items,t+1,e,a):delete i[d].items),e.pop()},getDataSource(i){var t,e=this._dataController.dataSource(),a=e?.remoteOperations().grouping,n=F.getHeaderFilterGroupParameters(i,a),r=null===(t=i.headerFilter)||void 0===t?void 0:t.dataSource,s=this.option("headerFilter"),o=!1,l={component:this.component};if(e){if((0,v.O9)(r)&&!(0,v.Tn)(r))l.dataSource=(0,vi.ho)(r);else if(i.lookup)if(o=!0,this.option("syncLookupFilterValues")){this._currentColumn=i;var d=this._dataController.getCombinedFilter();this._currentColumn=null,l.dataSource=F.getWrappedLookupDataSource(i,e,d)}else l.dataSource=F.normalizeLookupDataSource(i.lookup);else{var h=Array.isArray(n)?n.length-1:0;this._currentColumn=i;var u=this._dataController.getCombinedFilter();this._currentColumn=null,l.dataSource={filter:u,group:n,useDefaultSearch:!0,load:m=>{var f=new w.cY;return m.dataField=i.dataField||i.name,e.load(m).done(x=>{var b=a&&function zE(i){return"Z"===i?.slice(-1)||"'Z'"===i?.slice(-3)}(i.serializationFormat)&&h>3;b&&(x=HE(x,i)),g._processGroupItems(x,null,null,{level:h,column:i,headerFilterOptions:s}),f.resolve(x)}).fail(f.reject),f}}}(0,v.Tn)(r)&&r.call(i,l);var c=l.dataSource.postProcess,g=this;return l.dataSource.postProcess=function(m){var f=m;return o&&(f=f.filter(x=>null!==x[i.lookup.valueExpr]),0===this.pageIndex()&&!this.searchValue()&&(f=f.slice(0)).unshift(null),g._processGroupItems(f,null,null,{level:0,column:i,headerFilterOptions:s})),f=c&&c.call(this,f)||f,g._updateSelectedState(f,i),f},l.dataSource}},getCurrentColumn(){return this._currentColumn},showHeaderFilterMenu(i,t){var e=this._columnsController,a=(0,y.X)(!0,{},this._columnsController.getColumns()[i]);if(a){var n=e.getVisibleIndex(i),s=this.getView(t?"headerPanel":"columnHeadersView").getColumnElements().eq(t?a.groupIndex:n);this.showHeaderFilterMenuBase({columnElement:s,column:a,applyFilter:!0,apply(){e.columnOption(i,{filterValues:this.filterValues,filterType:this.filterType})}})}},showHeaderFilterMenuBase(i){var t=this,{column:e}=i;if(e){var a=It.getGroupInterval(e),n=t._dataController.dataSource(),r=n&&n.remoteOperations().filtering,s=i.onHidden;(0,y.X)(i,e,{type:a&&a.length>1?"tree":"list",remoteFiltering:r,onShowing(o){var l=o.component.$overlayContent().dxResizable("instance");l&&l.option("onResizeEnd",d=>{var h=t.getController("columns"),u=h.columnOption(i.dataField,"headerFilter");(u=u||{}).width=d.width,u.height=d.height,h.columnOption(i.dataField,"headerFilter",u,!0)})},onHidden:()=>{s?.(),zn(this)}}),i.dataSource=t.getDataSource(i),i.isFilterBuilder&&(i.dataSource.filter=null,i.alignment="right"),t._headerFilterView.showHeaderFilterMenu(i.columnElement,i)}},hideHeaderFilterMenu(){this._headerFilterView.hideHeaderFilterMenu()}}),WE=(0,y.X)({},tu,{_renderCellContent(i,t){var e,{column:a}=t;!a.command&&tn(a)&&this.option("headerFilter.visible")&&"header"===t.rowType&&(e=this._applyColumnState({name:"headerFilter",rootElement:i,column:a,showColumnLines:this.option("showColumnLines")}))&&this._subscribeToIndicatorEvent(e,a,"headerFilter"),this.callBase.apply(this,arguments)},_subscribeToIndicatorEvent(i,t,e){"headerFilter"===e&&O.A.on(i,ae.U,this.createAction(a=>{a.event.stopPropagation(),Qo(i,this),this.getController("headerFilter").showHeaderFilterMenu(t.index,!1)}))},_updateIndicator(i,t,e){var a=this.callBase(i,t,e);a&&this._subscribeToIndicatorEvent(a,t,e)},_updateHeaderFilterIndicators(){this.option("headerFilter.visible")&&this._updateIndicators("headerFilter")},_needUpdateFilterIndicators:()=>!0,_columnOptionChanged(i){var{optionNames:t}=i,e=F.checkChanges(t,["filterValues","filterValue"]),a=F.checkChanges(t,["filterValues","filterType"]);(e||a)&&this._needUpdateFilterIndicators()&&this._updateHeaderFilterIndicators(),a||this.callBase(i)}}),UE={skipCalculateColumnFilters:()=>!1,_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return this.callBase();var i=[this.callBase()],t=this._columnsController.getVisibleColumns(null,!0),a=this.getController("headerFilter").getCurrentColumn();return(0,I.__)(t,(n,r)=>{var s;if((!a||a.index!==r.index)&&tn(r)&&r.calculateFilterExpression&&Array.isArray(r.filterValues)&&r.filterValues.length){var o=[];(0,I.__)(r.filterValues,(l,d)=>{Array.isArray(d)?s=d:(r.deserializeValue&&!F.isDateType(r.dataType)&&"number"!==r.dataType&&(d=r.deserializeValue(d)),s=r.createFilterExpression(d,"=","headerFilter")),s&&(s.columnIndex=r.index),o.push(s)}),o=F.combineFilters(o,"or"),i.push("exclude"===r.filterType?["!",o]:o)}}),F.combineFilters(i)}},au={defaultOptions:()=>({syncLookupFilterValues:!0,headerFilter:{visible:!1,width:252,height:325,allowSelectAll:!0,search:{enabled:!1,timeout:500,mode:"contains",editorOptions:{}},texts:{emptyValue:A.A.format("dxDataGrid-headerFilterEmptyValue"),ok:A.A.format("dxDataGrid-headerFilterOK"),cancel:A.A.format("dxDataGrid-headerFilterCancel")}}}),controllers:{headerFilter:KE},views:{headerFilterView:kE},extenders:{controllers:{data:UE},views:{columnHeadersView:WE,headerPanel:(0,y.X)({},tu,{_createGroupPanelItem(i,t){var n,e=this,a=e.callBase.apply(e,arguments);return!t.command&&tn(t)&&e.option("headerFilter.visible")&&(n=e._applyColumnState({name:"headerFilter",rootElement:a,column:{alignment:(0,se.n)(e.option("rtlEnabled")),filterValues:t.filterValues,allowHeaderFiltering:!0},showColumnLines:!0}))&&O.A.on(n,ae.U,e.createAction(r=>{var{event:s}=r;s.stopPropagation(),e.getController("headerFilter").showHeaderFilterMenu(t.index,!0)})),a}})}}};G.registerModule("headerFilter",au);var an=D(1591),nn="dx-filterbuilder-range",$E=nn+"-start",XE=nn+"-end",YE=nn+"-separator",nu="\u2013";function jE(i,t){var e=(0,_.A)("<div>").addClass($E),a=(0,_.A)("<div>").addClass(XE),n=i.value||[],r=function(o){return o&&o.length>0?o[0]:null},s=function(o){return o&&2===o.length?o[1]:null};t.append(e),t.append((0,_.A)("<span>").addClass(YE).text(nu)),t.append(a),t.addClass(nn),this._editorFactory.createEditor.call(this,e,(0,y.X)({},i.field,i,{value:r(n),parentType:"filterBuilder",setValue:function(o){n=[o,s(n)],i.setValue(n)}})),this._editorFactory.createEditor.call(this,a,(0,y.X)({},i.field,i,{value:s(n),parentType:"filterBuilder",setValue:function(o){n=[r(n),o],i.setValue(n)}}))}function ru(i,t){return{name:"between",caption:i,icon:"range",valueSeparator:nu,dataTypes:["number","date","datetime"],editorTemplate:jE.bind(t),notForLookup:!0}}var QE={"=":"equal","<>":"notequal","<":"less","<=":"lessorequal",">":"greater",">=":"greaterorequal",notcontains:"doesnotcontain",contains:"contains",startswith:"startswith",endswith:"endswith",isblank:"isblank",isnotblank:"isnotblank"},qE={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",isblank:"isBlank",isnotblank:"isNotBlank",between:"between"};const su_getIconByFilterOperation=function(i){return QE[i]},su_getNameByFilterOperation=function(i){return qE[i]};var Wr="string",ou="icon-none",Ct="and",Gr="=",JE={number:["=","<>","<",">","<=",">=","isblank","isnotblank"],string:["contains","notcontains","startswith","endswith","=","<>","isblank","isnotblank"],date:["=","<>","<",">","<=",">=","isblank","isnotblank"],datetime:["=","<>","<",">","<=",">=","isblank","isnotblank"],boolean:["=","<>","isblank","isnotblank"],object:["isblank","isnotblank"]},ew={date:"shortDate",datetime:"shortDateShortTime"},tw=["=","<>","isblank","isnotblank"],iw=["caption","customizeText","dataField","dataType","editorTemplate","falseText","editorOptions","filterOperations","format","lookup","trueText","calculateFilterExpression","name"],lu="dx-filterbuilder-text",nw=lu+"-part",du=lu+"-separator",rw=du+"-empty";function Vt(i){return i&&i.length>1&&"!"===i[0]&&!ue(i)}function rt(i){return Vt(i)?i[1]:i}function hu(i){if(ue(i))return Ct;for(var t="",e=0;e<i.length;e++){var a=i[e];if(!Array.isArray(a)){if(t&&t!==a)throw new an.sO.Error("E4019");"!"!==a&&(t=a)}}return t}function Pt(i){var t=rt(i),e=hu(t);return e||(e=Ct),t!==i&&(e="!"+e),e}function uu(i){var t=function cw(i){return Array.isArray(i)&&i.length}(i.filterOperations)?i.filterOperations:function uw(i){return i.lookup&&tw||JE[i.dataType||Wr]}(i);return(0,y.X)([],t)}function Ur(i,t){var e=su_getNameByFilterOperation(i);return t&&t[e]?t[e]:e}function st(i,t){var e=i.filter(function(a){return a.name===t});return e.length?e[0]:null}function $r(i){return i.defaultFilterOperation||uu(i)[0]}function Xr(i,t){var e=rt(i),a=e.indexOf(t);return e.splice(a,1),1!==e.length&&e.splice(a,1),i}function cu(i){var t=Yr(i),e=t?jr(i):i;return t?["!",[e]]:[e]}function rn(i,t){var e=rt(t),a=Pt(e);return 1===e.length?e.unshift(i):e.push(i,a),t}function sn(i,t){for(var e=0;e<t.length;e++)if(t[e].name===i||t[e].dataField.toLowerCase()===i.toLowerCase())return t[e];var a=bu(t,!0).filter(function(n){return n.dataField.toLowerCase()===i.toLowerCase()});if(a.length>0)return a[0];throw new J.A.Error("E1047",i)}function ft(i){return!!Array.isArray(i)&&(i.length<2||Array.isArray(i[0])||Array.isArray(i[1]))}function ue(i){return!!Array.isArray(i)&&i.length>1&&!Array.isArray(i[0])&&!Array.isArray(i[1])}function gu(i,t,e){e=e||Ct;for(var a=hu(i).toLowerCase()||e,n=[],r=0;r<i.length;r++)ft(i[r])?(n.push(Zr(i[r],t,e)),n=qr(n,a)):ue(i[r])&&(n.push(on(i[r],t)),n=qr(n,a));return 0===n.length&&(n=qr(n,a)),n}function on(i,t){return function vw(i,t){var e=st(t,i[1]);return e&&e.name===i[1]}(i,t)||i.length<3&&(i[2]=i[1],i[1]=Gr),i}function Yr(i){return-1!==i.indexOf("not")}function jr(i){return i.substring(3).toLowerCase()}function Qr(i,t){var e=Yr(t);return t=e?jr(t):t,e?["!",i,t]:[i,t]}function qr(i,t){var e=Yr(t);t=e?jr(t):t,i.push(t);var a=i;return e&&(a=["!",a]),a}function Zr(i,t,e){return e=e||Ct,i?ue(i=(0,y.X)(!0,[],i))?Qr(on(i,t),e):Vt(i)?["!",ue(i[1])?Qr(on(i[1],t),e):Vt(i[1])?Qr(Zr(i[1],t),e):gu(i[1],t,e)]:gu(i,t,e):cu(e)}function pu(i,t,e,a){var n=sn(i[0],t),r=on(i,e),s=e.length&&st(e,r[1]);return s&&s.calculateFilterExpression?s.calculateFilterExpression.apply(s,[r[2],n,t]):n.createFilterExpression?n.createFilterExpression.apply(n,[r[2],r[1],a]):n.calculateFilterExpression?n.calculateFilterExpression.apply(n,[r[2],r[1],a]):n.defaultCalculateFilterExpression.apply(n,[r[2],r[1],a])}function gi(i,t,e,a){if(!(0,v.O9)(i))return null;if(Vt(i))return["!",gi(i[1],t,e,a)];var r=rt(i);if(ue(r))return pu(r,t,e,a)||null;for(var o,s=[],l=Pt(r),d=0;d<r.length;d++)ft(r[d])?(o=gi(r[d],t,e,a))&&(d&&s.push(l),s.push(o)):ue(r[d])&&(o=pu(r[d],t,e,a))&&(s.length&&s.push(l),s.push(o));return 1===s.length&&(s=s[0]),s.length?s:null}function Xi(i){var e,t=rt(i);if(0===t.length)return null;var a=[];for(e=0;e<t.length;e++)if(ft(t[e])){var n=Xi(t[e]);n?t[e]=n:a.push(t[e])}else ue(t[e])&&(fw(t[e])||a.push(t[e]));for(e=0;e<a.length;e++)Xr(t,a[e]);return 1===t.length||(t.splice(t.length-1,1),1===t.length&&(i=function ow(i,t){return Vt(i)?i[1]=t:i=t,i}(i,t[0])),0===i.length)?null:i}function _u(i,t,e){if(""!==t){var a=i.lookup;if(a.items)e(a.calculateCellValue(t)||"");else{var n=(0,v.Tn)(a.dataSource)?a.dataSource({}):a.dataSource;new Ii.q(n).loadSingle(a.valueExpr,t).done(function(s){var o="";s&&(o=a.displayExpr?(0,q.Hz)(a.displayExpr)(s):s),i.customizeText&&(o=i.customizeText({value:t,valueText:o})),e(o)}).fail(function(){e("")})}}else e("")}function vu(i,t,e,a,n){var r;return r=!0===t?i.trueText||A.A.format("dxDataGrid-trueText"):!1===t?i.falseText||A.A.format("dxDataGrid-falseText"):function sw(i,t){return ol.format(t,i.format||ew[i.dataType])}(i,t),i.customizeText&&(r=i.customizeText.call(i,{value:t,valueText:r,target:a})),e&&e.customizeText&&(r=e.customizeText.call(e,{value:t,valueText:r,field:i,target:a},n)),r}function Jr(i){return""===i||null===i}function mu(i,t,e){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"filterBuilder";if(Jr(t))return"";if(Array.isArray(t)){var n=new w.cY;return w.z7.apply(this,function Cw(i,t,e,a){var n={values:t};return t.map(r=>vu(i,r,e,a,n))}(i,t,e,a)).done(function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];var l=s.some(d=>!Jr(d))?s.map(d=>Jr(d)?"?":d):"";n.resolve(l)}),n}return vu(i,t,e,a)}function Cu(i,t){return i.some(function(e){return e.dataField===t})}function fu(i,t,e){var a=e.dataField;es(a)&&(e.parentId=Eu(a),!Cu(t,e.parentId)&&!Cu(i,e.parentId)&&fu(i,t,{id:e.parentId,dataType:"object",dataField:e.parentId,caption:xu(e.parentId,!0),filterOperations:["isblank","isnotblank"],defaultCalculateFilterExpression:It.defaultCalculateFilterExpression})),t.push(e)}function xu(i,t){var e="";if(t)i=i.substring(i.lastIndexOf(".")+1);else if(es(i))return i.split(".").forEach(function(a,n,r){e+=(0,qt.Bc)(a),n!==r.length-1&&(e+=".")}),e;return(0,qt.Bc)(i)}function bu(i,t){for(var e=[],a=0;a<i.length;a++){var n=(0,y.X)(!0,{caption:xu(i[a].dataField,t)},i[a]);n.id=n.name||n.dataField,t?fu(i,e,n):e.push(n)}return e}function es(i){return-1!==i.lastIndexOf(".")}function Eu(i){return i.substring(0,i.lastIndexOf("."))}function wu(i,t){if(es(i.dataField))for(var e=Eu(i.dataField),a=0;a<t.length;a++)if(t[a].dataField===e)return wu(t[a],t)+"."+i.caption;return i.caption}function ts(i,t,e){var a=st(e,t);return a?(!1===a.hasValue?(i[1]=t,i.length=2):(i[1]=t,i[2]=""),i):("isblank"===t?(i[1]=Gr,i[2]=null):"isnotblank"===t?(i[1]="<>",i[2]=null):(((a=st(e,i[1]))||2===i.length||null===i[2])&&(i[2]=""),i[1]=t),i)}function yu(i){return null===i[2]?i[1]===Gr?"isblank":"isnotblank":i[1]}function fw(i){return""!==i[2]}function Yi(i,t){return i[0]===t}function is(i,t){return i&&0!==i.length?ue(i)?Yi(i,t)?null:i:Su(i,[t],!1):null}function Su(i,t,e){var a=[];return i.forEach(function(n){ue(n)?Yi(n,t[0])?e?(a.push(t),e=!1):a.splice(a.length-1,1):a.push(n):(a.length||ft(n))&&a.push(n)}),0===a.length?null:(e&&(a.push(Ct),a.push(t)),1===a.length?a[0]:a)}function Ou(i,t){return null===i||0===i.length?t:ue(i)?Yi(i,t[0])?t:[i,Ct,t]:Pt(i)!==Ct?[t,"and",i]:Su(i,t,!0)}function Iu(i,t){return null!==i&&0!==i.length&&(ue(i)?i[0]===t:i.some(function(e){return(ue(e)||ft(e))&&Iu(e,t)}))}var as=function(i,t,e){if(Array.isArray(t)){var a=t.length-1;i.empty(),t.forEach((n,r)=>{(0,_.A)("<span>").addClass(nw).text(n).appendTo(i),r!==a&&(0,_.A)("<span>").addClass(du).text(e&&e.valueSeparator?e.valueSeparator:"|").addClass(rw).appendTo(i)})}else i.text(t||A.A.format("dxFilterBuilder-enterValueText"))};function Au(i){var t=function(a,n){return n?"".concat(n,"/").concat(a):a},e=i&&i.getController("headerFilter");return{dataTypes:["string","date","datetime","number","boolean","object"],calculateFilterExpression:function(a,n,r){var s=[],o=a.length-1;return a&&a.forEach((l,d)=>{if(ue(l)||ft(l)){var h=gi(l,r,[],"headerFilter");s.push(h)}else{var u=gi([n.dataField,"=",l],r,[],"headerFilter");s.push(u)}d!==o&&s.push("or")}),1===s.length?s[0]:s},editorTemplate(a,n){var r=(0,_.A)("<div>").addClass("dx-filterbuilder-item-value-text").appendTo(n),s=(0,y.X)(!0,{},i.columnOption(a.field.dataField));return as(r,a.text&&a.text.split("|")),s.filterType="include",s.filterValues=a.value?a.value.slice():[],e.showHeaderFilterMenuBase({columnElement:r,column:s,apply(){a.setValue(this.filterValues),e.hideHeaderFilterMenu(),a.closeEditor()},onHidden(){a.closeEditor()},isFilterBuilder:!0}),n},customizeText:function(a,n){n=n||{};var{value:r}=a,s=i.columnOption(a.field.dataField),o=s&&s.headerFilter,l=s&&s.lookup,d=n.values||[r];if(o&&o.dataSource||l&&l.dataSource){var h=new w.cY,u=n.items||new w.cY;if(!n.items){s=(0,y.X)({},s,{filterType:"include",filterValues:d});var c=e.getDataSource(s);c.paginate=!1;var g=new Ii.q(c),m=g.store().key();if(m){var{values:f}=n;if(f&&f.length>1){var x=f.reduce((S,T)=>(S.length&&S.push("or"),S.push([m,"=",T]),S),[]);g.filter(x)}else g.filter([m,"=",a.value])}else a.field.calculateDisplayValue&&J.A.log("W1017");n.items=u,g.load().done(u.resolve)}return u.done(S=>{var T=d.indexOf(a.value);h.resolve(function B(M,L){var z=[];return M.forEach(H=>{if(H.items){var K=B(H.items,t(H.text,L));z=z.concat(K)}H.selected&&z.push(t(H.text,L))}),z}(S,null)[T])}),h}return e.getHeaderItemText(r,s,0,i.option("headerFilter"))}}}function Ew(i){return(0,y.X)(Au(i),{name:"anyof",icon:"selectall",caption:A.A.format("dxFilterBuilder-filterOperationAnyOf")})}function ww(i){var t=Au(i);return(0,y.X)({},t,{calculateFilterExpression(e,a,n){var r=t.calculateFilterExpression(e,a,n);return r&&0!==r.length?"!"===r[0]?r:["!",r]:null},name:"noneof",icon:"unselectall",caption:A.A.format("dxFilterBuilder-filterOperationNoneOf")})}var yw=["=","<>","<","<=",">",">=","notcontains","contains","startswith","endswith","between"],Tu="include",ji="exclude";function Xe(i){return i.name||i.dataField}var Ow=Z.Controller.inherit(function(){var i=function(){return{filterType:Tu,filterValues:void 0}},t=function(s){var o=s.filterValues||[];return!It.getGroupInterval(s)&&!(s.headerFilter&&s.headerFilter.dataSource)||1===o.length&&null===o[0]},e=function(s){if((0,v.O9)(s.filterValue)){var l=s.selectedFilterOperation||s.defaultFilterOperation||$r(s);return[Xe(s),l,s.filterValue]}return null},a=function(s){var o,l,{filterValues:d}=s;return d?(1===d.length&&t(s)&&!Array.isArray(d[0])?(o=s.filterType===ji?"<>":"=",l=d[0]):(o=s.filterType===ji?"noneof":"anyof",l=d),[Xe(s),o,l]):null},n=function(s,o,l){var d=function(h,u){if(!h)return i();var c,g=h[1],m=h[2],f=Array.isArray(m);if(!f&&!t(u))return i();switch(g){case"anyof":case"=":c=Tu;break;case"noneof":case"<>":c=ji;break;default:return i()}return{filterType:c,filterValues:f?m:[m]}}(l,o);s.columnOption(Xe(o),d)},r=function(s,o,l){var d,h=l?.[1],u=l?.[2],c=o.filterOperations||o.defaultFilterOperations;(!c||c.indexOf(h)>=0||h===o.defaultFilterOperation)&&yw.includes(h)&&null!==u?(h===o.defaultFilterOperation&&!(0,v.O9)(o.selectedFilterOperation)&&(h=o.selectedFilterOperation),d={filterValue:u,selectedFilterOperation:h}):d={filterValue:void 0,selectedFilterOperation:void 0},s.columnOption(Xe(o),d)};return{syncFilterValue(){var s=this,o=s.getController("columns"),l=o.getFilteringColumns();this._skipSyncColumnOptions=!0,l.forEach(d=>{var h=function bw(i,t){return null===i||0===i.length?[]:ue(i)?Yi(i,t)?[i]:[]:Pt(i)!==Ct?[]:i.filter(function(n){return ue(n)&&Yi(n,t)})}(s.option("filterValue"),Xe(d));if(1===h.length){var u=h[0];n(o,d,u),r(o,d,u)}else(0,v.O9)(d.filterValues)&&n(o,d,null),(0,v.O9)(d.filterValue)&&r(o,d,null)}),this._skipSyncColumnOptions=!1},_initSync(){var s=this.getController("columns").getColumns(),o=this.getController("data"),l=o.pageIndex();if(function Sw(i){i.forEach(t=>{var e=Xe(t);if(!(0,v.O9)(e)&&t.allowFiltering)throw new J.A.Error("E1049",t.caption)})}(s),!this.option("filterValue")){var d=this.getController("columns").getFilteringColumns(),h=this.getFilterValueFromColumns(d);this.option("filterValue",h)}this.syncFilterValue(),o.pageIndex(l)},init(){var s=this.getController("data");s.isFilterSyncActive()&&(this.getController("columns").isAllDataTypesDefined()?this._initSync():s.dataSourceChanged.add(()=>this._initSync()))},_getSyncFilterRow(s,o){var l=e(o);return(0,v.O9)(l)?Ou(s,l):is(s,Xe(o))},_getSyncHeaderFilter(s,o){var l=a(o);return l?Ou(s,l):is(s,Xe(o))},getFilterValueFromColumns(s){if(!this.getController("data").isFilterSyncActive())return null;var o=["and"];return s&&s.forEach(l=>{var d=a(l),h=e(l);d&&rn(d,o),h&&rn(h,o)}),Xi(o)},syncFilterRow(s){this.option("filterValue",this._getSyncFilterRow(this.option("filterValue"),s))},syncHeaderFilter(s){this.option("filterValue",this._getSyncHeaderFilter(this.option("filterValue"),s))},getCustomFilterOperations(){var s=this.option("filterBuilder.customOperations")||[];return[Ew(this.component),ww(this.component)].concat(s)},publicMethods:()=>["getCustomFilterOperations"]}}()),Iw={isFilterSyncActive(){var i=this.option("filterSyncEnabled");return"auto"===i?this.option("filterPanel.visible"):i},skipCalculateColumnFilters(){var i=this.getController("filterSync");return((0,v.O9)(this.option("filterValue"))||i._skipSyncColumnOptions)&&this.isFilterSyncActive()},_calculateAdditionalFilter(){if(!1===this.option("filterPanel.filterEnabled"))return this.callBase();var i=[this.callBase()],t=this.getController("columns").getFilteringColumns(),e=this.option("filterValue");if(this.isFilterSyncActive()){var a=this.getController("headerFilter").getCurrentColumn(),n=this.getController("applyFilter").getCurrentColumnForFiltering(),r=a||n;(a||(0,v.O9)(n?.filterValue))&&e&&(e=is(e,Xe(r)))}var l=gi(e,t,this.getController("filterSync").getCustomFilterOperations(),"filterBuilder");return l&&i.push(l),F.combineFilters(i)},_parseColumnPropertyName(i){var t=i.match(/.*\.(.*)/);return t?t[1]:null},clearFilter(i){this.component.beginUpdate(),arguments.length>0?("filterValue"===i&&this.option("filterValue",null),this.callBase(i)):(this.option("filterValue",null),this.callBase()),this.component.endUpdate()},optionChanged(i){switch(i.name){case"filterValue":this._applyFilter(),this.isFilterSyncActive()&&this.getController("filterSync").syncFilterValue(),i.handled=!0;break;case"filterSyncEnabled":i.handled=!0;break;case"columns":if(this.isFilterSyncActive()){var t=this.getController("columns").getColumnByPath(i.fullName),e=this.getController("filterSync");if(t&&!e._skipSyncColumnOptions){var a=this._parseColumnPropertyName(i.fullName);e._skipSyncColumnOptions=!0,"filterType"===a?(ji===i.value||ji===i.previousValue)&&e.syncHeaderFilter(t):"filterValues"===a?e.syncHeaderFilter(t):["filterValue","selectedFilterOperation"].includes(a)&&e.syncFilterRow(t,t.filterValue),e._skipSyncColumnOptions=!1}}this.callBase(i);break;default:this.callBase(i)}}},Aw={_isHeaderFilterEmpty(i){return this.getController("data").isFilterSyncActive()?!Iu(this.option("filterValue"),Xe(i)):this.callBase(i)},_needUpdateFilterIndicators(){return!this.getController("data").isFilterSyncActive()},optionChanged(i){"filterValue"===i.name?this._updateHeaderFilterIndicators():this.callBase(i)}},Ru={defaultOptions:()=>({filterValue:null,filterSyncEnabled:"auto"}),controllers:{filterSync:Ow},extenders:{controllers:{data:Iw},views:{columnHeadersView:Aw}}};G.registerModule("filterSync",Ru);var Be="dx-filterbuilder",pi=Be+"-group",Du=pi+"-item",Bu=pi+"-content",Tw=pi+"-operations",Rw=pi+"-operation",ns=Be+"-action",Fu=ns+"-icon",Qi=Be+"-text",Fw=Be+"-item-field",Mw=Be+"-item-operation",Mu=Be+"-item-value",Vw=Be+"-item-value-text",Pw=Be+"-overlay",Lw=Be+"-operations",kw=Be+"-fields",Nw=Be+"-add-condition",ln="dx-state-active",Hw=Be+"-menu-custom-operation",Vu="filterBuilder",rs="enter",Kw=[{name:"onEditorPreparing",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onEditorPrepared",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onValueChanged",config:{excludeValidators:["disabled","readOnly"]}}],ku={and:"and",or:"or",notAnd:"!and",notOr:"!or"},Ww=ut.A.inherit(zd),Nu=Rt.A.inherit({_getDefaultOptions:function(){return(0,y.X)(this.callBase(),{onEditorPreparing:null,onEditorPrepared:null,onValueChanged:null,fields:[],groupOperations:["and","or","notAnd","notOr"],maxGroupLevel:void 0,value:null,allowHierarchicalFields:!1,groupOperationDescriptions:{and:A.A.format("dxFilterBuilder-and"),or:A.A.format("dxFilterBuilder-or"),notAnd:A.A.format("dxFilterBuilder-notAnd"),notOr:A.A.format("dxFilterBuilder-notOr")},customOperations:[],closePopupOnTargetScroll:!0,filterOperationDescriptions:{between:A.A.format("dxFilterBuilder-filterOperationBetween"),equal:A.A.format("dxFilterBuilder-filterOperationEquals"),notEqual:A.A.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:A.A.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:A.A.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:A.A.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:A.A.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:A.A.format("dxFilterBuilder-filterOperationStartsWith"),contains:A.A.format("dxFilterBuilder-filterOperationContains"),notContains:A.A.format("dxFilterBuilder-filterOperationNotContains"),endsWith:A.A.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:A.A.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:A.A.format("dxFilterBuilder-filterOperationIsNotBlank")}})},_optionChanged:function(i){switch(i.name){case"closePopupOnTargetScroll":break;case"onEditorPreparing":case"onEditorPrepared":case"onValueChanged":this._initActions();break;case"customOperations":this._initCustomOperations(),this._invalidate();break;case"fields":case"maxGroupLevel":case"groupOperations":case"allowHierarchicalFields":case"groupOperationDescriptions":case"filterOperationDescriptions":this._invalidate();break;case"value":if(i.value!==i.previousValue){var t=this._disableInvalidateForValue;t||(this._initModel(),this._invalidate()),this._disableInvalidateForValue=!1,this.executeAction("onValueChanged",{value:i.value,previousValue:i.previousValue}),this._disableInvalidateForValue=t}break;default:this.callBase(i)}},getFilterExpression:function(){var i=this._getNormalizedFields();return gi(Xi((0,y.X)(!0,[],this._model)),i,this._customOperations,Vu)},_getNormalizedFields:function(){return function mw(i){return i.reduce(function(t,e){if((0,v.O9)(e.dataField)){var a={};for(var n in e)e[n]&&iw.indexOf(n)>-1&&(a[n]=e[n]);a.defaultCalculateFilterExpression=It.defaultCalculateFilterExpression,(0,v.O9)(a.dataType)||(a.dataType=Wr),(0,v.O9)(a.trueText)||(a.trueText=A.A.format("dxDataGrid-trueText")),(0,v.O9)(a.falseText)||(a.falseText=A.A.format("dxDataGrid-falseText")),t.push(a)}return t},[])}(this.option("fields"))},_updateFilter:function(){this._disableInvalidateForValue=!0;var t=Xi((0,y.X)(!0,[],this._model)),e=Xi(this._getModel(this.option("value")));JSON.stringify(e)!==JSON.stringify(t)&&this.option("value",t),this._disableInvalidateForValue=!1,this._fireContentReadyAction()},_init:function(){this._initCustomOperations(),this._initModel(),this._initEditorFactory(),this._initActions(),this.callBase()},_initEditorFactory:function(){this._editorFactory=new Ww},_initCustomOperations:function(){this._customOperations=function xw(i,t,e){var a=(0,y.X)(!0,[],i),n=-1;return a.some(function(r,s){if("between"===r.name)return n=s,!0}),-1!==n?a[n]=(0,y.X)(ru(t,e),a[n]):a.unshift(ru(t,e)),a}(this.option("customOperations"),this.option("filterOperationDescriptions.between"),this)},_getDefaultGroupOperation:function(){var i,t;return null!==(i=null===(t=this.option("groupOperations"))||void 0===t?void 0:t[0])&&void 0!==i?i:ku.and},_getModel:function(i){return Zr(i,this._customOperations,this._getDefaultGroupOperation())},_initModel:function(){this._model=this._getModel(this.option("value"))},_initActions:function(){var i=this;i._actions={},Kw.forEach(function(t){var e=(0,y.X)({},t.config);i._actions[t.name]=i._createActionByOption(t.name,e)})},executeAction:function(i,t){var e=this._actions[i];return e&&e(t)},_initMarkup:function(){this.$element().addClass(Be),this.callBase(),this._createGroupElementByCriteria(this._model).appendTo(this.$element())},_createConditionElement:function(i,t){return(0,_.A)("<div>").addClass(pi).append(this._createConditionItem(i,t))},_createGroupElementByCriteria:function(i,t){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this._createGroupElement(i,t,e),n=a.find("."+Bu),r=rt(i),s=0;s<r.length;s++){var o=r[s];ft(o)?this._createGroupElementByCriteria(o,i,e+1).appendTo(n):ue(o)&&this._createConditionElement(o,i).appendTo(n)}return a},_createGroupElement:function(i,t,e){var a=(0,_.A)("<div>").addClass(Du),n=(0,_.A)("<div>").addClass(Bu),r=(0,_.A)("<div>").addClass(pi).append(a).append(n);return null!=t&&this._createRemoveButton(()=>{Xr(t,i),r.remove(),this._updateFilter()}).appendTo(a),this._createGroupOperationButton(i).appendTo(a),this._createAddButton(()=>{var s=cu(this._getDefaultGroupOperation());rn(s,i),this._createGroupElement(s,i,e+1).appendTo(n),this._updateFilter()},()=>{var o=function _w(i,t){var e=[i.dataField,"",""];return ts(e,$r(i),t),e}(this.option("fields")[0],this._customOperations);rn(o,i),this._createConditionElement(o,i).appendTo(n),this._updateFilter()},e).appendTo(a),r},_createButton:function(i){return(0,_.A)("<div>").text(i)},_createGroupOperationButton:function(i){var t=this._getGroupOperations(i),e=function hw(i,t){var e=Pt(i);return t.filter(function(a){return a.value===e})[0]}(i,t),a=e.text,n=t&&t.length<2?this._createButton(a).addClass("dx-state-disabled"):this._createButtonWithMenu({caption:a,menu:{items:t,displayExpr:"text",keyExpr:"value",onItemClick:r=>{e!==r.itemData&&(function dw(i,t){var a,n;return function lw(i,t){-1!==t.indexOf("!")?Vt(i)||function(e){var a=e.slice(0);e.length=0,e.push("!",a)}(i):Vt(i)&&function(e){var a=rt(e);e.length=0,[].push.apply(e,a)}(i)}(i,t),function(n,r){for(a=0;a<n.length;a++)Array.isArray(n[a])||(n[a]=r)}(rt(i),t=-1===(n=t).indexOf("!")?n:n.substring(1)),i}(i,r.itemData.value),n.text(r.itemData.text),e=r.itemData,this._updateFilter())},onContentReady:function(r){r.component.selectItem(e)},cssClass:Tw}});return n.addClass(Qi).addClass(Rw).attr("tabindex",0)},_createButtonWithMenu:function(i){var s,t=this,e=function(){t.$element().find("."+ln).removeClass(ln),t.$element().find(".dx-overlay .dx-treeview").remove(),t.$element().find(".dx-overlay").remove()},a=this.option("rtlEnabled"),n=a?"right":"left",r=this._createButton(i.caption);return(0,y.X)(i.menu,{focusStateEnabled:!0,selectionMode:"single",onItemClick:(s=i.menu.onItemClick,function(o){s(o),"dxclick"===o.event.type&&e()}),onHiding:function(o){r.removeClass(ln)},position:{my:n+" top",at:n+" bottom",offset:"0 1",of:r,collision:"flip"},animation:null,onHidden:function(){e()},cssClass:Pw+" "+i.menu.cssClass,rtlEnabled:a}),i.popup={onShown:function(o){var l=(0,_.A)(o.component.content()).find(".dx-treeview"),d=l.dxTreeView("instance");O.A.on(l,"keyup keydown",function(h){var u=(0,P.YD)(h);("keydown"===h.type&&"tab"===u||"keyup"===h.type&&("escape"===u||u===rs))&&(o.component.hide(),O.A.trigger(i.menu.position.of,"focus"))}),d.focus(),d.option("focusedElement",null)}},this._subscribeOnClickAndEnterKey(r,function(){e(),t._createPopupWithTreeView(i,t.$element()),r.addClass(ln)}),r},_hasValueButton:function(i){var t=st(this._customOperations,i[1]);return t?!1!==t.hasValue:null!==i[2]},_createOperationButtonWithMenu:function(i,t){var e=this,a=function pw(i,t,e){var a=uu(i),n=!!i.lookup;return e.forEach(function(r){if(!i.filterOperations&&-1===a.indexOf(r.name)){var s=r&&r.dataTypes;(!n||!r.notForLookup)&&s&&s.indexOf(i.dataType||Wr)>=0&&a.push(r.name)}}),a.map(function(r){var s=st(e,r);return s?{icon:s.icon||ou,text:s.caption||(0,qt.Bc)(s.name),value:s.name,isCustom:!0}:{icon:su_getIconByFilterOperation(r)||ou,text:Ur(r,t),value:r}})}(t,this.option("filterOperationDescriptions"),this._customOperations),n=function gw(i,t){for(var e=0;e<t.length;e++)if(t[e].value===i)return t[e];throw new J.A.Error("E1048",i)}(yu(i),a),r=this._createButtonWithMenu({caption:n.text,menu:{items:a,displayExpr:"text",onItemRendered:function(s){s.itemData.isCustom&&(0,_.A)(s.itemElement).addClass(Hw)},onContentReady:function(s){s.component.selectItem(n)},onItemClick:s=>{if(n!==s.itemData){ts(i,(n=s.itemData).value,e._customOperations);var o=r.siblings().filter("."+Mu);e._hasValueButton(i)?(0!==o.length&&o.remove(),e._createValueButton(i,t).appendTo(r.parent())):o.remove(),r.html(n.text),this._updateFilter()}},cssClass:Lw}}).addClass(Qi).addClass(Mw).attr("tabindex",0);return r},_createOperationAndValueButtons:function(i,t,e){this._createOperationButtonWithMenu(i,t).appendTo(e),this._hasValueButton(i)&&this._createValueButton(i,t).appendTo(e)},_createFieldButtonWithMenu:function(i,t,e){var a=this,n=this.option("allowHierarchicalFields"),r=bu(i,n),s=sn(e.name||e.dataField,r),o=function(d,h){return n?wu(d,h):d.caption},l=this._createButtonWithMenu({caption:o(s,r),menu:{items:r,dataStructure:"plain",keyExpr:"id",parentId:"parentId",displayExpr:"caption",onItemClick:d=>{if(s!==d.itemData){t[0]=(s=d.itemData).name||s.dataField,t[2]="object"===s.dataType?null:"",ts(t,$r(s),a._customOperations),l.siblings().filter("."+Qi).remove(),a._createOperationAndValueButtons(t,s,l.parent());var h=o(s,d.component.option("items"));l.html(h),this._updateFilter()}},onContentReady:function(d){d.component.selectItem(s)},cssClass:kw}}).addClass(Qi).addClass(Fw).attr("tabindex",0);return l},_createConditionItem:function(i,t){var e=(0,_.A)("<div>").addClass(Du),a=this._getNormalizedFields(),n=sn(i[0],a);return this._createRemoveButton(()=>{Xr(t,i),1===e.parent().children().length?e.parent().remove():e.remove(),this._updateFilter()}).appendTo(e),this._createFieldButtonWithMenu(a,i,n).appendTo(e),this._createOperationAndValueButtons(i,n,e),e},_getGroupOperations:function(i){var t=this.option("groupOperations"),e=this.option("groupOperationDescriptions");return(!t||!t.length)&&(t=[Pt(i).replace("!","not")]),t.map(a=>({text:e[a],value:ku[a]}))},_createRemoveButton:function(i){var t=(0,_.A)("<div>").addClass(Fu).addClass("dx-icon-remove").addClass(ns).attr("tabindex",0);return this._subscribeOnClickAndEnterKey(t,i),t},_createAddButton:function(i,t,e){var a,n=this.option("maxGroupLevel");return(0,v.O9)(n)&&e>=n?(a=this._createButton(),this._subscribeOnClickAndEnterKey(a,t)):a=this._createButtonWithMenu({menu:{items:[{caption:A.A.format("dxFilterBuilder-addCondition"),click:t},{caption:A.A.format("dxFilterBuilder-addGroup"),click:i}],displayExpr:"caption",onItemClick:function(r){r.itemData.click()},cssClass:Nw}}),a.addClass(Fu).addClass("dx-icon-plus").addClass(ns).attr("tabindex",0)},_createValueText:function(i,t,e){var a=this,n=(0,_.A)("<div>").html("&nbsp;").addClass(Vw).attr("tabindex",0).appendTo(e),r=i[2],s=st(a._customOperations,i[1]);return!s&&t.lookup?_u(t,r,function(o){as(n,o)}):(0,w.z7)(mu(t,r,s)).done(o=>{as(n,o,s)}),a._subscribeOnClickAndEnterKey(n,function(o){"keyup"===o.type&&o.stopPropagation(),a._createValueEditorWithEvents(i,t,e)}),n},_updateConditionValue:function(i,t,e){i[2]!==t&&(i[2]=t),e(),this._updateFilter()},_addDocumentKeyUp:function(i,t){var e=!1,a=!1,n=U.A.getDocument(),r=o=>{e||a?a=!1:t(o)};O.A.on(n,"keyup",r);var s=i.find("input");O.A.on(s,"compositionstart",()=>{e=!0}),O.A.on(s,"compositionend",()=>{e=!1,a=!0}),O.A.on(s,"keydown",o=>{229!==o.which&&(a=!1)}),this._documentKeyUpHandler=r},_addDocumentClick:function(i,t){var e=U.A.getDocument(),a=n=>{this._isFocusOnEditorParts(i,n.target)||(O.A.trigger(i.find("input"),"change"),t())};O.A.on(e,"dxpointerdown",a),this._documentClickHandler=a},_isFocusOnEditorParts:function(i,t){var e=t||U.A.getActiveElement();return(0,_.A)(e).closest(i.children()).length||(0,_.A)(e).closest(".dx-dropdowneditor-overlay").length},_removeEvents:function(){var i=U.A.getDocument();(0,v.O9)(this._documentKeyUpHandler)&&O.A.off(i,"keyup",this._documentKeyUpHandler),(0,v.O9)(this._documentClickHandler)&&O.A.off(i,"dxpointerdown",this._documentClickHandler)},_dispose:function(){this._removeEvents(),this.callBase()},_createValueEditorWithEvents:function(i,t,e){var a=i[2],n=()=>(e.empty(),this._removeEvents(),this._createValueText(i,t,e)),r=()=>{this._updateConditionValue(i,a,function(){n()})},s={value:""===a?null:a,filterOperation:yu(i),setValue:function(l){a=null===l?"":l},closeEditor:r,text:e.text()};e.empty();var o=this._createValueEditor(e,t,s);O.A.trigger(o.find("input").not(":hidden").eq(0),"focus"),this._removeEvents(),this._addDocumentClick(o,r),this._addDocumentKeyUp(o,l=>{var d=(0,P.YD)(l);if("tab"===d){if(this._isFocusOnEditorParts(o))return;this._updateConditionValue(i,a,function(){n(),l.shiftKey&&O.A.trigger(e.prev(),"focus")})}"escape"===d&&O.A.trigger(n(),"focus"),d===rs&&this._updateConditionValue(i,a,function(){O.A.trigger(n(),"focus")})}),this._fireContentReadyAction()},_createValueButton:function(i,t){var e=(0,_.A)("<div>").addClass(Qi).addClass(Mu);return this._createValueText(i,t,e),e},_createValueEditor:function(i,t,e){var a=(0,_.A)("<div>").attr("tabindex",0).appendTo(i),n=st(this._customOperations,e.filterOperation),r=n&&n.editorTemplate?n.editorTemplate:t.editorTemplate;return r?this._getTemplate(r).render({model:(0,y.X)({field:t},e),container:a}):this._editorFactory.createEditor.call(this,a,(0,y.X)({},t,e,{parentType:Vu})),a},_createPopupWithTreeView:function(i,t){var e=this,a=(0,_.A)("<div>").addClass(i.menu.cssClass).appendTo(t);this._createComponent(a,ze.A,{onHiding:i.menu.onHiding,onHidden:i.menu.onHidden,rtlEnabled:i.menu.rtlEnabled,position:i.menu.position,animation:i.menu.animation,contentTemplate:function(n){var r=(0,_.A)("<div>").appendTo(n);e._createComponent(r,Si,i.menu),this.repaint()},_ignoreFunctionValueDeprecation:!0,maxHeight:function(){return Ph(i.menu.position.of)},visible:!0,focusStateEnabled:!1,hideOnParentScroll:this.option("closePopupOnTargetScroll"),hideOnOutsideClick:!0,onShown:i.popup.onShown,shading:!1,width:"auto",height:"auto",showTitle:!1,_wrapperClassExternal:i.menu.cssClass})},_subscribeOnClickAndEnterKey:function(i,t){O.A.on(i,"dxclick",t),O.A.on(i,"keyup",function(e){(0,P.YD)(e)===rs&&t(e)})}});(0,le.A)("dxFilterBuilder",Nu);const Gw=Nu;var Uw=D(6121),$w=Z.View.inherit({_renderCore(){this._updatePopupOptions()},_updatePopupOptions(){this.option("filterBuilderPopup.visible")?this._initPopup():this._filterBuilderPopup&&this._filterBuilderPopup.hide()},_disposePopup(){this._filterBuilderPopup&&(this._filterBuilderPopup.dispose(),this._filterBuilderPopup=void 0),this._filterBuilder&&(this._filterBuilder.dispose(),this._filterBuilder=void 0)},_initPopup(){var i=this;i._disposePopup(),i._filterBuilderPopup=i._createComponent(i.element(),ze.A,(0,y.X)({title:A.A.format("dxDataGrid-filterBuilderPopupTitle"),contentTemplate:t=>i._getPopupContentTemplate(t),onOptionChanged(t){"visible"===t.name&&i.option("filterBuilderPopup.visible",t.value)},toolbarItems:i._getPopupToolbarItems()},i.option("filterBuilderPopup"),{onHidden(){zn(i),i._disposePopup()}}))},_getPopupContentTemplate(i){var t=(0,_.A)(i),e=(0,_.A)("<div>").appendTo((0,_.A)(i));this._filterBuilder=this._createComponent(e,Gw,(0,y.X)({value:this.option("filterValue"),fields:this.getController("columns").getFilteringColumns()},this.option("filterBuilder"),{customOperations:this.getController("filterSync").getCustomFilterOperations()})),this._createComponent(t,Uw.A,{direction:"both"})},_getPopupToolbarItems(){var i=this;return[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:A.A.format("OK"),onClick(){var t=i._filterBuilder.option("value");i.option("filterValue",t),i._filterBuilderPopup.hide()}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:A.A.format("Cancel"),onClick(){i._filterBuilderPopup.hide()}}}]},optionChanged(i){switch(i.name){case"filterBuilder":case"filterBuilderPopup":this._invalidate(),i.handled=!0;break;default:this.callBase(i)}}}),Hu={defaultOptions:()=>({filterBuilder:{groupOperationDescriptions:{and:A.A.format("dxFilterBuilder-and"),or:A.A.format("dxFilterBuilder-or"),notAnd:A.A.format("dxFilterBuilder-notAnd"),notOr:A.A.format("dxFilterBuilder-notOr")},filterOperationDescriptions:{between:A.A.format("dxFilterBuilder-filterOperationBetween"),equal:A.A.format("dxFilterBuilder-filterOperationEquals"),notEqual:A.A.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:A.A.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:A.A.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:A.A.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:A.A.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:A.A.format("dxFilterBuilder-filterOperationStartsWith"),contains:A.A.format("dxFilterBuilder-filterOperationContains"),notContains:A.A.format("dxFilterBuilder-filterOperationNotContains"),endsWith:A.A.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:A.A.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:A.A.format("dxFilterBuilder-filterOperationIsNotBlank")}},filterBuilderPopup:{}}),views:{filterBuilderView:$w}};G.registerModule("filterBuilder",Hu);var qi="filter-panel",Xw="".concat(qi,"-text"),Yw="".concat(qi,"-checkbox"),jw="".concat(qi,"-clear-filter"),Qw="".concat(qi,"-left"),Zw=Z.View.inherit({isVisible(){return this.option("filterPanel.visible")&&this.getController("data").dataSource()},init(){this.getController("data").dataSourceChanged.add(()=>this.render()),this._columnsController=this.getController("columns")},_renderCore(){var i=this.element();if(i.empty(),this._columnsController.getColumns().length){i.addClass(this.addWidgetPrefix(qi));var e=(0,_.A)("<div>").addClass(this.addWidgetPrefix(Qw)).appendTo(i);this._renderFilterBuilderText(i,e)}},_renderFilterBuilderText(i,t){var e=this._getFilterElement(),a=this._getTextElement();if(this.option("filterValue")||this._filterValueBuffer){var n=this._getCheckElement(),r=this._getRemoveButtonElement();return t.append(n).append(e).append(a),void i.append(r)}t.append(e).append(a)},_getCheckElement(){var i=this,t=(0,_.A)("<div>").addClass(this.addWidgetPrefix(Yw));return i._createComponent(t,pa.A,{value:i.option("filterPanel.filterEnabled"),onValueChanged(e){i.option("filterPanel.filterEnabled",e.value)}}),t.attr("title",this.option("filterPanel.texts.filterEnabledHint")),t},_getFilterElement(){var i=this,t=(0,_.A)("<div>").addClass("dx-icon-filter");return O.A.on(t,"click",()=>i._showFilterBuilder()),Oi("filterPanel",i,t,void 0,()=>i._showFilterBuilder()),i._addTabIndexToElement(t),t},_getTextElement(){var e,i=this,t=(0,_.A)("<div>").addClass(i.addWidgetPrefix(Xw)),a=i.option("filterValue");return a?(0,w.z7)(i.getFilterText(a,i.getController("filterSync").getCustomFilterOperations())).done(n=>{var r=i.option("filterPanel.customizeText");if(r){var s=r({component:i.component,filterValue:a,text:n});"string"==typeof s&&(n=s)}t.text(n)}):(e=i.option("filterPanel.texts.createFilter"),t.text(e)),O.A.on(t,"click",()=>i._showFilterBuilder()),Oi("filterPanel",i,t,void 0,()=>i._showFilterBuilder()),i._addTabIndexToElement(t),t},_showFilterBuilder(){this.option("filterBuilderPopup.visible",!0)},_getRemoveButtonElement(){var i=this,t=()=>i.option("filterValue",null),e=(0,_.A)("<div>").addClass(i.addWidgetPrefix(jw)).text(i.option("filterPanel.texts.clearFilter"));return O.A.on(e,"click",t),Oi("filterPanel",this,e,void 0,t),i._addTabIndexToElement(e),e},_addTabIndexToElement(i){if(!this.option("useLegacyKeyboardNavigation")){var t=this.option("tabindex")||0;i.attr("tabindex",t)}},optionChanged(i){switch(i.name){case"filterValue":this._invalidate(),this.option("filterPanel.filterEnabled",!0),i.handled=!0;break;case"filterPanel":this._invalidate(),i.handled=!0;break;default:this.callBase(i)}},_getConditionText(i,t,e){var a="[".concat(i,"] ").concat(t);return(0,v.O9)(e)&&(a+=e),a},_getValueMaskedText:i=>Array.isArray(i)?"('".concat(i.join("', '"),"')"):" '".concat(i,"'"),_getValueText(i,t,e){var a=new w.cY,n=t&&t.customizeText;if((0,v.O9)(e)||n)if(!n&&i.lookup)_u(i,e,s=>{a.resolve(this._getValueMaskedText(s))});else{var r=Array.isArray(e)?e:F.getDisplayValue(i,e,null);(0,w.z7)(mu(i,r,t,"filterPanel")).done(s=>{a.resolve(this._getValueMaskedText(s))})}else a.resolve("");return a.promise()},getConditionText(i,t){var s,e=this,a=i[1],n=new w.cY,r=st(t.customOperations,a),o=sn(i[0],t.columns),l=o.caption||"",d=i[2];return s=r?r.caption||(0,qt.Bc)(r.name):Ur(null===d?"="===a?"isblank":"isnotblank":a,t.filterOperationDescriptions),this._getValueText(o,r,d).done(h=>{n.resolve(e._getConditionText(l,s,h))}),n},getGroupText(i,t,e){var a=this,n=new w.cY,r=[],s=Pt(i);return i.forEach(o=>{ue(o)?r.push(a.getConditionText(o,t)):ft(o)&&r.push(a.getGroupText(o,t,!0))}),w.z7.apply(this,r).done(function(){for(var o,l=arguments.length,d=new Array(l),h=0;h<l;h++)d[h]=arguments[h];if(s.startsWith("!")){var u=t.groupOperationDescriptions["not".concat(s.substring(1,2).toUpperCase()).concat(s.substring(2))].split(" ");o="".concat(u[0]," ").concat(d[0])}else o=d.join(" ".concat(t.groupOperationDescriptions[s]," "));e&&(o="(".concat(o,")")),n.resolve(o)}),n},getFilterText(i,t){var e={customOperations:t,columns:this.getController("columns").getFilteringColumns(),filterOperationDescriptions:this.option("filterBuilder.filterOperationDescriptions"),groupOperationDescriptions:this.option("filterBuilder.groupOperationDescriptions")};return ue(i)?this.getConditionText(i,e):this.getGroupText(i,e)}}),zu={defaultOptions:()=>({filterPanel:{visible:!1,filterEnabled:!0,texts:{createFilter:A.A.format("dxDataGrid-filterPanelCreateFilter"),clearFilter:A.A.format("dxDataGrid-filterPanelClearFilter"),filterEnabledHint:A.A.format("dxDataGrid-filterPanelFilterEnabledHint")}}}),views:{filterPanelView:Zw},extenders:{controllers:{data:{optionChanged(i){"filterPanel"===i.name?(this._applyFilter(),i.handled=!0):this.callBase(i)}}}}};G.registerModule("filterPanel",zu);var Jw=D(8887);class ey extends Jw.A{_optionChanged(t){switch(t.name){case"pageIndex":var e=this.option("pageIndexChanged");e&&e(t.value);break;case"pageSize":var a=this.option("pageSizeChanged");a&&a(t.value)}super._optionChanged(t)}}var X=D(1522),re=D(6806),Ku=D(348),ty=D(505),iy=D(9228);function ot(i,t){var e,a=null!==(e=(0,ty.A)(t))&&void 0!==e?e:{};return(0,iy.R)(a[i])}function dn(i){return ot("marginLeft",i)+ot("marginRight",i)+ot("width",i)}function Wu(i){return ot("minWidth",i)}var ny=["contentTemplate","pagerProps"];var dy={},hy=i=>i&&(i.defaultProps?t=>(0,X._B)((0,X.sO)(2,i,(0,N.A)({},t))):i);let uy=(()=>{class i extends re.JP{constructor(e){super(e),this.parentRef=(0,X._3)(),this.pageSizesRef=(0,X._3)(),this.infoTextRef=(0,X._3)(),this.pagesRef=(0,X._3)(),this.actualIsLargeDisplayMode=!0,this.actualInfoTextVisible=!0,this.state={infoTextVisible:!0,isLargeDisplayMode:!0},this.subscribeToResize=this.subscribeToResize.bind(this),this.effectUpdateChildProps=this.effectUpdateChildProps.bind(this),this.updateAdaptivityProps=this.updateAdaptivityProps.bind(this)}createEffects(){return[new re.Lt(this.subscribeToResize,[this.state.infoTextVisible,this.state.isLargeDisplayMode]),new re.Lt(this.effectUpdateChildProps,[this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])]}updateEffects(){var e,a;null===(e=this._effects[0])||void 0===e||e.update([this.state.infoTextVisible,this.state.isLargeDisplayMode]),null===(a=this._effects[1])||void 0===a||a.update([this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])}subscribeToResize(){var e=()=>{this.parentWidth>0&&this.updateAdaptivityProps()};return Ku.A.add(e),()=>{Ku.A.remove(e)}}effectUpdateChildProps(){this.parentWidth>0&&this.updateAdaptivityProps()}get contentAttributes(){var{className:e,displayMode:a,gridCompatibility:n,hasKnownLastPage:r,infoText:s,label:o,lightModeEnabled:l,maxPagesCount:d,onKeyDown:h,pageCount:u,pageIndex:c,pageIndexChange:g,pageSize:m,pageSizeChange:f,pageSizes:x,pagesCountText:b,pagesNavigatorVisible:S,rtlEnabled:T,showInfo:B,showNavigationButtons:M,showPageSizes:L,totalCount:z,visible:H}=this.props.pagerProps;return(0,N.A)({},this.restAttributes,{pageSize:m,pageIndex:c,pageIndexChange:g,pageSizeChange:f,gridCompatibility:n,className:e,showInfo:B,infoText:s,lightModeEnabled:l,displayMode:a,maxPagesCount:d,pageCount:u,pagesCountText:b,visible:H,hasKnownLastPage:r,pagesNavigatorVisible:S,showPageSizes:L,pageSizes:x,rtlEnabled:T,showNavigationButtons:M,totalCount:z,onKeyDown:h,label:o})}get parentWidth(){return this.parentRef.current?dn(this.parentRef.current):0}updateAdaptivityProps(){var e=function ly(i){var{info:t,pageSizes:e,pages:a,parent:n}=i,r=function ay(i){var t=ot("paddingLeft",i)+ot("paddingRight",i);return ot("width",i)-t}(n),s=dn(e),o=dn(t),l=dn(a);return{parent:r,pageSizes:s,info:o+ot("marginLeft",t)+ot("marginRight",t),pages:l}}({parent:this.parentRef.current,pageSizes:this.pageSizesRef.current,info:this.infoTextRef.current,pages:this.pagesRef.current});if(this.actualInfoTextVisible===this.state.infoTextVisible&&this.actualIsLargeDisplayMode===this.state.isLargeDisplayMode){var a=!(0,v.O9)(this.elementsWidth);a&&(this.elementsWidth={}),(a||this.state.isLargeDisplayMode)&&(this.elementsWidth.pageSizes=e.pageSizes,this.elementsWidth.pages=e.pages),(a||this.state.infoTextVisible)&&(this.elementsWidth.info=e.info),this.actualIsLargeDisplayMode=function sy(i){var{pageSizes:t,pages:e,parent:a}=i;return a-(t+e)>0}((0,N.A)({parent:e.parent},{pageSizes:this.elementsWidth.pageSizes,pages:this.elementsWidth.pages})),this.actualInfoTextVisible=function oy(i){var{info:t,pageSizes:e,pages:a,parent:n}=i;return n-(e+a+t)>0}((0,N.A)({},e,{info:this.elementsWidth.info})),this.setState(n=>({infoTextVisible:this.actualInfoTextVisible})),this.setState(n=>({isLargeDisplayMode:this.actualIsLargeDisplayMode}))}}get restAttributes(){return(0,xe.A)(this.props,ny)}render(){var e=this.props;return(i=>{var{contentAttributes:t,infoTextRef:e,infoTextVisible:a,isLargeDisplayMode:n,pageSizesRef:r,pagesRef:s,parentRef:o,props:{contentTemplate:l}}=i;return l((0,N.A)({rootElementRef:o,pageSizesRef:r,infoTextRef:e,pagesRef:s,infoTextVisible:a,isLargeDisplayMode:n},t))})({props:(0,N.A)({},e,{contentTemplate:hy(e.contentTemplate)}),infoTextVisible:this.state.infoTextVisible,isLargeDisplayMode:this.state.isLargeDisplayMode,parentRef:this.parentRef,pageSizesRef:this.pageSizesRef,infoTextRef:this.infoTextRef,pagesRef:this.pagesRef,contentAttributes:this.contentAttributes,parentWidth:this.parentWidth,updateAdaptivityProps:this.updateAdaptivityProps,restAttributes:this.restAttributes})}}return i.defaultProps=dy,i})();var Gu={gridCompatibility:!0,showInfo:!1,displayMode:"adaptive",maxPagesCount:10,pageCount:10,visible:!0,hasKnownLastPage:!0,pagesNavigatorVisible:"auto",showPageSizes:!0,pageSizes:Object.freeze([5,10]),showNavigationButtons:!1,totalCount:0,get label(){return A.A.format("dxPager-ariaLabel")}},cy=Object.create(Object.prototype,(0,N.A)(Object.getOwnPropertyDescriptors(Gu),Object.getOwnPropertyDescriptors({defaultPageSize:5,pageSizeChange:()=>{},defaultPageIndex:1,pageIndexChange:()=>{}}))),pe=Object.create(Object.prototype,(0,N.A)(Object.getOwnPropertyDescriptors(Gu),Object.getOwnPropertyDescriptors({pageSize:5,pageIndex:1}))),gy=["infoText","pageCount","pageIndex","rootElementRef","totalCount"],Uu="dx-info",_y={get pageIndex(){return pe.pageIndex},get pageCount(){return pe.pageCount},get totalCount(){return pe.totalCount}};let vy=(()=>{class i extends re.eh{constructor(e){super(e),this.state={}}get infoText(){var e;return(null!==(e=this.props.infoText)&&void 0!==e?e:"")||A.A.getFormatter("dxPager-infoText")()}get text(){var{pageCount:e,pageIndex:a,totalCount:n}=this.props;return(0,Ze.GP)(this.infoText,(a+1).toString(),e.toString(),n.toString())}get restAttributes(){return(0,xe.A)(this.props,gy)}render(){return(i=>{var{props:{rootElementRef:t},text:e}=i;return(0,X.bF)(1,"div",Uu,e,0,null,null,t)})({props:(0,N.A)({},this.props),infoText:this.infoText,text:this.text,restAttributes:this.restAttributes})}}return i.defaultProps=_y,i})();var my=D(410),Zi=(0,re.q6)(void 0),Cy=["children","className","label","onClick","selected","tabIndex"],xy={className:"",label:"",tabIndex:0,selected:!1};let hn=(()=>{class i extends re.JP{constructor(e){super(e),this.state={},this.widgetRef=(0,X._3)(),this.keyboardEffect=this.keyboardEffect.bind(this),this.subscribeToClick=this.subscribeToClick.bind(this)}get keyboardContext(){return this.context[Zi.id]?this.context[Zi.id]:Zi.defaultValue}createEffects(){return[new re.Lt(this.keyboardEffect,[this.keyboardContext,this.props.onClick]),new re.Lt(this.subscribeToClick,[this.props.onClick])]}updateEffects(){var e,a;null===(e=this._effects[0])||void 0===e||e.update([this.keyboardContext,this.props.onClick]),null===(a=this._effects[1])||void 0===a||a.update([this.props.onClick])}keyboardEffect(){return this.keyboardContext.registerKeyboardAction(this.widgetRef.current,this.props.onClick)}subscribeToClick(){return(0,my.Ao)(this.widgetRef.current,this.props.onClick)}get restAttributes(){return(0,xe.A)(this.props,Cy)}render(){return(i=>{var{props:{children:t,className:e,label:a,selected:n,tabIndex:r},widgetRef:s}=i;return(0,X.bF)(1,"div",e,t,0,{tabIndex:r,role:"button","aria-label":a,"aria-current":n?"page":void 0},null,s)})({props:(0,N.A)({},this.props),widgetRef:this.widgetRef,keyboardContext:this.keyboardContext,restAttributes:this.restAttributes})}}return i.defaultProps=xy,i})();var $u="dx-selection",Xu="dx-page-size",Iy="".concat(Xu," ").concat($u),un=D(2243),Ty=["className","index","onClick","selected"],Dy={index:0,selected:!1,className:"dx-page"};let Yu=(()=>{class i extends re.eh{constructor(e){super(e),this.state={}}get label(){return(0,Ze.GP)(A.A.getFormatter("dxPager-page"),this.value)}get value(){return this.props.index+1}get className(){var{selected:e}=this.props;return(0,un.g)({["".concat(this.props.className)]:!!this.props.className,[$u]:!!e})}get restAttributes(){return(0,xe.A)(this.props,Ty)}render(){return(i=>{var{className:t,label:e,props:{onClick:a,selected:n},value:r}=i;return(0,X.sO)(2,hn,{className:t,label:e,onClick:a,selected:n,children:r})})({props:(0,N.A)({},this.props),label:this.label,value:this.value,className:this.className,restAttributes:this.restAttributes})}}return i.defaultProps=Dy,i})();var Ye=D(3435),By=["pageIndexes"],Fy=["maxPagesCount","pageCount","pageIndex","pageIndexChange"];function ju(i,t,e){return 1===i?"high":i+t===e-1?"low":"both"}function Qu(i,t,e){var a=[],n=[];switch(e){case"none":a=[...i];break;case"both":a=[0,"low",...i,"high",t-1],n=i.slice(1,-1);break;case"high":a=[0,...i,"high",t-1],n=i.slice(0,-1);break;case"low":a=[0,"low",...i,t-1],n=i.slice(1)}return{slidingWindowIndexes:i,indexesForReuse:n,pageIndexes:a}}function qu(i,t,e,a){for(var n=[],r=0;r<t;r+=1)n.push(r+i);return Qu(n,e,a)}var Py={get pageIndex(){return pe.pageIndex},get maxPagesCount(){return pe.maxPagesCount},get pageCount(){return pe.pageCount}};let Ly=(()=>{class i extends re.eh{constructor(e){super(e),this.state={},this.canReuseSlidingWindow=this.canReuseSlidingWindow.bind(this),this.generatePageIndexes=this.generatePageIndexes.bind(this),this.isSlidingWindowMode=this.isSlidingWindowMode.bind(this),this.onPageClick=this.onPageClick.bind(this)}get config(){return this.context[Ye.Q.id]?this.context[Ye.Q.id]:Ye.Q.defaultValue}get slidingWindowState(){return this.slidingWindowStateHolder||{indexesForReuse:[],slidingWindowIndexes:[]}}canReuseSlidingWindow(e,a){var{indexesForReuse:n}=this.slidingWindowState,r=n.slice(-1)[0]<e-1,s=n.includes(a);return r&&s}generatePageIndexes(){var n,{pageCount:e,pageIndex:a}=this.props,{slidingWindowIndexes:r}=this.slidingWindowState,l=qu(n=a===r[0]?a-1:a===r[r.length-1]?a+2-4:a<4?1:a>=e-4?e-4-1:a-1,4,e,ju(n,4,e)),{pageIndexes:d}=l,h=(0,xe.A)(l,By);return this.slidingWindowStateHolder=h,d}isSlidingWindowMode(){var{maxPagesCount:e,pageCount:a}=this.props;return a<=4||a<=e}onPageClick(e){this.props.pageIndexChange(e)}get pageIndexes(){var{pageCount:e}=this.props;if(this.isSlidingWindowMode())return qu(0,e,e,"none").pageIndexes;if(this.canReuseSlidingWindow(e,this.props.pageIndex)){var{slidingWindowIndexes:a}=this.slidingWindowState;return Qu(a,e,ju(a[0],4,e)).pageIndexes}return this.generatePageIndexes()}get pages(){var e,{pageIndex:a}=this.props,n=s=>{var o="low"===s||"high"===s?null:{index:s,onClick:()=>this.onPageClick(s),selected:a===s};return{key:s.toString(),pageProps:o}};return(null!==(e=this.config)&&void 0!==e&&e.rtlEnabled?[...this.pageIndexes].reverse():this.pageIndexes).map(s=>n(s))}get restAttributes(){return(0,xe.A)(this.props,Fy)}render(){return(i=>{var{pages:t}=i,e=t.map(a=>{var{key:n,pageProps:r}=a;return r?(0,X.sO)(2,Yu,{index:r.index,selected:r.selected,onClick:r.onClick},n):(0,X.bF)(1,"div","dx-separator",". . .",16,null,n)});return(0,X.nl)(e,0)})({props:(0,N.A)({},this.props),config:this.config,pageIndexes:this.pageIndexes,pages:this.pages,restAttributes:this.restAttributes})}}return i.defaultProps=Py,i})();var Zu=D(8854),Ju=D(9060),_i={hoverStateEnabled:!0,activeStateEnabled:!0,get focusStateEnabled(){return"desktop"===ne.A.real().deviceType&&!ne.A.isSimulator()}},cn={label:"",get labelMode(){return(0,de.gx)((0,de.ss)())?"floating":"static"}},ky=["accessKey","activeStateEnabled","className","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","invalidValueMessage","isDirty","isValid","label","labelMode","max","min","mode","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","showSpinButtons","step","tabIndex","useLargeSpinButtons","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],ye=Object.create(Object.prototype,(0,N.A)(Object.getOwnPropertyDescriptors(Ju.eH),Object.getOwnPropertyDescriptors({defaultValue:0,isReactComponentWrapper:!0}))),zy={get defaultValue(){return ye.defaultValue},get readOnly(){return ye.readOnly},get name(){return ye.name},get validationError(){return ye.validationError},get validationErrors(){return ye.validationErrors},get validationMessageMode(){return ye.validationMessageMode},get validationMessagePosition(){return ye.validationMessagePosition},get validationStatus(){return ye.validationStatus},get isValid(){return ye.isValid},get isDirty(){return ye.isDirty},get inputAttr(){return ye.inputAttr},get className(){return ye.className},get activeStateEnabled(){return _i.activeStateEnabled},get disabled(){return ye.disabled},get focusStateEnabled(){return _i.focusStateEnabled},get hoverStateEnabled(){return _i.hoverStateEnabled},get tabIndex(){return ye.tabIndex},get visible(){return ye.visible},get label(){return cn.label},get labelMode(){return cn.labelMode},isReactComponentWrapper:!0};let Ky=(()=>{class i extends re.eh{constructor(e){super(e),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,N.A)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var e=(0,N.A)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,xe.A)(e,ky)}render(){return(i=>{var{componentProps:t,restAttributes:e}=i;return(0,X._B)((0,X.sO)(2,Zu.FU,(0,N.A)({componentType:Hd.A,componentProps:t,templateNames:[]},e)))})({props:(0,N.A)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return i.defaultProps=zy,i})();function ec(i,t){return i+10*Math.max(...t).toString().length}var Gy=["inputAttr","pageCount","pageIndex","pageIndexChange","pagesCountText"],Uy="".concat(Uu,"  dx-info-text"),tc="dx-page-index",jy={inputAttr:Object.freeze({"aria-label":A.A.format("dxPager-ariaPageNumber")})},Qy={get pageIndex(){return pe.pageIndex},get pageCount(){return pe.pageCount},get inputAttr(){return jy.inputAttr}};let qy=(()=>{class i extends re.JP{constructor(e){super(e),this.pageIndexRef=(0,X._3)(),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this),this.selectLastPageIndex=this.selectLastPageIndex.bind(this),this.valueChange=this.valueChange.bind(this)}createEffects(){return[new re.Lt(this.updateWidth,[this.state.minWidth])]}updateEffects(){var e;null===(e=this._effects[0])||void 0===e||e.update([this.state.minWidth])}updateWidth(){var e,a=null===(e=this.pageIndexRef.current)||void 0===e?void 0:e.querySelector(".".concat(tc));this.setState(n=>({minWidth:a&&Wu(a)||n.minWidth}))}get value(){return this.props.pageIndex+1}get width(){var{pageCount:e}=this.props;return ec(this.state.minWidth,[e])}get pagesCountText(){var e;return(null!==(e=this.props.pagesCountText)&&void 0!==e?e:"")||A.A.getFormatter("dxPager-pagesCountText")()}selectLastPageIndex(){this.props.pageIndexChange(this.props.pageCount-1)}valueChange(e){this.props.pageIndexChange(e-1)}get restAttributes(){return(0,xe.A)(this.props,Gy)}render(){return(i=>{var{pageIndexRef:t,pagesCountText:e,props:{inputAttr:a,pageCount:n},selectLastPageIndex:r,value:s,valueChange:o,width:l}=i;return(0,X.bF)(1,"div","dx-light-pages",[(0,X.sO)(2,Ky,{className:tc,min:1,max:Math.max(n,s),width:l,value:s,valueChange:o,inputAttr:a}),(0,X.bF)(1,"span",Uy,e,0),(0,X.sO)(2,Yu,{className:"dx-pages-count",selected:!1,index:n-1,onClick:r})],4,null,null,t)})({props:(0,N.A)({},this.props),pageIndexRef:this.pageIndexRef,value:this.value,width:this.width,pagesCountText:this.pagesCountText,selectLastPageIndex:this.selectLastPageIndex,valueChange:this.valueChange,restAttributes:this.restAttributes})}}return i.defaultProps=Qy,i})();var Zy=["hasKnownLastPage","isLargeDisplayMode","maxPagesCount","pageCount","pageIndex","pageIndexChange","pagesCountText","showNavigationButtons","totalCount"],gn="dx-navigate-button",ic="dx-prev-button",ac="dx-next-button",nc="dx-button-disable",tS={nextEnabledClass:"".concat(gn," ").concat(ac),prevEnabledClass:"".concat(gn," ").concat(ic),nextDisabledClass:"".concat(nc," ").concat(gn," ").concat(ac),prevDisabledClass:"".concat(nc," ").concat(gn," ").concat(ic)},iS={next:"prev",prev:"next"},sS={get pageIndex(){return pe.pageIndex},get maxPagesCount(){return pe.maxPagesCount},get pageCount(){return pe.pageCount},get hasKnownLastPage(){return pe.hasKnownLastPage},get showNavigationButtons(){return pe.showNavigationButtons},get totalCount(){return pe.totalCount},get isLargeDisplayMode(){return true}};let oS=(()=>{class i extends re.eh{constructor(e){super(e),this.state={},this.__getterCache={},this.pageIndexChange=this.pageIndexChange.bind(this),this.getButtonProps=this.getButtonProps.bind(this),this.canNavigateToPage=this.canNavigateToPage.bind(this),this.getNextPageIndex=this.getNextPageIndex.bind(this),this.canNavigateTo=this.canNavigateTo.bind(this),this.navigateToPage=this.navigateToPage.bind(this)}get config(){return this.context[Ye.Q.id]?this.context[Ye.Q.id]:Ye.Q.defaultValue}pageIndexChange(e){this.canNavigateToPage(e)&&this.props.pageIndexChange(e)}getButtonProps(e){var a,n=null!==(a=this.config)&&void 0!==a&&a.rtlEnabled?iS[e]:e,r=this.canNavigateTo(n);return{className:tS["".concat(e).concat(r?"Enabled":"Disabled","Class")],tabIndex:r?0:-1,navigate:()=>this.navigateToPage(n)}}canNavigateToPage(e){return this.props.hasKnownLastPage?e>=0&&e<=this.props.pageCount-1:e>=0}getNextPageIndex(e){return this.props.pageIndex+function nS(i){return"next"===i?1:-1}(e)}canNavigateTo(e){return this.canNavigateToPage(this.getNextPageIndex(e))}navigateToPage(e){this.pageIndexChange(this.getNextPageIndex(e))}get renderPrevButton(){var{isLargeDisplayMode:e,showNavigationButtons:a}=this.props;return!e||a}get renderNextButton(){return this.renderPrevButton||!this.props.hasKnownLastPage}get prevButtonProps(){return void 0!==this.__getterCache.prevButtonProps?this.__getterCache.prevButtonProps:this.__getterCache.prevButtonProps=this.getButtonProps("prev")}get nextButtonProps(){return void 0!==this.__getterCache.nextButtonProps?this.__getterCache.nextButtonProps:this.__getterCache.nextButtonProps=this.getButtonProps("next")}get restAttributes(){return(0,xe.A)(this.props,Zy)}componentWillUpdate(e,a,n){(this.context[Ye.Q.id]!==n[Ye.Q.id]||this.props.hasKnownLastPage!==e.hasKnownLastPage||this.props.pageCount!==e.pageCount||this.props.pageIndex!==e.pageIndex||this.props.pageIndexChange!==e.pageIndexChange)&&(this.__getterCache.prevButtonProps=void 0),(this.context[Ye.Q.id]!==n[Ye.Q.id]||this.props.hasKnownLastPage!==e.hasKnownLastPage||this.props.pageCount!==e.pageCount||this.props.pageIndex!==e.pageIndex||this.props.pageIndexChange!==e.pageIndexChange)&&(this.__getterCache.nextButtonProps=void 0)}render(){return(i=>{var{nextButtonProps:t,pageIndexChange:e,prevButtonProps:a,props:{isLargeDisplayMode:n,maxPagesCount:r,pageCount:s,pageIndex:o,pagesCountText:l},renderNextButton:d,renderPrevButton:h}=i;return(0,X.nl)([h&&(0,X.sO)(2,hn,{label:A.A.getFormatter("dxPager-prevPage")(),className:a.className,tabIndex:a.tabIndex,onClick:a.navigate}),n&&(0,X.sO)(2,Ly,{maxPagesCount:r,pageCount:s,pageIndex:o,pageIndexChange:e}),!n&&(0,X.sO)(2,qy,{pageCount:s,pageIndex:o,pageIndexChange:e,pagesCountText:l}),d&&(0,X.sO)(2,hn,{label:A.A.getFormatter("dxPager-nextPage")(),className:t.className,tabIndex:t.tabIndex,onClick:t.navigate})],0)})({props:(0,N.A)({},this.props),config:this.config,pageIndexChange:this.pageIndexChange,renderPrevButton:this.renderPrevButton,renderNextButton:this.renderNextButton,prevButtonProps:this.prevButtonProps,nextButtonProps:this.nextButtonProps,restAttributes:this.restAttributes})}}return i.defaultProps=sS,i})();var lS=["accessKey","activeStateEnabled","className","dataSource","defaultValue","disabled","displayExpr","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","label","labelMode","name","onClick","onFocusIn","onKeyDown","placeholder","readOnly","rtlEnabled","searchEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","valueExpr","visible","width"],Ce=Object.create(Object.prototype,(0,N.A)(Object.getOwnPropertyDescriptors(Ju.eH),Object.getOwnPropertyDescriptors({placeholder:"",hoverStateEnabled:!0,searchEnabled:!1,defaultValue:null,isReactComponentWrapper:!0}))),hS={get placeholder(){return Ce.placeholder},get hoverStateEnabled(){return _i.hoverStateEnabled},get searchEnabled(){return Ce.searchEnabled},get defaultValue(){return Ce.defaultValue},get readOnly(){return Ce.readOnly},get name(){return Ce.name},get validationError(){return Ce.validationError},get validationErrors(){return Ce.validationErrors},get validationMessageMode(){return Ce.validationMessageMode},get validationMessagePosition(){return Ce.validationMessagePosition},get validationStatus(){return Ce.validationStatus},get isValid(){return Ce.isValid},get isDirty(){return Ce.isDirty},get inputAttr(){return Ce.inputAttr},get className(){return Ce.className},get activeStateEnabled(){return _i.activeStateEnabled},get disabled(){return Ce.disabled},get focusStateEnabled(){return _i.focusStateEnabled},get tabIndex(){return Ce.tabIndex},get visible(){return Ce.visible},get label(){return cn.label},get labelMode(){return cn.labelMode},isReactComponentWrapper:!0};let uS=(()=>{class i extends re.eh{constructor(e){super(e),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,N.A)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var e=(0,N.A)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,xe.A)(e,lS)}render(){return(i=>{var{componentProps:t,restAttributes:e}=i;return(0,X._B)((0,X.sO)(2,Zu.FU,(0,N.A)({componentType:In.A,componentProps:t,templateNames:["dropDownButtonTemplate","groupTemplate","itemTemplate"]},e)))})({props:(0,N.A)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return i.defaultProps=hS,i})();var cS=["inputAttr","pageSize","pageSizeChange","pageSizes","parentRef"],pS={inputAttr:Object.freeze({"aria-label":A.A.format("dxPager-ariaPageSize")})},_S={get pageSize(){return pe.pageSize},get inputAttr(){return pS.inputAttr}};let vS=(()=>{class i extends re.JP{constructor(e){super(e),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this)}createEffects(){return[new re.Lt(this.updateWidth,[this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])]}updateEffects(){var e;null===(e=this._effects[0])||void 0===e||e.update([this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])}updateWidth(){this.setState(e=>({minWidth:Wu(this.props.parentRef.current)||e.minWidth}))}get width(){return ec(this.state.minWidth,this.props.pageSizes.map(e=>e.value))}get restAttributes(){return(0,xe.A)(this.props,cS)}render(){return(i=>{var{props:{inputAttr:t,pageSize:e,pageSizeChange:a,pageSizes:n},width:r}=i;return(0,X.sO)(2,uS,{displayExpr:"text",valueExpr:"value",dataSource:n,value:e,valueChange:a,width:r,inputAttr:t})})({props:(0,N.A)({},this.props),width:this.width,restAttributes:this.restAttributes})}}return i.defaultProps=_S,i})();var mS=["pageSize","pageSizeChange","pageSizes"],fS={get pageSize(){return pe.pageSize}};let xS=(()=>{class i extends re.eh{constructor(e){super(e),this.state={},this.__getterCache={},this.onPageSizeChange=this.onPageSizeChange.bind(this)}get pageSizesText(){return void 0!==this.__getterCache.pageSizesText?this.__getterCache.pageSizesText:this.__getterCache.pageSizesText=(()=>{var{pageSize:e,pageSizes:a}=this.props;return a.map((n,r)=>{var{text:s,value:o}=n;return{className:(0,un.g)({[o===e?Iy:Xu]:!0,"dx-first-child":0===r}),click:this.onPageSizeChange(o),label:(0,Ze.GP)(A.A.getFormatter("dxPager-pageSize"),o||A.A.getFormatter("dxPager-pageSizesAllText")),text:s}})})()}onPageSizeChange(e){return()=>(this.props.pageSizeChange(e),this.props.pageSize)}get restAttributes(){return(0,xe.A)(this.props,mS)}componentWillUpdate(e,a,n){(this.props.pageSize!==e.pageSize||this.props.pageSizes!==e.pageSizes||this.props.pageSizeChange!==e.pageSizeChange)&&(this.__getterCache.pageSizesText=void 0)}render(){return(i=>{var{pageSizesText:t}=i;return(0,X.nl)(t.map(e=>{var{className:a,click:n,label:r,text:s}=e;return(0,X.sO)(2,hn,{className:a,label:r,onClick:n,children:s},s)}),0)})({props:(0,N.A)({},this.props),pageSizesText:this.pageSizesText,restAttributes:this.restAttributes})}}return i.defaultProps=fS,i})();var bS=["isLargeDisplayMode","pageSize","pageSizeChange","pageSizes","rootElementRef"],SS={get pageSize(){return pe.pageSize},get pageSizes(){return pe.pageSizes},get isLargeDisplayMode(){return true}};let OS=(()=>{class i extends re.JP{constructor(e){super(e),this.state={},this.htmlRef=(0,X._3)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this)}createEffects(){return[new re.Lt(this.setRootElementRef,[])]}setRootElementRef(){var{rootElementRef:e}=this.props;e&&(e.current=this.htmlRef.current)}get normalizedPageSizes(){return void 0!==this.__getterCache.normalizedPageSizes?this.__getterCache.normalizedPageSizes:this.__getterCache.normalizedPageSizes=(()=>{var{pageSizes:e}=this.props;return e.map(a=>"all"===a||0===a?{text:A.A.getFormatter("dxPager-pageSizesAllText")(),value:0}:{text:String(a),value:a})})()}get restAttributes(){return(0,xe.A)(this.props,bS)}componentWillUpdate(e,a,n){super.componentWillUpdate(),this.props.pageSizes!==e.pageSizes&&(this.__getterCache.normalizedPageSizes=void 0)}render(){return(i=>{var{htmlRef:t,normalizedPageSizes:e,props:{isLargeDisplayMode:a,pageSize:n,pageSizeChange:r}}=i;return(0,X.bF)(1,"div","dx-page-sizes",[a&&(0,X.sO)(2,xS,{pageSizes:e,pageSize:n,pageSizeChange:r}),!a&&(0,X.sO)(2,vS,{parentRef:t,pageSizes:e,pageSize:n,pageSizeChange:r})],0,null,null,t)})({props:(0,N.A)({},this.props),htmlRef:this.htmlRef,normalizedPageSizes:this.normalizedPageSizes,restAttributes:this.restAttributes})}}return i.defaultProps=SS,i})();var IS=D(7476),AS=["className","displayMode","gridCompatibility","hasKnownLastPage","infoText","infoTextRef","infoTextVisible","isLargeDisplayMode","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pageSizesRef","pagesCountText","pagesNavigatorVisible","pagesRef","rootElementRef","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"],RS=Object.create(Object.prototype,(0,N.A)(Object.getOwnPropertyDescriptors(pe),Object.getOwnPropertyDescriptors({infoTextVisible:!0,isLargeDisplayMode:!0})));let DS=(()=>{class i extends re.JP{constructor(e){super(e),this.state={},this.widgetRootElementRef=(0,X._3)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this),this.createFakeInstance=this.createFakeInstance.bind(this)}createEffects(){return[new re.Lt(this.setRootElementRef,[])]}getChildContext(){return(0,N.A)({},this.context,{[Zi.id]:this.keyboardAction||Zi.defaultValue})}setRootElementRef(){var{rootElementRef:e}=this.props;e&&(e.current=this.widgetRootElementRef.current)}createFakeInstance(){return{option:()=>!1,element:()=>this.widgetRootElementRef.current,_createActionByOption:()=>e=>{var a,n;null===(a=(n=this.props).onKeyDown)||void 0===a||a.call(n,e)}}}get keyboardAction(){return void 0!==this.__getterCache.keyboardAction?this.__getterCache.keyboardAction:this.__getterCache.keyboardAction={registerKeyboardAction:(e,a)=>el("pager",this.createFakeInstance(),e,void 0,a)}}get infoVisible(){var{infoTextVisible:e,showInfo:a}=this.props;return a&&e}get pageIndexSelectorVisible(){return 0!==this.props.pageSize}get normalizedDisplayMode(){var{displayMode:e,lightModeEnabled:a}=this.props;return"adaptive"===e&&void 0!==a?a?"compact":"full":e}get pagesContainerVisible(){return!!this.props.pagesNavigatorVisible&&this.props.pageCount>0}get pagesContainerVisibility(){if("auto"===this.props.pagesNavigatorVisible&&1===this.props.pageCount&&this.props.hasKnownLastPage)return"hidden"}get isLargeDisplayMode(){var e=this.normalizedDisplayMode;return"adaptive"===e?this.props.isLargeDisplayMode:"full"===e}get classes(){var e={["".concat(this.props.className)]:!!this.props.className,"dx-pager":!0,"dx-light-mode":!this.isLargeDisplayMode};return(0,un.g)(e)}get aria(){return{role:"navigation",label:this.props.label}}get restAttributes(){return(0,xe.A)(this.props,AS)}componentWillUpdate(e,a,n){super.componentWillUpdate(),this.props.onKeyDown!==e.onKeyDown&&(this.__getterCache.keyboardAction=void 0)}render(){return(i=>{var{aria:t,classes:e,infoVisible:a,isLargeDisplayMode:n,pageIndexSelectorVisible:r,pagesContainerVisibility:s,pagesContainerVisible:o,props:{hasKnownLastPage:l,infoText:d,infoTextRef:h,maxPagesCount:u,pageCount:c,pageIndex:g,pageIndexChange:m,pageSize:f,pageSizeChange:x,pageSizes:b,pageSizesRef:S,pagesCountText:T,pagesRef:B,rtlEnabled:M,showNavigationButtons:L,showPageSizes:z,totalCount:H,visible:K},restAttributes:W,widgetRootElementRef:j}=i;return(0,X._B)((0,X.sO)(2,IS.x0,(0,N.A)({rootElementRef:j,rtlEnabled:M,classes:e,visible:K,aria:t},W,{children:[z&&(0,X.sO)(2,OS,{rootElementRef:S,isLargeDisplayMode:n,pageSize:f,pageSizeChange:x,pageSizes:b}),o&&(0,X.bF)(1,"div","dx-pages",[a&&(0,X.sO)(2,vy,{rootElementRef:h,infoText:d,pageCount:c,pageIndex:g,totalCount:H}),r&&(0,X.bF)(1,"div","dx-page-indexes",(0,X.sO)(2,oS,{hasKnownLastPage:l,isLargeDisplayMode:n,maxPagesCount:u,pageCount:c,pageIndex:g,pageIndexChange:m,pagesCountText:T,showNavigationButtons:L,totalCount:H}),2,null,null,B)],0,{style:(0,re.gs)({visibility:s})})]})))})({props:(0,N.A)({},this.props),widgetRootElementRef:this.widgetRootElementRef,keyboardAction:this.keyboardAction,infoVisible:this.infoVisible,pageIndexSelectorVisible:this.pageIndexSelectorVisible,pagesContainerVisible:this.pagesContainerVisible,pagesContainerVisibility:this.pagesContainerVisibility,isLargeDisplayMode:this.isLargeDisplayMode,classes:this.classes,aria:this.aria,restAttributes:this.restAttributes})}}return i.defaultProps=RS,i})();var BS=["className","defaultPageIndex","defaultPageSize","displayMode","gridCompatibility","hasKnownLastPage","infoText","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pagesCountText","pagesNavigatorVisible","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"];let MS=(()=>{class i extends re.oe{constructor(e){super(e),this.__getterCache={},this.state={pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.props.defaultPageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.props.defaultPageIndex},this.pageIndexChange=this.pageIndexChange.bind(this),this.pageSizeChange=this.pageSizeChange.bind(this)}createEffects(){return[(0,re.h2)()]}pageIndexChange(e){var a,n;this.props.gridCompatibility?(this.setState(r=>({pageIndex:a=e+1})),this.props.pageIndexChange(a)):(this.setState(r=>({pageIndex:n=e})),this.props.pageIndexChange(n))}get pageIndex(){return this.props.gridCompatibility?(void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex)-1:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}pageSizeChange(e){var a;this.setState(n=>({pageSize:a=e})),this.props.pageSizeChange(a)}get className(){return this.props.gridCompatibility?(0,un.g)({"dx-datagrid-pager":!0,["".concat(this.props.className)]:!!this.props.className}):this.props.className}get pagerProps(){return void 0!==this.__getterCache.pagerProps?this.__getterCache.pagerProps:this.__getterCache.pagerProps=(0,N.A)({},(0,N.A)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),{className:this.className,pageIndex:this.pageIndex,pageIndexChange:e=>this.pageIndexChange(e),pageSizeChange:e=>this.pageSizeChange(e)})}get restAttributes(){var e=(0,N.A)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex});return(0,xe.A)(e,BS)}componentWillUpdate(e,a,n){super.componentWillUpdate(),(this.props!==e||this.props.gridCompatibility!==e.gridCompatibility||this.props.className!==e.className||this.state.pageIndex!==a.pageIndex||this.props.pageIndex!==e.pageIndex||this.props.pageIndexChange!==e.pageIndexChange||this.props.pageSizeChange!==e.pageSizeChange)&&(this.__getterCache.pagerProps=void 0)}render(){return(i=>{var{pagerProps:t,restAttributes:e}=i;return(0,X._B)((0,X.sO)(2,uy,(0,N.A)({contentTemplate:DS,pagerProps:t},e)))})({props:(0,N.A)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),pageIndexChange:this.pageIndexChange,pageIndex:this.pageIndex,pageSizeChange:this.pageSizeChange,className:this.className,pagerProps:this.pagerProps,restAttributes:this.restAttributes})}}return i.defaultProps=cy,i})();class rc extends ey{getProps(){var t=super.getProps();return t.onKeyDown=this._wrapKeyDownHandler(t.onKeyDown),t}get _propsInfo(){return{twoWay:[["pageSize","defaultPageSize","pageSizeChange"],["pageIndex","defaultPageIndex","pageIndexChange"]],allowNull:[],elements:[],templates:[],props:["defaultPageSize","pageSizeChange","defaultPageIndex","pageIndexChange","gridCompatibility","className","showInfo","infoText","lightModeEnabled","displayMode","maxPagesCount","pageCount","pagesCountText","visible","hasKnownLastPage","pagesNavigatorVisible","showPageSizes","pageSizes","rtlEnabled","showNavigationButtons","totalCount","label","onKeyDown","pageSize","pageIndex"]}}get _viewComponent(){return MS}}(0,le.A)("dxPager",rc);const VS=rc;var sc=function(i){return 1+(parseInt(i.pageIndex())||0)},kS=Z.View.inherit({init(){var i=this.getController("data");i.changed.add(t=>{if(t&&t.repaintChangesOnly){var e=this._pager;e?e.option({pageIndex:sc(i),pageSize:i.pageSize(),pageCount:i.pageCount(),totalCount:i.totalCount(),hasKnownLastPage:i.hasKnownLastPage()}):this.render()}else(!t||"update"!==t.changeType&&"updateSelection"!==t.changeType&&"updateFocusedRow"!==t.changeType)&&(this._pager=null,this.render())})},_renderCore(){var i=this.element().addClass(this.addWidgetPrefix("pager")),t=this.option("pager")||{},e=this.getController("data"),a=this.getController("keyboardNavigation"),n={maxPagesCount:10,pageIndex:sc(e),pageCount:e.pageCount(),pageSize:e.pageSize(),showPageSizes:t.showPageSizeSelector,showInfo:t.showInfo,displayMode:t.displayMode,pagesNavigatorVisible:t.visible,showNavigationButtons:t.showNavigationButtons,label:t.label,pageSizes:this.getPageSizes(),totalCount:e.totalCount(),hasKnownLastPage:e.hasKnownLastPage(),pageIndexChanged(r){e.pageIndex()!==r-1&&e.pageIndex(r-1)},pageSizeChanged(r){e.pageSize(r)},onKeyDown:r=>a&&a.executeAction("onKeyDown",r),useLegacyKeyboardNavigation:this.option("useLegacyKeyboardNavigation"),useKeyboard:this.option("keyboardNavigation.enabled")};(0,v.O9)(t.infoText)&&(n.infoText=t.infoText),this._pager?this._pager.repaint():(0,Q.Vd)()?this._pager=this._createComponent(i,VS,n):i.addClass("dx-pager").html('<div class="dx-pages"><div class="dx-page"></div></div>')},getPager(){return this._pager},getPageSizes(){var i=this.getController("data"),t=this.option("pager"),e=t&&t.allowedPageSizes,a=i.pageSize();return(!(0,v.O9)(this._pageSizes)||!this._pageSizes.includes(a))&&(this._pageSizes=[],t&&(Array.isArray(e)?this._pageSizes=e:e&&a>1&&(this._pageSizes=[Math.floor(a/2),a,2*a]))),this._pageSizes},isVisible(){var i=this.getController("data"),t=this.option("pager"),e=t&&t.visible,a=this.option("scrolling");return"auto"===e&&(e=(!a||"virtual"!==a.mode&&"infinite"!==a.mode)&&(i.pageCount()>1||i.isLoaded()&&!i.hasKnownLastPage())),e},getHeight(){return this.getElementHeight()},optionChanged(i){var{name:t}=i,e="pager"===t,a="paging"===t,n="dataSource"===t,r="scrolling"===t,s=this.getController("data");if(e||a||r||n){if(i.handled=!0,s.skipProcessingPagingChange(i.fullName))return;(e||a)&&(this._pageSizes=null),n||(this._pager=null,this._invalidate(),(0,Q.Vd)()&&e&&this.component&&this.component.resize())}},dispose(){this._pager=null}}),oc={defaultOptions:()=>({pager:{visible:"auto",showPageSizeSelector:!1,allowedPageSizes:"auto",label:A.A.format("dxPager-ariaLabel")}}),views:{pagerView:kS}};G.registerModule("pager",oc);var NS=D(9049),lc="columns-separator-transparent",dc="drag-header",ss="drag-action",hc="tracker",uc="drop-highlight",cc="dx-block-separator",gc="dx-header-row",Ae="dxDataGridResizingReordering",Ji=function(i){return i.option("allowColumnResizing")||i.getController("columns").isColumnOptionUsed("allowResizing")},_c=function(i){return i.option("allowColumnReordering")||i.getController("columns").isColumnOptionUsed("allowReordering")};class vc extends Z.View{_renderSeparator(){}_renderCore(t){var e=super._renderCore(t);return this._isShown=!0,this._renderSeparator(),this.hide(),e}show(){this._isShown=!0}hide(){this._isShown=!1}height(t){var e=this.element();if(e){if(!(0,v.O9)(t))return(0,R.Oq)(e);(0,R.k$)(e,t)}}width(t){var e=this.element();if(e){if(!(0,v.O9)(t))return(0,R.RG)(e);(0,R.zj)(e,t)}}}var ls=function(i){return"widget"!==i.option("columnResizingMode")},xt={views:{columnsSeparatorView:class $S extends vc{_renderSeparator(){super._renderSeparator(),this.element().addClass(this.addWidgetPrefix("columns-separator"))}_subscribeToCallback(){var e,t=this;t._positionChanged=function(a){(e=t.element())&&(e.css({top:a.top}),(0,R.k$)(e,a.height))},t._tablePositionController.positionChanged.add(t._positionChanged)}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_init(){this._isTransparent=Ji(this),this.isVisible()&&this._subscribeToCallback()}isVisible(){return this.option("showColumnHeaders")&&(_c(this)||Ji(this))}optionChanged(t){"allowColumnResizing"===t.name&&(t.value?(this._init(),this._invalidate(),this.hide(!0)):(this._unsubscribeFromCallback(),this._isTransparent=Ji(this),this.hide(!0))),super.optionChanged(t)}init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._init()}show(){var t=this.element();t&&!this._isShown&&(this._isTransparent?t.removeClass(this.addWidgetPrefix(lc)):t.show()),super.show()}hide(t){var e=this.element(),a=this.addWidgetPrefix(lc);e&&(this._isShown||t)&&(this._isTransparent?(e.addClass(a),e.css("left",""),e.show()):(e.hasClass(a)&&e.removeClass(a),e.hide())),super.hide()}moveByX(t){var e=this.element();e&&e.css("left",null===t?0:t-this._parentElement().offset().left)}changeCursor(t){t=(0,v.O9)(t)?t:"";var e=this.element();e&&e.css("cursor",t)}dispose(){this._unsubscribeFromCallback(),super.dispose()}},blockSeparatorView:class XS extends vc{init(){var t=this;super.init(),this.getController("data").loadingChanged.add(e=>{e||t.hide()})}_renderSeparator(){super._renderSeparator(),this.element().addClass(cc).html("&nbsp;")}hide(){var t=this._parentElement(),e=this.element();e&&this._isShown&&e.css("display","none"),t&&!t.children(".".concat(cc)).length&&t.prepend(this.element()),super.hide()}isVisible(){var t=this.option("groupPanel"),e=this.option("columnChooser");return t&&t.visible||e&&e.enabled}show(t){var a,e=this.element();if(e&&!this._isShown)switch(t){case"group":this.element().css("display","block");break;case"columnChooser":a={width:"100%",display:"block"},ce.A.stop(e,!0),ce.A.animate(e,{type:"slide",from:{width:0,display:a.display},to:a,duration:300,easing:"swing"});break;default:e.css("display","")}super.show()}},draggingHeaderView:class YS extends Z.View{isDragging(){return this._isDragging}_getDraggingPanelByPos(t){var e;return(0,I.__)(this._dragOptions.draggingPanels,(a,n)=>{if(n){var r=n.getBoundingRect();if(r&&(void 0===r.bottom||t.y<r.bottom)&&(void 0===r.top||t.y>r.top)&&(void 0===r.left||t.x>r.left)&&(void 0===r.right||t.x<r.right))return e=n,!1}}),e}_renderCore(){this.element().addClass("".concat(this.addWidgetPrefix(dc)," ").concat(this.addWidgetPrefix("text-content")," ").concat("dx-widget")).hide()}_resetTargetColumnOptions(){var t=this._dropOptions;t.targetColumnIndex=-1,delete t.targetColumnElement,delete t.isLast,delete t.posX,delete t.posY}_getVisibleIndexObject(t,e){return(0,v.O9)(t)?{columnIndex:e,rowIndex:t}:e}dispose(){var t=this.element();this._dragOptions=null,t&&t.parent().find(".".concat(this.addWidgetPrefix(dc))).remove()}isVisible(){var e=this.getController("columns").getCommonSettings();return this.option("showColumnHeaders")&&(_c(this)||e.allowGrouping||e.allowHiding)}init(){var t=this;super.init(),this._controller=this.getController("draggingHeader"),this._columnsResizerViewController=this.getController("columnsResizer"),this._isDragging=!1,this.getController("data").loadingChanged.add(e=>{var a=t.element();!e&&a&&a.hide()})}dragHeader(t){var{columnElement:e}=t,a=!!t.sourceColumn.type;this._isDragging=!0,this._dragOptions=t,this._dropOptions={sourceIndex:t.index,sourceColumnIndex:this._getVisibleIndexObject(t.rowIndex,t.columnIndex),sourceColumnElement:t.columnElement,sourceLocation:t.sourceLocation};var n=U.A.getDocument();this._onSelectStart=n.onselectstart,n.onselectstart=function(){return!1},this._controller.drag(this._dropOptions),this.element().css({textAlign:e&&e.css("textAlign"),height:e&&(a&&e.get(0).clientHeight||(0,R.Oq)(e)),width:e&&(a&&e.get(0).clientWidth||(0,R.RG)(e)),whiteSpace:e&&e.css("whiteSpace")}).addClass(this.addWidgetPrefix(ss)).toggleClass("dx-drag-command-cell",a).text(a?"":t.sourceColumn.caption),this.element().appendTo(NS.A.getSwatchContainer(e))}moveHeader(t){var e=t.event,{that:a}=e.data,n=(0,P.rw)(e),r=!!a._columnsResizerViewController&&a._columnsResizerViewController.isResizing(),s=a._dragOptions;if(a._isDragging&&!r){var o=a.element(),l=Math.abs(n.x-s.columnElement.offset().left-s.deltaX),d=Math.abs(n.y-s.columnElement.offset().top-s.deltaY);(o.is(":visible")||l>5||d>5)&&(o.show(),o.css({left:n.x-s.deltaX,top:n.y-s.deltaY}),a.dockHeader(n)),e.preventDefault()}}dockHeader(t){var e=this._getDraggingPanelByPos(t),a=this._controller,n=this._dropOptions,r=this._dragOptions;if(e){var s=this.option("rtlEnabled"),o="columnChooser"===e.getName(),l=o?"y":"x",d=e.getName(),h="headers"===d?r.rowIndex:void 0,{sourceColumn:u}=r,c=e.getColumnElements(h,u?.ownerBand)||[],g=r.pointsByTarget=r.pointsByTarget||{},m="columnChooser"===d?[]:g[d]||a._generatePointsByColumns((0,y.X)({},r,{targetDraggingPanel:e,columns:e.getColumns(h),columnElements:c,isVerticalOrientation:o,startColumnIndex:"headers"===d&&(0,_.A)(c[0]).index()}));if(g[d]=m,n.targetLocation=d,m.length>0)for(var f=0;f<m.length;f++){var x=m[f+1]&&(m[f][l]+m[f+1][l])/2;if(void 0===x||(s&&"x"===l?t[l]>x:t[l]<x)){n.targetColumnIndex=this._getVisibleIndexObject(h,m[f].columnIndex),c[f]?(n.targetColumnElement=c.eq(f),n.isLast=!1):(n.targetColumnElement=c.last(),n.isLast=!0),n.posX=m[f].x,n.posY=m[f].y,a.dock(n);break}}else this._resetTargetColumnOptions(),a.dock(n)}}dropHeader(t){var e=t.event,{that:a}=e.data,n=a._controller;a.element().hide(),n&&a._isDragging&&n.drop(a._dropOptions),a.element().appendTo(a._parentElement()),a._dragOptions=null,a._dropOptions=null,a._isDragging=!1,U.A.getDocument().onselectstart=a._onSelectStart||null}},trackerView:class US extends Z.View{_renderCore(){var t=super._renderCore();return this.element().addClass(this.addWidgetPrefix(hc)),this.hide(),t}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_subscribeToCallback(){var t=this;t._positionChanged=function(e){var a=t.element();a&&a.hasClass(t.addWidgetPrefix(hc))&&(a.css({top:e.top}),(0,R.k$)(a,e.height))},this._tablePositionController.positionChanged.add(t._positionChanged)}optionChanged(t){"allowColumnResizing"===t.name&&(this._unsubscribeFromCallback(),t.value&&(this._subscribeToCallback(),this._invalidate())),super.optionChanged(t)}init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._subscribeToCallback()}isVisible(){return Ji(this)}show(){this.element().show()}hide(){this.element()&&this.element().hide()}setHeight(t){(0,R.k$)(this.element(),t)}dispose(){this._unsubscribeFromCallback(),super.dispose()}}},controllers:{draggingHeader:class qS extends Z.ViewController{_generatePointsByColumns(t){var e=this;return this.isCustomGroupColumnPosition=this.checkIsCustomGroupColumnPosition(t),F.getPointsByColumns(t.columnElements,a=>e._pointCreated(a,t.columns,t.targetDraggingPanel.getName(),t.sourceColumn),t.isVerticalOrientation,t.startColumnIndex)}checkIsCustomGroupColumnPosition(t){for(var e=!0,a=0;a<t.columns.length;a+=1){var n=t.columns[a];if("expand"===n.command&&!e)return!0;n.command||(e=!1)}return!1}_pointCreated(t,e,a,n){var r,s=e[t.columnIndex],o=e[t.columnIndex-1],l="expand"===o?.command,d="expand"===s?.command&&"expand"!==o?.command,h=n&&!n.allowReordering,u=!s?.allowReordering&&!o?.allowReordering;switch(a){case"columnChooser":return!0;case"headers":if(!d)return l||h||u;if(this.isCustomGroupColumnPosition)return!1;for(;"expand"===(null===(r=e[t.columnIndex])||void 0===r?void 0:r.command);)t.columnIndex+=1;return!1;default:return 0===e.length}}_subscribeToEvents(t,e){var a=this;(0,I.__)(e,(n,r)=>{if(r)for(var s,o=r.getRowCount?r.getRowCount():1,l=r.getName(),d=function(c,g){if(g){var m=(0,_.A)(g),f=s[c];f&&r.allowDragging(f)&&(m.addClass(a.addWidgetPrefix(ss)),O.A.on(m,(0,P.b4)(ke.ni,Ae),a.createAction(x=>{var b=x.event,S=(0,P.rw)(b);t.dragHeader({deltaX:S.x-(0,_.A)(b.currentTarget).offset().left,deltaY:S.y-(0,_.A)(b.currentTarget).offset().top,sourceColumn:f,index:f.index,columnIndex:c,columnElement:m,sourceLocation:l,draggingPanels:e,rowIndex:a._columnsController.getRowIndex(f.index,!0)})})),O.A.on(m,(0,P.b4)(ke.Cy,Ae),{that:t},a.createAction(t.moveHeader)),O.A.on(m,(0,P.b4)(ke._N,Ae),{that:t},a.createAction(t.dropHeader)))}},h=0;h<o;h++){var u=r.getColumnElements(h)||[];u.length&&(s=r.getColumns(h)||[],(0,I.__)(u,d))}})}_unsubscribeFromEvents(t,e){var a=this;(0,I.__)(e,(n,r)=>{if(r){var s=r.getColumnElements()||[];(0,I.__)(s,(o,l)=>{var d=(0,_.A)(l);O.A.off(d,(0,P.b4)(ke.ni,Ae)),O.A.off(d,(0,P.b4)(ke.Cy,Ae)),O.A.off(d,(0,P.b4)(ke._N,Ae)),d.removeClass(a.addWidgetPrefix(ss))})}})}_getSeparator(t){return"headers"===t?this._columnsSeparatorView:this._blockSeparatorView}hideSeparators(t){var e=this._blockSeparatorView,a=this._columnsSeparatorView;this._animationColumnIndex=void 0,e&&e.hide(),"block"!==t&&a&&a.hide()}init(){var t=this;super.init(),t._columnsController=t.getController("columns"),t._columnHeadersView=t.getView("columnHeadersView"),t._columnsSeparatorView=t.getView("columnsSeparatorView"),t._draggingHeaderView=t.getView("draggingHeaderView"),t._rowsView=t.getView("rowsView"),t._blockSeparatorView=t.getView("blockSeparatorView"),t._headerPanelView=t.getView("headerPanel"),t._columnChooserView=t.getView("columnChooserView");var e=function(){if(t._draggingHeaderView){var a=[t._columnChooserView,t._columnHeadersView,t._headerPanelView];t._unsubscribeFromEvents(t._draggingHeaderView,a),t._subscribeToEvents(t._draggingHeaderView,a)}};t._columnHeadersView.renderCompleted.add(e),t._headerPanelView&&t._headerPanelView.renderCompleted.add(e),t._columnChooserView&&t._columnChooserView.renderCompleted.add(e)}allowDrop(t){return this._columnsController.allowMoveColumn(t.sourceColumnIndex,t.targetColumnIndex,t.sourceLocation,t.targetLocation)}drag(t){var{sourceIndex:e}=t,{sourceLocation:a}=t,{sourceColumnElement:n}=t,r=this._columnHeadersView,s=this._rowsView;n&&(n.css({opacity:.5}),"headers"===a&&(r&&r.setRowsOpacity(e,.5),s&&s.setRowsOpacity(e,.5)))}dock(t){var e=this,a=(0,v.Gv)(t.targetColumnIndex)?t.targetColumnIndex.columnIndex:t.targetColumnIndex,{sourceLocation:n}=t,{targetLocation:r}=t,s=e._getSeparator(r),o=a>=0;e._columnHeadersView.element().find(".".concat(gc)).toggleClass(e.addWidgetPrefix(uc),"headers"!==n&&"headers"===r&&!o),s&&(e.allowDrop(t)&&o?"group"===r||"columnChooser"===r?e._animationColumnIndex!==a&&(e.hideSeparators(),s.element()[t.isLast?"insertAfter":"insertBefore"](t.targetColumnElement),e._animationColumnIndex=a,s.show(r)):(e.hideSeparators("block"),e.getController("tablePosition").update(t.posY),s.moveByX(t.posX-s.width()),s.show()):e.hideSeparators())}drop(t){var{sourceColumnElement:e}=t;if(e&&(e.css({opacity:""}),this._columnHeadersView.setRowsOpacity(t.sourceIndex,""),this._rowsView.setRowsOpacity(t.sourceIndex,""),this._columnHeadersView.element().find(".".concat(gc)).removeClass(this.addWidgetPrefix(uc))),this.allowDrop(t)){var a=this._getSeparator(t.targetLocation);a&&a.hide(),this._columnsController.moveColumn(t.sourceColumnIndex,t.targetColumnIndex,t.sourceLocation,t.targetLocation)}}dispose(){this._draggingHeaderView&&this._unsubscribeFromEvents(this._draggingHeaderView,[this._columnChooserView,this._columnHeadersView,this._headerPanelView])}},tablePosition:class QS extends Z.ViewController{constructor(t){super(t),this.positionChanged=(0,me.A)()}update(t){var e={},a=this._columnHeadersView.element(),n=a&&a.offset(),r=n&&n.top||0,s=(0,v.O9)(t)?Math.abs(t-r):0,o=this._columnHeadersView?this._columnHeadersView.getHeight():0,l=this._rowsView.getScrollbarWidth(!0),d=this._rowsView?this._rowsView.height()-l:0,h=this.component.getController("columnsResizer"),u=this.component.getView("draggingHeaderView");e.height=o,(h.isResizing()||u.isDragging())&&(e.height+=d-s),null!==t&&a&&a.length&&(e.top=a[0].offsetTop+s),this.positionChanged.fire(e)}init(){var t=this;super.init(),t._columnHeadersView=this.getView("columnHeadersView"),t._rowsView=this.getView("rowsView"),t._pagerView=this.getView("pagerView"),t._rowsView.resizeCompleted.add(()=>{if(t.option("allowColumnResizing")){var e=t.getController("columnsResizer")._targetPoint;t.update(e?e.y:null)}})}},columnsResizer:class jS extends Z.ViewController{_isHeadersRowArea(t){if(this._columnHeadersView){var e=this._columnHeadersView.element();if(e){var a=e.offset().top,n=this._columnHeadersView.getHeadersRowHeight();return t>=a&&t<=a+n}}return!1}_isRtlParentStyle(){var t;return this.option("rtlEnabled")&&"rtl"===(null===(t=this._$parentContainer)||void 0===t?void 0:t.parent().css("direction"))}_pointCreated(t,e,a){var n=ls(this),r=this.option("rtlEnabled"),s=this._isRtlParentStyle(),o=n||!r||s?1:0;if(t.index>=o&&t.index<e+(n||r&&!s?0:1)){t.columnIndex-=o;var l=a[t.columnIndex]||{};return!(n?l.allowResizing&&(a[t.columnIndex+1]||{}).allowResizing:l.allowResizing)}return!0}_getTargetPoint(t,e,a){if(t)for(var n=0;n<t.length;n++)if((t[n].x!==t[0].x||!t[n+1]||t[n].x!==t[n+1].x)&&t[n].x-a<=e&&e<=t[n].x+a)return t[n];return null}_moveSeparator(t){var e,a=t.event,n=a.data,r=n._columnsSeparatorView.width(),s=ls(n),o=r/2,l=n._$parentContainer.offset(),d=l.left,h=(0,P.rw)(a),u=n.option("rtlEnabled"),c=this._isRtlParentStyle(),g=null===(e=n._draggingHeaderView)||void 0===e?void 0:e.isDragging();if(n._isResizing&&n._resizingInfo){if((d<=h.x||!s&&c)&&(!s||h.x<=d+(0,R.RG)(n._$parentContainer))&&n._updateColumnsWidthIfNeeded(h.x)){var m=n._columnHeadersView.getColumnElements().eq(n._resizingInfo.currentColumnIndex),f=m[0];if(f){var x=f.getBoundingClientRect().width;n._columnsSeparatorView.moveByX(m.offset().left+((s||c)&&u?0:x)),n._tablePositionController.update(n._targetPoint.y),a.preventDefault()}}}else g||(n._isHeadersRowArea(h.y)?(n._previousParentOffset&&(n._previousParentOffset.left!==l.left||n._previousParentOffset.top!==l.top)&&n.pointsByColumns(null),n._targetPoint=n._getTargetPoint(n.pointsByColumns(),h.x,r),n._previousParentOffset=l,n._isReadyResizing=!1,n._targetPoint?(n._columnsSeparatorView.changeCursor("col-resize"),n._columnsSeparatorView.moveByX(n._targetPoint.x-o),n._tablePositionController.update(n._targetPoint.y),n._isReadyResizing=!0,a.preventDefault()):(n._columnsSeparatorView.changeCursor(),n._columnsSeparatorView.moveByX(null))):(n.pointsByColumns(null),n._isReadyResizing=!1,n._columnsSeparatorView.changeCursor(),n._columnsSeparatorView.moveByX(null)))}_endResizing(t){var a=t.event.data;a._isResizing&&(a.pointsByColumns(null),a._resizingInfo=null,a._columnsSeparatorView.hide(),a._columnsSeparatorView.changeCursor(),a._trackerView.hide(),a._isReadyResizing=!1,a._isResizing=!1)}_getNextColumnIndex(t){return t+1}_setupResizingInfo(t){var e=this._targetPoint.columnIndex,a=this._getNextColumnIndex(e),n=this._columnHeadersView.getHeaderElement(e),r=this._columnHeadersView.getHeaderElement(a);this._resizingInfo={startPosX:t,currentColumnIndex:e,currentColumnWidth:n&&n.length>0?(0,se.N)(n[0]).width:0,nextColumnIndex:a,nextColumnWidth:r&&r.length>0?(0,se.N)(r[0]).width:0}}_startResizing(t){var e=t.event,a=e.data,n=(0,P.rw)(e);if((0,P.kH)(e)&&(a._isHeadersRowArea(n.y)?(a._targetPoint=a._getTargetPoint(a.pointsByColumns(),n.x,10),a._targetPoint&&(a._columnsSeparatorView.moveByX(a._targetPoint.x-a._columnsSeparatorView.width()/2),a._isReadyResizing=!0)):a._isReadyResizing=!1),a._isReadyResizing){a._setupResizingInfo(n.x),a._isResizing=!0,a._tablePositionController.update(a._targetPoint.y),a._columnsSeparatorView.show(),a._trackerView.show();var r=a.component.getScrollable();r&&a._isRtlParentStyle()&&(a._scrollRight=(0,R.RG)(r.$content())-(0,R.RG)(r.container())-r.scrollLeft()),e.preventDefault(),e.stopPropagation()}this.isResizing()&&this.getController("editorFactory").loseFocus()}_generatePointsByColumns(){var t=this,e=t._columnsController?t._columnsController.getVisibleColumns():[],a=t._columnHeadersView.getColumnElements(),n=[];a&&a.length>0&&(n=F.getPointsByColumns(a,r=>t._pointCreated(r,a.length,e))),t._pointsByColumns=n}_unsubscribeFromEvents(){this._moveSeparatorHandler&&O.A.off(U.A.getDocument(),(0,P.b4)(te.A.move,Ae),this._moveSeparatorHandler),this._startResizingHandler&&O.A.off(this._$parentContainer,(0,P.b4)(te.A.down,Ae),this._startResizingHandler),this._endResizingHandler&&(O.A.off(this._columnsSeparatorView.element(),(0,P.b4)(te.A.up,Ae),this._endResizingHandler),O.A.off(U.A.getDocument(),(0,P.b4)(te.A.up,Ae),this._endResizingHandler))}_subscribeToEvents(){this._moveSeparatorHandler=this.createAction(this._moveSeparator),this._startResizingHandler=this.createAction(this._startResizing),this._endResizingHandler=this.createAction(this._endResizing),O.A.on(U.A.getDocument(),(0,P.b4)(te.A.move,Ae),this,this._moveSeparatorHandler),O.A.on(this._$parentContainer,(0,P.b4)(te.A.down,Ae),this,this._startResizingHandler),O.A.on(this._columnsSeparatorView.element(),(0,P.b4)(te.A.up,Ae),this,this._endResizingHandler),O.A.on(U.A.getDocument(),(0,P.b4)(te.A.up,Ae),this,this._endResizingHandler)}_updateColumnsWidthIfNeeded(t){var e,a,n=this._rowsView.contentWidth(),r=this._resizingInfo,s=this._columnsController,o=s.getVisibleColumns(),l=this._columnsSeparatorView.width(),d=ls(this),h=d&&this.option("adaptColumnWidthByRatio")&&!this.option("columnAutoWidth"),u=this.option("rtlEnabled"),c=this._isRtlParentStyle(),g=o[r.currentColumnIndex],m=o[r.nextColumnIndex];function f(K){return(0,v.Kg)(K)&&K.endsWith("%")}function x(K,W,j,oe){if(K){var ee=K.width;ee&&(oe=f(ee)),oe?(s.columnOption(K.index,"visibleWidth",W),s.columnOption(K.index,"width","".concat((W/j*100).toFixed(3),"%"))):(s.columnOption(K.index,"visibleWidth",null),s.columnOption(K.index,"width",W))}}e=t-r.startPosX,(d||c)&&u&&(e=-e);var K,W,j,oe,ee,fe,Te,{cellWidth:b,nextCellWidth:S}=(Te={},(ee=r.currentColumnWidth+(K=e))>=(fe=g&&g.minWidth||l)?Te.cellWidth=ee:(Te.cellWidth=fe,oe=!0),d&&((j=r.nextColumnWidth-K)>=(W=m&&m.minWidth||l)?Te.nextCellWidth=oe?r.nextColumnWidth-(K+fe-ee):j:(Te.nextCellWidth=W,Te.cellWidth=r.currentColumnWidth+(K-W+j))),Te);if(a=g.width!==b){if(s.beginUpdate(),b=Math.floor(b),n=function(K,W){var j=W.every(ee=>ee.width);if(j){var oe=W.reduce((ee,fe)=>(f(fe.width)&&(ee+=parseFloat(fe.width)),ee),0);oe>100&&(K=K/oe*100)}return K}(n,o),x(g,b,n,h),d)x(m,S=Math.floor(S),n,h);else{var T=this._columnHeadersView.getColumnWidths();T[r.currentColumnIndex]=b;var B=T.reduce((K,W)=>K+W,0)>this._rowsView.contentWidth();if(!B){var M=F.getLastResizableColumnIndex(o);M>=0&&s.columnOption(o[M].index,"visibleWidth","auto")}for(var L=0;L<T.length;L++)o[L]&&o[L]!==g&&void 0===o[L].width&&s.columnOption(o[L].index,"width",T[L])}if(s.endUpdate(),!d){this.component.updateDimensions();var z=this.component.getScrollable();if(z&&c){var H=(0,R.RG)(z.$content())-(0,R.RG)(z.container())-this._scrollRight;z.scrollTo({left:H})}}}return a}_subscribeToCallback(t,e){t.add(e),this._subscribesToCallbacks.push({callback:t,handler:e})}_unsubscribeFromCallbacks(){for(var t=0;t<this._subscribesToCallbacks.length;t++){var e=this._subscribesToCallbacks[t];e.callback.remove(e.handler)}this._subscribesToCallbacks=[]}_unsubscribes(){this._unsubscribeFromEvents(),this._unsubscribeFromCallbacks()}_init(){var t=this,e=function(){t._isResizing||t.pointsByColumns(null)},a=function(s){t._scrollLeft!==s.left&&(t._scrollLeft=s.left,t.pointsByColumns(null))};t._columnsSeparatorView=t.getView("columnsSeparatorView"),t._columnHeadersView=t.getView("columnHeadersView"),t._trackerView=t.getView("trackerView"),t._rowsView=t.getView("rowsView"),t._columnsController=t.getController("columns"),t._tablePositionController=t.getController("tablePosition"),t._$parentContainer=t.component.$element(),t._draggingHeaderView=t.component.getView("draggingHeaderView"),t._subscribeToCallback(t._columnHeadersView.renderCompleted,e),t._subscribeToCallback(t._columnHeadersView.resizeCompleted,e),t._subscribeToCallback(t._columnsSeparatorView.renderCompleted,()=>{t._unsubscribeFromEvents(),t._subscribeToEvents()}),t._subscribeToCallback(t._rowsView.renderCompleted,()=>{t._rowsView.scrollChanged.remove(a),t._rowsView.scrollChanged.add(a)});var n=0!==t._rowsView.getScrollbarWidth(),r=0;t._subscribeToCallback(t.getController("tablePosition").positionChanged,s=>{if(t._isResizing&&!t._rowsView.isResizing){var o=0!==t._rowsView.getScrollbarWidth();n!==o||r&&r!==s.height?(n=o,r=s.height,t.component.updateDimensions()):t._rowsView.updateFreeSpaceRowHeight()}r=s.height})}optionChanged(t){super.optionChanged(t),"allowColumnResizing"===t.name&&(t.value?(this._init(),this._subscribeToEvents()):this._unsubscribes())}isResizing(){return this._isResizing}init(){this._subscribesToCallbacks=[],Ji(this)&&this._init()}pointsByColumns(t){if(void 0===t)return this._pointsByColumns||this._generatePointsByColumns(),this._pointsByColumns;this._pointsByColumns=t}dispose(){this._unsubscribes(),super.dispose()}}},extenders:{views:{rowsView:{_needUpdateRowHeight(i){var t=this.option("wordWrapEnabled"),a=this.getController("columnsResizer").isResizing();return this.callBase.apply(this,arguments)||i>0&&t&&a}}},controllers:{editorFactory:{renderFocusOverlay(){if(!this.getController("columnsResizer").isResizing())return this.callBase.apply(this,arguments)}}}}};G.registerModule("columnsResizingReordering",xt);var ZS=D(9544),mc="content",ea="content-fixed",Cc="dx-first-cell",fc="dx-state-hover",xc="dx-col-fixed",ds="dx-pointer-events-none",kt="transparent",bc="dx-group-row",lt=function(i){var t=-1;return(0,I.__)(i,(e,a)=>{if(a.command===kt)return t=e,!1}),t},Ec=function(i,t,e){var a=0;if(i&&t&&e)for(var n=0;n<i.length;n++)i[n].command===kt?a+=i[n].colspan:(t[a]<e[n]&&(t[a]=e[n]),a++);return t},hs={init(){this.callBase(),this._isFixedTableRendering=!1,this._isFixedColumns=!1},_createCol(i){return this.callBase(i).toggleClass(xc,!(!this._isFixedTableRendering||!(i.fixed||i.command&&i.command!==kt)))},_correctColumnIndicesForFixedColumns(i,t){var e=lt(i),a=i[e].colspan,n=t&&t.columnIndices;n&&(t.columnIndices=n.map(r=>{if(r)return r.map(s=>s<e?s:s>=e+a?s-a+1:-1).filter(s=>s>=0)}))},_partialUpdateFixedTable(i){var t=this._fixedTableElement,e=this._getRowElementsCore(t);t.children("colgroup").replaceWith(this._createColGroup(i));for(var n=0;n<e.length;n++)this._partialUpdateFixedRow((0,_.A)(e[n]),i)},_partialUpdateFixedRow(i,t){var e,o,a=i.get(0).childNodes,n=lt(t),r=t[n],l=this._columnsController.getColumnIndexOffset()+1,{colspan:d}=r;if(i.hasClass("dx-master-detail-row"))a[0].setAttribute("colspan",null===(e=this._columnsController.getVisibleColumns())||void 0===e?void 0:e.length);else{i.hasClass(bc)&&(d=(o=this._getGroupCellOptions({row:i.data("options"),columns:this._columnsController.getVisibleColumns()})).colspan-Math.max(0,a.length-(o.columnIndex+2)));for(var h=0;h<a.length;h++){var u=o?h===o.columnIndex+1:h===n;a[h].setAttribute("aria-colindex",l),u?(a[h].setAttribute("colspan",d),l+=d):l++}}},_renderTable(i){var t,e,a=this.getFixedColumns();this._isFixedColumns=!!a.length;var n=this.callBase(i);if(this._isFixedColumns){var r=i?.change,s=this._getRowElements(this._fixedTableElement),o=r?.virtualColumnsScrolling&&s.length===(null===(t=r?.items)||void 0===t?void 0:t.length);if(this._isFixedTableRendering=!0,o&&!0!==this.option("scrolling.legacyMode"))this._partialUpdateFixedTable(a),this._isFixedTableRendering=!1;else{var l=r?.columnIndices;this._correctColumnIndicesForFixedColumns(a,r),e=this._createTable(a),this._renderRows(e,(0,y.X)({},i,{columns:a})),this._updateContent(e,r,!0),l&&(r.columnIndices=l),this._isFixedTableRendering=!1}}else this._fixedTableElement&&this._fixedTableElement.parent().remove(),this._fixedTableElement=null;return n},_renderRow(i,t){var e,{cells:a}=t.row;if(this.callBase.apply(this,arguments),this._isFixedTableRendering&&a&&a.length){e=0;var n=t.row.cells||[];a=a.slice(),t.row.cells=a;for(var r=0;r<n.length;r++)n[r].column&&n[r].column.command===kt?e=(n[r].column.colspan||1)-1:a[r+e]=n[r]}},_createCell(i){var r,s,o,{column:t}=i,e=t&&t.command,{rowType:a}=i,n=this.callBase.apply(this,arguments);(this._isFixedTableRendering||"filter"===a)&&(s=(r=this.getFixedColumns())[(o=lt(r))-1]),this._isFixedTableRendering?e===kt&&(n.addClass(ds).toggleClass(Cc,0===o||s&&"expand"===s.command).toggleClass("dx-last-cell",r.length&&o===r.length-1),"freeSpace"!==a&&F.setEmptyText(n)):"filter"===a&&n.toggleClass(Cc,i.columnIndex===o);var l=this.option("rowAlternationEnabled")&&i.isAltRow,d="multiple"===this.option("selection.mode")&&0===i.columnIndex&&"header"===i.rowType;return ge.A.mozilla&&i.column.fixed&&"group"!==i.rowType&&!l&&!d&&n.addClass(xc),n},_getContent(i){var t;return i?null===(t=this._fixedTableElement)||void 0===t?void 0:t.parent():this.callBase.apply(this,arguments)},_wrapTableInScrollContainer(i,t){var e=this.callBase.apply(this,arguments);return(this._isFixedTableRendering||t)&&e.addClass(this.addWidgetPrefix(ea)),e},_renderCellContent(i,t){var e,{column:a}=t,n=this._isFixedTableRendering,r="group"===t.rowType&&(0,v.O9)(a.groupIndex);if(n&&r&&!a.command&&!a.groupCellTemplate&&i.css("pointerEvents","none"),!n&&this._isFixedColumns){if(e=a.fixed||a.command&&!1!==a.fixed,r&&(e=!1,t.row.summaryCells&&t.row.summaryCells.length)){var s=this._columnsController.getVisibleColumns(),o=this._getAlignByColumnCellCount?this._getAlignByColumnCellCount(a.colspan,{columns:s,row:t.row,isFixed:!0}):0;if(o>0){var l=lt(this._columnsController.getFixedColumns());e=s.length-o<l}}if(e){if(a.command&&"buttons"!==a.type||"group"===t.rowType)return void i.html("&nbsp;").addClass(a.cssClass);i.addClass("dx-hidden-cell")}}a.command!==kt&&this.callBase.apply(this,arguments)},_getCellElementsCore(i){var t=this.callBase.apply(this,arguments),e=t?.parent().hasClass(bc),a="columnHeadersView"===this.name?i:void 0;if(this._fixedTableElement&&t){var n=this.getFixedColumns(a),r=this._getRowElements(this._fixedTableElement).eq(i).children("td");(0,I.__)(r,(s,o)=>{if(e)t[s]&&"hidden"!==o.style.visibility&&(t[s]=o);else{var l=n[s];if(l)if(l.command===kt)r.eq(s).hasClass("dx-master-detail-cell")&&(t[s]=o||t[s]);else{var d=this._columnsController.getVisibleIndexByColumn(l,a);t[d]=o||t[d]}}})}return t},getColumnWidths(){var i=this.callBase(),t=this.getFixedColumns(),e=this._fixedTableElement&&i.length?this.callBase(this._fixedTableElement):void 0;return Ec(t,i,e)},getTableElement(i){return(i=this._isFixedTableRendering||i)?this._fixedTableElement:this.callBase()},setTableElement(i,t){this._isFixedTableRendering||t?this._fixedTableElement=i.addClass(ds):this.callBase(i)},getColumns(i){var t=this.getTableElement();return this._isFixedTableRendering?this.getFixedColumns(i):this.callBase(i,t)},getRowIndex(i){var t=this._fixedTableElement;return t&&t.find(i).length?this._getRowElements(t).index(i):this.callBase(i)},getTableElements(){var i=this.callBase.apply(this,arguments);return this._fixedTableElement&&(i=(0,_.A)([i.get(0),this._fixedTableElement.get(0)])),i},getFixedColumns(i){return this._columnsController.getFixedColumns(i)},getFixedColumnsOffset(){var t,i={left:0,right:0};if(this._fixedTableElement){var e=(t=this.getTransparentColumnElement()).position();i={left:e.left,right:(0,R.Ot)(this.element(),!0)-((0,R.Ot)(t,!0)+e.left)}}return i},getTransparentColumnElement(){return this._fixedTableElement&&this._fixedTableElement.find(".".concat(ds)).first()},getFixedTableElement(){return this._fixedTableElement},isFixedColumns(){return this._isFixedColumns},_resizeCore(){this.callBase(),this.synchronizeRows()},setColumnWidths(i){var t,{widths:e}=i,a=this._columnsController.getVisibleColumns(),n=e?.length&&a.some(u=>(0,v.O9)(u.visibleWidth)),r=null===(t=i.optionNames)||void 0===t?void 0:t.width;if(this.callBase(i),this._fixedTableElement){var s=e?.some(u=>"auto"===u||!(0,v.O9)(u)),l=!s||n&&this.isScrollbarVisible(!0)?this.getFixedColumns():a;this.setFixedTableColumnWidths(l,e)}var d=this.option("wordWrapEnabled");(n||r&&d)&&this.synchronizeRows()},setFixedTableColumnWidths(i,t){if(this._fixedTableElement&&t){var e=this._fixedTableElement.children("colgroup").children("col");e.toArray().forEach(n=>n.removeAttribute("style"));var a=0;i.forEach(n=>{if(n.colspan)a+=n.colspan;else{var r=fl(t[a]);(0,v.O9)(r)&&(0,ei.zj)(e.eq(a),r),a+=1}})}},_getClientHeight(i){var t=i.getBoundingClientRect&&(0,se.N)(i);return t&&t.height?t.height:i.clientHeight},synchronizeRows(){var e,a,n,r,i=[],t=[];this.waitAsyncTemplates(!0).done(()=>{if(this._isFixedColumns&&this._tableElement&&this._fixedTableElement){var s=this._getClientHeight(this._tableElement.get(0)),o=this._getClientHeight(this._fixedTableElement.get(0));if(a=this._getRowElements(this._tableElement),n=this._getRowElements(this._fixedTableElement),r=this._findContentElement(),s!==o){for(r&&r.css("height",s),a.css("height",""),n.css("height",""),e=0;e<a.length;e++)i.push(this._getClientHeight(a.get(e))),t.push(this._getClientHeight(n.get(e)));for(e=0;e<a.length;e++){var l=i[e],d=t[e];l>d?n.eq(e).css("height",l):l<d&&a.eq(e).css("height",d)}r&&r.css("height","")}}})},setScrollerSpacing(i){var t=this.option("rtlEnabled");this.callBase(i),this.element().children(".".concat(this.addWidgetPrefix(ea))).css({paddingLeft:t?i:"",paddingRight:t?"":i})}},aO=(0,y.X)({},hs,{_getRowVisibleColumns(i){return this._isFixedTableRendering?this.getFixedColumns(i):this.callBase(i)},getContextMenuItems(i){var{column:t}=i,e=this.option("columnFixing"),a=this.callBase(i);if(i.row&&"header"===i.row.rowType&&!0===e.enabled&&t&&t.allowFixing){var n=r=>{switch(r.itemData.value){case"none":this._columnsController.columnOption(t.index,"fixed",!1);break;case"left":this._columnsController.columnOption(t.index,{fixed:!0,fixedPosition:"left"});break;case"right":this._columnsController.columnOption(t.index,{fixed:!0,fixedPosition:"right"})}};(a=a||[]).push({text:e.texts.fix,beginGroup:!0,items:[{text:e.texts.leftPosition,value:"left",disabled:t.fixed&&(!t.fixedPosition||"left"===t.fixedPosition),onItemClick:n},{text:e.texts.rightPosition,value:"right",disabled:t.fixed&&"right"===t.fixedPosition,onItemClick:n}]},{text:e.texts.unfix,value:"none",disabled:!t.fixed,onItemClick:n})}return a},getFixedColumnElements(i){if((0,v.O9)(i))return this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(i).children();var t=this.getColumnElements(),e=this.getTransparentColumnElement();if(t&&e&&e.length){var a=lt(this.getFixedColumns());t.splice(a,e.get(0).colSpan,e.get(0))}return t},getColumnWidths(){var i,t=this.callBase(),e=this.getFixedColumnElements(),a=this.getFixedColumns();return this._fixedTableElement&&(i=e&&e.length?this._getWidths(e):this.callBase(this._fixedTableElement)),Ec(a,t,i)}}),nO=(0,y.X)({},hs,{_detachHoverEvents(){var i=this.element();this._fixedTableElement&&this._tableElement&&O.A.off(i,"mouseover mouseout",".dx-data-row")},_attachHoverEvents(){this._fixedTableElement&&this._tableElement&&O.A.on(this.element(),"mouseover mouseout",".dx-data-row",this.createAction(i=>{var{event:t}=i,e=this.getRowIndex((0,_.A)(t.target).closest(".dx-row")),a="mouseover"===t.type;e>=0&&(this._tableElement&&this._getRowElements(this._tableElement).eq(e).toggleClass(fc,a),this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(e).toggleClass(fc,a))}))},_getScrollDelay(){var i;return(null===(i=this.getController("resizing"))||void 0===i?void 0:i.hasResizeTimeout())?this.option("scrolling.updateTimeout"):ge.A.mozilla?60:0},_findContentElement(i){var t,e,a=this.addWidgetPrefix(mc),n=this.element();if(i=this._isFixedTableRendering||i,n&&i){t=n.children(".".concat(a));var r=this.getScrollable();return!t.length&&r&&(t=(0,_.A)("<div>").addClass(a),O.A.on(t,"scroll",s=>{var{target:o}=s,l=this._getScrollDelay();clearTimeout(this._fixedScrollTimeout),this._fixedScrollTimeout=setTimeout(()=>{e=(0,_.A)(o).scrollTop(),r.scrollTo({y:e})},l)}),O.A.on(t,ZS.U,s=>{var o=(0,_.A)(s.target).closest(".dx-scrollable"),l=!1;if(r&&r.$element().is(o))l=!0;else{var d=o.length&&wt.A.getInstance(o.get(0)),h=d&&d.scrollHeight()-d.clientHeight()>0;l=d&&!h}if(l){e=r.scrollTop(),r.scrollTo({y:e-s.delta});var u=r.scrollTop()+r.clientHeight(),c=r.scrollHeight()+this.getScrollbarWidth();if(r.scrollTop()>0&&u<c)return!1}}),t.appendTo(n)),t}return this.callBase()},_updateScrollable(){this.callBase();var i=this.getScrollable();if(!i?._disposed){var t=i&&i.scrollOffset().top;this._updateFixedTablePosition(t)}},_renderContent(i,t,e){return this._isFixedTableRendering||e?i.empty().addClass("".concat(this.addWidgetPrefix(mc)," ").concat(this.addWidgetPrefix(ea))).append(t):this.callBase(i,t)},_getGroupCellOptions(i){return this.callBase(this._isFixedTableRendering?(0,y.X)({},i,{columns:this._columnsController.getVisibleColumns()}):i)},_renderGroupedCells(i,t){return this.callBase(i,(0,y.X)({},t,{columns:this._columnsController.getVisibleColumns()}))},_renderGroupSummaryCells(i,t){this.callBase(i,this._isFixedTableRendering?(0,y.X)({},t,{columns:this._columnsController.getVisibleColumns()}):t)},_hasAlignByColumnSummaryItems(i,t){var e=this.callBase.apply(this,arguments),a=t.columns[i];return t.isFixed?a.fixed&&(e||"right"===a.fixedPosition):e&&(!this._isFixedColumns||!a.fixed)},_renderGroupSummaryCellsCore(i,t,e,a){var n;if(this._isFixedTableRendering){t.isFixed=!0,n=this._getAlignByColumnCellCount(e,t),t.isFixed=!1;var r=t.columns.length-n;t=(0,y.X)({},t,{columns:this.getFixedColumns()});var s=lt(t.columns);r<s?(n-=t.columns[s].colspan-1||0,e-=t.columns[s].colspan-1||0):a>0&&i.css("visibility","hidden"),a=n}this.callBase(i,t,e,a)},_getSummaryCellIndex(i,t){if(this._isFixedTableRendering){var e=lt(t);return i>e&&(i+=t[e].colspan-1),i}return this.callBase.apply(this,arguments)},_renderCore(i){this._detachHoverEvents();var t=this.callBase(i),e=this._isFixedColumns;return this.element().toggleClass("dx-fixed-columns",e),this.option("hoverStateEnabled")&&e&&this._attachHoverEvents(),t},setAriaOwns(i,t,e){var a,n;if(e){var r=this.addWidgetPrefix(ea),s=null===(a=this.element())||void 0===a?void 0:a.children(".".concat(r)),o=this.getFixedTableElement();s.length&&o?.length&&this.setAria("owns","".concat(i??""," ").concat(null!==(n=o.attr("id"))&&void 0!==n?n:""," ").concat(t??"").trim(),s)}else this.callBase.apply(this,arguments)},setRowsOpacity(i,t){this.callBase(i,t);var e=this._getRowElements(this._fixedTableElement);this._setRowsOpacityCore(e,this.getFixedColumns(),i,t)},optionChanged(i){this.callBase(i),"hoverStateEnabled"===i.name&&this._isFixedColumns&&(i.value?this._attachHoverEvents():this._detachHoverEvents())},getCellIndex(i){var t=this._fixedTableElement,e=0;if(t&&i.is("td")&&i.closest(t).length){var a=this.getFixedColumns();return(0,I.__)(a,(n,r)=>{if(n===i[0].cellIndex)return!1;r.colspan?e+=r.colspan:e++}),e}return this.callBase.apply(this,arguments)},_updateFixedTablePosition(i,t){if(this._fixedTableElement&&this._tableElement){var e,a=this.getController("editorFactory");this._fixedTableElement.parent().scrollTop(i),t&&a&&(e=a.focus())&&a.focus(e)}},setScrollerSpacing(i,t){var e={marginBottom:0},a=this.element().children(".".concat(this.addWidgetPrefix(ea)));a.length&&this._fixedTableElement&&(a.css(e),this._fixedTableElement.css(e),e[this.option("rtlEnabled")?"marginLeft":"marginRight"]=i,e.marginBottom=t,(this._scrollable&&this._scrollable.option("useNative")?a:this._fixedTableElement).css(e))},_getElasticScrollTop(i){var t=0;if(i.scrollOffset.top<0)t=-i.scrollOffset.top;else if(i.reachedBottom){var e=(0,_.A)(i.component.content()),a=(0,_.A)(i.component.container()),n=Math.max(e.get(0).clientHeight-a.get(0).clientHeight,0);t=Math.min(n-i.scrollOffset.top,0)}return Math.floor(t)},_applyElasticScrolling(i){if(this._fixedTableElement){var t=this._getElasticScrollTop(i);0!==Math.ceil(t)?(0,Ee.Cy)(this._fixedTableElement,{top:t}):this._fixedTableElement.css("transform","")}},_handleScroll(i){this._updateFixedTablePosition(i.scrollOffset.top,!0),this._applyElasticScrolling(i),this.callBase(i)},_updateContentPosition(i){this.callBase.apply(this,arguments),i||this._updateFixedTablePosition(this._scrollTop)},_afterRowPrepared(i){this._isFixedTableRendering||this.callBase(i)},_scrollToElement(i){this.callBase(i,this.getFixedColumnsOffset())},dispose(){this.callBase.apply(this,arguments),clearTimeout(this._fixedScrollTimeout)}}),wc={defaultOptions:()=>({columnFixing:{enabled:!1,texts:{fix:A.A.format("dxDataGrid-columnFixingFix"),unfix:A.A.format("dxDataGrid-columnFixingUnfix"),leftPosition:A.A.format("dxDataGrid-columnFixingLeftPosition"),rightPosition:A.A.format("dxDataGrid-columnFixingRightPosition")}}}),extenders:{views:{columnHeadersView:aO,rowsView:nO,footerView:hs},controllers:{draggingHeader:{_generatePointsByColumns(i){var n,r,s,o,l,t=i.columns,{targetDraggingPanel:e}=i;if(e&&"headers"===e.getName()&&e.isFixedColumns()&&i.sourceColumn.fixed){i.rowIndex||(i.columnElements=e.getFixedColumnElements(0)),i.columns=e.getFixedColumns(i.rowIndex);var a=this.callBase(i);return n=t,s=a,o=lt(r=i.columns),l=n.length-r.length,(0,I.__)(s,(d,h)=>{h.index>o&&(h.columnIndex+=l,h.index+=l)}),a}return this.callBase(i)},_pointCreated(i,t,e,a){var n=this.callBase.apply(this,arguments),r=t[i.columnIndex],s=this._columnHeadersView.getTransparentColumnElement();if(!n&&"headers"===e&&s&&s.length){var o=(0,se.N)(s.get(0));return a&&a.fixed?"right"===a.fixedPosition?i.x<o.right:i.x>o.left:!(!r||!r.fixed||"right"===r.fixedPosition)||i.x<o.left||i.x>o.right}return n}},columnsResizer:{_generatePointsByColumns(){var i=this,t=i._columnsController,e=t&&i._columnsController.getVisibleColumns(),a=t&&i._columnsController.getFixedColumns(),n=lt(a),r=e.length-a.length,s=i._columnHeadersView.getFixedColumnElements();i.callBase(),s&&s.length>0&&(i._pointsByFixedColumns=F.getPointsByColumns(s,o=>(o.index>n&&(o.columnIndex+=r,o.index+=r),i._pointCreated(o,e.length,e))))},_getTargetPoint(i,t,e){var a=this._columnHeadersView.getTransparentColumnElement();if(a&&a.length){var n=(0,se.N)(a.get(0));if(t<=n.left||t>=n.right)return this.callBase(this._pointsByFixedColumns,t,e)}return this.callBase(i,t,e)}},resizing:{_setAriaOwns(){var i,t,e;this.callBase.apply(this,arguments);var a=null===(i=this._columnHeadersView)||void 0===i?void 0:i.getFixedTableElement(),n=null===(t=this._footerView)||void 0===t?void 0:t.getFixedTableElement();null===(e=this._rowsView)||void 0===e||e.setAriaOwns(a?.attr("id"),n?.attr("id"),!0)}}}}};G.registerModule("columnFixing",wc);var yc="columnHeadersView",Sc="rowsView",us=[yc,Sc,"footerView"],dt="adaptiveHidden",Nt="detailAdaptive",cs="dx-field-item-content",ta="hidden-column",Oc="dx-command-adaptive",pn="dx-command-adaptive-hidden",gs="dx-adaptive-item-text",_n="adaptive",Ic="dx-group-cell",Ac="dxDataGrid-ariaAdaptiveExpand";function vn(i,t){return i._columnsController.getColumnId(t)}function bO(i,t){var e,a=(0,_.A)(i),n=t.component.getController("adaptiveColumns");"data"===t.rowType?(e=(0,_.A)("<span>").addClass(n.addWidgetPrefix("adaptive-more")),O.A.on(e,(0,P.b4)(ae.U,"dxDataGridAdaptivity"),n.createAction(()=>{n.toggleExpandAdaptiveDetailRow(t.key)})),e.appendTo(a)):F.setEmptyText(a)}function _s(i){var t,e=null===(t=i.data)||void 0===t?void 0:t.$nextCell;O.A.off(e,"focus",_s),O.A.trigger(e,"dxclick")}var EO={_isRowEditMode(){return"row"===this._getEditMode()},_isItemModified(i,t){var e=this._columnsController.getVisibleIndex(i.column.index),a=this._dataController.getRowIndexByKey(t.key),n=this._dataController.items()[a+1];return n&&n.modifiedValues&&(0,v.O9)(n.modifiedValues[e])},_renderFormViewTemplate(i,t,e){var a=this,{column:n}=i,r=a.createAction(()=>{a._editingController.isEditing()&&O.A.trigger(e,ae.U)}),s=t.row.data,o=n.calculateCellValue(s),l=F.getDisplayValue(n,o,s,t.rowType),d=F.formatValue(l,n),h=this._editingController.isCellOrBatchEditMode(),u=a._rowsView;if(n.allowEditing&&a.getController("keyboardNavigation").isKeyboardEnabled()&&(e.attr("tabIndex",a.option("tabIndex")),h&&(O.A.off(e,"focus",r),O.A.on(e,"focus",r))),n.cellTemplate){var c=(0,y.X)({},t,{value:o,displayValue:l,text:d,column:n});u.renderTemplate(e,n.cellTemplate,c,(0,ht.A1)(e)).done(()=>{u._cellPrepared(e,t)})}else{var g=e.get(0);n.encodeHtml?g.textContent=d:g.innerHTML=d,e.addClass(gs),(!(0,v.O9)(d)||""===d)&&e.html("&nbsp;"),a._isRowEditMode()||a._isItemModified(i,t)&&e.addClass("dx-item-modified"),u._cellPrepared(e,t)}},_getTemplate(i,t){var e=this,{column:a}=i,n=this.getController("editing");return function(r,s){var o=(0,_.A)(s),l=e._columnsController.getVisibleIndex(a.index),d=(0,y.X)({},t),h=function(){var c=e._isItemEdited(i);d.value=t.row.values[l],c||a.showEditorAlways?n.renderFormEditorTemplate(d,i,r,o,!c):(d.column=a,d.columnIndex=l,e._renderFormViewTemplate(i,d,o))};if(h(),d.watch){var u=d.watch(()=>({isItemEdited:e._isItemEdited(i),value:t.row.values[l]}),()=>{o.contents().remove(),o.removeClass(gs),h()});O.A.on(o,Ot.N,u)}}},_isVisibleColumnsValid:i=>!(i<2||i.length-function(){for(var t=0,e=0;e<i.length;e++)i[e].command&&t++;return t}()<=1),_calculatePercentWidths(i,t){var e=this,a=0;return t.forEach((n,r)=>{i[r]!==dt&&(a+=e._getItemPercentWidth(n))}),a},_isPercentWidth:i=>(0,v.Kg)(i)&&i.endsWith("%"),_isColumnHidden(i){return this._hiddenColumns.filter(t=>t.index===i.index).length>0},_getAverageColumnsWidth(i,t,e){var a=this,n=0,r=0;return t.forEach(s=>{if(!a._isColumnHidden(s)){var{width:o}=s;(0,v.O9)(o)&&!isNaN(parseFloat(o))?n+=a._isPercentWidth(o)?a._calculatePercentWidth({visibleIndex:s.visibleIndex,columnsCount:t.length,columnsCanFit:e,bestFitWidth:s.bestFitWidth,columnWidth:o,containerWidth:i}):parseFloat(o):r++}}),(i-n)/r},_calculateColumnWidth(i,t,e,a){var l,n=vn(this,i),r=this._columnsController.columnOption(n,"width"),s=this._columnsController.columnOption(n,"bestFitWidth"),o=e.length;if(r&&"auto"!==r){if(!this._isPercentWidth(r))return parseFloat(r);l=this._calculatePercentWidth({visibleIndex:i.visibleIndex,columnsCount:o,columnsCanFit:a,bestFitWidth:s,columnWidth:r,containerWidth:t})}else l=this.option("columnAutoWidth")||i.command?s:this._getAverageColumnsWidth(t,e,a);return l},_calculatePercentWidth(i){var t=i.visibleIndex<i.columnsCount-1&&i.columnsCanFit,e=i.containerWidth*parseFloat(i.columnWidth)/100,a=i.columnsCanFit&&e<i.bestFitWidth?i.bestFitWidth:e;return t?i.containerWidth*parseFloat(i.columnWidth)/100:a},_getNotTruncatedColumnWidth(i,t,e,a){var n=vn(this,i),r=this._columnsController.columnOption(n,"width"),s=this._columnsController.columnOption(n,"bestFitWidth");if(r&&"auto"!==r&&!this._isPercentWidth(r))return parseFloat(r);var o=this._calculateColumnWidth(i,t,e,a);return o<s?null:o},_getItemPercentWidth(i){var t=0;return i.width&&this._isPercentWidth(i.width)&&(t=parseFloat(i.width)),t},_getCommandColumnsWidth(){var i=this,t=i._columnsController.getVisibleColumns(),e=0;return(0,I.__)(t,(a,n)=>{(n.index<0||n.command)&&(e+=i._columnsController.columnOption(vn(i,n),"bestFitWidth")||0)}),e},_isItemEdited(i){if(this.isFormOrPopupEditMode())return!1;if(!this._isRowEditMode()){var e=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,a=this._columnsController.getVisibleIndex(i.column.index);return this._editingController.isEditCell(e,a)}var t=this.option("editing.editRowKey");return!!(0,V.RL)(t,this._dataController.adaptiveExpandedKey())||void 0},_getFormItemsByHiddenColumns(i){var t=[];return(0,I.__)(i,(e,a)=>{t.push({column:a,name:a.name,dataField:a.dataField,visibleIndex:a.visibleIndex})}),t},_getAdaptiveColumnVisibleIndex(i){for(var t=0;t<i.length;t++)if(i[t].command===_n)return t},_hideAdaptiveColumn(i,t){var e=this._getAdaptiveColumnVisibleIndex(t);(0,v.O9)(e)&&(i[e]=dt,this._hideVisibleColumn({isCommandColumn:!0,visibleIndex:e}))},_showHiddenCellsInView(i){var{$cells:t,isCommandColumn:e}=i,a=this.addWidgetPrefix(ta);e?(a=pn,t.attr({tabIndex:0,"aria-hidden":null}).removeClass(a)):t.removeClass(a)},_showHiddenColumns(){for(var i=0;i<us.length;i++){var t=this.getView(us[i]);if(t&&t.isVisible()&&t.element()){var e=t.name,a=t.element().find(".".concat(pn));this._showHiddenCellsInView({viewName:e,$cells:a,isCommandColumn:!0});var n=t.element().find(".".concat(this.addWidgetPrefix(ta)));this._showHiddenCellsInView({viewName:e,$cells:n})}}},_isCellValid:i=>i&&i.length&&!i.hasClass("dx-master-detail-cell")&&!i.hasClass(Ic),_hideVisibleColumn(i){var{isCommandColumn:t,visibleIndex:e}=i,a=this;us.forEach(n=>{var r=a.getView(n);r&&a._hideVisibleColumnInView({view:r,isCommandColumn:t,visibleIndex:e})})},_hideVisibleColumnInView(i){var r,{view:t,isCommandColumn:e,visibleIndex:a}=i,n=t.name,s=this._columnsController.getVisibleColumns()[a],o=this._editingController&&this._editingController.getEditFormRowIndex();if(t&&t.isVisible()&&s)for(var l=t.getRowsCount(),d=t._getRowElements(),h=0;h<l;h++)if(h!==o||n!==Sc||"popup"===this.option("editing.mode")){var c=n===yc?this._columnsController.getVisibleIndex(s.index,h):a;if(c>=0){var g=d.eq(h);r=this._findCellElementInRow(g,c),this._isCellValid(r)&&this._hideVisibleCellInView({viewName:n,isCommandColumn:e,$cell:r})}}},_findCellElementInRow(i,t){var e=i.children(),a=t,n=!1;if(i.hasClass("dx-group-row")){var r=i.find(".".concat(Ic)),s=r.attr("colspan");if(r.length&&(0,v.O9)(s)){var o=parseInt(s);t>r.index()+o-1?a=t-o+1:n=!0}}return n?void 0:e.eq(a)},_hideVisibleCellInView(i){var{$cell:t,isCommandColumn:e}=i,a=e?pn:this.addWidgetPrefix(ta);t.attr({tabIndex:-1,"aria-hidden":!0}).addClass(a)},_getEditMode(){return this._editingController.getEditMode()},isFormOrPopupEditMode(){var i=this._getEditMode();return"form"===i||"popup"===i},hideRedundantColumns(i,t,e){if(this._hiddenColumns=[],this._isVisibleColumnsValid(t)&&e.length){var d,h,u,a=0,n=this.component.$element(),r=(0,R.RG)(n)-this._getCommandColumnsWidth(),s=function(){return t.filter(L=>!L.command&&0===this._hiddenColumns.filter(z=>z.index===L.index).length)}.bind(this),o=s(),l=o.length;do{u=!1,a=0;var c=this._calculatePercentWidths(i,t),g=c<100&&0!==c;for(d=0;d<t.length;d++){var m=t[d],f=this._getNotTruncatedColumnWidth(m,r,o,g),x=vn(this,m),b=this._columnsController.columnOption(x,"width"),S=this._columnsController.columnOption(x,"minWidth"),T=this._columnsController.columnOption(x,"bestFitWidth");if(i[d]!==dt){if(!f&&!m.command&&!m.fixed){u=!0;break}(!b||"auto"===b)&&(f=Math.max(T||0,S||0)),(m.command!==_n||h)&&(a+=f)}else h=!0}if(u=u||a>(0,R.RG)(n)){var B=e.pop(),M=this._columnsController.getVisibleIndex(B.index);r+=this._calculateColumnWidth(B,r,o,g),this._hideVisibleColumn({visibleIndex:M}),i[M]=dt,this._hiddenColumns.push(B),o=s()}}while(u&&o.length>1&&e.length);l===o.length&&this._hideAdaptiveColumn(i,t)}else this._hideAdaptiveColumn(i,t)},getAdaptiveDetailItems(){return this._$itemContents},getItemContentByColumnIndex(i){for(var t,e=0;e<this._$itemContents.length;e++){var a=(t=this._$itemContents.eq(e)).data("dx-form-item");if(a&&a.column&&this._columnsController.getVisibleIndex(a.column.index)===i)return t}},toggleExpandAdaptiveDetailRow(i,t){this.isFormOrPopupEditMode()&&this._editingController.isEditing()||this.getController("data").toggleExpandAdaptiveDetailRow(i,t)},createFormByHiddenColumns(i,t){var e=this,a=(0,_.A)(i),n={items:e._getFormItemsByHiddenColumns(e._hiddenColumns),formID:"dx-".concat(new Pe.A)},r=(0,de.gx)()?{colCount:2}:{};this.executeAction("onAdaptiveDetailRowPreparing",{formOptions:n}),e._$itemContents=null,e._form=e._createComponent((0,_.A)("<div>").appendTo(a),hh.A,(0,y.X)(r,n,{customizeItem(s){var o=s.column||e._columnsController.columnOption(s.name||s.dataField);o&&(s.label=s.label||{},s.label.text=s.label.text||o.caption,s.column=o,s.template=e._getTemplate(s,t,e.updateForm.bind(e))),n.customizeItem&&n.customizeItem.call(this,s)},onContentReady(s){n.onContentReady&&n.onContentReady.call(this,s),e._$itemContents=a.find(".".concat(cs))}}))},hasAdaptiveDetailRowExpanded(){return(0,v.O9)(this._dataController.adaptiveExpandedKey())},updateForm(i){this.hasAdaptiveDetailRowExpanded()&&this._form&&(0,v.O9)(this._form._contentReadyAction)&&(i&&i.length?this._form.option("items",this._getFormItemsByHiddenColumns(i)):this._form.repaint())},updateHidingQueue(i){var e,a,t=i.filter(r=>r.visible&&!r.type&&!r.fixed&&!((0,v.O9)(r.groupIndex)&&r.groupIndex>=0));if(this._hidingColumnsQueue=[],this.option("allowColumnResizing")&&"widget"===this.option("columnResizingMode"))return this._hidingColumnsQueue;for(a=0;a<t.length;a++)(0,v.O9)(t[a].hidingPriority)&&t[a].hidingPriority>=0&&(e=!0,this._hidingColumnsQueue[t[a].hidingPriority]=t[a]);if(e)this._hidingColumnsQueue.reverse();else if(this.option("columnHidingEnabled"))for(a=0;a<t.length;a++){var n=this._columnsController.getVisibleIndex(t[a].index);this._hidingColumnsQueue[n]=t[a]}return this._hidingColumnsQueue=this._hidingColumnsQueue.filter(Object),this._hidingColumnsQueue},getHiddenColumns(){return this._hiddenColumns},hasHiddenColumns(){return this._hiddenColumns.length>0},getHidingColumnsQueue(){return this._hidingColumnsQueue},init(){var i=this;i._columnsController=i.getController("columns"),i._dataController=i.getController("data"),i._rowsView=i.getView("rowsView"),i._columnsController.addCommandColumn({type:_n,command:_n,visible:!0,adaptiveHidden:!0,cssClass:Oc,alignment:"center",width:"auto",cellTemplate:bO,fixedPosition:"right"}),i._columnsController.columnsChanged.add(()=>{var t=!!i.updateHidingQueue(i._columnsController.getColumns()).length;i._columnsController.columnOption("command:adaptive","adaptiveHidden",!t,!0)}),i._editingController=i.getController("editing"),i._hidingColumnsQueue=[],i._hiddenColumns=[],i.createAction("onAdaptiveDetailRowPreparing"),i.callBase()},optionChanged(i){"columnHidingEnabled"===i.name&&this._columnsController.columnOption("command:adaptive","adaptiveHidden",!i.value),this.callBase(i)},publicMethods:()=>["isAdaptiveDetailRowExpanded","expandAdaptiveDetailRow","collapseAdaptiveDetailRow"],isAdaptiveDetailRowExpanded(i){var t=this._dataController;return t.adaptiveExpandedKey()&&(0,V.RL)(t.adaptiveExpandedKey(),i)},expandAdaptiveDetailRow(i){this.hasAdaptiveDetailRowExpanded()||this.toggleExpandAdaptiveDetailRow(i)},collapseAdaptiveDetailRow(){this.hasAdaptiveDetailRowExpanded()&&this.toggleExpandAdaptiveDetailRow()},updateCommandAdaptiveAriaLabel(i,t){var e=this._dataController.getRowIndexByKey(i);if(-1!==e){var a=(0,_.A)(this.component.getRowElement(e));this.setCommandAdaptiveAriaLabel(a,t)}},setCommandAdaptiveAriaLabel(i,t){i.find(".dx-command-adaptive").attr("aria-label",A.A.format(t))}},Tc={defaultOptions:()=>({columnHidingEnabled:!1,onAdaptiveDetailRowPreparing:null}),controllers:{adaptiveColumns:Z.ViewController.inherit(EO)},extenders:{views:{rowsView:{_getCellTemplate(i){var t=this,{column:e}=i;return i.rowType===Nt&&"detail"===e.command?function(a,n){t._adaptiveColumnsController.createFormByHiddenColumns((0,_.A)(a),n)}:t.callBase(i)},_createRow(i){var t=this.callBase.apply(this,arguments);return i&&i.rowType===Nt&&i.key===this._dataController.adaptiveExpandedKey()&&t.addClass("dx-adaptive-detail-row"),t},_renderCells(i,t){this.callBase(i,t);var e=this._adaptiveColumnsController,a=e.getHidingColumnsQueue().length,n=e.getHiddenColumns().length;a&&!n&&function xO(i){return i.find("td:not(.dx-datagrid-hidden-column):not([class*='dx-command-'])")}(i).last().addClass("dx-last-data-cell"),"data"===t.row.rowType&&e.setCommandAdaptiveAriaLabel(i,Ac)},_getColumnIndexByElementCore(i){var t=i.closest(".".concat(cs));if(t.length&&t.closest(this.component.$element()).length){var e=t.length?t.first().data("dx-form-item"):null;return e&&e.column&&this._columnsController.getVisibleIndex(e.column.index)}return this.callBase(i)},_cellPrepared(i,t){this.callBase.apply(this,arguments),t.row.rowType!==Nt&&t.column.visibleWidth===dt&&i.addClass(this.addWidgetPrefix(ta))},getCell(i,t){var e=this._dataController.items()[i?.rowIndex];if(e?.rowType===Nt){var a=this._adaptiveColumnsController.getAdaptiveDetailItems();return this.callBase(i,t,a)}return this.callBase.apply(this,arguments)},_getCellElement(i,t){var e=this._dataController.items()[i];return e&&e.rowType===Nt?this._adaptiveColumnsController.getItemContentByColumnIndex(t):this.callBase.apply(this,arguments)},getContextMenuItems(i){if(i.row&&"detailAdaptive"===i.row.rowType){var t=this.component.getView("columnHeadersView"),e=(0,_.A)(i.targetElement).closest(".dx-field-item-label").next().data("dx-form-item");return i.column=e?e.column:i.column,t.getContextMenuItems&&t.getContextMenuItems(i)}return this.callBase&&this.callBase(i)},isClickableElement(i){return!!this.callBase&&this.callBase(i)||!!i.closest(".".concat(Oc)).length},init(){this.callBase(),this._adaptiveColumnsController=this.getController("adaptiveColumns")}}},controllers:{export:{_updateColumnWidth(i,t){this.callBase(i,i.visibleWidth===dt?i.bestFitWidth:t)}},columnsResizer:{_pointCreated(i,t,e){var a=this.callBase(i,t,e),n=e[i.columnIndex]||{},r=this._getNextColumnIndex(i.columnIndex);return a||n.visibleWidth===dt||r!==i.columnIndex+1&&(e[r]||{}).command},_getNextColumnIndex(i){for(var t=this._columnsController.getVisibleColumns(),e=this.callBase(i);t[e]&&t[e].visibleWidth===dt;)e++;return e}},draggingHeader:{_pointCreated(i,t,e,a){return this.callBase(i,t,e,a)||(t[i.columnIndex-1]||{}).visibleWidth===dt}},editing:{_isRowEditMode(){return"row"===this.getEditMode()},_getFormEditItemTemplate(i,t){return"row"!==this.getEditMode()&&"detailAdaptive"===i.rowType?(i.columnIndex=this._columnsController.getVisibleIndex(t.index),this.getColumnTemplate(i)):this.callBase(i,t)},_closeEditItem(i){var t=i.closest(".".concat(cs)),e=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,a=t.length?t.first().data("dx-form-item"):null,n=a&&a.column&&this._columnsController.getVisibleIndex(a.column.index);this.isEditCell(e,n)||this.callBase(i)},_beforeUpdateItems(i,t){if(!this._adaptiveController.isFormOrPopupEditMode()&&this._adaptiveController.hasHiddenColumns()){var e=this._dataController.items(),a=e[t],n=F.getIndexByKey(this._dataController.adaptiveExpandedKey(),e);this._isForceRowAdaptiveExpand=!this._adaptiveController.hasAdaptiveDetailRowExpanded(),n>=0&&i.push(n+1),i.push(t+1),this._dataController.adaptiveExpandedKey(a.key)}},_afterInsertRow(i){this.callBase.apply(this,arguments),this._adaptiveController.hasHiddenColumns()&&(this._adaptiveController.toggleExpandAdaptiveDetailRow(i,this.isRowEditMode()),this._isForceRowAdaptiveExpand=!0)},_collapseAdaptiveDetailRow(){this._isRowEditMode()&&this._isForceRowAdaptiveExpand&&(this._adaptiveController.collapseAdaptiveDetailRow(),this._isForceRowAdaptiveExpand=!1)},_cancelEditAdaptiveDetailRow(){this._adaptiveController.hasHiddenColumns()&&this._collapseAdaptiveDetailRow()},_afterSaveEditData(){this.callBase.apply(this,arguments);var i=new w.cY;return this._isRowEditMode()&&this._adaptiveController.hasHiddenColumns()?(0,w.z7)(this.getController("validating").validate(!0)).done(t=>{t&&this._cancelEditAdaptiveDetailRow(),i.resolve()}):i.resolve(),i.promise()},_beforeCancelEditData(){this.callBase(),this._cancelEditAdaptiveDetailRow()},_getRowIndicesForCascadeUpdating(i){var t=this.callBase.apply(this,arguments);return this._adaptiveController.isAdaptiveDetailRowExpanded(i.key)&&t.push(i.rowType===Nt?i.rowIndex-1:i.rowIndex+1),t},_beforeCloseEditCellInBatchMode(i){var t=this._dataController._adaptiveExpandedKey;if(t){var e=F.getIndexByKey(t,this._dataController.items());e>-1&&i.unshift(e)}},editRow(i){this._adaptiveController.isFormOrPopupEditMode()&&this._adaptiveController.collapseAdaptiveDetailRow(),this.callBase(i)},deleteRow(i){var t=this._dataController.getKeyByRowIndex(i);"batch"===this.getEditMode()&&this._adaptiveController.isAdaptiveDetailRowExpanded(t)&&this._adaptiveController.collapseAdaptiveDetailRow(),this.callBase(i)},init(){this.callBase(),this._adaptiveController=this.getController("adaptiveColumns")}},resizing:{_needBestFit(){return this.callBase()||!!this._adaptiveColumnsController.getHidingColumnsQueue().length},_correctColumnWidths(i,t){var e=this._adaptiveColumnsController,a=e.getHiddenColumns(),n=e.updateHidingQueue(this._columnsController.getColumns());e.hideRedundantColumns(i,t,n);var r=e.getHiddenColumns();return e.hasAdaptiveDetailRowExpanded()&&a.length!==r.length&&e.updateForm(r),!r.length&&e.collapseAdaptiveDetailRow(),this.callBase.apply(this,arguments)},_toggleBestFitMode(i){i&&this._adaptiveColumnsController._showHiddenColumns(),this.callBase(i)},_needStretch(){var i=this._adaptiveColumnsController;return this.callBase.apply(this,arguments)||i.getHidingColumnsQueue().length||i.hasHiddenColumns()},init(){this._adaptiveColumnsController=this.getController("adaptiveColumns"),this.callBase()},dispose(){this.callBase.apply(this,arguments),clearTimeout(this._updateScrollableTimeoutID)}},data:{_processItems(i,t){var{changeType:e}=t;if(i=this.callBase.apply(this,arguments),"loadingAll"===e||!(0,v.O9)(this._adaptiveExpandedKey))return i;var a=F.getIndexByKey(this._adaptiveExpandedKey,i),n=!1===this.option("scrolling.legacyMode");if(a>=0){var r=i[a];i.splice(a+1,0,{visible:!0,rowType:Nt,key:r.key,data:r.data,node:r.node,modifiedValues:r.modifiedValues,isNewRow:r.isNewRow,values:r.values})}else"refresh"===e&&(!n||!t.repaintChangesOnly)&&(this._adaptiveExpandedKey=void 0);return i},_getRowIndicesForExpand(i){var t=this.callBase.apply(this,arguments);return this.getController("adaptiveColumns").isAdaptiveDetailRowExpanded(i)&&t.push(t[t.length-1]+1),t},adaptiveExpandedKey(i){if(!(0,v.O9)(i))return this._adaptiveExpandedKey;this._adaptiveExpandedKey=i},toggleExpandAdaptiveDetailRow(i,t){var e=F.getIndexByKey(this._adaptiveExpandedKey,this._items),a=F.getIndexByKey(i,this._items);e>=0&&e===a&&!t&&(i=void 0,a=-1);var n=this._adaptiveExpandedKey;this._adaptiveExpandedKey=i,e>=0&&e++,a>=0&&a++;var r=this.getRowIndexDelta();this.updateItems({allowInvisibleRowIndices:!0,changeType:"update",rowIndices:[e-r,a-r]});var s=this.getController("adaptiveColumns");s.updateCommandAdaptiveAriaLabel(i,"dxDataGrid-ariaAdaptiveCollapse"),s.updateCommandAdaptiveAriaLabel(n,Ac)},init(){this.callBase(),this._adaptiveExpandedKey=void 0}},editorFactory:{_needHideBorder(i){return this.callBase(i)||i?.hasClass("dx-field-item-content")&&i?.find(".dx-checkbox").length},_getFocusCellSelector(){return"".concat(this.callBase(),", .dx-adaptive-detail-row .dx-field-item > .dx-field-item-content")},_getRevertTooltipsSelector(){return"".concat(this.callBase(),", .dx-field-item-content .").concat(this.addWidgetPrefix("revert-tooltip"))}},columns:{_isColumnVisible(i){return this.callBase(i)&&!i.adaptiveHidden}},keyboardNavigation:i=>class extends i{_isCellValid(t,e){return super._isCellValid(t,e)&&!t.hasClass(this.addWidgetPrefix(ta))&&!t.hasClass(pn)}_processNextCellInMasterDetail(t,e){super._processNextCellInMasterDetail(t,e);var a=this._editingController.isCellOrBatchEditMode();this._editingController.isEditing()&&t&&a&&!this._isInsideEditForm(t)&&(O.A.off(t,"focus",_s),O.A.on(t,"focus",{$nextCell:t},_s),O.A.trigger(e,"focus"))}_isCellElement(t){return super._isCellElement(t)||t.hasClass(gs)}init(){super.init(),this._adaptiveController=this.getController("adaptiveColumns")}}}}};G.registerModule("adaptivity",Tc);var SO=D(4366),Rc="dx-editor-cell",Dc="dx-selection",Ht="dx-select-checkbox",Bc="dx-command-select",Fc="dx-data-row",je="selection.showCheckBoxesMode",ia="selection.mode",Mc=function(i,t){var e=i.getController("selection"),a=i.getView("rowsView"),n=(0,_.A)(t.target).closest(".".concat(Fc)),r=a.getRowIndex(n);r<0||("onLongTap"===i.option(je)?e.isSelectionWithCheckboxes()?e.stopSelectionWithCheckboxes():e.startSelectionWithCheckboxes():("onClick"===i.option(je)&&e.startSelectionWithCheckboxes(),"always"!==i.option(je)&&e.changeItemSelection(r,{control:!0})))},RO=(i,t)=>{var{component:e}=t,a=e.getView("rowsView");e.option("renderAsync")&&!e.option("selection.deferred")&&(t.value=e.isRowSelected(t.row.key)),a.renderSelectCheckBoxContainer((0,_.A)(i),t)},DO=(i,t)=>{var{column:e}=t,a=(0,_.A)(i),n=t.component.getView("columnHeadersView");a.addClass(Rc),n._renderSelectAllCheckBox(a,e),n._attachSelectAllCheckBoxClickEvent(a)},aa={defaultOptions:()=>({selection:{mode:"none",showCheckBoxesMode:"onClick",allowSelectAll:!0,selectAllMode:"allPages",maxFilterLengthInRequest:1500,deferred:!1},selectionFilter:[],selectedRowKeys:[]}),controllers:{selection:class BO extends Z.Controller{init(){var t,{deferred:e,selectAllMode:a,mode:n}=null!==(t=this.option("selection"))&&void 0!==t?t:{};"infinite"===this.option("scrolling.mode")&&!e&&"multiple"===n&&"allPages"===a&&J.A.log("W1018"),this._dataController=this.getController("data"),this._selectionMode=n,this._isSelectionWithCheckboxes=!1,this._selection=this._createSelection(),this._updateSelectColumn(),this.createAction("onSelectionChanged",{excludeValidators:["disabled","readOnly"]}),this._dataPushedHandler||(this._dataPushedHandler=this._handleDataPushed.bind(this),this._dataController.pushed.add(this._dataPushedHandler))}_handleDataPushed(t){this._deselectRemovedOnPush(t),this._updateSelectedOnPush(t)}_deselectRemovedOnPush(t){var e=this.option("selection.deferred"),a=t.filter(r=>"remove"===r.type).map(r=>r.key);if(e){var n=this._dataController.items().filter(r=>r.isSelected).map(r=>r.key);a=a.filter(r=>n.find(s=>(0,V.RL)(s,r)))}a.length&&this.deselectRows(a)}_updateSelectedOnPush(t){if(!this.option("selection.deferred")){var a=t.filter(r=>"update"===r.type),n=this.getSelectedRowsData();(0,Fe.VK)({keyInfo:this._selection.options,data:n,changes:a})}}_getSelectionConfig(){var t,e=this._dataController,a=this.getController("columns"),n=null!==(t=this.option("selection"))&&void 0!==t?t:{},{deferred:r}=n,s=this.option("scrolling.mode"),o="virtual"===s||"infinite"===s,l=this.option("selection.allowSelectAll"),d=this.option("scrolling.legacyMode");return{selectedKeys:this.option("selectedRowKeys"),mode:this._selectionMode,deferred:r,maxFilterLengthInRequest:n.maxFilterLengthInRequest,selectionFilter:this.option("selectionFilter"),ignoreDisabledItems:!0,allowLoadByRange(){var h=a.getGroupColumns().length>0;return o&&!d&&!h&&l&&!r},key:()=>e?.key(),keyOf:h=>e?.keyOf(h),dataFields(){var h;return null===(h=e.dataSource())||void 0===h?void 0:h.select()},load(h){var u;return(null===(u=e.dataSource())||void 0===u?void 0:u.load(h))||(new w.cY).resolve([])},plainItems:()=>e.items(!0),isItemSelected:h=>h.selected,isSelectableItem:h=>"data"===h?.rowType&&!h.isNewRow,getItemData:h=>(0,v.O9)(h?.rowType)?h?.oldData||h?.data:h,filter:()=>e.getCombinedFilter(r),totalCount:()=>e.totalCount(),getLoadOptions(h,u,c){var g,m,{sort:f,filter:x}=null!==(m=null===(g=e.dataSource())||void 0===g?void 0:g.lastLoadOptions())&&void 0!==m?m:{},b=Math.min(h,u),S=Math.max(h,u);return(0,v.O9)(c)&&(b=Math.min(c,b),S=Math.max(c,S)),{skip:b,take:S-b+1,filter:x,sort:f}},onSelectionChanged:this._updateSelectedItems.bind(this)}}_updateSelectColumn(){var t=this.getController("columns"),e=this.isSelectColumnVisible();t.addCommandColumn({type:"selection",command:"select",visible:e,visibleIndex:-1,dataType:"boolean",alignment:"center",cssClass:Bc,width:"auto",cellTemplate:RO,headerCellTemplate:DO}),t.columnOption("command:select","visible",e)}_createSelection(){var t=this._getSelectionConfig();return new SO.A(t)}_fireSelectionChanged(t){var e=this.option("selection.deferred")?{selectionFilter:this.option("selectionFilter")}:{selectedRowKeys:this.option("selectedRowKeys")};this.selectionChanged.fire(e),t&&this.executeAction("onSelectionChanged",t)}_updateCheckboxesState(t){var{isDeferredMode:e}=t,{selectionFilter:a}=t,{selectedItemKeys:n}=t,{removedItemKeys:r}=t;"onClick"===this.option(je)&&((e?a&&function(i,t){var e=0,a=i._dataController.store(),n=a&&a.key(),r=Array.isArray(n);if(!t.length)return!1;if(r&&Array.isArray(t[0])&&"and"===t[1]){for(var s=0;s<t.length;s++)if(Array.isArray(t[s])){if(t[s][0]!==n[e]||"="!==t[s][1])return!0;e++}return!1}return n!==t[0]}(this,a):n.length>1)?this.startSelectionWithCheckboxes():(e?a&&!a.length:0===n.length&&r.length)&&this.stopSelectionWithCheckboxes())}_updateSelectedItems(t){var e,a=this.option("selection.deferred"),n=this._selection.selectionFilter(),r=this._dataController,s=r.items(!0),o=r.items();if(s){var l=this.isSelectionWithCheckboxes(),d=this.getChangedItemIndexes(s),h=this.getChangedItemIndexes(o);this._updateCheckboxesState({selectedItemKeys:t.selectedItemKeys,removedItemKeys:t.removedItemKeys,selectionFilter:n,isDeferredMode:a}),(d.length||l!==this.isSelectionWithCheckboxes())&&r.updateItems({changeType:"updateSelection",itemIndexes:h}),a?(this.option("selectionFilter",n),e={}):(t.addedItemKeys.length||t.removedItemKeys.length)&&(this._selectedItemsInternalChange=!0,this.option("selectedRowKeys",t.selectedItemKeys.slice(0)),this._selectedItemsInternalChange=!1,e={selectedRowsData:t.selectedItems.slice(0),selectedRowKeys:t.selectedItemKeys.slice(0),currentSelectedRowKeys:t.addedItemKeys.slice(0),currentDeselectedRowKeys:t.removedItemKeys.slice(0)}),this._fireSelectionChanged(e)}}getChangedItemIndexes(t){for(var e=[],a=this.option("selection.deferred"),n=0,{length:r}=t;n<r;n++){var s=t[n],o=this.isRowSelected(a?s.data:s.key);this._selection.isDataItem(s)&&s.isSelected!==o&&e.push(n)}return e}callbackNames(){return["selectionChanged"]}optionChanged(t){switch(super.optionChanged(t),t.name){case"selection":var e=this._selectionMode;if(this.init(),"selection.showCheckBoxesMode"!==t.fullName){var a=this._selectionMode,n=this.option("selectedRowKeys");e!==a&&("single"===a?n.length>1&&(n=[n[0]]):"multiple"!==a&&(n=[])),this.selectRows(n).always(()=>{this._fireSelectionChanged()})}this.getController("columns").updateColumns(),t.handled=!0;break;case"selectionFilter":this._selection.selectionFilter(t.value),t.handled=!0;break;case"selectedRowKeys":var r=t.value||[];Array.isArray(r)&&!this._selectedItemsInternalChange&&(this.component.getDataSource()||!r.length)&&this.selectRows(r),t.handled=!0}}publicMethods(){return["selectRows","deselectRows","selectRowsByIndexes","getSelectedRowKeys","getSelectedRowsData","clearSelection","selectAll","deselectAll","startSelectionWithCheckboxes","stopSelectionWithCheckboxes","isRowSelected"]}isRowSelected(t){return this._selection.isItemSelected(t)}isSelectColumnVisible(){return"multiple"===this.option(ia)&&("always"===this.option(je)||"onClick"===this.option(je)||this._isSelectionWithCheckboxes)}_isOnePageSelectAll(){return"page"===this.option("selection.selectAllMode")}isSelectAll(){return this._selection.getSelectAllState(this._isOnePageSelectAll())}selectAll(){return"onClick"===this.option(je)&&this.startSelectionWithCheckboxes(),this._selection.selectAll(this._isOnePageSelectAll())}deselectAll(){return this._selection.deselectAll(this._isOnePageSelectAll())}clearSelection(){return this.selectedItemKeys([])}refresh(){var t,e=null!==(t=this.option("selectedRowKeys"))&&void 0!==t?t:[];return!this.option("selection.deferred")&&e.length?this.selectedItemKeys(e):(new w.cY).resolve().promise()}selectedItemKeys(t,e,a,n){return this._selection.selectedItemKeys(t,e,a,n)}getSelectedRowKeys(){return this._selection.getSelectedItemKeys()}selectRows(t,e){return this.selectedItemKeys(t,e)}deselectRows(t){return this.selectedItemKeys(t,!0,!0)}selectRowsByIndexes(t){var e=this._dataController.items(),a=[];return Array.isArray(t)||(t=Array.prototype.slice.call(arguments,0)),(0,I.__)(t,function(){var n=e[this];n&&"data"===n.rowType&&a.push(n.key)}),this.selectRows(a)}getSelectedRowsData(){return this._selection.getSelectedItems()}loadSelectedItemsWithFilter(){return this._selection.loadSelectedItemsWithFilter()}changeItemSelection(t,e,a){e=e||{},this.isSelectionWithCheckboxes()&&(e.control=!0);var n=t+this._dataController.getRowIndexOffset()-this._dataController.getRowIndexOffset(!0);return this._selection.changeItemSelection(n,e,a)}focusedItemIndex(t){if(!(0,v.O9)(t))return this._selection._focusedItemIndex;this._selection._focusedItemIndex=t}isSelectionWithCheckboxes(){return"multiple"===this.option(ia)&&("always"===this.option(je)||this._isSelectionWithCheckboxes)}startSelectionWithCheckboxes(){return"multiple"===this.option(ia)&&!this.isSelectionWithCheckboxes()&&(this._isSelectionWithCheckboxes=!0,this._updateSelectColumn(),!0)}stopSelectionWithCheckboxes(){return!!this._isSelectionWithCheckboxes&&(this._isSelectionWithCheckboxes=!1,this._updateSelectColumn(),!0)}}},extenders:{controllers:{data:{init(){var i=this.getController("selection"),t=this.option("selection.deferred");this.callBase.apply(this,arguments),t&&i._updateCheckboxesState({isDeferredMode:!0,selectionFilter:this.option("selectionFilter")})},_loadDataSource(){var i=this;return i.callBase().always(()=>{i.getController("selection").refresh()})},_processDataItem(i,t){var e=this.getController("selection"),a=e.isSelectColumnVisible(),n=t.isDeferredSelection=void 0===t.isDeferredSelection?this.option("selection.deferred"):t.isDeferredSelection,r=this.callBase.apply(this,arguments);if(r.isSelected=e.isRowSelected(n?r.data:r.key),a&&r.values)for(var s=0;s<t.visibleColumns.length;s++)if("select"===t.visibleColumns[s].command){r.values[s]=r.isSelected;break}return r},refresh(i){var t=this,e=new w.cY;return this.callBase.apply(this,arguments).done(()=>{!i||i.selection?t.getController("selection").refresh().done(e.resolve).fail(e.reject):e.resolve()}).fail(e.reject),e.promise()},_handleDataChanged(i){this.callBase.apply(this,arguments),(!i||"refresh"===i.changeType)&&!this._repaintChangesOnly&&this.getController("selection").focusedItemIndex(-1)},_applyChange(i){if(!i||"updateSelection"!==i.changeType)return this.callBase.apply(this,arguments);i.items.forEach((t,e)=>{var a=this._items[e];a&&(a.isSelected=t.isSelected,a.values=t.values)})},_endUpdateCore(){var i=this._changes;if(i.length>1&&i.every(a=>"updateSelection"===a.changeType)){var e=i.map(a=>a.itemIndexes||[]).reduce((a,n)=>a.concat(n));this._changes=[{changeType:"updateSelection",itemIndexes:e}]}this.callBase.apply(this,arguments)}},contextMenu:{_contextMenuPrepared(i){var t=i.event;t.originalEvent&&"dxhold"!==t.originalEvent.type||i.items&&i.items.length>0||Mc(this,t)}}},views:{columnHeadersView:{init(){this.callBase(),this.getController("selection").selectionChanged.add(this._updateSelectAllValue.bind(this))},_updateSelectAllValue(){var i=this.element(),t=i&&i.find(".".concat(Ht));if(i&&t.length&&"multiple"===this.option("selection.mode")){var e=this.getController("selection").isSelectAll(),a=!1!==e,n=this.option("selection.allowSelectAll")?!this.getController("data").isEmpty():a;t.dxCheckBox("instance").option({visible:n,value:e})}},_handleDataChanged(i){this.callBase(i),(!i||"refresh"===i.changeType||i.repaintChangesOnly&&"update"===i.changeType)&&this.waitAsyncTemplates().done(()=>{this._updateSelectAllValue()})},_renderSelectAllCheckBox(i,t){var e=this,a=e.getController("selection"),n=e.getController("data").isEmpty(),r=(0,_.A)("<div>").appendTo(i).addClass(Ht);return e.setAria("label",A.A.format("dxDataGrid-ariaSelectAll"),r),e.getController("editorFactory").createEditor(r,(0,y.X)({},t,{parentType:"headerRow",dataType:"boolean",value:a.isSelectAll(),editorOptions:{visible:!n&&(e.option("selection.allowSelectAll")||!1!==a.isSelectAll())},tabIndex:e.option("useLegacyKeyboardNavigation")?-1:e.option("tabIndex")||0,setValue(s,o){var l=e.option("selection.allowSelectAll");o.component.option("visible",l||!1!==o.component.option("value")),o.event&&a.isSelectAll()!==s&&(o.value&&!l?o.component.option("value",!1):o.value?a.selectAll():a.deselectAll(),o.event.preventDefault())}})),r},_attachSelectAllCheckBoxClickEvent(i){O.A.on(i,ae.U,this.createAction(t=>{var{event:e}=t;(0,_.A)(e.target).closest(".".concat(Ht)).length||O.A.trigger((0,_.A)(e.currentTarget).children(".".concat(Ht)),ae.U),e.preventDefault()}))}},rowsView:{renderSelectCheckBoxContainer(i,t){"data"!==t.rowType||t.row.isNewRow?F.setEmptyText(i):(i.addClass(Rc),this._attachCheckBoxClickEvent(i),this._renderSelectCheckBox(i,t))},_renderSelectCheckBox(i,t){var e=(0,_.A)("<div>").addClass(Ht).appendTo(i);return this.setAria("label",A.A.format("dxDataGrid-ariaSelectRow"),e),this.getController("editorFactory").createEditor(e,(0,y.X)({},t.column,{parentType:"dataRow",dataType:"boolean",lookup:null,value:t.value,setValue(a,n){var r;"keydown"===(null===(r=n?.event)||void 0===r?void 0:r.type)&&O.A.trigger(n.element,ae.U,n)},row:t.row})),e},_attachCheckBoxClickEvent(i){O.A.on(i,ae.U,this.createAction(function(t){var e=this.getController("selection"),{event:a}=t,n=this.getRowIndex((0,_.A)(a.currentTarget).closest(".".concat("dx-row")));n>=0&&(e.startSelectionWithCheckboxes(),e.changeItemSelection(n,{shift:a.shiftKey}),(0,_.A)(a.target).closest(".".concat(Ht)).length&&this.getController("data").updateItems({changeType:"updateSelection",itemIndexes:[n]}))}))},_update(i){var t=this,e=t.getTableElements();"updateSelection"===i.changeType?e.length>0&&((0,I.__)(e,(a,n)=>{(0,I.__)(i.itemIndexes||[],(r,s)=>{var o;if(i.items[s]&&(o=t._getRowElements((0,_.A)(n)).eq(s)).length){var{isSelected:l}=i.items[s];o.toggleClass(Dc,void 0!==l&&l).find(".".concat(Ht)).dxCheckBox("option","value",l),t.setAria("selected",l,o)}})}),t._updateCheckboxesClass()):t.callBase(i)},_createTable(){var i=this,t=i.option("selection.mode"),e=i.callBase.apply(i,arguments);return"none"!==t&&(("onLongTap"===i.option(je)||!Tn.touch)&&O.A.on(e,(0,P.b4)(lr.A.name,"dxDataGridRowsView"),".".concat(Fc),i.createAction(a=>{Mc(i.component,a.event),a.event.stopPropagation()})),O.A.on(e,"mousedown selectstart",i.createAction(a=>{var{event:n}=a;n.shiftKey&&n.preventDefault()}))),e},_createRow(i){var t=this.callBase.apply(this,arguments);if(i){var{isSelected:e}=i;e&&t.addClass(Dc),"none"!==this.option(ia)&&this.setAria("selected",e,t)}return t},_rowClick(i){var t=i.event,e=(0,_.A)(t.target).closest(".".concat("dx-selection-disabled")).length;this.isClickableElement((0,_.A)(t.target))||(!e&&("multiple"!==this.option(ia)||"always"!==this.option(je))&&this.getController("selection").changeItemSelection(i.rowIndex,{control:(0,P.By)(t),shift:t.shiftKey})&&(t.preventDefault(),i.handled=!0),this.callBase(i))},isClickableElement:i=>!!i.closest(".".concat(Bc)).length,_renderCore(i){var t=this.callBase(i);return this._updateCheckboxesClass(),t},_updateCheckboxesClass(){var i=this.getTableElements(),t=this.getController("selection"),e=t.isSelectColumnVisible()&&!t.isSelectionWithCheckboxes();(0,I.__)(i,(a,n)=>{(0,_.A)(n).toggleClass("dx-select-checkboxes-hidden",e)})}}}}},PO=aa.extenders.views.rowsView._rowClick,LO=aa.extenders.controllers.data._handleDataChanged,kO=function(i,t){return!!i.filter(e=>e===t).length};G.registerModule("selection",(0,y.X)(!0,{},aa,{defaultOptions:()=>(0,y.X)(!0,aa.defaultOptions(),{selection:{showCheckBoxesMode:"always",recursive:!1}}),extenders:{controllers:{data:{_handleDataChanged(i){var t=this.getController("selection");t.isRecursiveSelection()&&(!i||"updateSelectionState"!==i.changeType)&&t.updateSelectionState({selectedItemKeys:this.option("selectedRowKeys")}),LO.apply(this,arguments)},loadDescendants(){var i=this,t=i.callBase.apply(i,arguments),e=i.getController("selection");return e.isRecursiveSelection()&&t.done(()=>{e.updateSelectionState({selectedItemKeys:i.option("selectedRowKeys")})}),t}},selection:{init(){this.callBase.apply(this,arguments),this._selectionStateByKey={}},_getSelectionConfig(){var i=this.callBase.apply(this,arguments),{plainItems:t}=i;return i.plainItems=e=>{var a;return e&&(a=this._dataController.getCachedStoreData()),a||(a=t.apply(this,arguments).map(n=>n.data)),a||[]},i.isItemSelected=e=>{var a=this._dataController.keyOf(e);return this.isRowSelected(a)},i.isSelectableItem=e=>!!e,i.getItemData=e=>e,i.allowLoadByRange=()=>!1,i},renderSelectCheckBoxContainer(i,t){var e=this.component.getView("rowsView");i.addClass("dx-cell-focus-disabled");var a=e._renderSelectCheckBox(i,{value:t.row.isSelected,row:t.row,column:t.column});e._attachCheckBoxClickEvent(a)},_updateSelectColumn:V.lQ,_getSelectAllNodeKeys(){var{component:i}=this,t=i.getRootNode(),e={},a=[],n=this.isRecursiveSelection();return t&&G.foreachNodes(t.children,r=>(void 0!==r.key&&(r.visible||n)&&a.push(r.key),!r.visible||!n&&i.isRowExpanded(r.key,e))),a},isSelectAll(){if(0===(this.option("selectedRowKeys")||[]).length)return!1;var{component:t}=this,e=this._getSelectAllNodeKeys(),a=this.isRecursiveSelection(),n=!1,r=e.filter(s=>{var o=t.isRowSelected(s,a);return void 0===o&&(n=!0),o});return r.length?r.length===e.length||void 0:!!n&&void 0},selectAll(){var i=this._getSelectAllNodeKeys().filter(t=>!this.isRowSelected(t));return this.focusedItemIndex(-1),this.selectRows(i,!0)},deselectAll(){var i=this._getSelectAllNodeKeys();return this.focusedItemIndex(-1),this.deselectRows(i)},selectedItemKeys(i,t,e,a){var n=this,r=n.option("selectedRowKeys"),o=this.isRecursiveSelection()&&n._normalizeSelectionArgs({keys:(0,v.O9)(i)?i:[]},t,!e);return o&&!(0,V.RL)(o.selectedRowKeys,r)?(n._isSelectionNormalizing=!0,this.callBase(o.selectedRowKeys,!1,!1,!1).always(()=>{n._isSelectionNormalizing=!1}).done(l=>{o.selectedRowsData=l,n._fireSelectionChanged(o)})):this.callBase(i,t,e,a)},changeItemSelection(i,t){var e=this.isRecursiveSelection(),a=this.callBase.bind(this);if(e&&!t.shift){var n=this._dataController.getKeyByRowIndex(i);return this.selectedItemKeys(n,!0,this.isRowSelected(n)).done(()=>{this.isRowSelected(n)&&a(i,t,!0)})}return this.callBase.apply(this,arguments)},_updateParentSelectionState(i,t){var e=this,a=t,n=i.parent;n&&(n.children.length>1&&(!1===t?a=!!n.children.some(o=>e._selectionStateByKey[o.key])&&void 0:!0===t&&(a=!n.children.some(o=>!e._selectionStateByKey[o.key])||void 0)),this._selectionStateByKey[n.key]=a,n.parent&&n.parent.level>=0&&this._updateParentSelectionState(n,a))},_updateChildrenSelectionState(i,t){var e=this,{children:a}=i;a&&a.forEach(n=>{e._selectionStateByKey[n.key]=t,n.children.length>0&&e._updateChildrenSelectionState(n,t)})},_updateSelectionStateCore(i,t){for(var e=this._dataController,a=0;a<i.length;a++){this._selectionStateByKey[i[a]]=t;var n=e.getNodeByKey(i[a]);n&&(this._updateParentSelectionState(n,t),this._updateChildrenSelectionState(n,t))}},_getSelectedParentKeys(i,t,e){for(var a,n=this._dataController.getNodeByKey(i),r=n&&n.parent,s=[];r&&r.level>=0;){if(s.unshift(r.key),e?!kO(t,r.key)&&this.isRowSelected(r.key):t.indexOf(r.key)>=0){s=this._getSelectedParentKeys((a=r).key,t,e).concat(s);break}if(e)break;r=r.parent}return a&&s||[]},_getSelectedChildKeys(i,t){var e=[],a=this._dataController.getNodeByKey(i);return a&&G.foreachNodes(a.children,n=>{var r=t.indexOf(n.key);return r<0&&e.push(n.key),r>0||r<0&&void 0===this._selectionStateByKey[n.key]}),e},_normalizeParentKeys(i,t){var e=[i],a=this._getSelectedParentKeys(i,t.selectedRowKeys);if(a.length){(e=e.concat(a)).forEach(r=>{var s=t.selectedRowKeys.indexOf(r);s>=0&&t.selectedRowKeys.splice(s,1)});var n=this._getSelectedChildKeys(a[0],e);t.selectedRowKeys=t.selectedRowKeys.concat(n)}},_normalizeChildrenKeys(i,t){var e=this._dataController.getNodeByKey(i);e&&e.children.forEach(a=>{var n=t.selectedRowKeys.indexOf(a.key);n>=0&&t.selectedRowKeys.splice(n,1),this._normalizeChildrenKeys(a.key,t)})},_normalizeSelectedRowKeysCore(i,t,e,a){var n=this;i.forEach(r=>{if(!e||n.isRowSelected(r)!==a){n._normalizeChildrenKeys(r,t);var s=t.selectedRowKeys.indexOf(r);a?(s<0&&t.selectedRowKeys.push(r),t.currentSelectedRowKeys.push(r)):(s>=0&&t.selectedRowKeys.splice(s,1),t.currentDeselectedRowKeys.push(r),n._normalizeParentKeys(r,t))}})},_normalizeSelectionArgs(i,t,e){var a,n=Array.isArray(i.keys)?i.keys:[i.keys],r=this.option("selectedRowKeys")||[];return n.length&&(a={currentSelectedRowKeys:[],currentDeselectedRowKeys:[],selectedRowKeys:t?r.slice(0):[]},this._normalizeSelectedRowKeysCore(n,a,t,e)),a},_updateSelectedItems(i){this.updateSelectionState(i),this.callBase(i)},_fireSelectionChanged(){this._isSelectionNormalizing||this.callBase.apply(this,arguments)},_isModeLeavesOnly:i=>"leavesOnly"===i,_removeDuplicatedKeys(i){var t=[],e={};return i.forEach(a=>{e[a]||(e[a]=!0,t.push(a))}),t},_getAllChildKeys(i){var t=[],e=this._dataController.getNodeByKey(i);return e&&G.foreachNodes(e.children,a=>{t.push(a.key)},!0),t},_getAllSelectedRowKeys(i){var t=[];return i.forEach(e=>{var a=this._getSelectedParentKeys(e,[],!0),n=this._getAllChildKeys(e);t.push.apply(t,a.concat([e],n))}),t=this._removeDuplicatedKeys(t)},_getParentSelectedRowKeys(i){var t=this,e=[];return i.forEach(a=>{!t._getSelectedParentKeys(a,i).length&&e.push(a)}),e},_getLeafSelectedRowKeys(i){var t=[],e=this._dataController;return i.forEach(a=>{var n=e.getNodeByKey(a);n&&!n.hasChildren&&t.push(a)}),t},isRecursiveSelection(){var i=this.option("selection.mode"),t=this.option("selection.recursive");return"multiple"===i&&t},updateSelectionState(i){var t=i.removedItemKeys||[],e=i.selectedItemKeys||[];this.isRecursiveSelection()&&(this._updateSelectionStateCore(t,!1),this._updateSelectionStateCore(e,!0))},isRowSelected(i,t){var e=this.callBase.apply(this,arguments);return t=t??this.isRecursiveSelection(),!e&&t?i in this._selectionStateByKey&&this._selectionStateByKey[i]:e},getSelectedRowKeys(i){if(!this._dataController)return[];var t=this.callBase.apply(this,arguments);return i&&(this.isRecursiveSelection()&&(t=this._getAllSelectedRowKeys(t)),"all"!==i&&("excludeRecursive"===i?t=this._getParentSelectedRowKeys(t):this._isModeLeavesOnly(i)&&(t=this._getLeafSelectedRowKeys(t)))),t},getSelectedRowsData(i){var t=this._dataController,e=this.getSelectedRowKeys(i)||[],a=[];return e.forEach(n=>{var r=t.getNodeByKey(n);r&&a.push(r.data)}),a},refresh(){return this._selectionStateByKey={},this.callBase.apply(this,arguments)}}},views:{columnHeadersView:{_processTemplate(i,t){var e=this,n=this.callBase(i,t),r=e._columnsController.getFirstDataColumnIndex();return n&&"header"===t.rowType&&t.column.index===r?{render(s){"multiple"===e.option("selection.mode")&&e.renderSelectAll(s.container,s.model),n.render(s)}}:n},renderSelectAll(i,t){i.addClass("dx-treelist-select-all"),this._renderSelectAllCheckBox(i)},_isSortableElement(i){return this.callBase(i)&&!i.closest(".".concat("dx-select-checkbox")).length}},rowsView:{_renderIcons(i,t){return this.callBase.apply(this,arguments),!t.row.isNewRow&&"multiple"===this.option("selection.mode")&&this.getController("selection").renderSelectCheckBoxContainer(i,t),i},_rowClick(i){var t=(0,_.A)(i.event.target);this.isExpandIcon(t)?this.callBase.apply(this,arguments):PO.apply(this,arguments)}}}}}));var Vc="search-panel",Pc="search-text";function Lc(i){return(0,v.O9)(i.allowSearch)?i.allowSearch:i.allowFiltering}function kc(i,t){var{lookup:e}=i;return i.parseValue?e?i.parseValue.call(e,t):i.parseValue(t):t}var Nc={defaultOptions:()=>({searchPanel:{visible:!1,width:160,placeholder:A.A.format("dxDataGrid-searchPanelPlaceholder"),highlightSearchText:!0,highlightCaseSensitive:!1,text:"",searchVisibleColumnsOnly:!1}}),extenders:{controllers:{data:{publicMethods(){return this.callBase().concat(["searchByText"])},_calculateAdditionalFilter(){var i=this.callBase(),t=function(e,a){var n,r,l,s=e._columnsController.getColumns(),o=e.option("searchPanel.searchVisibleColumnsOnly"),d=[];if(!a)return null;function h(c){for(var g=(0,q.Hz)(l.valueExpr),m=0;m<c.length;m++){var f=g(c[m]);d.push(r.createFilterExpression(f,null,"search"))}}for(n=0;n<s.length;n++)if(r=s[n],(!o||r.visible)&&Lc(r)&&r.calculateFilterExpression){l=r.lookup;var u=kc(r,a);l&&l.items?(0,Le.A)(l.items).filter(r.createFilterExpression.call({dataField:l.displayExpr,dataType:l.dataType,calculateFilterExpression:r.calculateFilterExpression},u,null,"search")).enumerate().done(h):void 0!==u&&d.push(r.createFilterExpression(u,null,"search"))}return 0===d.length?["!"]:F.combineFilters(d,"or")}(this,this.option("searchPanel.text"));return F.combineFilters([i,t])},searchByText(i){this.option("searchPanel.text",i)},optionChanged(i){switch(i.fullName){case"searchPanel.text":case"searchPanel":this._applyFilter(),i.handled=!0;break;default:this.callBase(i)}}}},views:{headerPanel:function(){var i=function(t){return t.option("searchPanel")};return{_getToolbarItems(){var t=this.callBase();return this._prepareSearchItem(t)},_prepareSearchItem(t){var e=this,a=e.getController("data"),n=i(e);return n&&n.visible&&t.push({template(s,o,l){var d=(0,_.A)("<div>").addClass(e.addWidgetPrefix(Vc)).appendTo(l);e.getController("editorFactory").createEditor(d,{width:n.width,placeholder:n.placeholder,parentType:"searchPanel",value:e.option("searchPanel.text"),updateValueTimeout:700,setValue(h){a.searchByText(h)},editorOptions:{inputAttr:{"aria-label":A.A.format("".concat(e.component.NAME,"-ariaSearchInGrid"))}}}),e.resize()},name:"searchPanel",location:"after",locateInMenu:"never",sortIndex:40}),t},getSearchTextEditor(){var t=this,e=t.element(),a=e.find(".".concat(t.addWidgetPrefix(Vc))).filter(function(){return(0,_.A)(this).closest(".".concat(t.addWidgetPrefix("header-panel"))).is(e)});return a.length?a.dxTextBox("instance"):null},isVisible(){var t=i(this);return this.callBase()||t&&t.visible},optionChanged(t){if("searchPanel"===t.name){if("searchPanel.text"===t.fullName){var e=this.getSearchTextEditor();e&&e.option("value",t.value)}else this._invalidate();t.handled=!0}else this.callBase(t)}}}(),rowsView:{init(){this.callBase.apply(this,arguments),this._searchParams=[],this._dataController=this.getController("data")},_getFormattedSearchText(i,t){var e=kc(i,t),a=F.getFormatOptionsByColumn(i,"search");return F.formatValue(e,a)},_getStringNormalizer(){var i,t,e,a,n=this.option("searchPanel.highlightCaseSensitive"),r=null===(t=null===(i=this._dataController)||void 0===i?void 0:i.getDataSource)||void 0===t?void 0:t.call(i),s=null===(a=null===(e=r?.loadOptions)||void 0===e?void 0:e.call(r))||void 0===a?void 0:a.langParams;return o=>(0,q.ao)(o,n,s)},_findHighlightingTextNodes(i,t,e){var n,a=t.parent(),r=this._getStringNormalizer(),s=r(e),o=[];if(a.length){if(i)if(i.groupIndex>=0&&!i.showWhenGrouped)n=t;else{var l=this._columnsController.getVisibleIndex(i.index);n=a.children("td").eq(l).find("*")}}else a=(0,_.A)("<div>").append(t);return(n=n?.length?n:a.find("*")).each((d,h)=>{for(var u=(0,_.A)(h).contents(),c=0;c<u.length;c++){var g=u.get(c);3===g.nodeType&&r(g.textContent||g.nodeValue).indexOf(s)>-1&&o.push(g)}}),o},_highlightSearchTextCore(i,t){var e=(0,_.A)("<span>").addClass(this.addWidgetPrefix(Pc)),a=i.text(),n=i[0],r=this._getStringNormalizer(),s=r(a).indexOf(r(t));if(s>=0)return n.textContent?n.textContent=a.substr(0,s):n.nodeValue=a.substr(0,s),i.after(e.text(a.substr(s,t.length))),i=(0,_.A)(U.A.createTextNode(a.substr(s+t.length))).insertAfter(e),this._highlightSearchTextCore(i,t)},_highlightSearchText(i,t,e){var a=this,n=this._getStringNormalizer(),r=a.option("searchPanel.text");t&&e&&(r=r&&a._getFormattedSearchText(e,r)),r&&a.option("searchPanel.highlightSearchText")&&a._findHighlightingTextNodes(e,i,r).forEach(o=>{t?n((0,_.A)(o).text())===n(r)&&(0,_.A)(o).replaceWith((0,_.A)("<span>").addClass(a.addWidgetPrefix(Pc)).text((0,_.A)(o).text())):a._highlightSearchTextCore((0,_.A)(o),r)})},_renderCore(){var i=this.callBase.apply(this,arguments);return(this.option().rowTemplate||this.option("dataRowTemplate"))&&(this.option("templatesRenderAsynchronously")?(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._highlightSearchText(this.getTableElement())})):this._highlightSearchText(this.getTableElement())),i},_updateCell(i,t){var{column:e}=t,n="string"!==(e.lookup&&e.lookup.dataType||e.dataType);Lc(e)&&!t.isOnForm&&(this.option("templatesRenderAsynchronously")?(this._searchParams.length||(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._searchParams.forEach(r=>{this._highlightSearchText.apply(this,r)}),this._searchParams=[]})),this._searchParams.push([i,n,e])):this._highlightSearchText(i,n,e)),this.callBase(i,t)},dispose(){clearTimeout(this._highlightTimer),this.callBase()}}}}};G.registerModule("search",Nc);var vs=D(8257),zO=(i,t)=>i.length===t.length&&!Object.keys(i).some(e=>i[e]!==t[e]),KO=(i,t)=>(0,V.RL)(i,t,{maxDepth:4}),GO={compareType:"reference"},Hc=function(i){var{compareType:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GO,e=null;return function(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];if(!e){var s=i(...n);return e=((i,t,e,a)=>{var n=i,r=t;return function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return a(o,n)||(n=o,r=e(...n)),r}})(n,s,i,"reference"===t?zO:KO),s}return e(...n)}},Cs="rowsview",zc="dx-data-row",Kc="dx-freespace-row",Wc="dx-master-detail-cell",mn="dx-command-expand",Gc="dx-command-select",Uc="[class^=dx-command]",Cn="dx-cell-focus-disabled",$c="dx-state-focused",Xc="dx-focused",fs="delete",fn='\n  input:not([type="hidden"]):not([disabled]),\n  textarea:not([disabled]),\n  a:not([disabled]),\n  select:not([disabled]),\n  button:not([disabled]),\n  [tabindex]:not([disabled]),\n  .dx-checkbox:not([disabled])\n',Yc="".concat(fn,", .dx-dropdowneditor-icon"),qc="columnHeadersView",a0=["shift","control","alt"];function na(i){return i&&i.hasClass("dx-group-row")}function xs(i){return i&&i.hasClass("dx-master-detail-row")}function ra(i){return i&&i.hasClass(zc)}function Jc(i,t){return!i._isRowEditMode()&&t&&!t.hasClass(Gc)&&t.hasClass(Na)}function Ve(i){return(0,v.O9)(i)&&i.length>0}function bs(){return"desktop"!==ne.A.current().deviceType}function eg(i){return!!i.parent(".".concat("dx-header-row")).length}var tg={defaultOptions:()=>({useLegacyKeyboardNavigation:!1,keyboardNavigation:{enabled:!0,enterKeyAction:"startEdit",enterKeyDirection:"none",editOnKeyPress:!1}}),controllers:{keyboardNavigation:class c0 extends Z.ViewController{init(){var t,e;this._dataController=this.getController("data"),this._selectionController=this.getController("selection"),this._editingController=this.getController("editing"),this._headerPanel=this.getView("headerPanel"),this._rowsView=this.getView("rowsView"),this._columnsController=this.getController("columns"),this._editorFactory=this.getController("editorFactory"),this._focusController=this.getController("focus"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._memoFireFocusedCellChanged=Hc(this._memoFireFocusedCellChanged.bind(this),{compareType:"value"}),this._memoFireFocusedRowChanged=Hc(this._memoFireFocusedRowChanged.bind(this),{compareType:"value"}),this.focusedHandlerWithContext=this.focusedHandlerWithContext||this.focusedHandler.bind(this),this.renderCompletedWithContext=this.renderCompletedWithContext||this.renderCompleted.bind(this),this.rowsViewFocusHandlerContext=this.rowsViewFocusHandlerContext||this.rowsViewFocusHandler.bind(this),this._updateFocusTimeout=null,this._fastEditingStarted=!1,this._focusedCellPosition={},this._canceledCellPosition=null,this.isKeyboardEnabled()?(function wv(){O.A.on(U.A.getDocument(),"visibilitychange",Zo)}(),null===(t=this._editorFactory)||void 0===t||t.focused.add(this.focusedHandlerWithContext),this.createAction("onKeyDown")):(Jo(),null===(e=this._editorFactory)||void 0===e||e.focused.remove(this.focusedHandlerWithContext)),this.initViewHandlers(),this.initDocumentHandlers()}focusedHandler(t){this.setupFocusedView(),this._isNeedScroll&&t.is(":visible")&&this._focusedView&&this._focusedView.getScrollable&&(this._focusedView._scrollToElement(t),this._isNeedScroll=!1)}rowsViewFocusHandler(t){var e,a=(0,_.A)(t.target),n=(0,_.A)(t.relatedTarget).closest(this._rowsView.element()).length,r=a.is("a");if(t.relatedTarget&&r&&!n&&this._isEventInCurrentGrid(t)){var s=this._getFocusedCell();s=Ve(s)?s:this._rowsView.getCellElements(0).filter("[tabindex]").eq(0),a.closest(s).length||(t.preventDefault(),O.A.trigger(s,"focus"))}var o=a.is("td"),l=(null!==(e=this.option("focusedRowIndex"))&&void 0!==e?e:-1)<0;o&&l&&this._updateFocusedCellPosition(a)}subscribeToRowsViewFocusEvent(){var t,e=null===(t=this._rowsView)||void 0===t?void 0:t.element();O.A.on(e,"focusin",this.rowsViewFocusHandlerContext)}unsubscribeFromRowsViewFocusEvent(){var t,e=null===(t=this._rowsView)||void 0===t?void 0:t.element();O.A.off(e,"focusin",this.rowsViewFocusHandlerContext)}renderCompleted(t){var e=this._rowsView.element(),a=!t||"refresh"===t.changeType,n=this._focusedView&&this._focusedView.name===this._rowsView.name,s=t&&("append"===t.changeType||"prepend"===t.changeType),l=(0,_.A)(U.A.getRootNode(e.get&&e.get(0))).find(":focus"),d=!l.length||l.closest(e).length;this.unsubscribeFromRowsViewFocusEvent(),this.subscribeToRowsViewFocusEvent(),this.initPointerEventHandler(),this.initKeyDownHandler(),this._setRowsViewAttributes(),n&&d&&(this._isNeedFocus?!s:this._isHiddenFocus&&a&&!t?.virtualColumnsScrolling)&&this._updateFocus(!0)}initViewHandlers(){var t,e;this.unsubscribeFromRowsViewFocusEvent(),this.unsubscribeFromPointerEvent(),this.unsubscribeFromKeyDownEvent(),null===(e=null===(t=this._rowsView)||void 0===t?void 0:t.renderCompleted)||void 0===e||e.remove(this.renderCompletedWithContext),this.isKeyboardEnabled()&&this._rowsView.renderCompleted.add(this.renderCompletedWithContext)}initDocumentHandlers(){var t=U.A.getDocument();this._documentClickHandler=this._documentClickHandler||this.createAction(e=>{var a=(0,_.A)(e.event.target),n=this._isEventInCurrentGrid(e.event)&&a.closest(".".concat(this.addWidgetPrefix(Cs))).length,r=a.closest(".".concat("dx-dropdowneditor-overlay")).length,s=this.getController("columnsResizer"),o=!!s&&s.isResizing();n||r||o||(!(this._focusedView&&a.parents().filter(this._focusedView.element()).length>0)&&this._resetFocusedCell(!0),this._resetFocusedView())}),O.A.off(t,(0,P.b4)(te.A.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),this.isKeyboardEnabled()&&O.A.on(t,(0,P.b4)(te.A.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler)}_setRowsViewAttributes(){var t=this._getRowsViewElement();!this._dataController.getVisibleRows().length&&this._applyTabIndexToElement(t)}unsubscribeFromPointerEvent(){var t=bs()?ae.U:te.A.down,e=this._getRowsViewElement();this._pointerEventAction&&O.A.off(e,(0,P.b4)(t,"dxDataGridKeyboardNavigation"),this._pointerEventAction)}subscribeToPointerEvent(){var t=bs()?ae.U:te.A.down,e=this._getRowsViewElement(),a=".".concat(pt," > td, .").concat(pt);O.A.on(e,(0,P.b4)(t,"dxDataGridKeyboardNavigation"),a,this._pointerEventAction)}initPointerEventHandler(){this._pointerEventAction=this._pointerEventAction||this.createAction(this._pointerEventHandler),this.unsubscribeFromPointerEvent(),this.subscribeToPointerEvent()}unsubscribeFromKeyDownEvent(){vs.QJ.off(this._keyDownListener)}subscribeToKeyDownEvent(){var t=this._getRowsViewElement();this._keyDownListener=vs.QJ.on(t,null,e=>this._keyDownHandler(e))}initKeyDownHandler(){this._keyDownListener&&this.unsubscribeFromKeyDownEvent(),this.subscribeToKeyDownEvent()}dispose(){super.dispose(),this._resetFocusedView(),vs.QJ.off(this._keyDownListener),O.A.off(U.A.getDocument(),(0,P.b4)(te.A.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),clearTimeout(this._updateFocusTimeout),Jo()}optionChanged(t){switch(t.name){case"keyboardNavigation":case"useLegacyKeyboardNavigation":this.init(),t.handled=!0;break;default:super.optionChanged(t)}}isRowFocusType(){return"row"===this.focusType}isCellFocusType(){return"cell"===this.focusType}setRowFocusType(){this.option("focusedRowEnabled")&&(this.focusType="row")}setCellFocusType(){this.focusType="cell"}_keyDownHandler(t){var e,a=!0;this._isNeedFocus=!0,this._isNeedScroll=!0;var n=this._processOnKeyDown(t),r=null===(e=this._editingController)||void 0===e?void 0:e.isEditing(),{originalEvent:s}=t;if(s.isDefaultPrevented())return this._isNeedFocus=!1,void(this._isNeedScroll=!1);if(!a0.includes(t.keyName)&&this._updateFocusedCellPositionByTarget(s.target),!n){switch(t.keyName){case"leftArrow":case"rightArrow":this._leftRightKeysHandler(t,r),n=!0;break;case"upArrow":case"downArrow":t.ctrl?Kn("rowsView",this,s):this._upDownKeysHandler(t,r),n=!0;break;case"pageUp":case"pageDown":this._pageUpDownKeyHandler(t),n=!0;break;case"space":n=this._spaceKeyHandler(t,r);break;case"A":(0,P.By)(t.originalEvent)?(this._ctrlAKeyHandler(t,r),n=!0):n=this._beginFastEditing(t.originalEvent);break;case"tab":this._tabKeyHandler(t,r),n=!0;break;case"enter":this._enterKeyHandler(t,r),n=!0;break;case"escape":this._escapeKeyHandler(t,r),n=!0;break;case"F":(0,P.By)(t.originalEvent)?(this._ctrlFKeyHandler(t),n=!0):n=this._beginFastEditing(t.originalEvent);break;case"F2":this._f2KeyHandler(),n=!0;break;case"del":case"backspace":this._isFastEditingAllowed()&&!this._isFastEditingStarted()&&(n=this._beginFastEditing(s,!0))}!n&&!this._beginFastEditing(s)&&(this._isNeedFocus=!1,this._isNeedScroll=!1,a=!1),a&&s.stopPropagation()}}_processOnKeyDown(t){var{originalEvent:e}=t,a={handled:!1,event:e};return this.executeAction("onKeyDown",a),t.ctrl=e.ctrlKey,t.alt=e.altKey,t.shift=e.shiftKey,!!a.handled}_closeEditCell(){setTimeout(()=>{this._editingController.closeEditCell()})}_leftRightKeysHandler(t,e){var a=this.getVisibleRowIndex(),n=t.originalEvent,r=this._focusedView&&this._focusedView.getRow(a),s=this._getDirectionCodeByKey(t.keyName),o=this._isFastEditingStarted();if((!e||o)&&ra(r)){this.setCellFocusType(),o&&this._closeEditCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(s);var d=this._getNextCell(s);Ve(d)&&this._arrowKeysHandlerFocusCell(n,d,s),n&&n.preventDefault()}}_upDownKeysHandler(t,e){var a,n,r=this.getVisibleRowIndex(),s=this._focusedView&&this._focusedView.getRow(r),o=t.originalEvent,l="upArrow"===t.keyName,d=this._dataController.dataSource(),h=null===(n=null===(a=this._editingController)||void 0===a?void 0:a.isEditRowByIndex)||void 0===n?void 0:n.call(a,r),u=this._isFastEditingStarted();if((!h||!e||u)&&s&&!xs(s)){if(u&&this._closeEditCell(),!this._navigateNextCell(o,t.keyName)&&this._isVirtualRowRender()&&l&&d&&!d.isLoading()){var g=(0,R.P$)(s);this._scrollBy(0,-g,this._focusedCellPosition.rowIndex-1,o)}o&&o.preventDefault()}}_pageUpDownKeyHandler(t){var e=this._dataController.pageIndex(),a=this._dataController.pageCount(),n=this.option("paging.enabled"),r="pageUp"===t.keyName,s=r?-1:1,o=this._rowsView.getScrollable();n&&!this._isVirtualScrolling()?(r?e>0:e<a-1)&&!this._isVirtualScrolling()&&(this._dataController.pageIndex(e+s),t.originalEvent.preventDefault()):o&&(0,R.Oq)(o.container())<(0,R.Oq)(o.$content())&&(this._scrollBy(0,(0,R.Oq)(o.container())*s),t.originalEvent.preventDefault())}_spaceKeyHandler(t,e){var a=this.getVisibleRowIndex(),n=(0,_.A)(t.originalEvent&&t.originalEvent.target);if(this.option("selection")&&"none"!==this.option("selection").mode&&!e){var r="row"===this._getElementType(n)&&this.isRowFocusType()&&ra(n);return n.hasClass(Gc)&&"onClick"===this.option("selection.showCheckBoxesMode")&&this._selectionController.startSelectionWithCheckboxes(),!!(r||n.parent().hasClass(zc)||n.hasClass(this.addWidgetPrefix(Cs)))&&(this._selectionController.changeItemSelection(a,{shift:t.shift,control:t.ctrl}),t.originalEvent.preventDefault(),!0)}return this._beginFastEditing(t.originalEvent)}_ctrlAKeyHandler(t,e){!e&&!t.alt&&"multiple"===this.option("selection.mode")&&this.option("selection.allowSelectAll")&&(this._selectionController.selectAll(),t.originalEvent.preventDefault())}_tabKeyHandler(t,e){var a=this.option("editing"),n=t.shift?"previous":"next",s=!((0,v.O9)(this._focusedCellPosition)&&!(0,v.RI)(this._focusedCellPosition))||!t.shift&&this._isLastValidCell(this._focusedCellPosition)||t.shift&&this._isFirstValidCell(this._focusedCellPosition),o=t.originalEvent.target,l=this._focusedView&&this._focusedView.element();if(!this._handleTabKeyOnMasterDetailCell(o,n)){if((0,_.A)(l).addClass($c),a&&o&&!s)if((0,_.A)(o).hasClass(this.addWidgetPrefix(Cs))&&this._resetFocusedCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(n),e){if(!this._editingCellTabHandler(t,n))return}else this._targetCellTabHandler(t,n)&&(s=!0);s?(this._editorFactory.loseFocus(),this._editingController.isEditing()&&!this._isRowEditMode()&&(this._resetFocusedCell(!0),this._resetFocusedView(),this._closeEditCell())):t.originalEvent.preventDefault()}}_getMaxHorizontalOffset(){var t=this.component.getScrollable();return t?t.scrollWidth()-(0,R.RG)(this._rowsView.element()):0}_isColumnRendered(t){var e=this._columnsController.getVisibleColumns(null,!0),a=this._columnsController.getVisibleColumns(),n=e[t],r=!1;return n&&(r=a.indexOf(n)>=0),r}_isFixedColumn(t){var a=this._columnsController.getVisibleColumns(null,!0)[t];return!!a&&!!a.fixed}_isColumnVirtual(t){var e=t-this._columnsController.getColumnIndexOffset(),n=this._columnsController.getVisibleColumns()[e];return!!n&&"virtual"===n.command}_processVirtualHorizontalPosition(t){var n,e=this.component.getScrollable(),a=this.getColumnIndex(),r=0,s=!1;switch(t){case"next":case"nextInRow":var o=this._getVisibleColumnCount();n=a+1,r=this.option("rtlEnabled")?this._getMaxHorizontalOffset():0,s="next"===t?o===n||this._isFixedColumn(a)&&!this._isColumnRendered(n):o>n&&this._isFixedColumn(a)&&!this._isColumnRendered(n);break;case"previous":case"previousInRow":if(n=a-1,r=this.option("rtlEnabled")?0:this._getMaxHorizontalOffset(),"previous"===t){var l=this._columnsController.getColumnIndexOffset();s=n<0&&0===l||this._isFixedColumn(a)&&!this._isColumnRendered(n)}else s=n>=0&&this._isFixedColumn(a)&&!this._isColumnRendered(n)}s?e.scrollTo({left:r}):(0,v.O9)(n)&&(0,v.O9)(t)&&this._isColumnVirtual(n)&&0!==(r=this._getHorizontalScrollPositionOffset(t))&&e.scrollBy({left:r,top:0})}_getHorizontalScrollPositionOffset(t){var e=0,a=this._getCell(this._focusedCellPosition),n=a&&(0,R.Ot)(a);if(n>0){var r=this.option("rtlEnabled")?-1:1;e="nextInRow"===t||"next"===t?n*r:n*r*-1}return e}_editingCellTabHandler(t,e){var r,a=t.originalEvent.target,n=this._getCellElementFromTarget(a),s=t.originalEvent,o=this._getElementType(a);if(n.is(Uc))return!this._targetCellTabHandler(t,e);this._updateFocusedCellPosition(n);var l=this._getNextCellByTabKey(s,e,o);if(!(n=l.$cell)||this._handleTabKeyOnMasterDetailCell(n,e))return!1;var d=this._columnsController,u=this._rowsView.getCellIndex(n)+d.getColumnIndexOffset(),c=d.getVisibleColumns(null,!0)[u],g=n.parent(),m=this._getRowIndex(g),f=this._dataController.items()[m];if(c&&c.allowEditing){var b=!f||"data"===f.rowType;r=this._editingController.allowUpdating({row:f})?b:f&&f.isNewRow}return r||this._closeEditCell(),this._focusCell(n,!l.isHighlighted)&&(!this._isRowEditMode()&&r?this._editFocusedCell():this._focusInteractiveElement(n,t.shift)),!0}_targetCellTabHandler(t,e){var a=t.originalEvent,n=a.target,r=this._getElementType(n),s=this._getCellElementFromTarget(n),o="cell"===r&&this._getInteractiveElement(s,!t.shift),l=!1;if(!Jc(this,s)&&o?.length&&n!==o.get(0))l=!0;else{void 0===this._focusedCellPosition.rowIndex&&(0,_.A)(n).hasClass(pt)&&this._updateFocusedCellPosition(s),r=this._getElementType(n),this.isRowFocusType()&&(this.setCellFocusType(),"row"===r&&ra((0,_.A)(n))&&(n=this.getFirstValidCellInRow((0,_.A)(n)),r=this._getElementType(n)));var d=this._getNextCellByTabKey(a,e,r);if(!(s=d.$cell)||!(s=this._checkNewLineTransition(a,s)))return!1;this._focusCell(s,!d.isHighlighted),Jc(this,s)||this._focusInteractiveElement(s,t.shift)}return l}_getNextCellByTabKey(t,e,a){var n=this._getNextCell(e,a),r=n&&this._fireFocusedCellChanging(t,n,!0);return!r||r.cancel?{}:(r.$newCellElement&&(n=r.$newCellElement),{$cell:n,isHighlighted:r.isHighlighted})}_checkNewLineTransition(t,e){var a=this.getVisibleRowIndex(),n=e.parent();if(a!==this._getRowIndex(n)){var r=this._getCellPosition(e),s=this._fireFocusedRowChanging(t,n);if(s.cancel)return;s.rowIndexChanged&&r&&(this.setFocusedColumnIndex(r.columnIndex),e=this._getFocusedCell())}return e}_enterKeyHandler(t,e){var a,n=this.getVisibleRowIndex(),r=this._dataController.getKeyByRowIndex(n),s=null===(a=this._focusedView)||void 0===a?void 0:a.getRow(n),o=this._getFocusedCell(),l=this.option("grouping.allowCollapsing")&&na(s),d=this.option("masterDetail.enabled")&&o?.hasClass(mn),h=o?.hasClass("dx-command-adaptive");if(l||d){var u=this._dataController.items()[n],c=u?.data&&!u.data.isContinuation;(0,v.O9)(r)&&c&&this._dataController.changeRowExpand(r)}else h?(this._adaptiveColumnsController.toggleExpandAdaptiveDetailRow(r),this._updateFocusedCellPosition(o)):this._processEnterKeyForDataCell(t,e)}_processEnterKeyForDataCell(t,e){var a=this._getEnterKeyDirection(t),n=this._allowEditingOnEnterKey();e||!n&&a?(this._handleEnterKeyEditingCell(t.originalEvent),"next"===a||"previous"===a?this._targetCellTabHandler(t,a):("upArrow"===a||"downArrow"===a)&&this._navigateNextCell(t.originalEvent,a)):n&&this._startEditing(t)}_getEnterKeyDirection(t){var e=this.option("keyboardNavigation.enterKeyDirection"),a=t.shift;return"column"===e?a?"upArrow":"downArrow":"row"===e?a?"previous":"next":void 0}_handleEnterKeyEditingCell(t){var{target:e}=t,a=this._getCellElementFromTarget(e),n=this._isRowEditMode();this._updateFocusedCellPosition(a),n?(this._focusEditFormCell(a),setTimeout(this._editingController.saveEditData.bind(this._editingController))):(O.A.trigger((0,_.A)(e),"change"),this._closeEditCell(),t.preventDefault())}_escapeKeyHandler(t,e){var a=this._getCellElementFromTarget(t.originalEvent.target);e&&(this._updateFocusedCellPosition(a),this._isRowEditMode()?(this._focusEditFormCell(a),this._editingController.cancelEditData(),0===this._dataController.items().length&&(this._resetFocusedCell(),this._editorFactory.loseFocus())):"cell"===this._editingController.getEditMode()?this._editingController.cancelEditData():this._closeEditCell(),t.originalEvent.preventDefault())}_ctrlFKeyHandler(t){if(this.option("searchPanel.visible")){var e=this._headerPanel.getSearchTextEditor();e&&(e.focus(),t.originalEvent.preventDefault())}}_f2KeyHandler(){var t=this._editingController.isEditing(),e=this.getVisibleRowIndex(),a=this._focusedView&&this._focusedView.getRow(e);!t&&ra(a)&&this._startEditing()}_navigateNextCell(t,e){var a=this._getNextCell(e),n=this._getDirectionCodeByKey(e);return!(!a||!this._isCellValid(a))&&this._arrowKeysHandlerFocusCell(t,a,n)}_arrowKeysHandlerFocusCell(t,e,a){var r=this._fireFocusChangingEvents(t,e,"prevRow"===a||"nextRow"===a,!0);return e=r.$newCellElement,!(r.cancel||!this._isCellValid(e)||(this._focus(e,!r.isHighlighted),0))}_beginFastEditing(t,e){if(!this._isFastEditingAllowed()||t.altKey||t.ctrlKey||this._editingController.isEditing())return!1;if(e)this._startEditing(t,fs);else{var{key:a}=t,n=t.keyCode||t.which,r=a||n&&String.fromCharCode(n);r&&(1===r.length||r===fs)&&this._startEditing(t,r)}return!0}_pointerEventHandler(t){var e,a=t.event||t,n=(0,_.A)(a.currentTarget),r=null===(e=this._rowsView)||void 0===e?void 0:e.element(),s=n.parent(),o=(0,_.A)(a.target).is(fn),l=!!(0,_.A)(a.target).closest(".".concat("dx-revert-button")).length,d=n.hasClass(mn);this._isEventInCurrentGrid(a)&&(l||!this._isCellValid(n,!o)&&!d?n.is("td")&&this._resetFocusedCell():(n=this._isInsideEditForm(n)?(0,_.A)(a.target):n,this._focusView(),(0,_.A)(r).removeClass($c),s.hasClass(Kc)?(this._updateFocusedCellPosition(n),this._applyTabIndexToElement(this._focusedView.element()),this._focusedView.focus(!0)):this._isMasterDetailCell(n)?this._updateFocusedCellPosition(n):this._clickTargetCellHandler(a,n)))}_clickTargetCellHandler(t,e){var a=this._rowsView.getCellIndex(e),n=this._columnsController.getVisibleColumns()[a],r=this._isCellEditMode();this.setCellFocusType();var s=this._fireFocusChangingEvents(t,e,!0);if(e=s.$newCellElement,s.cancel)this.setRowFocusType(),this.setFocusedRowIndex(s.prevRowIndex),this._editingController.isEditing()&&r&&this._closeEditCell();else{if(s.resetFocusedRow)return void this.getController("focus")._resetFocusedRow();if(s.rowIndexChanged&&(e=this._getFocusedCell()),!s.isHighlighted&&!r&&this.setRowFocusType(),this._updateFocusedCellPosition(e),this._allowRowUpdating()&&r&&n&&n.allowEditing)this._isNeedFocus=!1,this._isHiddenFocus=!1;else{e=this._getFocusedCell();var o=t&&(0,_.A)(t.target).closest("".concat(Yc,", td")),l=o&&o.not(e).is(Yc),d=!!n&&!n.command&&e.hasClass(Na);this._focus(e,!d&&(!s.isHighlighted||l),l)}}}_allowRowUpdating(){var t=this.getVisibleRowIndex(),e=this._dataController.items()[t];return this._editingController.allowUpdating({row:e},"click")}focus(t){var e,a=this.option("focusedRowEnabled"),n=this._isCellElement((0,_.A)(t));t||(e=".dx-datagrid-rowsview .dx-row[tabindex]",a||(e+=", .dx-datagrid-rowsview .dx-row > td[tabindex]"),t=this.component.$element().find(e).first()),t&&this._focusElement((0,_.A)(t),n)}getFocusedView(){return this._focusedView}setupFocusedView(){this.isKeyboardEnabled()&&!(0,v.O9)(this._focusedView)&&this._focusView()}_focusElement(t,e){var a=(0,_.A)(this._getRowsViewElement()),n=t.closest(a),r=this.isRowFocusType(),s={};!n.length||this._isCellElement(t)&&!this._isCellValid(t)||(this._focusView(),this._isNeedFocus=!0,this._isNeedScroll=!0,(this._isCellElement(t)||na(t))&&(this.setCellFocusType(),t=(s=this._fireFocusChangingEvents(null,t,!0,e)).$newCellElement,r&&!s.isHighlighted&&this.setRowFocusType()),s.cancel||(this._focus(t,!s.isHighlighted),this._focusInteractiveElement(t)))}_getFocusedViewByElement(t){var e=this.getFocusedView(),a=e&&(0,_.A)(e.element());return t&&0!==t.closest(a).length}_focusView(){this._focusedView=this._rowsView}_resetFocusedView(){this.setRowFocusType(),this._focusedView=null}_focusInteractiveElement(t,e){if(t){var a=this._getInteractiveElement(t,e);F.focusAndSelectElement(this,a)}}_focus(t,e,a){var n=t&&!t.hasClass(pt)?t.closest(".".concat(pt)):t;if(!n||!function l0(i){return!i||i.hasClass(Kc)||i.hasClass("dx-virtual-row")}(n)){var o,r=this._focusedView,s=r&&r.element();this._isHiddenFocus=e;var l=na(n)||function o0(i){return i&&i.hasClass("dx-datagrid-group-footer")}(n)||this.isRowFocusType();l?(o=n,r&&this.setFocusedRowIndex(this._getRowIndex(n))):this._isCellElement(t)&&(o=t,this._updateFocusedCellPosition(t)),o&&(s&&s.find(".dx-row[tabindex], .dx-row > td[tabindex]").not(o).removeClass(Cn).removeClass(Xc).removeAttr("tabindex"),O.A.one(o,"blur",d=>{d.relatedTarget&&o.removeClass(Cn).removeClass(Xc)}),a||(this._applyTabIndexToElement(o),O.A.trigger(o,"focus")),e?(o.addClass(Cn),l&&t.addClass(Cn)):this._editorFactory.focus(o))}}_updateFocus(t){this._updateFocusTimeout=setTimeout(()=>{if(this._needFocusEditingCell())this._editingController._focusEditingCell();else{var e=this._getFocusedCell(),a=this._editingController.isEditing();if((!this._isMasterDetailCell(e)||this._isRowEditMode())&&(this._hasSkipRow(e.parent())&&(e=this._getNextCell(this._focusedCellPosition&&this._focusedCellPosition.rowIndex>0?"upArrow":"downArrow")),Ve(e)))if(e.is("td")||e.hasClass(this.addWidgetPrefix("edit-form-item"))){var r=e.is(Uc),s=e.find(":focus"),o=Ve(s);if(!t&&r||!this._editorFactory.focus())!o&&(this._isNeedFocus||this._isHiddenFocus)&&this._focus(e,this._isHiddenFocus);else{if(r&&o)return void F.focusAndSelectElement(this,s);!o&&this._focus(e)}a&&this._focusInteractiveElement.bind(this)(e)}else O.A.trigger(e,"focus")}})}_needFocusEditingCell(){var t=this._editingController.getEditMode()===si,e=this._editingController.getEditMode()===Bt,a=t&&this._editingController.hasChanges(),n=e&&this._editingController.isNewRowInEditMode(),r=this._getFocusedCell();return(0===r.children().length||r.find(xr).length>0)&&(a||n)}_getFocusedCell(){return(0,_.A)(this._getCell(this._focusedCellPosition))}_updateFocusedCellPositionByTarget(t){var e;if("row"===this._getElementType(t)&&(0,v.O9)(null===(e=this._focusedCellPosition)||void 0===e?void 0:e.columnIndex)){var n=(0,_.A)(t);this._focusedView&&na(n)&&this.setFocusedRowIndex(this._getRowIndex(n))}else this._updateFocusedCellPosition(this._getCellElementFromTarget(t))}_updateFocusedCellPosition(t,e){var a=this._getCellPosition(t,e);return a&&(!t.length||a.rowIndex>=0&&a.columnIndex>=0)&&this.setFocusedCellPosition(a.rowIndex,a.columnIndex),a}_getFocusedColumnIndexOffset(t){var e=0,a=this._columnsController.getVisibleColumns()[t];return a&&a.fixed?e=this._getFixedColumnIndexOffset(a):t>=0&&(e=this._columnsController.getColumnIndexOffset()),e}_getFixedColumnIndexOffset(t){var e=function d0(i,t){return i.option("rtlEnabled")?!("right"===t.fixedPosition||(0,v.O9)(t.command)&&!(0,v.O9)(t.fixedPosition)):!(!(0,v.O9)(t.fixedPosition)||"left"===t.fixedPosition)}(this,t)?this._getVisibleColumnCount()-this._columnsController.getVisibleColumns().length:0;return e}_getCellPosition(t,e){var a,n=Ve(t)&&t.closest("tr");if(Ve(n)){var r=this._getRowIndex(n);return a=this._rowsView.getCellIndex(t,r),a+=this._getFocusedColumnIndexOffset(a),e&&(a=this._applyColumnIndexBoundaries(a="previous"===e?a-1:a+1)),{rowIndex:r,columnIndex:a}}}_focusCell(t,e){if(this._isCellValid(t))return this._focus(t,e),!0}_focusEditFormCell(t){t.hasClass(Wc)&&this._editorFactory.focus(t,!0)}_resetFocusedCell(t){var e,a=this._getFocusedCell();Ve(a)&&a.removeAttr("tabindex"),this._isNeedFocus=!1,this._isNeedScroll=!1,this._focusedCellPosition={},clearTimeout(this._updateFocusTimeout),null===(e=this._focusedView)||void 0===e||e.renderFocusState({preventScroll:t})}restoreFocusableElement(t,e){var a,n,r=(0,v.O9)(t),s=this._rowsView.element(),{columnIndex:o}=this._focusedCellPosition,l=this._dataController.getRowIndexOffset();t=r?t:this._rowsView.getTopVisibleItemIndex()+l,r?(n=this._rowsView.getRow(t-l),!(a=this._fireFocusedRowChanging(e,n)).cancel&&a.rowIndexChanged&&(t=a.newRowIndex)):(this._editorFactory.loseFocus(),this._applyTabIndexToElement(s),O.A.trigger(s,"focus")),(!r||!a.cancel)&&this.setFocusedCellPosition(t,o),r&&this._updateFocus()}_getNewPositionByCode(t,e,a){var{columnIndex:n}=t,{rowIndex:r}=t;if(void 0===t.rowIndex&&"next"===a)return{columnIndex:0,rowIndex:0};switch(a){case"nextInRow":case"next":n<this._getVisibleColumnCount()-1&&"row"!==e&&this._hasValidCellAfterPosition({columnIndex:n,rowIndex:r})?n++:!this._isLastRow(r)&&"next"===a&&(n=0,r++);break;case"previousInRow":case"previous":n>0&&"row"!==e&&this._hasValidCellBeforePosition({columnIndex:n,rowIndex:r})?n--:r>0&&"previous"===a&&(r--,n=this._getVisibleColumnCount()-1);break;case"upArrow":r=r>0?r-1:r;break;case"downArrow":r=this._isLastRow(r)?r:r+1}return{columnIndex:n,rowIndex:r}}setFocusedCellPosition(t,e){this.setFocusedRowIndex(t),this.setFocusedColumnIndex(e)}setFocusedRowIndex(t){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.rowIndex=t}setFocusedColumnIndex(t){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.columnIndex=t}getRowIndex(){return this._focusedCellPosition?this._focusedCellPosition.rowIndex:-1}getColumnIndex(){return this._focusedCellPosition?this._focusedCellPosition.columnIndex:-1}getVisibleRowIndex(){var t,e=null===(t=this._focusedCellPosition)||void 0===t?void 0:t.rowIndex;return!(0,v.O9)(e)||e<0?-1:e-this._dataController.getRowIndexOffset()}getVisibleColumnIndex(){var t,e=null===(t=this._focusedCellPosition)||void 0===t?void 0:t.columnIndex;return(0,v.O9)(e)?e-this._columnsController.getColumnIndexOffset():-1}_applyColumnIndexBoundaries(t){var e=this._getVisibleColumnCount();return t<0?t=0:t>=e&&(t=e-1),t}_isCellByPositionValid(t){var e=(0,_.A)(this._getCell(t));return this._isCellValid(e)}_isLastRow(t){var e=this._dataController;return this._isVirtualRowRender()?t>=e.getMaxRowIndex():t===Math.max(...e.items().map((n,r)=>!1!==n.visible?r:-1))}_isFirstValidCell(t){var e=!1;return 0===t.rowIndex&&t.columnIndex>=0&&(e=e||!this._hasValidCellBeforePosition(t)),e}_hasValidCellBeforePosition(t){for(var{columnIndex:e}=t,a=!1;e>0&&!a;){var n={columnIndex:--e,rowIndex:t.rowIndex};a=this._isCellByPositionValid(n)}return a}_hasValidCellAfterPosition(t){for(var{columnIndex:e}=t,a=!1,n=this._getVisibleColumnCount();e<n-1&&!a;){var r={columnIndex:++e,rowIndex:t.rowIndex};a=this._isCellByPositionValid(r)}return a}_isLastValidCell(t){var e=t.columnIndex>=0?t.columnIndex+1:0,{rowIndex:a}=t,n={columnIndex:e,rowIndex:a},r=this._dataController.getVisibleRows(),s=r&&r[a];return!!this._isLastRow(a)&&(!!(("group"===s?.rowType||"groupFooter"===s?.rowType)&&t.columnIndex>0||t.columnIndex===this._getVisibleColumnCount()-1)||!this._isCellByPositionValid(n)&&this._isLastValidCell(n))}_isCellValid(t,e){if(Ve(t)){var a=t.parent(),n=this._columnsController,r=this._rowsView.getCellIndex(t)+n.getColumnIndexOffset(),s=n.getVisibleColumns(null,!0)[r],o=this._getVisibleColumnCount(),l=this._editingController,d=xs(a),h=s&&s.showWhenGrouped,u=s&&!t.hasClass(mn)&&ra(a);if((i=>void 0!==i.attr("dx-drag-cell"))(t))return!1;if(this._isMasterDetailCell(t))return!0;if(o>r&&(!d&&s&&(!(0,v.O9)(s.groupIndex)||h&&u)||parseInt(t.attr("colspan"),10)>1)){var g=this._dataController.items(),m=this._rowsView.getRowIndex(a),f=g[m],x=l&&this._isCellEditMode()&&l.isEditing(),b=l&&l.isEditRow(m),S=b||x;return s.command?this._isLegacyNavigation()?!S&&"expand"===s.command:!x&&(b?"select"!==s.command:!S):(!x||!f||"data"===f.rowType)&&(!S||s.allowEditing||e)}}}getFirstValidCellInRow(t,e){for(var n,r,a=t.find("> td"),s=e=e||0;s<a.length;++s)if(n=a.eq(s),this._isCellValid(n)){r=n;break}return r}_getNextCell(t,e,a){var o,l,n=a||this._focusedCellPosition,r=this.isRowFocusType(),s=r||["next","previous"].includes(t);if(this._focusedView&&n){var d=this._getNewPositionByCode(n,e,t);o=(0,_.A)(this._getCell(d));var h="previous"===t?this._isFirstValidCell(d):this._isLastValidCell(d);if(Ve(o)&&!this._isCellValid(o)&&this._isCellInRow(d,s)&&!h&&(o=r?this.getFirstValidCellInRow(o.parent(),d.columnIndex):this._getNextCell(t,"cell",d)),l=Ve(o)&&o.parent(),this._hasSkipRow(l)){var u=this._getRowIndex(l);if(this._isLastRow(u))return null;o=this._getNextCell(t,"row",{columnIndex:n.columnIndex,rowIndex:u})}return Ve(o)?o:null}return null}_startEditing(t,e){var a=this._focusedCellPosition,n=this.getVisibleRowIndex(),r=this.getVisibleColumnIndex(),s=this._dataController.items()[n],o=this._columnsController.getVisibleColumns()[r];this._isAllowEditing(s,o)&&(this._isRowEditMode()?this._editingController.editRow(n):a&&this._startEditCell(t,e))}_isAllowEditing(t,e){return this._editingController.allowUpdating({row:t})&&e&&e.allowEditing}_editFocusedCell(){var t=this.getVisibleRowIndex(),e=this.getVisibleColumnIndex();return this._editingController.editCell(t,e)}_startEditCell(t,e){this._fastEditingStarted=(0,v.O9)(e);var a=this._editFocusedCell(),n=(0,v.uF)(a);if(this._isFastEditingStarted()&&(n||a)){var s=n&&e===fs?"":e,o=n?a:(0,w.cY)().resolve(),l=this._rowsView.waitAsyncTemplates(!0);(0,w.z7)(o,l).done(()=>{this._editingCellHandler(t,s)})}}_editingCellHandler(t,e){var a,n,r=this._getFocusedCell().find(fn).eq(0),s=r.get(0);if(s){var o=(0,P.lh)(t,{type:"keydown",target:s}),l=(0,P.lh)(t,{type:"keypress",target:s}),d=(0,P.lh)(t,{type:"input",target:s});d.originalEvent&&(d.originalEvent=(0,P.lh)(d.originalEvent,{data:e})),null===(n=(a=s).select)||void 0===n||n.call(a),O.A.trigger(r,o),o.isDefaultPrevented()||(O.A.trigger(r,l),l.isDefaultPrevented())||setTimeout(()=>{r.val(e);var u=r.closest(".".concat("dx-widget"));O.A.off(u,"focusout"),O.A.one(u,"focusout",()=>{O.A.trigger(r,"change")}),O.A.trigger(r,d)},ge.A.mozilla?25:0)}}_fireFocusChangingEvents(t,e,a,n){var r,s={},o=null!==(r=this._getCellPosition(e))&&void 0!==r?r:{};return this.isCellFocusType()&&((s=this._fireFocusedCellChanging(t,e,n)).cancel||(o.columnIndex=s.newColumnIndex,o.rowIndex=s.newRowIndex,n=s.isHighlighted,e=(0,_.A)(this._getCell(o)))),!s.cancel&&a&&e&&((s=this._fireFocusedRowChanging(t,e.parent())).cancel||(o.rowIndex=s.newRowIndex,s.isHighlighted=n)),s.$newCellElement=(0,_.A)(this._getCell(o)),s.$newCellElement.length||(s.$newCellElement=e),s}_fireFocusedCellChanging(t,e,a){var n=this.option("focusedColumnIndex"),r=this.option("focusedRowIndex"),s=this._getCellPosition(e),o=s?s.columnIndex:-1,l=s?s.rowIndex:-1,u={cellElement:e,prevColumnIndex:n,prevRowIndex:r,newColumnIndex:o,newRowIndex:l,rows:this._dataController.getVisibleRows(),columns:this._columnsController.getVisibleColumns(),event:t,isHighlighted:a||!1,cancel:!1};return this._canceledCellPosition=null,this.executeAction("onFocusedCellChanging",u),(u.newColumnIndex!==o||u.newRowIndex!==l)&&(u.$newCellElement=(0,_.A)(this._getCell({columnIndex:u.newColumnIndex,rowIndex:u.newRowIndex}))),u.cancel&&(this._canceledCellPosition={rowIndex:l,columnIndex:o}),u}_fireFocusedCellChanged(t){var e=this._rowsView.getCellIndex(t),a=t?.parent().data("options"),n=a?.key;this._memoFireFocusedCellChanged(n,e)}_memoFireFocusedCellChanged(t,e){var a=this._getFocusedCell(),n=this._getRowIndex(a?.parent()),r=Math.min(n-this._dataController.getRowIndexOffset(),this._dataController.items().length-1);if(!this._editingController.isEditCell(r,e)){var o=this._dataController.items()[r],l=this._columnsController.getVisibleColumns()[e];this.executeAction("onFocusedCellChanged",{cellElement:a?(0,Y.c)(a):void 0,columnIndex:e,rowIndex:n,row:o,column:l})}}_fireFocusedRowChanging(t,e){var a=this._getRowIndex(e),n=this.option("focusedRowIndex"),r=this._dataController.loadingOperationTypes(),s={rowElement:e,prevRowIndex:n,newRowIndex:a,event:t,rows:this._dataController.getVisibleRows(),cancel:!1};return!this._dataController||this._dataController.isLoading()&&(r.reload||r.paging)?(s.cancel=!0,s):(this.option("focusedRowEnabled")&&(this.executeAction("onFocusedRowChanging",s),!s.cancel&&s.newRowIndex!==a&&(s.resetFocusedRow=s.newRowIndex<0,s.resetFocusedRow||this.setFocusedRowIndex(s.newRowIndex),s.rowIndexChanged=!0)),s)}_fireFocusedRowChanged(){var t,e=this.option("focusedRowEnabled"),a=this.option("focusedRowKey"),n=null===(t=this._focusController)||void 0===t?void 0:t.getFocusedRowIndexByKey(a);!e||(0,v.O9)(a)&&n<0||this._memoFireFocusedRowChanged(a,n)}_memoFireFocusedRowChanged(t,e){var a=e-this._dataController.getRowIndexOffset();this.executeAction("onFocusedRowChanged",{rowElement:e<0?void 0:this._rowsView.getRowElement(a),rowIndex:e,row:e<0?void 0:this._dataController.getVisibleRows()[a]})}_isEventInCurrentGrid(t){return F.isElementInCurrentGrid(this,(0,_.A)(t.target))}_isRowEditMode(){var t=this._editingController.getEditMode();return t===it||t===oi}_isCellEditMode(){var t=this._editingController.getEditMode();return t===si||t===Bt}_isFastEditingAllowed(){return this._isCellEditMode()&&this.option("keyboardNavigation.editOnKeyPress")}_getInteractiveElement(t,e){var a=t.find(fn).filter(":visible");return e?a.last():a.first()}_applyTabIndexToElement(t){var e,a=null!==(e=this.option("tabIndex"))&&void 0!==e?e:0;t.attr("tabindex",a)}_getCell(t){if(this._focusedView&&t){var e=this._dataController.getRowIndexOffset(),a=this._columnsController.getVisibleColumns(null,!0)[t.columnIndex],n=a&&a.fixed?this._getFixedColumnIndexOffset(a):this._columnsController.getColumnIndexOffset();return this._focusedView.getCell({rowIndex:t.rowIndex>=0?t.rowIndex-e:-1,columnIndex:t.columnIndex>=0?t.columnIndex-n:-1})}}_getRowIndex(t){var e=this._rowsView.getRowIndex(t);return e>=0&&(e+=this._dataController.getRowIndexOffset()),e}_hasSkipRow(t){var e=t&&t.get(0);return e&&("none"===e.style.display||xs(t)&&!t.hasClass(this.addWidgetPrefix(Ha)))}_allowEditingOnEnterKey(){return"startEdit"===this.option("keyboardNavigation.enterKeyAction")}_isLegacyNavigation(){return this.option("useLegacyKeyboardNavigation")}_getDirectionCodeByKey(t){var e;switch(t){case"upArrow":e="prevRow";break;case"downArrow":e="nextRow";break;case"leftArrow":e=this.option("rtlEnabled")?"nextInRow":"previousInRow";break;case"rightArrow":e=this.option("rtlEnabled")?"previousInRow":"nextInRow"}return e}_isVirtualScrolling(){var t=this.option("scrolling.mode");return"virtual"===t||"infinite"===t}_isVirtualRowRender(){return this._isVirtualScrolling()||F.isVirtualRowRendering(this)}_isVirtualColumnRender(){return"virtual"===this.option("scrolling.columnRenderingMode")}_scrollBy(t,e,a,n){var r=this,s=this._rowsView.getScrollable();return r._focusedCellPosition&&s.on("scroll",function o(){s.off("scroll",o),setTimeout(r.restoreFocusableElement.bind(r,a,n))}),s.scrollBy({left:t,top:e})}_isInsideEditForm(t){var e=(0,_.A)(t).closest(".".concat(this.addWidgetPrefix(Ha)));return e.length&&this.elementIsInsideGrid(e)}_isMasterDetailCell(t){var e=(0,_.A)(t).closest(".".concat(Wc));return e.length&&this.elementIsInsideGrid(e)}_processNextCellInMasterDetail(t,e){!this._isInsideEditForm(t)&&t&&this._applyTabIndexToElement(t)}_handleTabKeyOnMasterDetailCell(t,e){if(this._isMasterDetailCell(t)){this._updateFocusedCellPosition((0,_.A)(t),e);var a=this._getNextCell(e,"row");return this._processNextCellInMasterDetail(a,(0,_.A)(t)),!0}return!1}_getElementType(t){return(0,_.A)(t).is("tr")?"row":"cell"}_isFastEditingStarted(){return this._isFastEditingAllowed()&&this._fastEditingStarted}_getVisibleColumnCount(){return this._columnsController.getVisibleColumns(null,!0).length}_isCellInRow(t,e){var{columnIndex:a}=t,n=this._getVisibleColumnCount();return e?a>=0&&a<=n-1:a>0&&a<n-1}_isCellElement(t){return t.length&&"TD"===t[0].tagName}_getCellElementFromTarget(t){var e=this._getElementType(t),a=(0,_.A)(t);return"cell"===e?a.closest(".".concat(pt," > td")):a.children().not(".".concat(mn)).first()}_getRowsViewElement(){var t;return null===(t=this._rowsView)||void 0===t?void 0:t.element()}isKeyboardEnabled(){return this.option("keyboardNavigation.enabled")}_processCanceledEditCellPosition(t,e){if(this._canceledCellPosition){var a=this._canceledCellPosition.rowIndex===t&&this._canceledCellPosition.columnIndex===e;return this._canceledCellPosition=null,a}}updateFocusedRowIndex(){var t=this._dataController,e=this.getVisibleRowIndex(),a=t.items(),n=a.length?a.length-1:-1,r=t.getRowIndexOffset();n>=0&&e>n&&this.setFocusedRowIndex(n+r)}}},extenders:{views:{rowsView:{init(){this.callBase(),this._keyboardController=this.getController("keyboardNavigation")},_rowClick(i){var t=this.getController("editing").getEditRowIndex(),e=this._keyboardController.isKeyboardEnabled();t===i.rowIndex&&this._keyboardController.setCellFocusType(),(bs()||!e)&&this.option("focusedRowEnabled")&&this._triggerPointerDownEventHandler(i,!e),this.callBase.apply(this,arguments)},_triggerPointerDownEventHandler(i,t){var{originalEvent:e}=i.event;if(e){var a=(0,_.A)(e.target),n=this.getCellIndex(a),r=this.getController("columns").getVisibleColumns()[n],s=this.getController("data").items()[i.rowIndex];if(this._keyboardController._isAllowEditing(s,r)||t){var o=(0,P.lh)(e,{currentTarget:e.target});this._keyboardController._pointerEventHandler(o)}}},renderFocusState(i){var{preventScroll:t,pageSizeChanged:e}=i??{},a=this.element();a&&!(0,gh.in)(a)&&a.attr("tabindex",null),e&&this._keyboardController.updateFocusedRowIndex();var n=this._keyboardController.getVisibleRowIndex();(!(0,v.O9)(n)||n<0)&&(n=0);var r=this.getCellElements(n);this._keyboardController.isKeyboardEnabled()&&r?.length&&this.updateFocusElementTabIndex(r,t)},updateFocusElementTabIndex(i){var t=i.eq(0).parent();if(na(t))this._keyboardController._applyTabIndexToElement(t);else{var e=this._keyboardController.getColumnIndex();(!(0,v.O9)(e)||e<0)&&(e=0),this._updateFocusedCellTabIndex(i,e)}},_updateFocusedCellTabIndex(i,t){var e=this._keyboardController,a=i?i.length:-1,n=function(o){var l=e._isMasterDetailCell(o),d=e._isCellValid(o);if(!l&&d&&e._isCellElement(o))return e._applyTabIndexToElement(o),e.setCellFocusType(),!0},r=((i,t)=>i.filter("[".concat("aria-colindex",'="').concat(t+1,'"]:not([').concat("dx-drag-cell","])")).first())(i,t);if(r.length)n(r);else{a<=t&&(t=a-1);for(var s=t;s<a&&!n((0,_.A)(i[s]));++s);}},renderDelayedTemplates(i){this.callBase.apply(this,arguments),this._renderFocusByChange(i)},_renderFocusByChange(i){var{operationTypes:t,repaintChangesOnly:e}=i??{},{fullReload:a,pageSize:n}=t??{};if(!i||!e||a||n){var r=function h0(i){var t=i.getController("keyboardNavigation");return!!t._isVirtualScrolling()&&i.option("focusedRowIndex")===t.getRowIndex()}(this);this.renderFocusState({preventScroll:r,pageSizeChanged:n})}},_renderCore(i){var t=this.callBase.apply(this,arguments);return this._renderFocusByChange(i),t},_editCellPrepared(i){var t,e=this._getEditorInstance(i),a=null===(t=this._keyboardController)||void 0===t?void 0:t._isFastEditingStarted();e&&a&&this._handleEditingNavigationMode(e),this.callBase.apply(this,arguments)},_handleEditingNavigationMode(i){["downArrow","upArrow"].forEach(e=>{var a=i._supportedKeys()[e];i.registerKeyHandler(e,n=>{if("true"===i._input().attr("aria-expanded"))return a&&a.call(i,n)})}),i.registerKeyHandler("leftArrow",V.lQ),i.registerKeyHandler("rightArrow",V.lQ),"dxDateBox"===i.NAME&&i.option("useMaskBehavior")&&i.registerKeyHandler("enter",V.lQ)},_getEditorInstance(i){var t=i.find(".dx-texteditor").eq(0);return F.getWidgetInstance(t)}}},controllers:{editing:{editCell(i,t){var e=this.getController("keyboardNavigation");if(e._processCanceledEditCellPosition(i,t))return!1;var a=this.callBase(i,t);return a&&e.setupFocusedView(),a},editRow(i){var t=this.getController("keyboardNavigation"),e=t.getVisibleColumnIndex(),a=this._columnsController.getVisibleColumns()[e];(a&&a.type||this.option("editing.mode")===oi)&&t._resetFocusedCell(),this.callBase(i)},addRow(i){var t=this.getController("keyboardNavigation");return t.setupFocusedView(),t.setCellFocusType(),this.callBase.apply(this,arguments)},getFocusedCellInRow(i){var t=this.getController("keyboardNavigation"),e=this.callBase(i),a=this._dataController.getRowIndexOffset(),n=t._focusedCellPosition.rowIndex-a;if(t.isKeyboardEnabled()&&n===i){var r=t._getFocusedCell();Ve(r)&&!r.hasClass("dx-command-edit")&&(e=r)}return e},_processCanceledEditingCell(){this.closeEditCell().done(()=>{this.getController("keyboardNavigation")._updateFocus()})},init(){this.callBase(),this._keyboardNavigationController=this.getController("keyboardNavigation")},closeEditCell(){var i=this._keyboardNavigationController;i._fastEditingStarted=!1;var t=this.callBase.apply(this,arguments);return i._updateFocus(),t},_delayedInputFocus(){this._keyboardNavigationController._isNeedScroll=!0,this.callBase.apply(this,arguments)},_isEditingStart(){var i=this.getController("keyboardNavigation"),t=this.callBase.apply(this,arguments);if(t&&!i._isNeedFocus){var e=i._getFocusedCell();i._focus(e,!0)}return t}},data:{_correctRowIndices(i){var t=this.getController("keyboardNavigation"),e=this.getController("editorFactory"),a=t._focusedCellPosition;if(this.callBase.apply(this,arguments),a&&a.rowIndex>=0){var n=i(a.rowIndex);n&&(a.rowIndex+=n,e.refocus())}},getMaxRowIndex(){var i=this.items().length-1,t=this.virtualItemsCount();return t&&(i+=this.getRowIndexOffset()+t.end),i}},adaptiveColumns:{_showHiddenCellsInView(i){var{viewName:t,$cells:e,isCommandColumn:a}=i;this.callBase.apply(this,arguments),t===qc&&!a&&e.each((n,r)=>{var s=(0,_.A)(r);eg(s)&&s.attr("tabindex",0)})},_hideVisibleCellInView(i){var{viewName:t,$cell:e,isCommandColumn:a}=i;this.callBase.apply(this,arguments),t===qc&&!a&&eg(e)&&e.removeAttr("tabindex")}},keyboardNavigation:i=>class extends i{init(){var t;super.init(),this.rowsViewFocusOutHandlerContext=null!==(t=this.rowsViewFocusOutHandlerContext)&&void 0!==t?t:this.rowsViewFocusOutHandler.bind(this)}subscribeToRowsViewFocusEvent(){var t;super.subscribeToRowsViewFocusEvent();var e=null===(t=this._rowsView)||void 0===t?void 0:t.element();O.A.on(e,"focusout",this.rowsViewFocusOutHandlerContext)}unsubscribeFromRowsViewFocusEvent(){var t;super.unsubscribeFromRowsViewFocusEvent();var e=null===(t=this._rowsView)||void 0===t?void 0:t.element();O.A.off(e,"focusout",this.rowsViewFocusOutHandlerContext)}rowsViewFocusHandler(t){var e=(0,_.A)(t.target);this.translateFocusIfNeed(t,e),super.rowsViewFocusHandler(t)}rowsViewFocusOutHandler(){this.makeScrollableFocusableIfNeed()}translateFocusIfNeed(t,e){var a=this.isScrollableNeedFocusable(),n=this._isFixedColumn(0);if(a&&n){var r=this._rowsView.getCell({rowIndex:0,columnIndex:0}),s=!!r.attr("tabindex"),o=e.is(this._$firstNotFixedCell);s&&o&&(t.preventDefault(),this._focus(r))}}renderCompleted(t){this._$firstNotFixedCell=this.getFirstNotFixedCell(),this.makeScrollableFocusableIfNeed(),super.renderCompleted(t)}_focus(t,e,a){super._focus(t,e,a),this.makeScrollableFocusableIfNeed()}_tabKeyHandler(t,e){var a,r=!((0,v.O9)(this._focusedCellPosition)&&!(0,v.RI)(this._focusedCellPosition))||!t.shift&&this._isLastValidCell(this._focusedCellPosition)||t.shift&&this._isFirstValidCell(this._focusedCellPosition),s=this.isScrollableNeedFocusable();r&&s&&(null===(a=this._$firstNotFixedCell)||void 0===a||a.removeAttr("tabIndex")),super._tabKeyHandler(t,e)}getFirstNotFixedCell(){var e=this._columnsController.getVisibleColumns().findIndex(a=>{var{fixed:n}=a;return!n});return-1===e?void 0:this._rowsView._getCellElement(0,e)}isScrollableNeedFocusable(){var t,e,a=!!this._rowsView.getScrollable(),n=!(null===(t=this._rowsView._fixedTableElement)||void 0===t||!t.length),r=!(null===(e=this._rowsView.getCellElements(0))||void 0===e||!e.length);return a&&n&&r}makeScrollableFocusableIfNeed(){!this.isScrollableNeedFocusable()||!this._$firstNotFixedCell||this._applyTabIndexToElement(this._$firstNotFixedCell)}}}}};function ig(i,t,e,a,n,r){r=r||[],(a=a||[])[e=e||0]=a[e]||0;var d,s=i[e],l=0;if(s){for(d=r[e]+1||0;d<s.length;d++){var h=s[d],u=d+a[e],c=h.colspan||1;if(ig(i,t,e+(h.rowspan||1),a,c,r),a[e]+=c-1,l+=c,h.rowspan)for(var g=e+1;g<e+h.rowspan;g++)a[g]=a[g]||0,a[g]+=h.colspan||1;if(!1===t(h,u,e,d)||void 0!==n&&l>=n)break}r[e]=d}}function Es(i,t,e){var a=[];ig(i,(r,s,o)=>{var d,l=r,h=l.colspan||1,u=s+h-1>=t&&s<e;if(a[o]=a[o]||[],u)s<t?(d=h-(t-s),s=t):d=h,s+d>e&&(d=e-s),d!==h&&(l=(0,y.X)({},l,{colspan:d})),a[o].push(l);else if(s>e)return!1});for(var n=0;n<a.length;n++)a[n]=a[n]||[];return a}G.registerModule("keyboardNavigation",(0,y.X)(!0,{},tg,{extenders:{controllers:{keyboardNavigation:{_leftRightKeysHandler(i,t){var e=this.getVisibleRowIndex(),a=this._dataController;if(!i.ctrl)return this.callBase.apply(this,arguments);var n=this._getDirectionCodeByKey(i.keyName),r=a.getKeyByRowIndex(e);"nextInRow"===n?a.expandRow(r):a.collapseRow(r)}}}}}));var p0={_resizeCore(){this.callBase.apply(this,arguments),this._columnsController.resize()},_handleScroll(i){var t=this.getScrollable(),{left:e}=i.scrollOffset;this.callBase.apply(this,arguments),this.option("rtlEnabled")&&t&&(e=(0,R.RG)(t.$content())-(0,R.RG)(t.$element())-e),this._columnsController.setScrollPosition(e)},_restoreScrollTop(){var i=this.getScrollable(),t=i?.scrollTop();this._scrollTop>0&&t!==this._scrollTop&&i.scrollTo({y:this._scrollTop})},_renderCore(i){if(i?.virtualColumnsScrolling){var t=()=>{this.resizeCompleted.remove(t),this._restoreScrollTop()};this.resizeCompleted.add(t)}return this.callBase.apply(this,arguments)}},_0={_renderCore(){var i=this.callBase.apply(this,arguments);return this._columnsController.isVirtualMode()&&this._updateScrollLeftPosition(),i}},v0=function(){var i=function(e){return e.map(a=>a.visibleWidth||parseFloat(a.width)||50)},t={init(){this.callBase.apply(this,arguments),this._beginPageIndex=null,this._endPageIndex=null,this._position=0,this._virtualVisibleColumns={}},resetColumnsCache(){this.callBase(),this._virtualVisibleColumns={}},getBeginPageIndex(e){for(var a=this.getVisibleColumns(void 0,!0),n=i(a),r=0,s=0;s<n.length;s++){if(r>=e)return Math.floor(s/this.getColumnPageSize());r+=n[s]}return 0},getTotalWidth(){var e=this.option("width");return"number"==typeof e?e:this.getController("resizing")._lastWidth||(0,R.Ot)(this.component.$element())},getEndPageIndex(e){var a=this.getVisibleColumns(void 0,!0),n=i(a),r=0;e+=this.getTotalWidth();for(var s=0;s<n.length;s++){if(r>=e)return Math.ceil(s/this.getColumnPageSize());r+=n[s]}return Math.ceil(n.length/this.getColumnPageSize())},getColumnPageSize(){return this.option("scrolling.columnPageSize")},_fireColumnsChanged(){var e=new Date;this.columnsChanged.fire({optionNames:{all:!0,length:1},changeTypes:{columns:!0,virtualColumnsScrolling:!0,length:2}}),this._renderTime=new Date-e},getScrollingTimeout(){var e=this.option("scrolling.columnRenderingThreshold"),a=this.option("scrolling.renderAsync"),n=0;return(!(0,v.O9)(a)&&this._renderTime>e||a)&&(n=this.option("scrolling.timeout")),n},setScrollPosition(e){var a=this.getScrollingTimeout();a>0?(clearTimeout(this._changedTimeout),this._changedTimeout=setTimeout(()=>{this._setScrollPositionCore(e)},a)):this._setScrollPositionCore(e)},isVirtualMode(){return(0,Q.Vd)()&&"virtual"===this.option("scrolling.columnRenderingMode")},resize(){this._setScrollPositionCore(this._position)},_setScrollPositionCore(e){if(this.isVirtualMode()){var a=this.getBeginPageIndex(e),n=this.getEndPageIndex(e),r=e<this._position?this._beginPageIndex>a:this._endPageIndex<n;this._position=e,r&&(this._beginPageIndex=a,this._endPageIndex=n,this._fireColumnsChanged())}},getFixedColumns(e,a){var n=this.callBase(e);if(this.isVirtualMode()&&!a&&n.length){var r=n.map(s=>s.command).indexOf("transparent");return n[r].colspan=this.getVisibleColumns().length-this.callBase().length+1,n}return n},_compileVisibleColumns(e,a){var n;if(a||!this.isVirtualMode()||!this._shouldReturnVisibleColumns())return this.callBase(e);null!==(n=this._columns)&&void 0!==n&&n.length&&!(0,v.O9)(this._beginPageIndex)&&!(0,v.O9)(this._endPageIndex)&&(this._beginPageIndex=this.getBeginPageIndex(this._position),this._endPageIndex=this.getEndPageIndex(this._position));var r=this._beginPageIndex,s=this._endPageIndex,o="".concat(e,"-").concat(r,"-").concat(s);if(this._virtualVisibleColumns[o])return this._virtualVisibleColumns[o];var l=this.callBase(),d=this.getRowCount(),h=this.getColumnPageSize(),u=r*h,c=s*h,g=this.getFixedColumns(void 0,!0),m=g.map(K=>K.command).indexOf("transparent"),f=g.length?m:0,x=l.slice(0,f),b=l.slice(f,u),S=i(b).reduce((K,W)=>K+W,0);S||(u=0);var T=g.length?g.length-m-1:0,B=l.slice(l.length-T),M=l.slice(c,l.length-T),L=i(M).reduce((K,W)=>K+W,0);if(L||(c=l.length),d>1&&"number"==typeof e){for(var z=[],H=0;H<=d;H++)z.push(this.callBase(H));x=Es(z,0,x.length)[e]||[],B=Es(z,l.length-B.length,l.length)[e]||[],l=Es(z,u,c)[e]||[]}else l=l.slice(u,c);return S&&(l.unshift({command:"virtual",width:S}),l=x.concat(l)),L&&(l.push({command:"virtual",width:L}),l=l.concat(B)),this._virtualVisibleColumns[o]=l,l},getColumnIndexOffset(){var e=0;if(this._beginPageIndex>0){var n=this.getFixedColumns().map(s=>s.command).indexOf("transparent"),r=n>=0?n:0;e=this._beginPageIndex*this.getColumnPageSize()-r-1}return e>0?e:0},dispose(){clearTimeout(this._changedTimeout),this.callBase.apply(this,arguments)}};return t}(),ag={defaultOptions:()=>({scrolling:{columnRenderingMode:"standard",columnPageSize:5,columnRenderingThreshold:300}}),extenders:{controllers:{columns:v0},views:{columnHeadersView:_0,rowsView:p0}}};G.registerModule("virtualColumns",ag);var sa="dx-row-focused",f0=".dx-row.".concat(sa),ng="dx-cell-focus-disabled",ws={defaultOptions:()=>({focusedRowEnabled:!1,autoNavigateToFocusedRow:!0,focusedRowKey:null,focusedRowIndex:-1,focusedColumnIndex:-1}),controllers:{focus:Z.ViewController.inherit(function(){return{init(){this._dataController=this.getController("data"),this._keyboardController=this.getController("keyboardNavigation"),this.component._optionsByReference.focusedRowKey=!0},optionChanged(t){var{name:e,value:a,previousValue:n}=t;switch(e){case"focusedRowIndex":this._focusRowByIndex(a),this._keyboardController._fireFocusedRowChanged(),t.handled=!0;break;case"focusedRowKey":if(Array.isArray(a)&&JSON.stringify(a)===JSON.stringify(n))return;this._focusRowByKey(a),this._keyboardController._fireFocusedRowChanged(),t.handled=!0;break;case"focusedColumnIndex":case"focusedRowEnabled":case"autoNavigateToFocusedRow":t.handled=!0;break;default:this.callBase(t)}},isAutoNavigateToFocusedRow(){return"infinite"!==this.option("scrolling.mode")&&this.option("autoNavigateToFocusedRow")},_focusRowByIndex(t,e){this.option("focusedRowEnabled")&&((t=void 0!==t?t:this.option("focusedRowIndex"))<0?this.isAutoNavigateToFocusedRow()&&this._resetFocusedRow():this._focusRowByIndexCore(t,e))},_focusRowByIndexCore(t,e){var a=this.getController("data"),n=a.pageSize(),r=()=>{if(this._isValidFocusedRowIndex(t)){var o=t-a.getRowIndexOffset(!0);if(!e||e.paging&&!e.filtering){var l=a._getLastItemIndex();o=Math.min(o,l)}var d=a.getKeyByRowIndex(o,!0);(0,v.O9)(d)&&!this.isRowFocused(d)&&this.option("focusedRowKey",d)}};if(n>=0)if(this._isLocalRowIndex(t))r();else{var s=Math.floor(t/a.pageSize());(0,w.z7)(a.pageIndex(s),a.waitReady()).done(()=>{r()})}},_isLocalRowIndex(t){var e=this.getController("data");if(this.getController("keyboardNavigation")._isVirtualScrolling()){var n=Math.floor(t/e.pageSize()),r=e.virtualItemsCount(),s=r?r.begin:-1,o=e.getVisibleRows().length+e.getRowIndexOffset(),l=Math.ceil(o/e.pageSize());return s<=t&&l>n}return!0},_setFocusedRowKeyByIndex(t){var e=this.getController("data");if(this._isValidFocusedRowIndex(t)){var a=Math.min(t-e.getRowIndexOffset(),e.items().length-1),n=e.getKeyByRowIndex(a);(0,v.O9)(n)&&!this.isRowFocused(n)&&this.option("focusedRowKey",n)}},_focusRowByKey(t){(0,v.O9)(t)?this._navigateToRow(t,!0):this._resetFocusedRow()},_resetFocusedRow(){var t=this.option("focusedRowKey"),e=(0,v.O9)(t);if(e||!(this.option("focusedRowIndex")<0)){var a=this.getController("keyboardNavigation");e&&this.option("focusedRowKey",null),a.setFocusedRowIndex(-1),this.option("focusedRowIndex",-1),this.getController("data").updateItems({changeType:"updateFocusedRow",focusedRowKey:null}),a._fireFocusedRowChanged(void 0,-1)}},_isValidFocusedRowIndex(t){var a=this.getController("data").getVisibleRows()[t];return!a||"data"===a.rowType||"group"===a.rowType},publicMethods:()=>["navigateToRow","isRowFocused"],navigateToRow(t){return this.isAutoNavigateToFocusedRow()||this.option("focusedRowIndex",-1),this._navigateToRow(t)},_navigateToRow(t,e){var a=this,n=a.getController("data"),r=a.isAutoNavigateToFocusedRow(),s=new w.cY;if(void 0===t||!n.dataSource())return s.reject().promise();var o=a.getFocusedRowIndexByKey(t);return!r&&e||o>=0?a._navigateTo(t,s,e):n.getPageIndexByKey(t).done(l=>{l<0?s.resolve(-1):l===n.pageIndex()?n.reload().done(()=>{a.isRowFocused(t)&&n.getRowIndexByKey(t)>=0?s.resolve(a.getFocusedRowIndexByKey(t)):a._navigateTo(t,s,e)}).fail(s.reject):n.pageIndex(l).done(()=>{a._navigateTo(t,s,e)}).fail(s.reject)}).fail(s.reject),s.promise()},_navigateTo(t,e,a){var n=this.getController("data").getRowIndexByKey(t),r=F.isVirtualRowRendering(this);this.isAutoNavigateToFocusedRow()&&r&&n<0?this._navigateToVirtualRow(t,e,a):this._navigateToVisibleRow(t,e,a)},_navigateToVisibleRow(t,e,a){if(a)this._triggerUpdateFocusedRow(t,e);else{var n=this.getFocusedRowIndexByKey(t);this.getView("rowsView").scrollToRowElement(t,e).done(()=>{e.resolve(n)})}},_navigateToVirtualRow(t,e,a){var n=this.getController("data"),r=n._rowsScrollController,s=F.getIndexByKey(t,n.items(!0)),o=this.getView("rowsView").getScrollable();if(r&&o&&s>=0){var l=s+n.getRowIndexOffset(!0),d=r.getItemOffset(l),h=()=>{n.totalCount()&&!n.items().length||(this.component.off("contentReady",h),a?this._triggerUpdateFocusedRow(t,e):e.resolve(l))};this.component.on("contentReady",h),this.getView("rowsView").scrollTopPosition(d)}else e.resolve(-1)},_triggerUpdateFocusedRow(t,e){var r,a=this.getController("data"),n=this.getFocusedRowIndexByKey(t);this._isValidFocusedRowIndex(n)?(this.option("focusedRowEnabled")?a.updateItems({changeType:"updateFocusedRow",focusedRowKey:t}):r=this.getView("rowsView").scrollToRowElement(t),(0,w.z7)(r).done(()=>{this.getController("keyboardNavigation").setFocusedRowIndex(n),e&&e.resolve(n)})):e&&e.resolve(-1)},getFocusedRowIndexByKey(t){var e=this.getController("data"),a=e.getRowIndexByKey(t,!0);return a>=0?a+e.getRowIndexOffset(!0):-1},_focusRowByKeyOrIndex(){var t=this.option("focusedRowKey"),e=this.option("focusedRowIndex"),a=this.getController("keyboardNavigation"),n=this.getController("data");if((0,v.O9)(t)){var r=n.getRowIndexByKey(t);r>=0?(a._isVirtualScrolling()&&(e=r+n.getRowIndexOffset()),a.setFocusedRowIndex(e),this._triggerUpdateFocusedRow(t)):this._navigateToRow(t,!0).done(s=>{e>=0&&s<0?this._focusRowByIndex():e<0&&s>=0&&a.setFocusedRowIndex(s)})}else e>=0&&this.getController("focus")._focusRowByIndex(e)},isRowFocused(t){var e=this.option("focusedRowKey");if((0,v.O9)(e))return(0,V.RL)(t,this.option("focusedRowKey"))},updateFocusedRow(t){var s,o,{focusedRowKey:e}=t,a=this,n=a._dataController.getRowIndexByKey(e),r=a.getView("rowsView");(0,I.__)(r.getTableElements(),(l,d)=>{var h=0===l;s=(0,_.A)(d),a._clearPreviousFocusedRow(s,n);var u=a._prepareFocusedRow({changedItem:a._dataController.getVisibleRows()[n],$tableElement:s,focusedRowIndex:n});h&&(o=u)}),o&&r.scrollToElementVertically(o)},_clearPreviousFocusedRow(t,e){var a=t.find(f0).filter((r,s)=>{var o=(0,_.A)(s).closest(".".concat(this.addWidgetPrefix("table")));return t.is(o)});a.removeClass(sa).removeClass(ng).removeAttr("tabindex"),a.children("td").removeAttr("tabindex"),0!==e&&(0,_.A)(this.getView("rowsView").getRowElement(0)).removeClass(ng).removeAttr("tabIndex")},_prepareFocusedRow(t){var e,{changedItem:a}=t;if(a&&("data"===a.rowType||"group"===a.rowType)){var{focusedRowIndex:n}=t,{$tableElement:r}=t,s=this.option("tabindex")||0,o=this.getView("rowsView");(e=(0,_.A)(o._getRowElements(r).eq(n))).addClass(sa).attr("tabindex",s)}return e}}}())},extenders:{controllers:{keyboardNavigation:{init(){var i=this.option("focusedRowIndex"),t=this.option("focusedColumnIndex");this.createAction("onFocusedRowChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedRowChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanged",{excludeValidators:["disabled","readOnly"]}),this.callBase(),this.setRowFocusType(),this._focusedCellPosition={},(0,v.O9)(i)&&i>=0&&(this._focusedCellPosition.rowIndex=i),(0,v.O9)(t)&&t>=0&&(this._focusedCellPosition.columnIndex=t)},setFocusedRowIndex(i){this.callBase(i),this.option("focusedRowIndex",i)},setFocusedColumnIndex(i){this.callBase(i),this.option("focusedColumnIndex",i)},_escapeKeyHandler(i,t){!t&&this.option("focusedRowEnabled")?this.isCellFocusType()&&(this.setRowFocusType(),this._focus(this._getCellElementFromTarget(i.originalEvent.target),!0)):this.callBase(i,t)},_updateFocusedCellPosition(i,t){var e=this.callBase(i,t);e&&e.columnIndex>=0&&this._fireFocusedCellChanged(i)}},editorFactory:{renderFocusOverlay(i,t){var r,e=this.getController("keyboardNavigation"),a=this.option("focusedRowEnabled"),n=this.getController("editing");a&&e?.isRowFocusType()&&!n.isEditing()?a&&"row"===e._getElementType(i)&&!i.hasClass(sa)&&(r=e.getFirstValidCellInRow(i),e.focus(r)):this.callBase(i,t)}},columns:{getSortDataSourceParameters(i,t){var e=this.callBase.apply(this,arguments),a=this.getController("data"),n=a._dataSource,r=a.store(),s=r&&r.key(),o=n&&n.remoteOperations()||{},l=Object.keys(o).every(h=>!o[h]);if(s&&(this.option("focusedRowEnabled")&&!1!==this.getController("focus").isAutoNavigateToFocusedRow()||t)){var d=(s=Array.isArray(s)?s:[s]).filter(h=>!this.columnOption(h,"sortOrder"));d.length&&(e=e||[],l?e.push({selector:n.getDataIndexGetter(),desc:!1}):d.forEach(h=>e.push({selector:h,desc:!1})))}return e}},data:{_applyChange(i){if(!i||"updateFocusedRow"!==i.changeType)return this.callBase.apply(this,arguments)},_fireChanged(i){if(this.callBase(i),this.option("focusedRowEnabled")&&this._dataSource){var e="update"===i.changeType&&i.repaintChangesOnly&&i.changeTypes&&i.changeTypes.indexOf("remove")>=0;"refresh"===i.changeType&&i.items.length||e?(this._updatePageIndexes(),this._updateFocusedRow(i)):"append"===i.changeType||"prepend"===i.changeType?this._updatePageIndexes():"update"===i.changeType&&i.repaintChangesOnly&&this._updateFocusedRow(i)}},_updatePageIndexes(){var i=this._lastRenderingPageIndex||0,t=this._rowsScrollController?this._rowsScrollController.pageIndex():0;this._lastRenderingPageIndex=t,this._isPagingByRendering=t!==i},isPagingByRendering(){return this._isPagingByRendering},_updateFocusedRow(i){var t=i.operationTypes||{},e=this.getController("focus"),{reload:a,fullReload:n,pageIndex:r,paging:s}=t,l=this.getController("keyboardNavigation")._isVirtualScrolling(),d=s&&!l,h=this.option("focusedRowKey"),u=e.isAutoNavigateToFocusedRow();if(a&&!1===r&&!n&&(0,v.O9)(h))e._navigateToRow(h,!0).done(S=>{S<0&&e._focusRowByIndex(void 0,t)});else if(d&&u){var g=this.getRowIndexByKey(h),m=this.option("focusedRowIndex");m>=0&&(m===g||!(g>=0))&&e._focusRowByIndex(m,t)}else d&&!u&&this.getRowIndexByKey(h)<0?this.option("focusedRowIndex",-1):t.fullReload&&e._focusRowByKeyOrIndex()},getPageIndexByKey(i){var t=this,e=new w.cY;return t.getGlobalRowIndexByKey(i).done(a=>{e.resolve(a>=0?Math.floor(a/t.pageSize()):-1)}).fail(e.reject),e.promise()},getGlobalRowIndexByKey(i){return this._dataSource.group()?this._calculateGlobalRowIndexByGroupedData(i):this._calculateGlobalRowIndexByFlatData(i)},_calculateGlobalRowIndexByFlatData(i,t,e){var a=this,n=new w.cY,r=a._dataSource;if(Array.isArray(i)||(i=>"string"==typeof i&&i.startsWith(wr)&&44===i.length)(i))return n.resolve(-1).promise();var s=a._generateFilterByKey(i);return r.load({filter:a._concatWithCombinedFilter(s),skip:0,take:1}).done(o=>{o.length>0?(s=a._generateOperationFilterByKey(i,o[0],e),r.load({filter:a._concatWithCombinedFilter(s,t),skip:0,take:1,requireTotalCount:!0}).done((l,d)=>{n.resolve(d.totalCount)})):n.resolve(-1)}),n.promise()},_concatWithCombinedFilter(i,t){var e=this.getCombinedFilter();return F.combineFilters([i,e,t])},_generateBooleanFilter(i,t,e){var{desc:a}=e;switch(!0){case!1===t&&a:return[i,"=",!0];case!1===t&&!a:return[i,"=",null];case!0===t&&!a:case!(0,v.Lm)(t)&&a:return[i,"<>",t];default:return}},_generateOperationFilterByKey(i,t,e){var a=this,n=a.option("dateSerializationFormat"),r=a._dataSource.remoteOperations().filtering,s=a._generateFilterByKey(i,"<"),o=a._columnsController.getSortDataSourceParameters(!r,!0);if(e){var l=a._columnsController.getGroupDataSourceParameters(!r);l&&(o=o?l.concat(o):l)}return o&&o.slice().reverse().forEach(d=>{var{selector:h,desc:u,compare:c}=d,{getter:g,rawValue:m,safeValue:f}=((i,t,e)=>{var{isRemoteFiltering:a,dateSerializationFormat:n,getSelector:r}=e,{selector:s}=i,o=(0,v.Tn)(s)?s:r(s),l=o?o(t):t[s];return{getter:o,rawValue:l,safeValue:a&&(0,v.$P)(l)?ya.A.serializeDate(l,n):l}})(d,t,{isRemoteFiltering:r,dateSerializationFormat:n,getSelector:T=>a._columnsController.columnOption(T,"selector")});if(s=[[h,"=",f],"and",s],null===m||(0,v.Lm)(m)){var x=a._generateBooleanFilter(h,f,u);x&&(s=[x,"or",s])}else{var S,b=u?">":"<";c?S=T=>"<"===b?c(m,g(T))>=1:c(m,g(T))<=-1:(S=[h,b,f],u||(S=[S,"or",[h,"=",null]])),s=[S,"or",s]}}),s},_generateFilterByKey(i,t){var e=this._dataSource.key(),a=[];if(t||(t="="),Array.isArray(e))for(var n=0;n<e.length;++n){var r=i[e[n]];r&&(a.length>0&&a.push("and"),a.push([e[n],t,r]))}else a=[e,t,i];return a},_getLastItemIndex(){return this.items(!0).length-1}},editing:{_deleteRowCore(i){var t=this.callBase.apply(this,arguments),e=this.getController("data"),a=e.getKeyByRowIndex(i);t.done(()=>{var n=e.getRowIndexByKey(a),r=e.getVisibleRows();-1===n&&!r.length&&this.getController("focus")._resetFocusedRow()})}}},views:{rowsView:{_createRow(i){var t=this.callBase.apply(this,arguments);return this.option("focusedRowEnabled")&&i&&this.getController("focus").isRowFocused(i.key)&&t.addClass(sa),t},_checkRowKeys(i){if(this.callBase.apply(this,arguments),this.option("focusedRowEnabled")&&this.option("dataSource")){var t=this._dataController.store();t&&!t.key()&&this._dataController.fireError("E1042","Row focusing")}},_update(i){"updateFocusedRow"===i.changeType?this.option("focusedRowEnabled")&&this.getController("focus").updateFocusedRow(i):this.callBase(i)},updateFocusElementTabIndex(i,t){this.option("focusedRowEnabled")?this._setFocusedRowElementTabIndex(t):this.callBase(i)},_setFocusedRowElementTabIndex(i){var t=this.option("focusedRowKey"),e=this.option("tabIndex")||0,a=this._dataController,n=this._columnsController,r=a.getRowIndexByKey(t),s=this.option("focusedColumnIndex"),o=this._findRowElementForTabIndex();if((0,v.O9)(this._scrollToFocusOnResize)||(this._scrollToFocusOnResize=()=>{this.scrollToElementVertically(this._findRowElementForTabIndex()),this.resizeCompleted.remove(this._scrollToFocusOnResize)}),o.attr("tabIndex",e),r>=0&&!i&&(s<0&&(s=0),r+=a.getRowIndexOffset(),s+=n.getColumnIndexOffset(),this.getController("keyboardNavigation").setFocusedCellPosition(r,s),this.getController("focus").isAutoNavigateToFocusedRow())){var l=a.dataSource(),d=l&&l.operationTypes();d&&!d.paging&&!a.isPagingByRendering()&&(this.resizeCompleted.remove(this._scrollToFocusOnResize),this.resizeCompleted.add(this._scrollToFocusOnResize))}},_findRowElementForTabIndex(){var i=this.option("focusedRowKey"),t=this._dataController.getRowIndexByKey(i);return(0,_.A)(this.getRowElement(t>=0?t:0))},scrollToRowElement(i){var t=this.getController("data").getRowIndexByKey(i),e=(0,_.A)(this.getRow(t));return this.scrollToElementVertically(e)},scrollToElementVertically(i){var t=this.getScrollable();if(t&&i.length){var e=t.getScrollElementPosition(i,"vertical");return this.scrollTopPosition(e)}return(new w.cY).resolve()},scrollTopPosition(i){var t=new w.cY,e=this.getScrollable();if(e){var a=e.scrollTop(),n=()=>{e.off("scroll",n),t.resolve()};if(i!==a)return e.on("scroll",n),this._dataController.resetFilterApplying(),e.scrollTo({top:i}),t.promise()}return t.resolve()}}}}};G.registerModule("focus",(0,y.X)(!0,{},ws,{extenders:{controllers:{data:{changeRowExpand(i){return this.option("focusedRowEnabled")&&this.isRowExpanded(i)&&this._isFocusedRowInside(i)&&this.option("focusedRowKey",i),this.callBase.apply(this,arguments)},_isFocusedRowInside(i){for(var t=this.option("focusedRowKey"),e=this.getRowIndexByKey(t),a=e>=0&&this.getVisibleRows()[e],n=a&&a.node.parent;n;){if(n.key===i)return!0;n=n.parent}return!1},getParentKey(i){var t=this._dataSource,e=this.getNodeByKey(i),a=new w.cY;return e?a.resolve(e.parent?e.parent.key:void 0):t.load({filter:[t.getKeyExpr(),"=",i]}).done(n=>{var r=n[0];r?a.resolve(t.parentKeyOf(r)):a.resolve()}).fail(a.reject),a.promise()},expandAscendants(i){var t=this,e=t._dataSource,a=new w.cY;return t.getParentKey(i).done(n=>{e&&void 0!==n&&n!==t.option("rootValue")?(e._isNodesInitializing=!0,t.expandRow(n),e._isNodesInitializing=!1,t.expandAscendants(n).done(a.resolve).fail(a.reject)):a.resolve()}).fail(a.reject),a.promise()},getPageIndexByKey(i){var t=this,e=t._dataSource,a=new w.cY;return t.expandAscendants(i).done(()=>{e.load({parentIds:[]}).done(n=>{var r=function E0(i,t){var e=-1;return i.forEach((a,n)=>{t(a)&&(e=n)}),e}(n,o=>t.keyOf(o.data)===i),s=-1;r>=0&&(s=Math.floor(r/t.pageSize())),a.resolve(s)}).fail(a.reject)}).fail(a.reject),a.promise()}}}}}));var O0={init(){this.callBase.apply(this,arguments),this._updateHandleColumn()},_allowReordering(){var i=this.option("rowDragging");return!(!i||!(i.allowReordering||i.allowDropInsideItem||i.group))},_updateHandleColumn(){var i=this.option("rowDragging"),t=this._allowReordering(),e=this._columnsController,a=t&&i.showDragIcons;e?.addCommandColumn({type:"drag",command:"drag",visibleIndex:-2,alignment:"center",elementAttr:[{name:"dx-drag-cell",value:""}],cssClass:"dx-command-drag",width:"auto",cellTemplate:this._getHandleTemplate(),visible:a}),e?.columnOption("type:drag","visible",a)},_renderContent(){var i=this.option("rowDragging"),t=this._allowReordering(),e=this.callBase.apply(this,arguments),a=this._isFixedTableRendering,n=a?"_sortableFixed":"_sortable",r=a?"_sortable":"_sortableFixed",s=d=>{var h;null===(h=this._sortableFixed)||void 0===h||h.$element().css("pointerEvents",d?"auto":"")},o=".dx-row:not(.dx-freespace-row):not(.dx-virtual-row):not(.dx-header-row):not(.dx-footer-row)",l=this.option("dataRowTemplate")?"> table > tbody".concat(o):"> table > tbody > ".concat(o);return(t||this[n])&&e.length&&(this[n]=this._createComponent(e,Wo,(0,y.X)({component:this.component,contentTemplate:null,filter:l,cursorOffset:d=>{var{event:h}=d,u=(0,_.A)(this.element()).offset();return{x:h.pageX-u.left}},onDraggableElementShown:d=>{if(!i.dragTemplate){var u=(0,_.A)(d.dragElement).children(".dx-widget").data(this.component.NAME);this._synchronizeScrollLeftPosition(u)}},dragTemplate:this._getDraggableRowTemplate(),handle:i.showDragIcons&&".".concat("dx-command-drag"),dropFeedbackMode:"indicate"},i,{onDragStart:d=>{var h,u;null===(h=this.getController("keyboardNavigation"))||void 0===h||h._resetFocusedCell();var c=d.component.getVisibleRows()[d.fromIndex];d.itemData=c&&c.data,d.cancel=!t||!(c&&"data"===c.rowType),null===(u=i.onDragStart)||void 0===u||u.call(i,d)},onDragEnter:()=>{s(!0)},onDragLeave:()=>{s(!1)},onDragEnd:d=>{var h;s(!1),null===(h=i.onDragEnd)||void 0===h||h.call(i,d)},onAdd:d=>{var h;s(!1),null===(h=i.onAdd)||void 0===h||h.call(i,d)},dropFeedbackMode:i.dropFeedbackMode,onOptionChanged:d=>{this._sortableFixed&&("fromIndex"===d.name||"toIndex"===d.name)&&this[r].option(d.name,d.value)}})),e.toggleClass("dx-scrollable-container",a),e.toggleClass("dx-sortable-without-handle",t&&!i.showDragIcons)),e},_renderCore(i){this.callBase.apply(this,arguments),i&&"update"===i.changeType&&i.repaintChangesOnly&&F.isVirtualRowRendering(this)&&(0,V.OX)(()=>{this._updateSortable()})},_updateSortable(){var i=this._dataController.getRowIndexOffset();[this._sortable,this._sortableFixed].forEach(t=>{t?.option("offset",i),t?.update()})},_resizeCore(){this.callBase.apply(this,arguments),this._updateSortable()},_getDraggableGridOptions(i){var t=this.option(),e=this.getColumns(),a=(0,_.A)(this.getRowElement(i.rowIndex));return{dataSource:[{id:1,parentId:0}],showBorders:!0,showColumnHeaders:!1,scrolling:{useNative:!1,showScrollbar:"never"},pager:{visible:!1},loadingTimeout:null,columnFixing:t.columnFixing,columnAutoWidth:t.columnAutoWidth,showColumnLines:t.showColumnLines,columns:e.map(n=>({width:n.width||n.visibleWidth,fixed:n.fixed,fixedPosition:n.fixedPosition})),onRowPrepared:n=>{var r=n.component.getView("rowsView");(0,_.A)(n.rowElement).replaceWith(a.eq(r._isFixedTableRendering?1:0).clone())}}},_synchronizeScrollLeftPosition(i){var t=i?.getScrollable();t?.scrollTo({x:this._scrollLeft})},_getDraggableRowTemplate(){return i=>{var t=this.component.$element(),e=(0,_.A)("<div>");(0,R.zj)(e,(0,R.RG)(t));var a=this._dataController.items(),r=this._getDraggableGridOptions(a&&a[i.fromIndex]);return this._createComponent(e,this.component.NAME,r),e.find(".dx-gridbase-container").children(":not(.".concat(this.addWidgetPrefix("rowsview"),")")).hide(),e.addClass(this.addWidgetPrefix("dragview")),e}},_getHandleTemplate(){return(i=>(t,e)=>{var a=(0,_.A)(t);if("data"===e.rowType)return a.addClass("dx-cell-focus-disabled"),(0,_.A)("<span>").addClass(i("drag-icon"));F.setEmptyText(a)})(i=>this.addWidgetPrefix(i))},optionChanged(i){"rowDragging"===i.name&&(this._updateHandleColumn(),this._invalidate(!0,!0),i.handled=!0),this.callBase.apply(this,arguments)}},rg={defaultOptions:()=>({rowDragging:{showDragIcons:!0,dropFeedbackMode:"indicate",allowReordering:!1,allowDropInsideItem:!1}}),extenders:{views:{rowsView:O0}}};G.registerModule("rowDragging",rg);let sg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.nrj,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C._zS,C.U9o,C.hyP,C._RO,C.YC7,C.GIV,C.X1G,C.W6p,C.Pxf,C.BR_,C.uE7,C.$lK,C.aJg,C.GCl,C.Sy5,C.k61,C.POb,C.hUd,C.HKo,C.Ixj,C.a6E,C.YLo,C.YaD,C.eNx,C.Tob,C.$Ql,C.isg,C.L0X,C.MtA,C.yA4,C.oCB,C.tWd,C.zkV,C.Sn2,C.MBy,C.qCh,C.x_w,C.s5o,C.ZaD,C.m1r,C.Wnt,C.rER,C.XUe,C.lkr,C.WC8,C.kYc,C.X6g,C.l4W,E.p_,E.xZ],C.nrj,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C._zS,C.U9o,C.hyP,C._RO,C.YC7,C.GIV,C.X1G,C.W6p,C.Pxf,C.BR_,C.uE7,C.$lK,C.aJg,C.GCl,C.Sy5,C.k61,C.POb,C.hUd,C.HKo,C.Ixj,C.a6E,C.YLo,C.YaD,C.eNx,C.Tob,C.$Ql,C.isg,C.L0X,C.MtA,C.yA4,C.oCB,C.tWd,C.zkV,C.Sn2,C.MBy,C.qCh,C.x_w,C.s5o,C.ZaD,C.m1r,C.Wnt,C.rER,C.XUe,C.lkr,C.WC8,C.kYc,C.X6g,C.l4W,E.xZ]}),i})();const T0={provide:He.kq,useExisting:(0,p.Rfq)(()=>R0),multi:!0};let R0=(()=>{class i extends E.ic{constructor(e,a,n,r,s,o,l,d){super(e,a,n,r,l,d),this._watcherHelper=r,this._idh=s,this.touched=h=>{},this._createEventEmitters([{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"valueChanged",emit:"onValueChanged"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"disabledChange"},{emit:"elementAttrChange"},{emit:"enableThreeStateBehaviorChange"},{emit:"focusStateEnabledChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"iconSizeChange"},{emit:"isDirtyChange"},{emit:"isValidChange"},{emit:"nameChange"},{emit:"readOnlyChange"},{emit:"rtlEnabledChange"},{emit:"tabIndexChange"},{emit:"textChange"},{emit:"validationErrorChange"},{emit:"validationErrorsChange"},{emit:"validationMessageModeChange"},{emit:"validationMessagePositionChange"},{emit:"validationStatusChange"},{emit:"valueChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"onBlur"}]),this._idh.setHost(this),o.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(e){this._setOption("accessKey",e)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(e){this._setOption("activeStateEnabled",e)}get disabled(){return this._getOption("disabled")}set disabled(e){this._setOption("disabled",e)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(e){this._setOption("elementAttr",e)}get enableThreeStateBehavior(){return this._getOption("enableThreeStateBehavior")}set enableThreeStateBehavior(e){this._setOption("enableThreeStateBehavior",e)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(e){this._setOption("focusStateEnabled",e)}get height(){return this._getOption("height")}set height(e){this._setOption("height",e)}get hint(){return this._getOption("hint")}set hint(e){this._setOption("hint",e)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(e){this._setOption("hoverStateEnabled",e)}get iconSize(){return this._getOption("iconSize")}set iconSize(e){this._setOption("iconSize",e)}get isDirty(){return this._getOption("isDirty")}set isDirty(e){this._setOption("isDirty",e)}get isValid(){return this._getOption("isValid")}set isValid(e){this._setOption("isValid",e)}get name(){return this._getOption("name")}set name(e){this._setOption("name",e)}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOption("readOnly",e)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(e){this._setOption("rtlEnabled",e)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(e){this._setOption("tabIndex",e)}get text(){return this._getOption("text")}set text(e){this._setOption("text",e)}get validationError(){return this._getOption("validationError")}set validationError(e){this._setOption("validationError",e)}get validationErrors(){return this._getOption("validationErrors")}set validationErrors(e){this._setOption("validationErrors",e)}get validationMessageMode(){return this._getOption("validationMessageMode")}set validationMessageMode(e){this._setOption("validationMessageMode",e)}get validationMessagePosition(){return this._getOption("validationMessagePosition")}set validationMessagePosition(e){this._setOption("validationMessagePosition",e)}get validationStatus(){return this._getOption("validationStatus")}set validationStatus(e){this._setOption("validationStatus",e)}get value(){return this._getOption("value")}set value(e){this._setOption("value",e)}get visible(){return this._getOption("visible")}set visible(e){this._setOption("visible",e)}get width(){return this._getOption("width")}set width(e){this._setOption("width",e)}change(e){}_createInstance(e,a){return new pa.A(e,a)}writeValue(e){this.eventHelper.lockedValueChangeEvent=!0,this.value=e,this.eventHelper.lockedValueChangeEvent=!1}setDisabledState(e){this.disabled=e}registerOnChange(e){this.change=e}registerOnTouched(e){this.touched=e}_createWidget(e){super._createWidget(e),this.instance.on("focusOut",a=>{this.eventHelper.fireNgEvent("onBlur",[a])})}ngOnDestroy(){this._destroyWidget()}ngOnChanges(e){super.ngOnChanges(e),this.setupChanges("validationErrors",e)}setupChanges(e,a){e in this._optionsToUpdate||this._idh.setup(e,a)}ngDoCheck(){this._idh.doCheck("validationErrors"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(e,a){let n=this._idh.setupSingle(e,a),r=null!==this._idh.getChanges(e,a);(n||r)&&super._setOption(e,a)}}return i.\u0275fac=function(e){return new(e||i)(p.rXU(p.aKT),p.rXU(p.SKi),p.rXU(E.zF),p.rXU(E.jS),p.rXU(E.$M),p.rXU(E.fH),p.rXU(he.pJ),p.rXU(p.Agw))},i.\u0275cmp=p.VBU({type:i,selectors:[["dx-check-box"]],hostBindings:function(e,a){1&e&&p.bIt("valueChange",function(r){return a.change(r)})("onBlur",function(r){return a.touched(r)})},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",disabled:"disabled",elementAttr:"elementAttr",enableThreeStateBehavior:"enableThreeStateBehavior",focusStateEnabled:"focusStateEnabled",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",iconSize:"iconSize",isDirty:"isDirty",isValid:"isValid",name:"name",readOnly:"readOnly",rtlEnabled:"rtlEnabled",tabIndex:"tabIndex",text:"text",validationError:"validationError",validationErrors:"validationErrors",validationMessageMode:"validationMessageMode",validationMessagePosition:"validationMessagePosition",validationStatus:"validationStatus",value:"value",visible:"visible",width:"width"},outputs:{onContentReady:"onContentReady",onDisposing:"onDisposing",onInitialized:"onInitialized",onOptionChanged:"onOptionChanged",onValueChanged:"onValueChanged",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",disabledChange:"disabledChange",elementAttrChange:"elementAttrChange",enableThreeStateBehaviorChange:"enableThreeStateBehaviorChange",focusStateEnabledChange:"focusStateEnabledChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",iconSizeChange:"iconSizeChange",isDirtyChange:"isDirtyChange",isValidChange:"isValidChange",nameChange:"nameChange",readOnlyChange:"readOnlyChange",rtlEnabledChange:"rtlEnabledChange",tabIndexChange:"tabIndexChange",textChange:"textChange",validationErrorChange:"validationErrorChange",validationErrorsChange:"validationErrorsChange",validationMessageModeChange:"validationMessageModeChange",validationMessagePositionChange:"validationMessagePositionChange",validationStatusChange:"validationStatusChange",valueChange:"valueChange",visibleChange:"visibleChange",widthChange:"widthChange",onBlur:"onBlur"},features:[p.Jv_([E.zF,E.jS,T0,E.fH,E.$M]),p.Vt3,p.OA$],decls:0,vars:0,template:function(e,a){},encapsulation:2}),i})(),og=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[E.p_,E.xZ],E.xZ]}),i})();const D0={provide:He.kq,useExisting:(0,p.Rfq)(()=>B0),multi:!0};let B0=(()=>{class i extends E.ic{constructor(e,a,n,r,s,o,l,d){super(e,a,n,r,l,d),this._watcherHelper=r,this._idh=s,this.touched=h=>{},this._createEventEmitters([{subscribe:"change",emit:"onChange"},{subscribe:"closed",emit:"onClosed"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"copy",emit:"onCopy"},{subscribe:"customItemCreating",emit:"onCustomItemCreating"},{subscribe:"cut",emit:"onCut"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"enterKey",emit:"onEnterKey"},{subscribe:"focusIn",emit:"onFocusIn"},{subscribe:"focusOut",emit:"onFocusOut"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"input",emit:"onInput"},{subscribe:"itemClick",emit:"onItemClick"},{subscribe:"keyDown",emit:"onKeyDown"},{subscribe:"keyUp",emit:"onKeyUp"},{subscribe:"opened",emit:"onOpened"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"paste",emit:"onPaste"},{subscribe:"selectionChanged",emit:"onSelectionChanged"},{subscribe:"valueChanged",emit:"onValueChanged"},{emit:"acceptCustomValueChange"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"buttonsChange"},{emit:"customItemCreateEventChange"},{emit:"dataSourceChange"},{emit:"deferRenderingChange"},{emit:"disabledChange"},{emit:"displayExprChange"},{emit:"displayValueChange"},{emit:"dropDownButtonTemplateChange"},{emit:"dropDownOptionsChange"},{emit:"elementAttrChange"},{emit:"fieldTemplateChange"},{emit:"focusStateEnabledChange"},{emit:"groupedChange"},{emit:"groupTemplateChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"inputAttrChange"},{emit:"isDirtyChange"},{emit:"isValidChange"},{emit:"itemsChange"},{emit:"itemTemplateChange"},{emit:"labelChange"},{emit:"labelModeChange"},{emit:"maxLengthChange"},{emit:"minSearchLengthChange"},{emit:"nameChange"},{emit:"noDataTextChange"},{emit:"openedChange"},{emit:"openOnFieldClickChange"},{emit:"placeholderChange"},{emit:"readOnlyChange"},{emit:"rtlEnabledChange"},{emit:"searchEnabledChange"},{emit:"searchExprChange"},{emit:"searchModeChange"},{emit:"searchTimeoutChange"},{emit:"selectedItemChange"},{emit:"showClearButtonChange"},{emit:"showDataBeforeSearchChange"},{emit:"showDropDownButtonChange"},{emit:"showSelectionControlsChange"},{emit:"spellcheckChange"},{emit:"stylingModeChange"},{emit:"tabIndexChange"},{emit:"textChange"},{emit:"useItemTextAsTitleChange"},{emit:"validationErrorChange"},{emit:"validationErrorsChange"},{emit:"validationMessageModeChange"},{emit:"validationMessagePositionChange"},{emit:"validationStatusChange"},{emit:"valueChange"},{emit:"valueChangeEventChange"},{emit:"valueExprChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"wrapItemTextChange"},{emit:"onBlur"}]),this._idh.setHost(this),o.setHost(this)}get acceptCustomValue(){return this._getOption("acceptCustomValue")}set acceptCustomValue(e){this._setOption("acceptCustomValue",e)}get accessKey(){return this._getOption("accessKey")}set accessKey(e){this._setOption("accessKey",e)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(e){this._setOption("activeStateEnabled",e)}get buttons(){return this._getOption("buttons")}set buttons(e){this._setOption("buttons",e)}get customItemCreateEvent(){return this._getOption("customItemCreateEvent")}set customItemCreateEvent(e){this._setOption("customItemCreateEvent",e)}get dataSource(){return this._getOption("dataSource")}set dataSource(e){this._setOption("dataSource",e)}get deferRendering(){return this._getOption("deferRendering")}set deferRendering(e){this._setOption("deferRendering",e)}get disabled(){return this._getOption("disabled")}set disabled(e){this._setOption("disabled",e)}get displayExpr(){return this._getOption("displayExpr")}set displayExpr(e){this._setOption("displayExpr",e)}get displayValue(){return this._getOption("displayValue")}set displayValue(e){this._setOption("displayValue",e)}get dropDownButtonTemplate(){return this._getOption("dropDownButtonTemplate")}set dropDownButtonTemplate(e){this._setOption("dropDownButtonTemplate",e)}get dropDownOptions(){return this._getOption("dropDownOptions")}set dropDownOptions(e){this._setOption("dropDownOptions",e)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(e){this._setOption("elementAttr",e)}get fieldTemplate(){return this._getOption("fieldTemplate")}set fieldTemplate(e){this._setOption("fieldTemplate",e)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(e){this._setOption("focusStateEnabled",e)}get grouped(){return this._getOption("grouped")}set grouped(e){this._setOption("grouped",e)}get groupTemplate(){return this._getOption("groupTemplate")}set groupTemplate(e){this._setOption("groupTemplate",e)}get height(){return this._getOption("height")}set height(e){this._setOption("height",e)}get hint(){return this._getOption("hint")}set hint(e){this._setOption("hint",e)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(e){this._setOption("hoverStateEnabled",e)}get inputAttr(){return this._getOption("inputAttr")}set inputAttr(e){this._setOption("inputAttr",e)}get isDirty(){return this._getOption("isDirty")}set isDirty(e){this._setOption("isDirty",e)}get isValid(){return this._getOption("isValid")}set isValid(e){this._setOption("isValid",e)}get items(){return this._getOption("items")}set items(e){this._setOption("items",e)}get itemTemplate(){return this._getOption("itemTemplate")}set itemTemplate(e){this._setOption("itemTemplate",e)}get label(){return this._getOption("label")}set label(e){this._setOption("label",e)}get labelMode(){return this._getOption("labelMode")}set labelMode(e){this._setOption("labelMode",e)}get maxLength(){return this._getOption("maxLength")}set maxLength(e){this._setOption("maxLength",e)}get minSearchLength(){return this._getOption("minSearchLength")}set minSearchLength(e){this._setOption("minSearchLength",e)}get name(){return this._getOption("name")}set name(e){this._setOption("name",e)}get noDataText(){return this._getOption("noDataText")}set noDataText(e){this._setOption("noDataText",e)}get opened(){return this._getOption("opened")}set opened(e){this._setOption("opened",e)}get openOnFieldClick(){return this._getOption("openOnFieldClick")}set openOnFieldClick(e){this._setOption("openOnFieldClick",e)}get placeholder(){return this._getOption("placeholder")}set placeholder(e){this._setOption("placeholder",e)}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOption("readOnly",e)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(e){this._setOption("rtlEnabled",e)}get searchEnabled(){return this._getOption("searchEnabled")}set searchEnabled(e){this._setOption("searchEnabled",e)}get searchExpr(){return this._getOption("searchExpr")}set searchExpr(e){this._setOption("searchExpr",e)}get searchMode(){return this._getOption("searchMode")}set searchMode(e){this._setOption("searchMode",e)}get searchTimeout(){return this._getOption("searchTimeout")}set searchTimeout(e){this._setOption("searchTimeout",e)}get selectedItem(){return this._getOption("selectedItem")}set selectedItem(e){this._setOption("selectedItem",e)}get showClearButton(){return this._getOption("showClearButton")}set showClearButton(e){this._setOption("showClearButton",e)}get showDataBeforeSearch(){return this._getOption("showDataBeforeSearch")}set showDataBeforeSearch(e){this._setOption("showDataBeforeSearch",e)}get showDropDownButton(){return this._getOption("showDropDownButton")}set showDropDownButton(e){this._setOption("showDropDownButton",e)}get showSelectionControls(){return this._getOption("showSelectionControls")}set showSelectionControls(e){this._setOption("showSelectionControls",e)}get spellcheck(){return this._getOption("spellcheck")}set spellcheck(e){this._setOption("spellcheck",e)}get stylingMode(){return this._getOption("stylingMode")}set stylingMode(e){this._setOption("stylingMode",e)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(e){this._setOption("tabIndex",e)}get text(){return this._getOption("text")}set text(e){this._setOption("text",e)}get useItemTextAsTitle(){return this._getOption("useItemTextAsTitle")}set useItemTextAsTitle(e){this._setOption("useItemTextAsTitle",e)}get validationError(){return this._getOption("validationError")}set validationError(e){this._setOption("validationError",e)}get validationErrors(){return this._getOption("validationErrors")}set validationErrors(e){this._setOption("validationErrors",e)}get validationMessageMode(){return this._getOption("validationMessageMode")}set validationMessageMode(e){this._setOption("validationMessageMode",e)}get validationMessagePosition(){return this._getOption("validationMessagePosition")}set validationMessagePosition(e){this._setOption("validationMessagePosition",e)}get validationStatus(){return this._getOption("validationStatus")}set validationStatus(e){this._setOption("validationStatus",e)}get value(){return this._getOption("value")}set value(e){this._setOption("value",e)}get valueChangeEvent(){return this._getOption("valueChangeEvent")}set valueChangeEvent(e){this._setOption("valueChangeEvent",e)}get valueExpr(){return this._getOption("valueExpr")}set valueExpr(e){this._setOption("valueExpr",e)}get visible(){return this._getOption("visible")}set visible(e){this._setOption("visible",e)}get width(){return this._getOption("width")}set width(e){this._setOption("width",e)}get wrapItemText(){return this._getOption("wrapItemText")}set wrapItemText(e){this._setOption("wrapItemText",e)}change(e){}get buttonsChildren(){return this._getOption("buttons")}set buttonsChildren(e){this.setChildren("buttons",e)}get itemsChildren(){return this._getOption("items")}set itemsChildren(e){this.setChildren("items",e)}_createInstance(e,a){return new In.A(e,a)}writeValue(e){this.eventHelper.lockedValueChangeEvent=!0,this.value=e,this.eventHelper.lockedValueChangeEvent=!1}setDisabledState(e){this.disabled=e}registerOnChange(e){this.change=e}registerOnTouched(e){this.touched=e}_createWidget(e){super._createWidget(e),this.instance.on("focusOut",a=>{this.eventHelper.fireNgEvent("onBlur",[a])})}ngOnDestroy(){this._destroyWidget()}ngOnChanges(e){super.ngOnChanges(e),this.setupChanges("buttons",e),this.setupChanges("dataSource",e),this.setupChanges("items",e),this.setupChanges("searchExpr",e),this.setupChanges("validationErrors",e)}setupChanges(e,a){e in this._optionsToUpdate||this._idh.setup(e,a)}ngDoCheck(){this._idh.doCheck("buttons"),this._idh.doCheck("dataSource"),this._idh.doCheck("items"),this._idh.doCheck("searchExpr"),this._idh.doCheck("validationErrors"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(e,a){let n=this._idh.setupSingle(e,a),r=null!==this._idh.getChanges(e,a);(n||r)&&super._setOption(e,a)}}return i.\u0275fac=function(e){return new(e||i)(p.rXU(p.aKT),p.rXU(p.SKi),p.rXU(E.zF),p.rXU(E.jS),p.rXU(E.$M),p.rXU(E.fH),p.rXU(he.pJ),p.rXU(p.Agw))},i.\u0275cmp=p.VBU({type:i,selectors:[["dx-select-box"]],contentQueries:function(e,a,n){if(1&e&&(p.wni(n,C.BrI,4),p.wni(n,C.CVf,4)),2&e){let r;p.mGM(r=p.lsd())&&(a.buttonsChildren=r),p.mGM(r=p.lsd())&&(a.itemsChildren=r)}},hostBindings:function(e,a){1&e&&p.bIt("valueChange",function(r){return a.change(r)})("onBlur",function(r){return a.touched(r)})},inputs:{acceptCustomValue:"acceptCustomValue",accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",buttons:"buttons",customItemCreateEvent:"customItemCreateEvent",dataSource:"dataSource",deferRendering:"deferRendering",disabled:"disabled",displayExpr:"displayExpr",displayValue:"displayValue",dropDownButtonTemplate:"dropDownButtonTemplate",dropDownOptions:"dropDownOptions",elementAttr:"elementAttr",fieldTemplate:"fieldTemplate",focusStateEnabled:"focusStateEnabled",grouped:"grouped",groupTemplate:"groupTemplate",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",inputAttr:"inputAttr",isDirty:"isDirty",isValid:"isValid",items:"items",itemTemplate:"itemTemplate",label:"label",labelMode:"labelMode",maxLength:"maxLength",minSearchLength:"minSearchLength",name:"name",noDataText:"noDataText",opened:"opened",openOnFieldClick:"openOnFieldClick",placeholder:"placeholder",readOnly:"readOnly",rtlEnabled:"rtlEnabled",searchEnabled:"searchEnabled",searchExpr:"searchExpr",searchMode:"searchMode",searchTimeout:"searchTimeout",selectedItem:"selectedItem",showClearButton:"showClearButton",showDataBeforeSearch:"showDataBeforeSearch",showDropDownButton:"showDropDownButton",showSelectionControls:"showSelectionControls",spellcheck:"spellcheck",stylingMode:"stylingMode",tabIndex:"tabIndex",text:"text",useItemTextAsTitle:"useItemTextAsTitle",validationError:"validationError",validationErrors:"validationErrors",validationMessageMode:"validationMessageMode",validationMessagePosition:"validationMessagePosition",validationStatus:"validationStatus",value:"value",valueChangeEvent:"valueChangeEvent",valueExpr:"valueExpr",visible:"visible",width:"width",wrapItemText:"wrapItemText"},outputs:{onChange:"onChange",onClosed:"onClosed",onContentReady:"onContentReady",onCopy:"onCopy",onCustomItemCreating:"onCustomItemCreating",onCut:"onCut",onDisposing:"onDisposing",onEnterKey:"onEnterKey",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onInitialized:"onInitialized",onInput:"onInput",onItemClick:"onItemClick",onKeyDown:"onKeyDown",onKeyUp:"onKeyUp",onOpened:"onOpened",onOptionChanged:"onOptionChanged",onPaste:"onPaste",onSelectionChanged:"onSelectionChanged",onValueChanged:"onValueChanged",acceptCustomValueChange:"acceptCustomValueChange",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",buttonsChange:"buttonsChange",customItemCreateEventChange:"customItemCreateEventChange",dataSourceChange:"dataSourceChange",deferRenderingChange:"deferRenderingChange",disabledChange:"disabledChange",displayExprChange:"displayExprChange",displayValueChange:"displayValueChange",dropDownButtonTemplateChange:"dropDownButtonTemplateChange",dropDownOptionsChange:"dropDownOptionsChange",elementAttrChange:"elementAttrChange",fieldTemplateChange:"fieldTemplateChange",focusStateEnabledChange:"focusStateEnabledChange",groupedChange:"groupedChange",groupTemplateChange:"groupTemplateChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",inputAttrChange:"inputAttrChange",isDirtyChange:"isDirtyChange",isValidChange:"isValidChange",itemsChange:"itemsChange",itemTemplateChange:"itemTemplateChange",labelChange:"labelChange",labelModeChange:"labelModeChange",maxLengthChange:"maxLengthChange",minSearchLengthChange:"minSearchLengthChange",nameChange:"nameChange",noDataTextChange:"noDataTextChange",openedChange:"openedChange",openOnFieldClickChange:"openOnFieldClickChange",placeholderChange:"placeholderChange",readOnlyChange:"readOnlyChange",rtlEnabledChange:"rtlEnabledChange",searchEnabledChange:"searchEnabledChange",searchExprChange:"searchExprChange",searchModeChange:"searchModeChange",searchTimeoutChange:"searchTimeoutChange",selectedItemChange:"selectedItemChange",showClearButtonChange:"showClearButtonChange",showDataBeforeSearchChange:"showDataBeforeSearchChange",showDropDownButtonChange:"showDropDownButtonChange",showSelectionControlsChange:"showSelectionControlsChange",spellcheckChange:"spellcheckChange",stylingModeChange:"stylingModeChange",tabIndexChange:"tabIndexChange",textChange:"textChange",useItemTextAsTitleChange:"useItemTextAsTitleChange",validationErrorChange:"validationErrorChange",validationErrorsChange:"validationErrorsChange",validationMessageModeChange:"validationMessageModeChange",validationMessagePositionChange:"validationMessagePositionChange",validationStatusChange:"validationStatusChange",valueChange:"valueChange",valueChangeEventChange:"valueChangeEventChange",valueExprChange:"valueExprChange",visibleChange:"visibleChange",widthChange:"widthChange",wrapItemTextChange:"wrapItemTextChange",onBlur:"onBlur"},features:[p.Jv_([E.zF,E.jS,D0,E.fH,E.$M]),p.Vt3,p.OA$],decls:0,vars:0,template:function(e,a){},encapsulation:2}),i})(),lg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.GIV,C.u4t,C.df_,C.YLo,C.YaD,C.eNx,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C.Tob,C.$Ql,C.isg,C.POb,E.p_,E.xZ],C.GIV,C.u4t,C.df_,C.YLo,C.YaD,C.eNx,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C.Tob,C.$Ql,C.isg,C.POb,E.xZ]}),i})(),F0=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275prov=p.jDH({token:i,factory:i.\u0275fac})}return i})();var dg=D(4461),hg=Qa.A.inherit({_getDefaultOptions:function(){return(0,y.X)(this.callBase(),{min:0,max:100,value:0})},_initMarkup:function(){this.$element().addClass("dx-trackbar"),this._renderWrapper(),this._renderContainer(),this._renderRange(),this._renderValue(),this._setRangeStyles(),this.callBase()},_render:function(){this.callBase(),this._setRangeStyles(this._rangeStylesConfig())},_renderWrapper:function(){this._$wrapper=(0,_.A)("<div>").addClass("dx-trackbar-wrapper").appendTo(this.$element())},_renderContainer:function(){this._$bar=(0,_.A)("<div>").addClass("dx-trackbar-container").appendTo(this._$wrapper)},_renderRange:function(){this._$range=(0,_.A)("<div>").addClass("dx-trackbar-range").appendTo(this._$bar)},_renderValue:function(){var i=this.option("value"),t=this.option("min"),e=this.option("max");if(!(t>e)){if(i<t)return this.option("value",t),void(this._currentRatio=0);if(i>e)return this.option("value",e),void(this._currentRatio=1);var a=t===e?0:(i-t)/(e-t);!this._needPreventAnimation&&this._setRangeStyles({width:100*a+"%"}),this.setAria({valuemin:this.option("min"),valuemax:e,valuenow:i}),this._currentRatio=a}},_rangeStylesConfig:function(){return{width:100*this._currentRatio+"%"}},_setRangeStyles:function(i){ce.A.stop(this._$range),i?this._needPreventAnimation||!(0,Q.Vd)()||ce.A.animate(this._$range,{type:"custom",duration:100,to:i}):this._$range.css({width:0})},_optionChanged:function(i){switch(i.name){case"value":this._renderValue(),this.callBase(i);break;case"max":case"min":this._renderValue();break;default:this.callBase(i)}},_dispose:function(){ce.A.stop(this._$range),this.callBase()}});(0,le.A)("dxTrackBar",hg);var ug="dx-progressbar-animating-segment",cg=hg.inherit({_getDefaultOptions:function(){return(0,y.X)(this.callBase(),{value:0,statusFormat:function(i){return"Progress: "+Math.round(100*i)+"%"},showStatus:!0,onComplete:null,activeStateEnabled:!1,statusPosition:"bottom left",_animatingSegmentCount:0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(i){return"android"===i.platform},options:{_animatingSegmentCount:2}}])},_initMarkup:function(){this._renderStatus(),this._createCompleteAction(),this.callBase(),this.$element().addClass("dx-progressbar"),this._$wrapper.addClass("dx-progressbar-wrapper"),this._$bar.addClass("dx-progressbar-container"),this.setAria("role","progressbar"),(0,_.A)("<div>").addClass("dx-progressbar-range-container").appendTo(this._$wrapper).append(this._$bar),this._$range.addClass("dx-progressbar-range"),this._toggleStatus(this.option("showStatus"))},_useTemplates:function(){return!1},_createCompleteAction:function(){this._completeAction=this._createActionByOption("onComplete")},_renderStatus:function(){this._$status=(0,_.A)("<div>").addClass("dx-progressbar-status")},_renderIndeterminateState:function(){this._$segmentContainer=(0,_.A)("<div>").addClass("dx-progressbar-animating-container");for(var i=this.option("_animatingSegmentCount"),t=0;t<i;t++)(0,_.A)("<div>").addClass(ug).addClass(ug+"-"+(t+1)).appendTo(this._$segmentContainer);this._$segmentContainer.appendTo(this._$wrapper)},_toggleStatus:function(i){var t=this.option("statusPosition").split(" ");i?"top"===t[0]||"left"===t[0]?this._$status.prependTo(this._$wrapper):this._$status.appendTo(this._$wrapper):this._$status.detach(),this._togglePositionClass()},_togglePositionClass:function(){var t=this.option("statusPosition").split(" ");this._$wrapper.removeClass("dx-position-top-left dx-position-top-right dx-position-bottom-left dx-position-bottom-right dx-position-left dx-position-right");var e="dx-position-"+t[0];t[1]&&(e+="-"+t[1]),this._$wrapper.addClass(e)},_toggleIndeterminateState:function(i){i?(this._renderIndeterminateState(),this._$bar.toggle(!1)):(this._$bar.toggle(!0),this._$segmentContainer.remove(),delete this._$segmentContainer)},_renderValue:function(){var i=this.option("value"),t=this.option("max");i||0===i?(this._$segmentContainer&&this._toggleIndeterminateState(!1),i===t&&this._completeAction(),this.callBase(),this._setStatus()):this._toggleIndeterminateState(!0)},_setStatus:function(){var i=this.option("statusFormat"),t=(i=(0,v.Tn)(i)?i.bind(this):function(e){return e})(this._currentRatio,this.option("value"));this._$status.text(t)},_dispose:function(){this._$status.remove(),this.callBase()},_optionChanged:function(i){switch(i.name){case"statusFormat":this._setStatus();break;case"showStatus":this._toggleStatus(i.value);break;case"statusPosition":this._toggleStatus(this.option("showStatus"));break;case"onComplete":this._createCompleteAction();break;case"_animatingSegmentCount":break;default:this.callBase(i)}}});(0,le.A)("dxProgressBar",cg);const $0=cg;var oa=(0,Q.zk)(),gg="dx-fileuploader-dragover",pg="dx-fileuploader-file-container",_g="dx-fileuploader-file-name",vg="dx-fileuploader-file-size",la="dx-fileuploader-button",ys="dx-fileuploader-button-container",mg="dx-fileuploader-upload-button",Ss=()=>!!oa.FormData;class xg extends Qa.A{_supportedKeys(){var t=e=>{e.preventDefault();var a=this._selectButton.$element();O.A.trigger(a,ae.U)};return(0,y.X)(super._supportedKeys(),{space:t,enter:t})}_setOptionsByReference(){super._setOptionsByReference(),(0,y.X)(this._optionsByReference,{value:!0})}_getDefaultOptions(){return(0,y.X)(super._getDefaultOptions(),{chunkSize:0,value:[],selectButtonText:A.A.format("dxFileUploader-selectFile"),uploadButtonText:A.A.format("dxFileUploader-upload"),labelText:A.A.format("dxFileUploader-dropFile"),name:"files[]",multiple:!1,accept:"",uploadUrl:"/",allowCanceling:!0,showFileList:!0,progress:0,dialogTrigger:void 0,dropZone:void 0,readyToUploadMessage:A.A.format("dxFileUploader-readyToUpload"),uploadedMessage:A.A.format("dxFileUploader-uploaded"),uploadFailedMessage:A.A.format("dxFileUploader-uploadFailedMessage"),uploadAbortedMessage:A.A.format("dxFileUploader-uploadAbortedMessage"),uploadMode:"instantly",uploadMethod:"POST",uploadHeaders:{},uploadCustomData:{},onBeforeSend:null,onUploadStarted:null,onUploaded:null,onFilesUploaded:null,onProgress:null,onUploadError:null,onUploadAborted:null,onDropZoneEnter:null,onDropZoneLeave:null,allowedFileExtensions:[],maxFileSize:0,minFileSize:0,inputAttr:{},invalidFileExtensionMessage:A.A.format("dxFileUploader-invalidFileExtension"),invalidMaxFileSizeMessage:A.A.format("dxFileUploader-invalidMaxFileSize"),invalidMinFileSizeMessage:A.A.format("dxFileUploader-invalidMinFileSize"),extendSelection:!0,validationMessageMode:"always",uploadFile:null,uploadChunk:null,abortUpload:null,validationMessageOffset:{h:0,v:0},hoverStateEnabled:!0,useNativeInputClick:!1,useDragOver:!0,nativeDropSupported:!0,_uploadButtonType:"normal",_buttonStylingMode:"contained"})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>"desktop"===ne.A.real().deviceType&&!ne.A.isSimulator(),options:{focusStateEnabled:!0}},{device:[{platform:"android"}],options:{validationMessageOffset:{v:0}}},{device:()=>"desktop"!==ne.A.real().deviceType,options:{useDragOver:!1}},{device:()=>!Ss(),options:{uploadMode:"useForm"}},{device:()=>"desktop"!==ne.A.real().deviceType,options:{nativeDropSupported:!1}},{device:()=>(0,de.gx)(),options:{_uploadButtonType:"default"}},{device:()=>(0,de.Ft)(),options:{_buttonStylingMode:"text"}}])}_initOptions(t){var e="labelText"in t;super._initOptions(t),!e&&!this._shouldDragOverBeRendered()&&this.option("labelText","")}_init(){super._init(),this._initFileInput(),this._initLabel(),this._setUploadStrategy(),this._createFiles(),this._createBeforeSendAction(),this._createUploadStartedAction(),this._createUploadedAction(),this._createFilesUploadedAction(),this._createProgressAction(),this._createUploadErrorAction(),this._createUploadAbortedAction(),this._createDropZoneEnterAction(),this._createDropZoneLeaveAction()}_setUploadStrategy(){var t=null;if(this.option("chunkSize")>0){var e=this.option("uploadChunk");t=e&&(0,v.Tn)(e)?new gI(this):new cI(this)}else{var a=this.option("uploadFile");t=a&&(0,v.Tn)(a)?new _I(this):new pI(this)}this._uploadStrategy=t}_initFileInput(){this._isCustomClickEvent=!1,this._$fileInput||(this._$fileInput=(0,_.A)("<input>").attr("type","file"),O.A.on(this._$fileInput,"change",this._inputChangeHandler.bind(this)),O.A.on(this._$fileInput,"click",t=>(t.stopPropagation(),this._resetInputValue(),this.option("useNativeInputClick")||this._isCustomClickEvent))),this._$fileInput.prop({multiple:this.option("multiple"),accept:this.option("accept"),title:this.option("hint")||null,tabIndex:-1})}_inputChangeHandler(){if(!this._doPreventInputChange){var t=this._$fileInput.val().replace(/^.*\\/,""),e=this._$fileInput.prop("files");if(!e||e.length||"useForm"===this.option("uploadMode")){var a=e?this._getFiles(e):[{name:t}];this._changeValue(a),"instantly"===this.option("uploadMode")&&this._uploadFiles()}}}_shouldFileListBeExtended(){return"useForm"!==this.option("uploadMode")&&this.option("extendSelection")&&this.option("multiple")}_changeValue(t){var e=this._shouldFileListBeExtended()?this.option("value").slice():[];this.option("value",e.concat(t))}_getFiles(t){var e=[];return(0,I.__)(t,(a,n)=>e.push(n)),e}_getFile(t){var e=(0,v.kf)(t)?this.option("value")[t]:t;return this._files.filter(a=>a.value===e)[0]}_initLabel(){this._$inputLabel||(this._$inputLabel=(0,_.A)("<div>")),this._updateInputLabelText()}_updateInputLabelText(){var t=this._isInteractionDisabled()?"":this.option("labelText");this._$inputLabel.text(t)}_focusTarget(){return this.$element().find("."+la)}_getSubmitElement(){return this._$fileInput}_initMarkup(){super._initMarkup(),this.$element().addClass("dx-fileuploader"),this._renderWrapper(),this._renderInputWrapper(),this._renderSelectButton(),this._renderInputContainer(),this._renderUploadButton(),this._preventRecreatingFiles=!0,this._activeDropZone=null}_render(){this._preventRecreatingFiles=!1,this._attachDragEventHandlers(this._$inputWrapper),this._attachDragEventHandlers(this.option("dropZone")),this._renderFiles(),super._render()}_createFileProgressBar(t){t.progressBar=this._createProgressBar(t.value.size),t.progressBar.$element().appendTo(t.$file),this._initStatusMessage(t),this._ensureCancelButtonInitialized(t)}_setStatusMessage(t,e){setTimeout(()=>{this.option("showFileList")&&t.$statusMessage&&(t.$statusMessage.text(e),t.$statusMessage.css("display",""),t.progressBar.$element().remove())},400)}_getUploadAbortedStatusMessage(){return"instantly"===this.option("uploadMode")?this.option("uploadAbortedMessage"):this.option("readyToUploadMessage")}_createFiles(){var t=this.option("value");this._files&&(0===t.length||!this._shouldFileListBeExtended())&&(this._preventFilesUploading(this._files),this._files=null),this._files||(this._files=[]),(0,I.__)(t.slice(this._files.length),(e,a)=>{var n=this._createFile(a);this._validateFile(n),this._files.push(n)})}_preventFilesUploading(t){t.forEach(e=>this._uploadStrategy.abortUpload(e))}_validateFile(t){t.isValidFileExtension=this._validateFileExtension(t),t.isValidMinSize=this._validateMinFileSize(t),t.isValidMaxSize=this._validateMaxFileSize(t)}_validateFileExtension(t){var e=this.option("allowedFileExtensions"),a=this.option("accept"),n=this._getAllowedFileTypes(a),r=t.value.name.substring(t.value.name.lastIndexOf(".")).toLowerCase();if(0!==a.length&&!this._isFileTypeAllowed(t.value,n))return!1;if(0===e.length)return!0;for(var s=0;s<e.length;s++)if(r===e[s].toLowerCase())return!0;return!1}_validateMaxFileSize(t){var e=t.value.size,a=this.option("maxFileSize");return!(a>0)||e<=a}_validateMinFileSize(t){var e=t.value.size,a=this.option("minFileSize");return!(a>0)||e>=a}_createBeforeSendAction(){this._beforeSendAction=this._createActionByOption("onBeforeSend",{excludeValidators:["readOnly"]})}_createUploadStartedAction(){this._uploadStartedAction=this._createActionByOption("onUploadStarted",{excludeValidators:["readOnly"]})}_createUploadedAction(){this._uploadedAction=this._createActionByOption("onUploaded",{excludeValidators:["readOnly"]})}_createFilesUploadedAction(){this._filesUploadedAction=this._createActionByOption("onFilesUploaded",{excludeValidators:["readOnly"]})}_createProgressAction(){this._progressAction=this._createActionByOption("onProgress",{excludeValidators:["readOnly"]})}_createUploadAbortedAction(){this._uploadAbortedAction=this._createActionByOption("onUploadAborted",{excludeValidators:["readOnly"]})}_createUploadErrorAction(){this._uploadErrorAction=this._createActionByOption("onUploadError",{excludeValidators:["readOnly"]})}_createDropZoneEnterAction(){this._dropZoneEnterAction=this._createActionByOption("onDropZoneEnter")}_createDropZoneLeaveAction(){this._dropZoneLeaveAction=this._createActionByOption("onDropZoneLeave")}_createFile(t){return{value:t,loadedSize:0,onProgress:(0,me.A)(),onAbort:(0,me.A)(),onLoad:(0,me.A)(),onError:(0,me.A)(),onLoadStart:(0,me.A)(),isValidFileExtension:!0,isValidMaxSize:!0,isValidMinSize:!0,isValid(){return this.isValidFileExtension&&this.isValidMaxSize&&this.isValidMinSize},isInitialized:!1}}_resetFileState(t){t.isAborted=!1,t.uploadStarted=!1,t.isStartLoad=!1,t.loadedSize=0,t.chunksData=void 0,t.request=void 0}_renderFiles(){var t,e=this.option("value");this._$filesContainer?(!this._shouldFileListBeExtended()||0===e.length)&&this._$filesContainer.empty():this._$filesContainer=(0,_.A)("<div>").addClass("dx-fileuploader-files-container").appendTo(this._$content);var a=this.option("showFileList");a&&(0,I.__)(this._files,(n,r)=>{r.$file||this._renderFile(r)}),this.$element().toggleClass("dx-fileuploader-show-file-list",a),this._toggleFileUploaderEmptyClassName(),this._updateFileNameMaxWidth(),null===(t=this._validationMessage)||void 0===t||t.repaint()}_renderFile(t){var e=t.value,a=(0,_.A)("<div>").addClass(pg).appendTo(this._$filesContainer);this._renderFileButtons(t,a),t.$file=(0,_.A)("<div>").addClass("dx-fileuploader-file").appendTo(a);var n=(0,_.A)("<div>").addClass("dx-fileuploader-file-info").appendTo(t.$file);t.$statusMessage=(0,_.A)("<div>").addClass("dx-fileuploader-file-status-message").appendTo(t.$file),(0,_.A)("<div>").addClass(_g).text(e.name).appendTo(n),(0,v.O9)(e.size)&&(0,_.A)("<div>").addClass(vg).text(this._getFileSize(e.size)).appendTo(n),t.isValid()?t.$statusMessage.text(this.option("readyToUploadMessage")):(t.isValidFileExtension||t.$statusMessage.append(this._createValidationElement("invalidFileExtensionMessage")),t.isValidMaxSize||t.$statusMessage.append(this._createValidationElement("invalidMaxFileSizeMessage")),t.isValidMinSize||t.$statusMessage.append(this._createValidationElement("invalidMinFileSizeMessage")),a.addClass("dx-fileuploader-invalid"))}_createValidationElement(t){return(0,_.A)("<span>").text(this.option(t))}_updateFileNameMaxWidth(){var t=this.option("allowCanceling")&&"useForm"!==this.option("uploadMode")?1:0,e="useButtons"===this.option("uploadMode")?1:0,a=(0,R.RG)(this._$filesContainer.find("."+pg).first())||(0,R.RG)(this._$filesContainer),n=this._$filesContainer.find("."+ys).eq(0),r=(0,R.RG)(n)*(t+e),s=this._$filesContainer.find("."+vg).eq(0),o=s.text();s.text("1000 Mb");var l=(0,R.RG)(s);s.text(o),this._$filesContainer.find("."+_g).css("maxWidth",a-r-l)}_renderFileButtons(t,e){var a=this._getCancelButton(t);a&&e.append(a);var n=this._getUploadButton(t);n&&e.append(n)}_getCancelButton(t){if("useForm"===this.option("uploadMode"))return null;var{allowCanceling:e,readOnly:a,hoverStateEnabled:n,_buttonStylingMode:r}=this.option();return t.cancelButton=this._createComponent((0,_.A)("<div>").addClass(la+" dx-fileuploader-cancel-button"),_e.A,{onClick:()=>this._removeFile(t),icon:"close",visible:e,disabled:a,integrationOptions:{},hoverStateEnabled:n,stylingMode:r}),(0,_.A)("<div>").addClass(ys).append(t.cancelButton.$element())}_getUploadButton(t){if(!t.isValid()||"useButtons"!==this.option("uploadMode"))return null;var{hoverStateEnabled:e,_buttonStylingMode:a}=this.option();return t.uploadButton=this._createComponent((0,_.A)("<div>").addClass(la+" "+mg),_e.A,{onClick:()=>this._uploadFile(t),icon:"upload",hoverStateEnabled:e,stylingMode:a}),t.onLoadStart.add(()=>t.uploadButton.option({visible:!1,disabled:!0})),t.onAbort.add(()=>t.uploadButton.option({visible:!0,disabled:!1})),(0,_.A)("<div>").addClass(ys).append(t.uploadButton.$element())}_removeFile(t){var e;null===(e=t.$file)||void 0===e||e.parent().remove(),this._files.splice(this._files.indexOf(t),1);var a=this.option("value").slice();a.splice(a.indexOf(t.value),1),this._preventRecreatingFiles=!0,this.option("value",a),this._preventRecreatingFiles=!1,this._toggleFileUploaderEmptyClassName(),this._resetInputValue(!0)}removeFile(t){if("useForm"!==this.option("uploadMode")&&(0,v.O9)(t)){var e=this._getFile(t);e&&(e.uploadStarted&&this._preventFilesUploading([e]),this._removeFile(e))}}_toggleFileUploaderEmptyClassName(){this.$element().toggleClass("dx-fileuploader-empty",!this._files.length||this._hasInvalidFile(this._files))}_hasInvalidFile(t){for(var e=0;e<t.length;e++)if(!t[e].isValid())return!0;return!1}_getFileSize(t){for(var e=0,a=[A.A.format("dxFileUploader-bytes"),A.A.format("dxFileUploader-kb"),A.A.format("dxFileUploader-Mb"),A.A.format("dxFileUploader-Gb")],n=a.length-1;e<n&&t>=1024;)t/=1024,e++;return Math.round(t)+" "+a[e]}_renderSelectButton(){var t=(0,_.A)("<div>").addClass(la).appendTo(this._$inputWrapper);this._selectButton=this._createComponent(t,_e.A,{text:this.option("selectButtonText"),focusStateEnabled:!1,integrationOptions:{},disabled:this.option("readOnly"),hoverStateEnabled:this.option("hoverStateEnabled")}),this._selectFileDialogHandler=this._selectButtonClickHandler.bind(this),"desktop"===ne.A.real().deviceType?this._selectButton.option("onClick",this._selectFileDialogHandler):this._attachSelectFileDialogHandler(this._selectButton.$element()),this._attachSelectFileDialogHandler(this.option("dialogTrigger"))}_selectButtonClickHandler(){if(!this.option("useNativeInputClick")){if(this._isInteractionDisabled())return!1;this._isCustomClickEvent=!0,O.A.trigger(this._$fileInput,"click"),this._isCustomClickEvent=!1}}_attachSelectFileDialogHandler(t){(0,v.O9)(t)&&(this._detachSelectFileDialogHandler(t),O.A.on((0,_.A)(t),"click",this._selectFileDialogHandler))}_detachSelectFileDialogHandler(t){(0,v.O9)(t)&&O.A.off((0,_.A)(t),"click",this._selectFileDialogHandler)}_renderUploadButton(){if("useButtons"===this.option("uploadMode")){var t=(0,_.A)("<div>").addClass(la).addClass(mg).appendTo(this._$content);this._uploadButton=this._createComponent(t,_e.A,{text:this.option("uploadButtonText"),onClick:this._uploadButtonClickHandler.bind(this),type:this.option("_uploadButtonType"),integrationOptions:{},hoverStateEnabled:this.option("hoverStateEnabled")})}}_uploadButtonClickHandler(){this._uploadFiles()}_shouldDragOverBeRendered(){return!this.option("readOnly")&&("useForm"!==this.option("uploadMode")||this.option("nativeDropSupported"))}_isInteractionDisabled(){return this.option("readOnly")||this.option("disabled")}_renderInputContainer(){this._$inputContainer=(0,_.A)("<div>").addClass("dx-fileuploader-input-container").appendTo(this._$inputWrapper),this._$fileInput.addClass("dx-fileuploader-input"),this._renderInput();var t="dx-fileuploader-input-label-".concat(new Pe.A);this._$inputLabel.attr("id",t).addClass("dx-fileuploader-input-label").appendTo(this._$inputContainer),this.setAria("labelledby",t,this._$fileInput)}_renderInput(){this.option("useNativeInputClick")?this._selectButton.option("template",this._selectButtonInputTemplate.bind(this)):(this._$fileInput.appendTo(this._$inputContainer),this._selectButton.option("template","content")),this._applyInputAttributes(this.option("inputAttr"))}_selectButtonInputTemplate(t,e){var a=(0,_.A)(e),n=(0,_.A)("<span>").addClass("dx-button-text").text(t.text);return a.append(n).append(this._$fileInput),a}_renderInputWrapper(){this._$inputWrapper=(0,_.A)("<div>").addClass("dx-fileuploader-input-wrapper").appendTo(this._$content)}_detachDragEventHandlers(t){(0,v.O9)(t)&&O.A.off((0,_.A)(t),(0,P.b4)("",this.NAME))}_attachDragEventHandlers(t){var e=t!==this._$inputWrapper;!(0,v.O9)(t)||!this._shouldDragOverBeRendered()||(this._detachDragEventHandlers(t),t=(0,_.A)(t),O.A.on(t,(0,P.b4)("dragenter",this.NAME),this._dragEnterHandler.bind(this,e)),O.A.on(t,(0,P.b4)("dragover",this.NAME),this._dragOverHandler.bind(this,e)),O.A.on(t,(0,P.b4)("dragleave",this.NAME),this._dragLeaveHandler.bind(this,e)),O.A.on(t,(0,P.b4)("drop",this.NAME),this._dropHandler.bind(this,e)))}_applyInputAttributes(t){this._$fileInput.attr(t)}_useInputForDrop(){return this.option("nativeDropSupported")&&"useForm"===this.option("uploadMode")}_getDropZoneElement(t,e){var a=t?Array.from((0,_.A)(this.option("dropZone"))):[this._$inputWrapper];return(a=a.map(n=>(0,_.A)(n).get(0)))[a.indexOf(e.currentTarget)]}_dragEnterHandler(t,e){if(this.option("disabled"))return!1;this._useInputForDrop()||e.preventDefault();var a=this._getDropZoneElement(t,e);(0,v.O9)(a)&&this._shouldRaiseDragOver(e,a)&&(this._activeDropZone=a,this._tryToggleDropZoneActive(!0,t,e))}_shouldRaiseDragOver(t,e){return null===this._activeDropZone&&this.isMouseOverElement(t,e,!1)&&t.originalEvent.dataTransfer.types.find(a=>"Files"===a)}_dragOverHandler(t,e){if(this._useInputForDrop()||e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy",!t){var a=this._getDropZoneElement(!1,e);this._shouldRaiseDragOver(e,a)&&this._dragEnterHandler(!1,e),this._shouldRaiseDragLeave(e,!1)&&this._dragLeaveHandler(!1,e)}}_dragLeaveHandler(t,e){this._useInputForDrop()||e.preventDefault(),this._shouldRaiseDragLeave(e,t)&&(this._tryToggleDropZoneActive(!1,t,e),this._activeDropZone=null)}_shouldRaiseDragLeave(t,e){return null!==this._activeDropZone&&!this.isMouseOverElement(t,this._activeDropZone,!e,-1)}_tryToggleDropZoneActive(t,e,a){var n=t?"addClass":"removeClass";this[t?"_dropZoneEnterAction":"_dropZoneLeaveAction"]({event:a,dropZoneElement:this._activeDropZone}),e||this.$element()[n](gg)}_dropHandler(t,e){if(this._activeDropZone=null,t||this.$element().removeClass(gg),!(this._useInputForDrop()||t&&this._isInteractionDisabled())){e.preventDefault();var n=this._getFiles(e.originalEvent.dataTransfer.files);!this.option("multiple")&&n.length>1||0===n.length||(this._changeValue(n),"instantly"===this.option("uploadMode")&&this._uploadFiles())}}_areAllFilesLoaded(){return this._files.every(t=>!t.isValid()||t._isError||t._isLoaded||t.isAborted)}_handleAllFilesUploaded(){this._recalculateProgress(),this._areAllFilesLoaded()&&this._filesUploadedAction()}_getAllowedFileTypes(t){return t.length?t.split(",").map(e=>e.trim()):[]}_isFileTypeAllowed(t,e){for(var a=0,n=e.length;a<n;a++){var r=e[a];if("."===r[0]){if(r=r.replace(".","\\."),t.name.match(new RegExp(r+"$","i")))return!0}else if(r=r.replace(new RegExp("\\*","g"),""),t.type.match(new RegExp(r,"i")))return!0}return!1}_renderWrapper(){var t=(0,_.A)("<div>").addClass("dx-fileuploader-wrapper").appendTo(this.$element()),e=(0,_.A)("<div>").addClass("dx-fileuploader-container").appendTo(t);this._$content=(0,_.A)("<div>").addClass("dx-fileuploader-content").appendTo(e)}_clean(){this._$fileInput.detach(),delete this._$filesContainer,this._detachSelectFileDialogHandler(this.option("dialogTrigger")),this._detachDragEventHandlers(this.option("dropZone")),this._files&&this._files.forEach(t=>{t.$file=null,t.$statusMessage=null}),super._clean()}abortUpload(t){if("useForm"!==this.option("uploadMode"))if((0,v.O9)(t)){var e=this._getFile(t);e&&this._preventFilesUploading([e])}else this._preventFilesUploading(this._files)}upload(t){if("useForm"!==this.option("uploadMode"))if((0,v.O9)(t)){var e=this._getFile(t);e&&Ss()&&this._uploadFile(e)}else this._uploadFiles()}_uploadFiles(){Ss()&&(0,I.__)(this._files,(t,e)=>this._uploadFile(e))}_uploadFile(t){this._uploadStrategy.upload(t)}_updateProgressBar(t,e){t.progressBar&&t.progressBar.option({value:e.loaded,showStatus:!0}),this._progressAction({file:t.value,segmentSize:e.currentSegmentSize,bytesLoaded:e.loaded,bytesTotal:e.total,event:e.event,request:t.request})}_updateTotalProgress(t,e){var a=0;(0,v.O9)(t)&&(this._files.length>0&&this._areAllFilesLoaded()&&0===t&&0===e?a=this._getProgressValue(1):t&&(a=this._getProgressValue(e/t))),this.option("progress",a),this._setLoadedSize(e)}_getProgressValue(t){return Math.floor(100*t)}_initStatusMessage(t){t.$statusMessage.css("display","none")}_ensureCancelButtonInitialized(t){if(!t.isInitialized){t.cancelButton.option("onClick",()=>{this._preventFilesUploading([t]),this._removeFile(t)});var e=()=>{setTimeout(()=>{t.cancelButton.option({visible:!1})},400)};t.onLoad.add(e),t.onError.add(e)}}_createProgressBar(t){return this._createComponent((0,_.A)("<div>"),$0,{value:void 0,min:0,max:t,statusFormat:e=>this._getProgressValue(e)+"%",showStatus:!1,statusPosition:"right"})}_getTotalFilesSize(){return this._totalFilesSize||(this._totalFilesSize=0,(0,I.__)(this._files,(t,e)=>{this._totalFilesSize+=e.value.size})),this._totalFilesSize}_getTotalLoadedFilesSize(){return this._totalLoadedFilesSize||(this._totalLoadedFilesSize=0,(0,I.__)(this._files,(t,e)=>{this._totalLoadedFilesSize+=e.loadedSize})),this._totalLoadedFilesSize}_setLoadedSize(t){this._totalLoadedFilesSize=t}_recalculateProgress(){this._totalFilesSize=0,this._totalLoadedFilesSize=0,this._updateTotalProgress(this._getTotalFilesSize(),this._getTotalLoadedFilesSize())}isMouseOverElement(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return!1;var r=a?parseFloat(oa.getComputedStyle(e,":before").height):0,s=a?parseFloat(oa.getComputedStyle(e,":after").height):0,o=(0,R.A3)(e).left,l=(0,R.A3)(e).top+r,d=e.offsetWidth,h=e.offsetHeight-r-s,u=this._getEventX(t),c=this._getEventY(t);return u+n>=o&&u-n<o+d&&c+n>=l&&c-n<l+h}_getEventX(t){return(0,P.kH)(t)?this._getTouchEventX(t):t.clientX+this._getDocumentScrollLeft()}_getEventY(t){return(0,P.kH)(t)?this._getTouchEventY(t):t.clientY+this._getDocumentScrollTop()}_getTouchEventX(t){var e=null;return t.changedTouches.length>0?e=t.changedTouches:t.targetTouches.length>0&&(e=t.targetTouches),e?e[0].pageX:0}_getTouchEventY(t){var e=null;return t.changedTouches.length>0?e=t.changedTouches:t.targetTouches.length>0&&(e=t.targetTouches),e?e[0].pageY:0}_getDocumentScrollTop(){var t=U.A.getDocument();return t.documentElement.scrollTop||t.body.scrollTop}_getDocumentScrollLeft(){var t=U.A.getDocument();return t.documentElement.scrollLeft||t.body.scrollLeft}_updateReadOnlyState(){var t=this.option("readOnly");this._selectButton.option("disabled",t),this._files.forEach(e=>{var a;return null===(a=e.cancelButton)||void 0===a?void 0:a.option("disabled",t)}),this._updateInputLabelText(),this._attachDragEventHandlers(this._$inputWrapper)}_updateHoverState(){var t,e,a=this.option("hoverStateEnabled");null===(t=this._selectButton)||void 0===t||t.option("hoverStateEnabled",a),null===(e=this._uploadButton)||void 0===e||e.option("hoverStateEnabled",a),this._files.forEach(n=>{var r,s;null===(r=n.uploadButton)||void 0===r||r.option("hoverStateEnabled",a),null===(s=n.cancelButton)||void 0===s||s.option("hoverStateEnabled",a)})}_optionChanged(t){var{name:e,value:a,previousValue:n}=t;switch(e){case"height":case"width":this._updateFileNameMaxWidth(),super._optionChanged(t);break;case"value":!a.length&&this._$fileInput.val(""),this._preventRecreatingFiles||(this._createFiles(),this._renderFiles()),this._recalculateProgress(),super._optionChanged(t);break;case"name":case"hint":this._initFileInput(),super._optionChanged(t);break;case"accept":this._initFileInput();break;case"multiple":this._initFileInput(),t.value||this.clear();break;case"readOnly":this._updateReadOnlyState(),super._optionChanged(t);break;case"disabled":this._updateInputLabelText(),super._optionChanged(t);break;case"selectButtonText":this._selectButton.option("text",a);break;case"uploadButtonText":this._uploadButton&&this._uploadButton.option("text",a);break;case"_uploadButtonType":this._uploadButton&&this._uploadButton.option("type",a);break;case"_buttonStylingMode":this._files.forEach(r=>{var s,o;null===(s=r.uploadButton)||void 0===s||s.option("stylingMode",a),null===(o=r.cancelButton)||void 0===o||o.option("stylingMode",a)});break;case"dialogTrigger":this._detachSelectFileDialogHandler(n),this._attachSelectFileDialogHandler(a);break;case"dropZone":this._detachDragEventHandlers(n),this._attachDragEventHandlers(a);break;case"maxFileSize":case"minFileSize":case"allowedFileExtensions":case"invalidFileExtensionMessage":case"invalidMaxFileSizeMessage":case"invalidMinFileSizeMessage":case"readyToUploadMessage":case"uploadedMessage":case"uploadFailedMessage":case"uploadAbortedMessage":case"nativeDropSupported":this._invalidate();break;case"labelText":this._updateInputLabelText();break;case"showFileList":this._preventRecreatingFiles||this._renderFiles();break;case"uploadFile":case"uploadChunk":case"chunkSize":this._setUploadStrategy();break;case"abortUpload":case"uploadUrl":case"progress":case"uploadMethod":case"uploadHeaders":case"uploadCustomData":case"extendSelection":break;case"hoverStateEnabled":this._updateHoverState(),super._optionChanged(t);break;case"allowCanceling":case"uploadMode":this.clear(),this._invalidate();break;case"onBeforeSend":this._createBeforeSendAction();break;case"onUploadStarted":this._createUploadStartedAction();break;case"onUploaded":this._createUploadedAction();break;case"onFilesUploaded":this._createFilesUploadedAction();break;case"onProgress":this._createProgressAction();break;case"onUploadError":this._createUploadErrorAction();break;case"onUploadAborted":this._createUploadAbortedAction();break;case"onDropZoneEnter":this._createDropZoneEnterAction();break;case"onDropZoneLeave":this._createDropZoneLeaveAction();break;case"useNativeInputClick":this._renderInput();break;case"useDragOver":this._attachDragEventHandlers(this._$inputWrapper);break;case"inputAttr":this._applyInputAttributes(this.option(e));break;default:super._optionChanged(t)}}_resetInputValue(t){"useForm"===this.option("uploadMode")&&!t||(this._doPreventInputChange=!0,this._$fileInput.val(""),this._doPreventInputChange=!1)}clear(){this.option("value",[])}}class uI{constructor(t,e){this.file=t,this.chunkSize=e,this.index=0}read(){if(!this.file)return null;var t=this.createBlobResult(this.file,this.index,this.chunkSize);return t.isCompleted&&(this.file=null),this.index++,t}createBlobResult(t,e,a){var n=e*a;return{blob:this.sliceFile(t,n,a),index:e,isCompleted:n+a>=t.size}}sliceFile(t,e,a){return t.slice?t.slice(e,e+a):t.webkitSlice?t.webkitSlice(e,e+a):null}}class bg{constructor(t){this.fileUploader=t}upload(t){t.isInitialized&&t.isAborted&&this.fileUploader._resetFileState(t),t.isValid()&&!t.uploadStarted&&(this._prepareFileBeforeUpload(t),this._uploadCore(t))}abortUpload(t){if(!(t._isError||t._isLoaded||t.isAborted)&&t.uploadStarted&&(t.isAborted=!0,t.request&&t.request.abort(),this._isCustomCallback("abortUpload"))){var e=this.fileUploader.option("abortUpload"),a=this._createUploadArgument(t),n=null;try{var r=e(t.value,a);n=(0,w.Sx)(r)}catch(s){n=(new w.cY).reject(s).promise()}n.done(()=>t.onAbort.fire()).fail(s=>this._handleFileError(t,s))}}_beforeSend(t,e){var a=this._createUploadArgument(e);this.fileUploader._beforeSendAction({request:t,file:e.value,uploadInfo:a}),e.request=t}_createUploadArgument(t){}_uploadCore(t){}_isCustomCallback(t){var e=this.fileUploader.option(t);return e&&(0,v.Tn)(e)}_handleProgress(t,e){t._isError||(t._isProgressStarted=!0,this._handleProgressCore(t,e))}_handleProgressCore(t,e){}_handleFileError(t,e){t._isError=!0,t.onError.fire(e)}_prepareFileBeforeUpload(t){var e;t.$file&&(null===(e=t.progressBar)||void 0===e||e.dispose(),this.fileUploader._createFileProgressBar(t)),t.isInitialized||(t.onLoadStart.add(this._onUploadStarted.bind(this,t)),t.onLoad.add(this._onLoadedHandler.bind(this,t)),t.onError.add(this._onErrorHandler.bind(this,t)),t.onAbort.add(this._onAbortHandler.bind(this,t)),t.onProgress.add(this._onProgressHandler.bind(this,t)),t.isInitialized=!0)}_shouldHandleError(t,e){return(this._isStatusError(e.status)||!t._isProgressStarted)&&!t.isAborted}_isStatusError(t){return 400<=t&&t<500||500<=t&&t<600}_onUploadStarted(t,e){t.uploadStarted=!0,this.fileUploader._uploadStartedAction({file:t.value,event:e,request:t.request})}_onAbortHandler(t,e){var a={file:t.value,event:e,request:t.request,message:this.fileUploader._getUploadAbortedStatusMessage()};this.fileUploader._uploadAbortedAction(a),this.fileUploader._setStatusMessage(t,a.message),this.fileUploader._handleAllFilesUploaded()}_onErrorHandler(t,e){var a={file:t.value,event:void 0,request:t.request,error:e,message:this.fileUploader.option("uploadFailedMessage")};this.fileUploader._uploadErrorAction(a),this.fileUploader._setStatusMessage(t,a.message),this.fileUploader._handleAllFilesUploaded()}_onLoadedHandler(t,e){var a={file:t.value,event:e,request:t.request,message:this.fileUploader.option("uploadedMessage")};t._isLoaded=!0,this.fileUploader._uploadedAction(a),this.fileUploader._setStatusMessage(t,a.message),this.fileUploader._handleAllFilesUploaded()}_onProgressHandler(t,e){if(t){var a=this.fileUploader._getTotalFilesSize(),n=this.fileUploader._getTotalLoadedFilesSize(),r=Math.min(e.loaded,t.value.size),s=r-t.loadedSize;t.loadedSize=r,this.fileUploader._updateTotalProgress(a,n+s),this.fileUploader._updateProgressBar(t,this._getLoadedData(r,e.total,s,e))}}_getLoadedData(t,e,a,n){return{loaded:t,total:e,currentSegmentSize:a}}_extendFormData(t){var e=this.fileUploader.option("uploadCustomData");for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(0,v.O9)(e[a])&&t.append(a,e[a])}}class Eg extends bg{constructor(t){super(t),this.chunkSize=this.fileUploader.option("chunkSize")}_uploadCore(t){var e=t.value,a={name:e.name,loadedBytes:0,type:e.type,blobReader:new uI(e,this.chunkSize),guid:new Pe.A,fileSize:e.size,count:this._getFileChunksCount(e),customData:{}};t.chunksData=a,this._sendChunk(t,a)}_getFileChunksCount(t){return 0===t.size?1:Math.ceil(t.size/this.chunkSize)}_sendChunk(t,e){var a=e.blobReader.read();e.currentChunk=a,a&&this._sendChunkCore(t,e,a).done(()=>{t.isAborted||(e.loadedBytes+=a.blob.size,t.onProgress.fire({loaded:e.loadedBytes,total:t.value.size}),a.isCompleted&&t.onLoad.fire(),setTimeout(()=>this._sendChunk(t,e)))}).fail(n=>{this._shouldHandleError(t,n)&&this._handleFileError(t,n)})}_sendChunkCore(t,e,a){}_tryRaiseStartLoad(t){t.isStartLoad||(t.isStartLoad=!0,t.onLoadStart.fire())}_getEvent(t){return null}_createUploadArgument(t){return this._createChunksInfo(t.chunksData)}_createChunksInfo(t){return{bytesUploaded:t.loadedBytes,chunkCount:t.count,customData:t.customData,chunkBlob:t.currentChunk.blob,chunkIndex:t.currentChunk.index}}}class cI extends Eg{_sendChunkCore(t,e,a){return dg.A.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:n=>this._beforeSend(n,t),upload:{onprogress:n=>this._handleProgress(t,n),onloadstart:()=>this._tryRaiseStartLoad(t),onabort:()=>t.onAbort.fire()},data:this._createFormData({fileName:e.name,blobName:this.fileUploader.option("name"),blob:a.blob,index:a.index,count:e.count,type:e.type,guid:e.guid,size:e.fileSize})})}_createFormData(t){var e=new oa.FormData;return e.append(t.blobName,t.blob),e.append("chunkMetadata",JSON.stringify({FileName:t.fileName,Index:t.index,TotalCount:t.count,FileSize:t.size,FileType:t.type,FileGuid:t.guid})),this._extendFormData(e),e}}class gI extends Eg{_sendChunkCore(t,e){this._tryRaiseStartLoad(t);var a=this._createChunksInfo(e),n=this.fileUploader.option("uploadChunk");try{var r=n(t.value,a);return(0,w.Sx)(r)}catch(s){return(new w.cY).reject(s).promise()}}_shouldHandleError(t,e){return!0}}class wg extends bg{_uploadCore(t){t.loadedSize=0,this._uploadFile(t).done(()=>{t.isAborted||t.onLoad.fire()}).fail(e=>{this._shouldHandleError(t,e)&&this._handleFileError(t,e)})}_uploadFile(t){}_handleProgressCore(t,e){t.onProgress.fire(e)}_getLoadedData(t,e,a,n){var r=super._getLoadedData(t,e,a,n);return r.event=n,r}}class pI extends wg{_uploadFile(t){return dg.A.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:e=>this._beforeSend(e,t),upload:{onprogress:e=>this._handleProgress(t,e),onloadstart:()=>t.onLoadStart.fire(),onabort:()=>t.onAbort.fire()},data:this._createFormData(this.fileUploader.option("name"),t.value)})}_createFormData(t,e){var a=new oa.FormData;return a.append(t,e,e.name),this._extendFormData(a),a}}class _I extends wg{_uploadFile(t){t.onLoadStart.fire();var e=this.fileUploader.option("uploadFile");try{var a=e(t.value,n=>{this._handleProgress(t,{loaded:n,total:t.value.size})});return(0,w.Sx)(a)}catch(n){return(new w.cY).reject(n).promise()}}_shouldHandleError(t,e){return!0}}(0,le.A)("dxFileUploader",xg);const vI=xg,mI={provide:He.kq,useExisting:(0,p.Rfq)(()=>CI),multi:!0};let CI=(()=>{class i extends E.ic{constructor(e,a,n,r,s,o,l,d){super(e,a,n,r,l,d),this._watcherHelper=r,this._idh=s,this.touched=h=>{},this._createEventEmitters([{subscribe:"beforeSend",emit:"onBeforeSend"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"dropZoneEnter",emit:"onDropZoneEnter"},{subscribe:"dropZoneLeave",emit:"onDropZoneLeave"},{subscribe:"filesUploaded",emit:"onFilesUploaded"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"progress",emit:"onProgress"},{subscribe:"uploadAborted",emit:"onUploadAborted"},{subscribe:"uploaded",emit:"onUploaded"},{subscribe:"uploadError",emit:"onUploadError"},{subscribe:"uploadStarted",emit:"onUploadStarted"},{subscribe:"valueChanged",emit:"onValueChanged"},{emit:"abortUploadChange"},{emit:"acceptChange"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"allowCancelingChange"},{emit:"allowedFileExtensionsChange"},{emit:"chunkSizeChange"},{emit:"dialogTriggerChange"},{emit:"disabledChange"},{emit:"dropZoneChange"},{emit:"elementAttrChange"},{emit:"focusStateEnabledChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"inputAttrChange"},{emit:"invalidFileExtensionMessageChange"},{emit:"invalidMaxFileSizeMessageChange"},{emit:"invalidMinFileSizeMessageChange"},{emit:"isDirtyChange"},{emit:"isValidChange"},{emit:"labelTextChange"},{emit:"maxFileSizeChange"},{emit:"minFileSizeChange"},{emit:"multipleChange"},{emit:"nameChange"},{emit:"progressChange"},{emit:"readOnlyChange"},{emit:"readyToUploadMessageChange"},{emit:"rtlEnabledChange"},{emit:"selectButtonTextChange"},{emit:"showFileListChange"},{emit:"tabIndexChange"},{emit:"uploadAbortedMessageChange"},{emit:"uploadButtonTextChange"},{emit:"uploadChunkChange"},{emit:"uploadCustomDataChange"},{emit:"uploadedMessageChange"},{emit:"uploadFailedMessageChange"},{emit:"uploadFileChange"},{emit:"uploadHeadersChange"},{emit:"uploadMethodChange"},{emit:"uploadModeChange"},{emit:"uploadUrlChange"},{emit:"validationErrorChange"},{emit:"validationErrorsChange"},{emit:"validationStatusChange"},{emit:"valueChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"onBlur"}]),this._idh.setHost(this),o.setHost(this)}get abortUpload(){return this._getOption("abortUpload")}set abortUpload(e){this._setOption("abortUpload",e)}get accept(){return this._getOption("accept")}set accept(e){this._setOption("accept",e)}get accessKey(){return this._getOption("accessKey")}set accessKey(e){this._setOption("accessKey",e)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(e){this._setOption("activeStateEnabled",e)}get allowCanceling(){return this._getOption("allowCanceling")}set allowCanceling(e){this._setOption("allowCanceling",e)}get allowedFileExtensions(){return this._getOption("allowedFileExtensions")}set allowedFileExtensions(e){this._setOption("allowedFileExtensions",e)}get chunkSize(){return this._getOption("chunkSize")}set chunkSize(e){this._setOption("chunkSize",e)}get dialogTrigger(){return this._getOption("dialogTrigger")}set dialogTrigger(e){this._setOption("dialogTrigger",e)}get disabled(){return this._getOption("disabled")}set disabled(e){this._setOption("disabled",e)}get dropZone(){return this._getOption("dropZone")}set dropZone(e){this._setOption("dropZone",e)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(e){this._setOption("elementAttr",e)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(e){this._setOption("focusStateEnabled",e)}get height(){return this._getOption("height")}set height(e){this._setOption("height",e)}get hint(){return this._getOption("hint")}set hint(e){this._setOption("hint",e)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(e){this._setOption("hoverStateEnabled",e)}get inputAttr(){return this._getOption("inputAttr")}set inputAttr(e){this._setOption("inputAttr",e)}get invalidFileExtensionMessage(){return this._getOption("invalidFileExtensionMessage")}set invalidFileExtensionMessage(e){this._setOption("invalidFileExtensionMessage",e)}get invalidMaxFileSizeMessage(){return this._getOption("invalidMaxFileSizeMessage")}set invalidMaxFileSizeMessage(e){this._setOption("invalidMaxFileSizeMessage",e)}get invalidMinFileSizeMessage(){return this._getOption("invalidMinFileSizeMessage")}set invalidMinFileSizeMessage(e){this._setOption("invalidMinFileSizeMessage",e)}get isDirty(){return this._getOption("isDirty")}set isDirty(e){this._setOption("isDirty",e)}get isValid(){return this._getOption("isValid")}set isValid(e){this._setOption("isValid",e)}get labelText(){return this._getOption("labelText")}set labelText(e){this._setOption("labelText",e)}get maxFileSize(){return this._getOption("maxFileSize")}set maxFileSize(e){this._setOption("maxFileSize",e)}get minFileSize(){return this._getOption("minFileSize")}set minFileSize(e){this._setOption("minFileSize",e)}get multiple(){return this._getOption("multiple")}set multiple(e){this._setOption("multiple",e)}get name(){return this._getOption("name")}set name(e){this._setOption("name",e)}get progress(){return this._getOption("progress")}set progress(e){this._setOption("progress",e)}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOption("readOnly",e)}get readyToUploadMessage(){return this._getOption("readyToUploadMessage")}set readyToUploadMessage(e){this._setOption("readyToUploadMessage",e)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(e){this._setOption("rtlEnabled",e)}get selectButtonText(){return this._getOption("selectButtonText")}set selectButtonText(e){this._setOption("selectButtonText",e)}get showFileList(){return this._getOption("showFileList")}set showFileList(e){this._setOption("showFileList",e)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(e){this._setOption("tabIndex",e)}get uploadAbortedMessage(){return this._getOption("uploadAbortedMessage")}set uploadAbortedMessage(e){this._setOption("uploadAbortedMessage",e)}get uploadButtonText(){return this._getOption("uploadButtonText")}set uploadButtonText(e){this._setOption("uploadButtonText",e)}get uploadChunk(){return this._getOption("uploadChunk")}set uploadChunk(e){this._setOption("uploadChunk",e)}get uploadCustomData(){return this._getOption("uploadCustomData")}set uploadCustomData(e){this._setOption("uploadCustomData",e)}get uploadedMessage(){return this._getOption("uploadedMessage")}set uploadedMessage(e){this._setOption("uploadedMessage",e)}get uploadFailedMessage(){return this._getOption("uploadFailedMessage")}set uploadFailedMessage(e){this._setOption("uploadFailedMessage",e)}get uploadFile(){return this._getOption("uploadFile")}set uploadFile(e){this._setOption("uploadFile",e)}get uploadHeaders(){return this._getOption("uploadHeaders")}set uploadHeaders(e){this._setOption("uploadHeaders",e)}get uploadMethod(){return this._getOption("uploadMethod")}set uploadMethod(e){this._setOption("uploadMethod",e)}get uploadMode(){return this._getOption("uploadMode")}set uploadMode(e){this._setOption("uploadMode",e)}get uploadUrl(){return this._getOption("uploadUrl")}set uploadUrl(e){this._setOption("uploadUrl",e)}get validationError(){return this._getOption("validationError")}set validationError(e){this._setOption("validationError",e)}get validationErrors(){return this._getOption("validationErrors")}set validationErrors(e){this._setOption("validationErrors",e)}get validationStatus(){return this._getOption("validationStatus")}set validationStatus(e){this._setOption("validationStatus",e)}get value(){return this._getOption("value")}set value(e){this._setOption("value",e)}get visible(){return this._getOption("visible")}set visible(e){this._setOption("visible",e)}get width(){return this._getOption("width")}set width(e){this._setOption("width",e)}change(e){}_createInstance(e,a){return new vI(e,a)}writeValue(e){this.eventHelper.lockedValueChangeEvent=!0,this.value=e,this.eventHelper.lockedValueChangeEvent=!1}setDisabledState(e){this.disabled=e}registerOnChange(e){this.change=e}registerOnTouched(e){this.touched=e}_createWidget(e){super._createWidget(e),this.instance.on("focusOut",a=>{this.eventHelper.fireNgEvent("onBlur",[a])})}ngOnDestroy(){this._destroyWidget()}ngOnChanges(e){super.ngOnChanges(e),this.setupChanges("allowedFileExtensions",e),this.setupChanges("validationErrors",e),this.setupChanges("value",e)}setupChanges(e,a){e in this._optionsToUpdate||this._idh.setup(e,a)}ngDoCheck(){this._idh.doCheck("allowedFileExtensions"),this._idh.doCheck("validationErrors"),this._idh.doCheck("value"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(e,a){let n=this._idh.setupSingle(e,a),r=null!==this._idh.getChanges(e,a);(n||r)&&super._setOption(e,a)}}return i.\u0275fac=function(e){return new(e||i)(p.rXU(p.aKT),p.rXU(p.SKi),p.rXU(E.zF),p.rXU(E.jS),p.rXU(E.$M),p.rXU(E.fH),p.rXU(he.pJ),p.rXU(p.Agw))},i.\u0275cmp=p.VBU({type:i,selectors:[["dx-file-uploader"]],hostBindings:function(e,a){1&e&&p.bIt("valueChange",function(r){return a.change(r)})("onBlur",function(r){return a.touched(r)})},inputs:{abortUpload:"abortUpload",accept:"accept",accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",allowCanceling:"allowCanceling",allowedFileExtensions:"allowedFileExtensions",chunkSize:"chunkSize",dialogTrigger:"dialogTrigger",disabled:"disabled",dropZone:"dropZone",elementAttr:"elementAttr",focusStateEnabled:"focusStateEnabled",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",inputAttr:"inputAttr",invalidFileExtensionMessage:"invalidFileExtensionMessage",invalidMaxFileSizeMessage:"invalidMaxFileSizeMessage",invalidMinFileSizeMessage:"invalidMinFileSizeMessage",isDirty:"isDirty",isValid:"isValid",labelText:"labelText",maxFileSize:"maxFileSize",minFileSize:"minFileSize",multiple:"multiple",name:"name",progress:"progress",readOnly:"readOnly",readyToUploadMessage:"readyToUploadMessage",rtlEnabled:"rtlEnabled",selectButtonText:"selectButtonText",showFileList:"showFileList",tabIndex:"tabIndex",uploadAbortedMessage:"uploadAbortedMessage",uploadButtonText:"uploadButtonText",uploadChunk:"uploadChunk",uploadCustomData:"uploadCustomData",uploadedMessage:"uploadedMessage",uploadFailedMessage:"uploadFailedMessage",uploadFile:"uploadFile",uploadHeaders:"uploadHeaders",uploadMethod:"uploadMethod",uploadMode:"uploadMode",uploadUrl:"uploadUrl",validationError:"validationError",validationErrors:"validationErrors",validationStatus:"validationStatus",value:"value",visible:"visible",width:"width"},outputs:{onBeforeSend:"onBeforeSend",onContentReady:"onContentReady",onDisposing:"onDisposing",onDropZoneEnter:"onDropZoneEnter",onDropZoneLeave:"onDropZoneLeave",onFilesUploaded:"onFilesUploaded",onInitialized:"onInitialized",onOptionChanged:"onOptionChanged",onProgress:"onProgress",onUploadAborted:"onUploadAborted",onUploaded:"onUploaded",onUploadError:"onUploadError",onUploadStarted:"onUploadStarted",onValueChanged:"onValueChanged",abortUploadChange:"abortUploadChange",acceptChange:"acceptChange",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",allowCancelingChange:"allowCancelingChange",allowedFileExtensionsChange:"allowedFileExtensionsChange",chunkSizeChange:"chunkSizeChange",dialogTriggerChange:"dialogTriggerChange",disabledChange:"disabledChange",dropZoneChange:"dropZoneChange",elementAttrChange:"elementAttrChange",focusStateEnabledChange:"focusStateEnabledChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",inputAttrChange:"inputAttrChange",invalidFileExtensionMessageChange:"invalidFileExtensionMessageChange",invalidMaxFileSizeMessageChange:"invalidMaxFileSizeMessageChange",invalidMinFileSizeMessageChange:"invalidMinFileSizeMessageChange",isDirtyChange:"isDirtyChange",isValidChange:"isValidChange",labelTextChange:"labelTextChange",maxFileSizeChange:"maxFileSizeChange",minFileSizeChange:"minFileSizeChange",multipleChange:"multipleChange",nameChange:"nameChange",progressChange:"progressChange",readOnlyChange:"readOnlyChange",readyToUploadMessageChange:"readyToUploadMessageChange",rtlEnabledChange:"rtlEnabledChange",selectButtonTextChange:"selectButtonTextChange",showFileListChange:"showFileListChange",tabIndexChange:"tabIndexChange",uploadAbortedMessageChange:"uploadAbortedMessageChange",uploadButtonTextChange:"uploadButtonTextChange",uploadChunkChange:"uploadChunkChange",uploadCustomDataChange:"uploadCustomDataChange",uploadedMessageChange:"uploadedMessageChange",uploadFailedMessageChange:"uploadFailedMessageChange",uploadFileChange:"uploadFileChange",uploadHeadersChange:"uploadHeadersChange",uploadMethodChange:"uploadMethodChange",uploadModeChange:"uploadModeChange",uploadUrlChange:"uploadUrlChange",validationErrorChange:"validationErrorChange",validationErrorsChange:"validationErrorsChange",validationStatusChange:"validationStatusChange",valueChange:"valueChange",visibleChange:"visibleChange",widthChange:"widthChange",onBlur:"onBlur"},features:[p.Jv_([E.zF,E.jS,mI,E.fH,E.$M]),p.Vt3,p.OA$],decls:0,vars:0,template:function(e,a){},encapsulation:2}),i})(),fI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[E.p_,E.xZ],E.xZ]}),i})();var xI=D(1668);const bI={provide:He.kq,useExisting:(0,p.Rfq)(()=>EI),multi:!0};let EI=(()=>{class i extends E.ic{constructor(e,a,n,r,s,o,l,d){super(e,a,n,r,l,d),this._watcherHelper=r,this._idh=s,this.touched=h=>{},this._createEventEmitters([{subscribe:"change",emit:"onChange"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"copy",emit:"onCopy"},{subscribe:"cut",emit:"onCut"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"enterKey",emit:"onEnterKey"},{subscribe:"focusIn",emit:"onFocusIn"},{subscribe:"focusOut",emit:"onFocusOut"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"input",emit:"onInput"},{subscribe:"keyDown",emit:"onKeyDown"},{subscribe:"keyUp",emit:"onKeyUp"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"paste",emit:"onPaste"},{subscribe:"valueChanged",emit:"onValueChanged"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"buttonsChange"},{emit:"disabledChange"},{emit:"elementAttrChange"},{emit:"focusStateEnabledChange"},{emit:"formatChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"inputAttrChange"},{emit:"invalidValueMessageChange"},{emit:"isDirtyChange"},{emit:"isValidChange"},{emit:"labelChange"},{emit:"labelModeChange"},{emit:"maxChange"},{emit:"minChange"},{emit:"modeChange"},{emit:"nameChange"},{emit:"placeholderChange"},{emit:"readOnlyChange"},{emit:"rtlEnabledChange"},{emit:"showClearButtonChange"},{emit:"showSpinButtonsChange"},{emit:"stepChange"},{emit:"stylingModeChange"},{emit:"tabIndexChange"},{emit:"textChange"},{emit:"useLargeSpinButtonsChange"},{emit:"validationErrorChange"},{emit:"validationErrorsChange"},{emit:"validationMessageModeChange"},{emit:"validationMessagePositionChange"},{emit:"validationStatusChange"},{emit:"valueChange"},{emit:"valueChangeEventChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"onBlur"}]),this._idh.setHost(this),o.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(e){this._setOption("accessKey",e)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(e){this._setOption("activeStateEnabled",e)}get buttons(){return this._getOption("buttons")}set buttons(e){this._setOption("buttons",e)}get disabled(){return this._getOption("disabled")}set disabled(e){this._setOption("disabled",e)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(e){this._setOption("elementAttr",e)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(e){this._setOption("focusStateEnabled",e)}get format(){return this._getOption("format")}set format(e){this._setOption("format",e)}get height(){return this._getOption("height")}set height(e){this._setOption("height",e)}get hint(){return this._getOption("hint")}set hint(e){this._setOption("hint",e)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(e){this._setOption("hoverStateEnabled",e)}get inputAttr(){return this._getOption("inputAttr")}set inputAttr(e){this._setOption("inputAttr",e)}get invalidValueMessage(){return this._getOption("invalidValueMessage")}set invalidValueMessage(e){this._setOption("invalidValueMessage",e)}get isDirty(){return this._getOption("isDirty")}set isDirty(e){this._setOption("isDirty",e)}get isValid(){return this._getOption("isValid")}set isValid(e){this._setOption("isValid",e)}get label(){return this._getOption("label")}set label(e){this._setOption("label",e)}get labelMode(){return this._getOption("labelMode")}set labelMode(e){this._setOption("labelMode",e)}get max(){return this._getOption("max")}set max(e){this._setOption("max",e)}get min(){return this._getOption("min")}set min(e){this._setOption("min",e)}get mode(){return this._getOption("mode")}set mode(e){this._setOption("mode",e)}get name(){return this._getOption("name")}set name(e){this._setOption("name",e)}get placeholder(){return this._getOption("placeholder")}set placeholder(e){this._setOption("placeholder",e)}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOption("readOnly",e)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(e){this._setOption("rtlEnabled",e)}get showClearButton(){return this._getOption("showClearButton")}set showClearButton(e){this._setOption("showClearButton",e)}get showSpinButtons(){return this._getOption("showSpinButtons")}set showSpinButtons(e){this._setOption("showSpinButtons",e)}get step(){return this._getOption("step")}set step(e){this._setOption("step",e)}get stylingMode(){return this._getOption("stylingMode")}set stylingMode(e){this._setOption("stylingMode",e)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(e){this._setOption("tabIndex",e)}get text(){return this._getOption("text")}set text(e){this._setOption("text",e)}get useLargeSpinButtons(){return this._getOption("useLargeSpinButtons")}set useLargeSpinButtons(e){this._setOption("useLargeSpinButtons",e)}get validationError(){return this._getOption("validationError")}set validationError(e){this._setOption("validationError",e)}get validationErrors(){return this._getOption("validationErrors")}set validationErrors(e){this._setOption("validationErrors",e)}get validationMessageMode(){return this._getOption("validationMessageMode")}set validationMessageMode(e){this._setOption("validationMessageMode",e)}get validationMessagePosition(){return this._getOption("validationMessagePosition")}set validationMessagePosition(e){this._setOption("validationMessagePosition",e)}get validationStatus(){return this._getOption("validationStatus")}set validationStatus(e){this._setOption("validationStatus",e)}get value(){return this._getOption("value")}set value(e){this._setOption("value",e)}get valueChangeEvent(){return this._getOption("valueChangeEvent")}set valueChangeEvent(e){this._setOption("valueChangeEvent",e)}get visible(){return this._getOption("visible")}set visible(e){this._setOption("visible",e)}get width(){return this._getOption("width")}set width(e){this._setOption("width",e)}change(e){}get buttonsChildren(){return this._getOption("buttons")}set buttonsChildren(e){this.setChildren("buttons",e)}_createInstance(e,a){return new Hd.A(e,a)}writeValue(e){this.eventHelper.lockedValueChangeEvent=!0,this.value=e,this.eventHelper.lockedValueChangeEvent=!1}setDisabledState(e){this.disabled=e}registerOnChange(e){this.change=e}registerOnTouched(e){this.touched=e}_createWidget(e){super._createWidget(e),this.instance.on("focusOut",a=>{this.eventHelper.fireNgEvent("onBlur",[a])})}ngOnDestroy(){this._destroyWidget()}ngOnChanges(e){super.ngOnChanges(e),this.setupChanges("buttons",e),this.setupChanges("validationErrors",e)}setupChanges(e,a){e in this._optionsToUpdate||this._idh.setup(e,a)}ngDoCheck(){this._idh.doCheck("buttons"),this._idh.doCheck("validationErrors"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(e,a){let n=this._idh.setupSingle(e,a),r=null!==this._idh.getChanges(e,a);(n||r)&&super._setOption(e,a)}}return i.\u0275fac=function(e){return new(e||i)(p.rXU(p.aKT),p.rXU(p.SKi),p.rXU(E.zF),p.rXU(E.jS),p.rXU(E.$M),p.rXU(E.fH),p.rXU(he.pJ),p.rXU(p.Agw))},i.\u0275cmp=p.VBU({type:i,selectors:[["dx-number-box"]],contentQueries:function(e,a,n){if(1&e&&p.wni(n,C.BrI,4),2&e){let r;p.mGM(r=p.lsd())&&(a.buttonsChildren=r)}},hostBindings:function(e,a){1&e&&p.bIt("valueChange",function(r){return a.change(r)})("onBlur",function(r){return a.touched(r)})},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",buttons:"buttons",disabled:"disabled",elementAttr:"elementAttr",focusStateEnabled:"focusStateEnabled",format:"format",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",inputAttr:"inputAttr",invalidValueMessage:"invalidValueMessage",isDirty:"isDirty",isValid:"isValid",label:"label",labelMode:"labelMode",max:"max",min:"min",mode:"mode",name:"name",placeholder:"placeholder",readOnly:"readOnly",rtlEnabled:"rtlEnabled",showClearButton:"showClearButton",showSpinButtons:"showSpinButtons",step:"step",stylingMode:"stylingMode",tabIndex:"tabIndex",text:"text",useLargeSpinButtons:"useLargeSpinButtons",validationError:"validationError",validationErrors:"validationErrors",validationMessageMode:"validationMessageMode",validationMessagePosition:"validationMessagePosition",validationStatus:"validationStatus",value:"value",valueChangeEvent:"valueChangeEvent",visible:"visible",width:"width"},outputs:{onChange:"onChange",onContentReady:"onContentReady",onCopy:"onCopy",onCut:"onCut",onDisposing:"onDisposing",onEnterKey:"onEnterKey",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onInitialized:"onInitialized",onInput:"onInput",onKeyDown:"onKeyDown",onKeyUp:"onKeyUp",onOptionChanged:"onOptionChanged",onPaste:"onPaste",onValueChanged:"onValueChanged",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",buttonsChange:"buttonsChange",disabledChange:"disabledChange",elementAttrChange:"elementAttrChange",focusStateEnabledChange:"focusStateEnabledChange",formatChange:"formatChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",inputAttrChange:"inputAttrChange",invalidValueMessageChange:"invalidValueMessageChange",isDirtyChange:"isDirtyChange",isValidChange:"isValidChange",labelChange:"labelChange",labelModeChange:"labelModeChange",maxChange:"maxChange",minChange:"minChange",modeChange:"modeChange",nameChange:"nameChange",placeholderChange:"placeholderChange",readOnlyChange:"readOnlyChange",rtlEnabledChange:"rtlEnabledChange",showClearButtonChange:"showClearButtonChange",showSpinButtonsChange:"showSpinButtonsChange",stepChange:"stepChange",stylingModeChange:"stylingModeChange",tabIndexChange:"tabIndexChange",textChange:"textChange",useLargeSpinButtonsChange:"useLargeSpinButtonsChange",validationErrorChange:"validationErrorChange",validationErrorsChange:"validationErrorsChange",validationMessageModeChange:"validationMessageModeChange",validationMessagePositionChange:"validationMessagePositionChange",validationStatusChange:"validationStatusChange",valueChange:"valueChange",valueChangeEventChange:"valueChangeEventChange",visibleChange:"visibleChange",widthChange:"widthChange",onBlur:"onBlur"},features:[p.Jv_([E.zF,E.jS,bI,E.fH,E.$M]),p.Vt3,p.OA$],decls:0,vars:0,template:function(e,a){},encapsulation:2}),i})(),wI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.GIV,C.u4t,C.Pxf,E.p_,E.xZ],C.GIV,C.u4t,C.Pxf,E.xZ]}),i})();var yI=D(6961),yg=xi.A.inherit({_getDefaultOptions:function(){return(0,y.X)(this.callBase(),{spellcheck:!0,minHeight:void 0,maxHeight:void 0,autoResizeEnabled:!1})},_initMarkup:function(){this.$element().addClass("dx-textarea"),this.callBase(),this.setAria("multiline","true")},_renderContentImpl:function(){this._updateInputHeight(),this.callBase()},_renderInput:function(){this.callBase(),this._renderScrollHandler()},_createInput:function(){var i=(0,_.A)("<textarea>");return this._applyInputAttributes(i,this.option("inputAttr")),this._updateInputAutoResizeAppearance(i),i},_setInputMinHeight:V.lQ,_renderScrollHandler:function(){this._eventY=0;var i=this._input(),t=function(i,t){var e=(0,_.A)(i);return{validate:function(a){if((0,P.X1)(a)&&(0,_.A)(a.target).is(i))return!!An(e,-a.delta,a.shiftKey)&&(a._needSkipEvent=!0,!0)}}}(i);O.A.on(i,(0,P.b4)(yI.A.init,this.NAME),t,V.lQ),O.A.on(i,(0,P.b4)(te.A.down,this.NAME),this._pointerDownHandler.bind(this)),O.A.on(i,(0,P.b4)(te.A.move,this.NAME),this._pointerMoveHandler.bind(this))},_pointerDownHandler:function(i){this._eventY=(0,P.rw)(i).y},_pointerMoveHandler:function(i){var t=(0,P.rw)(i).y,e=this._eventY-t;An(this._input(),e)&&(i.isScrollingEvent=!0,i.stopPropagation()),this._eventY=t},_renderDimensions:function(){var i=this.$element(),t=i.get(0),e=this._getOptionValue("width",t),a=this._getOptionValue("height",t),n=this.option("minHeight"),r=this.option("maxHeight");i.css({minHeight:void 0!==n?n:"",maxHeight:void 0!==r?r:"",width:e,height:a})},_resetDimensions:function(){this.$element().css({height:"",minHeight:"",maxHeight:""})},_renderEvents:function(){this.option("autoResizeEnabled")&&O.A.on(this._input(),(0,P.b4)("input paste",this.NAME),this._updateInputHeight.bind(this)),this.callBase()},_refreshEvents:function(){O.A.off(this._input(),(0,P.b4)("input paste",this.NAME)),this.callBase()},_getHeightDifference(i){return(0,R.pD)(this._$element.get(0),!1)+(0,R.pD)(this._$textEditorContainer.get(0),!1)+(0,R.pD)(this._$textEditorInputContainer.get(0),!1)+(0,R.GU)("height",(0,Q.zk)().getComputedStyle(i.get(0))).margin},_updateInputHeight:function(){if((0,Q.Vd)()){var i=this._input(),t=this.option("height"),e=void 0===t&&this.option("autoResizeEnabled");if(!(e||void 0===t&&this.option("minHeight")))return void i.css("height","");this._resetDimensions(),this._$element.css("height",(0,R.P$)(this._$element)),i.css("height",0);var n=this._getHeightDifference(i);this._renderDimensions();var r=this._getBoundaryHeight("minHeight"),s=this._getBoundaryHeight("maxHeight"),o=i[0].scrollHeight;if(void 0!==r&&(o=Math.max(o,r-n)),void 0!==s){var l=s-n,d=o>l;o=Math.min(o,l),this._updateInputAutoResizeAppearance(i,!d)}i.css("height",o),e&&this._$element.css("height","auto")}},_getBoundaryHeight:function(i){var t=this.option(i);if((0,v.O9)(t))return"number"==typeof t?t:(0,R.hP)(t,this.$element().get(0).parentElement,this._$element.get(0))},_renderInputType:V.lQ,_visibilityChanged:function(i){i&&this._updateInputHeight()},_updateInputAutoResizeAppearance:function(i,t){if(i){var e=(0,V.YD)(t,this.option("autoResizeEnabled"));i.toggleClass("dx-texteditor-input-auto-resize",e)}},_dimensionChanged:function(){this.option("visible")&&this._updateInputHeight()},_optionChanged:function(i){switch(i.name){case"autoResizeEnabled":this._updateInputAutoResizeAppearance(this._input(),i.value),this._refreshEvents(),this._updateInputHeight();break;case"value":case"height":this.callBase(i),this._updateInputHeight();break;case"minHeight":case"maxHeight":this._renderDimensions(),this._updateInputHeight();break;case"visible":this.callBase(i),i.value&&this._updateInputHeight();break;default:this.callBase(i)}}});(0,le.A)("dxTextArea",yg);const II=yg,AI={provide:He.kq,useExisting:(0,p.Rfq)(()=>TI),multi:!0};let TI=(()=>{class i extends E.ic{constructor(e,a,n,r,s,o,l,d){super(e,a,n,r,l,d),this._watcherHelper=r,this._idh=s,this.touched=h=>{},this._createEventEmitters([{subscribe:"change",emit:"onChange"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"copy",emit:"onCopy"},{subscribe:"cut",emit:"onCut"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"enterKey",emit:"onEnterKey"},{subscribe:"focusIn",emit:"onFocusIn"},{subscribe:"focusOut",emit:"onFocusOut"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"input",emit:"onInput"},{subscribe:"keyDown",emit:"onKeyDown"},{subscribe:"keyUp",emit:"onKeyUp"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"paste",emit:"onPaste"},{subscribe:"valueChanged",emit:"onValueChanged"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"autoResizeEnabledChange"},{emit:"disabledChange"},{emit:"elementAttrChange"},{emit:"focusStateEnabledChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"inputAttrChange"},{emit:"isDirtyChange"},{emit:"isValidChange"},{emit:"labelChange"},{emit:"labelModeChange"},{emit:"maxHeightChange"},{emit:"maxLengthChange"},{emit:"minHeightChange"},{emit:"nameChange"},{emit:"placeholderChange"},{emit:"readOnlyChange"},{emit:"rtlEnabledChange"},{emit:"spellcheckChange"},{emit:"stylingModeChange"},{emit:"tabIndexChange"},{emit:"textChange"},{emit:"validationErrorChange"},{emit:"validationErrorsChange"},{emit:"validationMessageModeChange"},{emit:"validationMessagePositionChange"},{emit:"validationStatusChange"},{emit:"valueChange"},{emit:"valueChangeEventChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"onBlur"}]),this._idh.setHost(this),o.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(e){this._setOption("accessKey",e)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(e){this._setOption("activeStateEnabled",e)}get autoResizeEnabled(){return this._getOption("autoResizeEnabled")}set autoResizeEnabled(e){this._setOption("autoResizeEnabled",e)}get disabled(){return this._getOption("disabled")}set disabled(e){this._setOption("disabled",e)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(e){this._setOption("elementAttr",e)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(e){this._setOption("focusStateEnabled",e)}get height(){return this._getOption("height")}set height(e){this._setOption("height",e)}get hint(){return this._getOption("hint")}set hint(e){this._setOption("hint",e)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(e){this._setOption("hoverStateEnabled",e)}get inputAttr(){return this._getOption("inputAttr")}set inputAttr(e){this._setOption("inputAttr",e)}get isDirty(){return this._getOption("isDirty")}set isDirty(e){this._setOption("isDirty",e)}get isValid(){return this._getOption("isValid")}set isValid(e){this._setOption("isValid",e)}get label(){return this._getOption("label")}set label(e){this._setOption("label",e)}get labelMode(){return this._getOption("labelMode")}set labelMode(e){this._setOption("labelMode",e)}get maxHeight(){return this._getOption("maxHeight")}set maxHeight(e){this._setOption("maxHeight",e)}get maxLength(){return this._getOption("maxLength")}set maxLength(e){this._setOption("maxLength",e)}get minHeight(){return this._getOption("minHeight")}set minHeight(e){this._setOption("minHeight",e)}get name(){return this._getOption("name")}set name(e){this._setOption("name",e)}get placeholder(){return this._getOption("placeholder")}set placeholder(e){this._setOption("placeholder",e)}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOption("readOnly",e)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(e){this._setOption("rtlEnabled",e)}get spellcheck(){return this._getOption("spellcheck")}set spellcheck(e){this._setOption("spellcheck",e)}get stylingMode(){return this._getOption("stylingMode")}set stylingMode(e){this._setOption("stylingMode",e)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(e){this._setOption("tabIndex",e)}get text(){return this._getOption("text")}set text(e){this._setOption("text",e)}get validationError(){return this._getOption("validationError")}set validationError(e){this._setOption("validationError",e)}get validationErrors(){return this._getOption("validationErrors")}set validationErrors(e){this._setOption("validationErrors",e)}get validationMessageMode(){return this._getOption("validationMessageMode")}set validationMessageMode(e){this._setOption("validationMessageMode",e)}get validationMessagePosition(){return this._getOption("validationMessagePosition")}set validationMessagePosition(e){this._setOption("validationMessagePosition",e)}get validationStatus(){return this._getOption("validationStatus")}set validationStatus(e){this._setOption("validationStatus",e)}get value(){return this._getOption("value")}set value(e){this._setOption("value",e)}get valueChangeEvent(){return this._getOption("valueChangeEvent")}set valueChangeEvent(e){this._setOption("valueChangeEvent",e)}get visible(){return this._getOption("visible")}set visible(e){this._setOption("visible",e)}get width(){return this._getOption("width")}set width(e){this._setOption("width",e)}change(e){}_createInstance(e,a){return new II(e,a)}writeValue(e){this.eventHelper.lockedValueChangeEvent=!0,this.value=e,this.eventHelper.lockedValueChangeEvent=!1}setDisabledState(e){this.disabled=e}registerOnChange(e){this.change=e}registerOnTouched(e){this.touched=e}_createWidget(e){super._createWidget(e),this.instance.on("focusOut",a=>{this.eventHelper.fireNgEvent("onBlur",[a])})}ngOnDestroy(){this._destroyWidget()}ngOnChanges(e){super.ngOnChanges(e),this.setupChanges("validationErrors",e)}setupChanges(e,a){e in this._optionsToUpdate||this._idh.setup(e,a)}ngDoCheck(){this._idh.doCheck("validationErrors"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(e,a){let n=this._idh.setupSingle(e,a),r=null!==this._idh.getChanges(e,a);(n||r)&&super._setOption(e,a)}}return i.\u0275fac=function(e){return new(e||i)(p.rXU(p.aKT),p.rXU(p.SKi),p.rXU(E.zF),p.rXU(E.jS),p.rXU(E.$M),p.rXU(E.fH),p.rXU(he.pJ),p.rXU(p.Agw))},i.\u0275cmp=p.VBU({type:i,selectors:[["dx-text-area"]],hostBindings:function(e,a){1&e&&p.bIt("valueChange",function(r){return a.change(r)})("onBlur",function(r){return a.touched(r)})},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",autoResizeEnabled:"autoResizeEnabled",disabled:"disabled",elementAttr:"elementAttr",focusStateEnabled:"focusStateEnabled",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",inputAttr:"inputAttr",isDirty:"isDirty",isValid:"isValid",label:"label",labelMode:"labelMode",maxHeight:"maxHeight",maxLength:"maxLength",minHeight:"minHeight",name:"name",placeholder:"placeholder",readOnly:"readOnly",rtlEnabled:"rtlEnabled",spellcheck:"spellcheck",stylingMode:"stylingMode",tabIndex:"tabIndex",text:"text",validationError:"validationError",validationErrors:"validationErrors",validationMessageMode:"validationMessageMode",validationMessagePosition:"validationMessagePosition",validationStatus:"validationStatus",value:"value",valueChangeEvent:"valueChangeEvent",visible:"visible",width:"width"},outputs:{onChange:"onChange",onContentReady:"onContentReady",onCopy:"onCopy",onCut:"onCut",onDisposing:"onDisposing",onEnterKey:"onEnterKey",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onInitialized:"onInitialized",onInput:"onInput",onKeyDown:"onKeyDown",onKeyUp:"onKeyUp",onOptionChanged:"onOptionChanged",onPaste:"onPaste",onValueChanged:"onValueChanged",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",autoResizeEnabledChange:"autoResizeEnabledChange",disabledChange:"disabledChange",elementAttrChange:"elementAttrChange",focusStateEnabledChange:"focusStateEnabledChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",inputAttrChange:"inputAttrChange",isDirtyChange:"isDirtyChange",isValidChange:"isValidChange",labelChange:"labelChange",labelModeChange:"labelModeChange",maxHeightChange:"maxHeightChange",maxLengthChange:"maxLengthChange",minHeightChange:"minHeightChange",nameChange:"nameChange",placeholderChange:"placeholderChange",readOnlyChange:"readOnlyChange",rtlEnabledChange:"rtlEnabledChange",spellcheckChange:"spellcheckChange",stylingModeChange:"stylingModeChange",tabIndexChange:"tabIndexChange",textChange:"textChange",validationErrorChange:"validationErrorChange",validationErrorsChange:"validationErrorsChange",validationMessageModeChange:"validationMessageModeChange",validationMessagePositionChange:"validationMessagePositionChange",validationStatusChange:"validationStatusChange",valueChange:"valueChange",valueChangeEventChange:"valueChangeEventChange",visibleChange:"visibleChange",widthChange:"widthChange",onBlur:"onBlur"},features:[p.Jv_([E.zF,E.jS,AI,E.fH,E.$M]),p.Vt3,p.OA$],decls:0,vars:0,template:function(e,a){},encapsulation:2}),i})(),RI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[E.p_,E.xZ],E.xZ]}),i})();const k=(0,N.A)((0,N.A)((0,N.A)({},Z),F),{modules:[]});k.registerModule("columnHeaders",Zn),k.registerModule("columns",{defaultOptions:()=>(0,y.X)(!0,{},Aa.defaultOptions(),{commonColumnSettings:{allowExporting:!0}}),controllers:Aa.controllers});var Os=Hl;const da={extend(i){Os=Os.inherit(i)},create:i=>new Os(i)};var Is,As,DI=null===(As=null===(Is=Ra.controllers)||void 0===Is?void 0:Is.data)||void 0===As?void 0:As.inherit({_getDataSourceAdapter:()=>da,_getSpecificDataSourceOption(){var i=this.option("dataSource");return i&&!Array.isArray(i)&&this.option("keyExpr")&&J.A.log("W1011"),this.callBase()}});k.registerModule("data",{defaultOptions:Ra.defaultOptions,controllers:{data:DI}}),k.registerModule("sorting",Xl),k.registerModule("rows",Fa),k.registerModule("contextMenu",fd),k.registerModule("errorHandling",bd),k.registerModule("gridView",Pi),k.registerModule("headerPanel",cr);var BI=D(5978);k.registerModulesOrder(["stateStoring","columns","selection","editorFactory","columnChooser","grouping","editing","editingRowBased","editingFormBased","editingCellBased","masterDetail","validating","adaptivity","data","virtualScrolling","columnHeaders","filterRow","headerPanel","headerFilter","sorting","search","rows","pager","columnsResizingReordering","contextMenu","keyboardNavigation","errorHandling","summary","columnFixing","export","gridView"]);var Ts=Rt.A.inherit({_activeStateUnit:".dx-row",_getDefaultOptions(){var i=this.callBase();return(0,I.__)(k.modules,function(){(0,v.Tn)(this.defaultOptions)&&(0,y.X)(!0,i,this.defaultOptions())}),i},_setDeprecatedOptions(){this.callBase(),(0,y.X)(this._deprecatedOptions,{useKeyboard:{since:"19.2",alias:"keyboardNavigation.enabled"},rowTemplate:{since:"21.2",message:'Use the "dataRowTemplate" option instead'},"columnChooser.allowSearch":{since:"23.1",message:'Use the "columnChooser.search.enabled" option instead'},"columnChooser.searchTimeout":{since:"23.1",message:'Use the "columnChooser.search.timeout" option instead'}})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{showRowLines:!0}},{device:()=>(0,de.Nt)(),options:{showRowLines:!0,showColumnLines:!1,headerFilter:{height:315},editing:{useIcons:!0},selection:{showCheckBoxesMode:"always"}}},{device:()=>ge.A.webkit,options:{loadingTimeout:30,loadPanel:{animation:{show:{easing:"cubic-bezier(1, 0, 1, 0)",duration:500,from:{opacity:0},to:{opacity:1}}}}}},{device:i=>"desktop"!==i.deviceType,options:{grouping:{expandMode:"rowClick"}}}])},_init(){this.callBase(),F.logHeaderFilterDeprecatedWarningIfNeed(this),k.processModules(this,k),k.callModuleItemsMethod(this,"init")},_clean:V.lQ,_optionChanged(i){k.callModuleItemsMethod(this,"optionChanged",[i]),i.handled||this.callBase(i)},_dimensionChanged(){this.updateDimensions(!0)},_visibilityChanged(i){i&&this.updateDimensions()},_initMarkup(){this.callBase.apply(this,arguments),this.getView("gridView").render(this.$element())},_renderContentImpl(){this.getView("gridView").update()},_renderContent(){var i=this;(0,V.zE)(()=>{i._renderContentImpl()})},_getTemplate(i){var t=i;return(0,v.Kg)(t)&&t.startsWith("#")&&(t=(0,_.A)(i),BI.v.warn("Specifying grid templates with the jQuery selector name is now deprecated. Use the DOM Node or the jQuery object that references this selector instead.")),this.callBase(t)},_dispose(){this.callBase(),k.callModuleItemsMethod(this,"dispose")},isReady(){return this.getController("data").isReady()},beginUpdate(){this.callBase(),k.callModuleItemsMethod(this,"beginUpdate")},endUpdate(){k.callModuleItemsMethod(this,"endUpdate"),this.callBase()},getController(i){return this._controllers[i]},getView(i){return this._views[i]},focus(i){this.getController("keyboardNavigation").focus(i)}});function Kt(i,t){for(var e=(0,Je.st)(t.group),a=[],n=0;n<i.length;n++)a.push([e[n].selector,"=",i[n]]);return t.filter&&a.push(t.filter),F.combineFilters(a)}function Sg(i,t,e){for(var a=(0,Je.st)(t.group),n=[],r=e?i.length-1:0;r<i.length;r++){for(var s=[],o=0;o<=r;o++){var{selector:l}=a[o];if(r!==o||null!==i[o]&&!1!==i[o]&&!0!==i[o]){var d=[l,r===o?a[o].desc?">":"<":"=",i[o]];s.push("<"===d[1]?[d,"or",[l,"=",null]]:d)}else!1===i[o]?s.push([l,"=",!!a[o].desc||null]):(i[o]?!a[o].desc:a[o].desc)?s.push([l,"<>",i[o]]):(s.push([l,"<>",null]),s.push([l,"=",null]))}n.push(k.combineFilters(s))}return n=k.combineFilters(n,"or"),k.combineFilters([n,t.filter])}Ts.registerModule=k.registerModule.bind(k),(0,le.A)("dxDataGrid",Ts),k.registerModule("stateStoring",pr),k.registerModule("selection",aa),k.registerModule("columnChooser",ka);var Og=ut.A.inherit(function(){var i=function(e,a){var{hash:n}=e;return n&&n[JSON.stringify(a)]},t=function(e,a){var o,n=0,r=e.length-1;if(!e.length)return 0;do{var s=r+n>>1;e[s].offset>a?r=s:n=s}while(r-n>1);for(o=n;o<=r&&!(e[o].offset>a);o++);return o};return{ctor(e){this._dataSource=e,this.reset()},reset(){this._groupsInfo=[],this._totalCountCorrection=0},totalCountCorrection(){return this._totalCountCorrection},updateTotalItemsCount(e){this._totalCountCorrection=e||0},isGroupItemCountable(e){return!this._isVirtualPaging()||!e.isContinuation},_isVirtualPaging(){var e=this._dataSource.option("scrolling.mode");return"virtual"===e||"infinite"===e},itemsCount(){var a=this._dataSource._dataSource,n=k.normalizeSortingInfo(a.group()||[]).length;return function s(o,l,d){var h=0;if(l)if(d)for(var u=0;u<l.length;u++)o.isGroupItemCountable(l[u])&&h++,h+=s(o,l[u].items,d-1);else h=l.length;return h}(this,a.items(),n)},foreachGroups(e,a,n,r,s){var o=this;return function l(d,h,u,c){var g=[];function m(T,B,M,L){var z=B&&T(B,M);return z&&L.push(z),z}for(var f=0;f<d.length;f++){if(c.push(d[f].data),!u&&!1===m(h,d[f].data,c,g))return!1;if(!d[f].data||d[f].data.isExpanded||n){var{children:x}=d[f],b=x.length&&l(x,h,u,c);if(b&&g.push(b),!1===b)return!1}if(u&&!1===m(h,d[f].data,c,g))return!1;(!d[f].data||d[f].data.offset!==d[f].offset)&&(r=!0),c.pop()}var S=s&&c.slice(0);return r&&w.z7.apply(_.A,g).always(()=>{o._updateGroupInfoOffsets(d,S)})}(o._groupsInfo,e,a,[])},_updateGroupInfoOffsets(e,a){a=a||[];for(var n=0;n<e.length;n++){var r=e[n];if(r.data&&r.data.offset!==r.offset){r.offset=r.data.offset;for(var s=0;s<a.length;s++)a[s].offset=r.offset}}e.sort((o,l)=>o.offset-l.offset)},findGroupInfo(e){for(var a,n=this._groupsInfo,r=0;n&&r<e.length;r++)n=(a=i(n,e[r]))&&a.children;return a&&a.data},addGroupInfo(e){for(var a,{path:n}=e,r=this._groupsInfo,s=0;s<n.length;s++){if(!(a=i(r,n[s]))){a={key:n[s],offset:e.offset,data:{offset:e.offset,isExpanded:!0,path:n.slice(0,s+1)},children:[]};var o=t(r,e.offset);r.splice(o,0,a),r.hash=r.hash||{},r.hash[JSON.stringify(a.key)]=a}s===n.length-1&&(a.data=e,a.offset!==e.offset&&this._updateGroupInfoOffsets(r)),r=a.children}},allowCollapseAll:()=>!0,refresh(e){var{storeLoadOptions:a}=e,n=(0,Je.st)(a.group||[]),r="_group"in this?(0,Je.st)(this._group||[]):n,s=Math.min(r.length,n.length);this._group=a.group;for(var o=0;o<s;o++)if(r[o].selector!==n[o].selector){s=o;break}s?function l(d,h,u){for(var c=0;c<d.length;c++)h+1>=u?d[c].children=[]:l(d[c].children,h+1,u)}(this._groupsInfo,0,s):this.reset()},handleDataLoading(){},handleDataLoaded(e,a){a(e)},handleDataLoadedCore(e,a){a(e)}}}());function Rs(i,t,e,a){if(a=a||0,t>1&&e>0){var n=i-Math.floor(i/t)*t||t;return(n+=e-a-2)<0&&(n+=t),Math.floor(n/(t-a-1))}return 0}var Ig=Og.inherit(function(){var i=function(u,c,g){return u.foreachGroups((m,f)=>{if(m.isExpanded)return c(m,f)},!0,!1,g,g)},t=function u(c,g,m,f,x,b,S){var T;if(f.items=f.items||[],f.paths=f.paths||[],f.count=f.count||0,f.lastCount=f.lastCount||0,m)for(var B=0;B<g.length;B++){var M=g[B];if(void 0!==M.items){if(x.push(M.key),b)T=!0;else{var L=c.findGroupInfo(x);T=L&&L.isExpanded}T?M.items?u(c,M.items,m-1,f,x,b,S):1===m&&M.count&&(!b||S)&&(f.items.push(M),f.paths.push(x.slice(0)),f.count+=f.lastCount,f.lastCount=M.count):(M.collapsedItems=M.items,M.items=null),x.pop()}}},e=function(u,c,g,m,f){var b,x=u.findGroupInfo(m);x?(g?x.count=c.count>0?c.count:c.items&&c.items.length||0:c.count=x.count||c.count,x.offset=f):(g&&(b=c.count>0?c.count:c.items.length),u.addGroupInfo({isExpanded:u._isGroupExpanded(m.length-1),path:m.slice(0),offset:f,count:b||0}))},a=function u(c,g,m,f,x,b,S){var H,B=(g.group?g.group.length:0)===f,L=0,z=0;if(x=x||0,b=b||[],g.remoteOperations.paging&&!S&&(L=0===x?g.skip||0:g.skips[x-1]||0),x>=f)return m.length;for(var K=0;K<m.length;K++){var W=m[K];if(W){if(b.push(W.key),!W.count&&!W.items||void 0===W.items||(e(c,W,B,b,L+K),(H=W.items?u(c,g,W.items,f,x+1,b,K):W.count||-1)<0))return-1;z+=H,b.pop()}}return z},n=function(u,c){return u&&u.length&&u[c]&&!!u[c].isExpanded},r=function(u,c,g){for(var m,f=g,x=0;x<u.length;x++)m=u[x].offset+1,x>0&&(m+=u[x-1].childrenTotalCount,c&&(m+=Rs(f,c,m,x-1)*x)),f+=m;return f};function s(u,c,g,m){var f=c.items[m],x=u.skips&&u.skips[g],b=u.takes&&u.takes[g],S=m===c.items.length-1,T=0===m,M=f.count>b+(T&&x||0);T&&void 0!==x&&(f.isContinuation=!0),S&&void 0!==b&&M&&(f.isContinuationOnNextPage=!0)}function o(u){return!Array.isArray(u)}function l(u){o(u.data)||(u.data=new w.cY)}function d(u,c,g,m,f,x){var S,T,B,M,L;c.isCustomLoading||(t(u,x,g,m={},[]),M=(B=g)-1,L=(S=c).group?S.group.length:0,(T=m).skip=S.skips&&S.skips[M],S.takes&&void 0!==S.takes[M]&&(T.take=L===B&&T.count?T.count-(T.skip||0):0,T.take+=S.takes[M])),m.paths.length&&(c.group?c.group.length:0)-g>0?(l(c),function(S,T,B,M,L,z){var H=T.group||[],K=H[L+1],W=[];(0,I.__)(B.paths,j=>{var oe,ee={requireTotalCount:!1,requireGroupCount:!0,group:[K],groupSummary:T.storeLoadOptions.groupSummary,filter:Kt(B.paths[j],{filter:T.storeLoadOptions.filter,group:H}),select:T.storeLoadOptions.select,langParams:null===(oe=T.storeLoadOptions)||void 0===oe?void 0:oe.langParams};0===j&&(ee.skip=B.skip||0),j===B.paths.length-1&&(ee.take=B.take);var fe=0===ee.take?[]:S._dataSource.loadFromStore(ee);(0,w.z7)(fe).done(Te=>{var wn=B.items[j];s(T,B,L,j),wn.items=Te}),W.push(fe)}),w.z7.apply(null,W).done(()=>{a(S,T,z,M+1),d(S,T,M+1,B,L+1,z)})}(u,c,m,g,f,x)):m.paths.length&&c.storeLoadOptions.group?(l(c),function(S,T,B,M){var L=[],z=T.group||[];(0,I.__)(B.paths,(j,oe)=>{L.push(Kt(oe,{group:T.isCustomLoading?T.storeLoadOptions.group:z}))});var{filter:H}=T.storeLoadOptions;T.storeLoadOptions.isLoadingAll||(H=k.combineFilters([H,k.combineFilters(L,"or")]));var K=(0,y.X)({},T.storeLoadOptions,{requireTotalCount:!1,requireGroupCount:!1,group:null,sort:z.concat(k.normalizeSortingInfo(T.storeLoadOptions.sort||[])),filter:H}),W=S._dataSource.isLastLevelGroupItemsPagingLocal();W||(K.skip=B.skip,K.take=B.take),(0,w.z7)(0===B.take?[]:S._dataSource.loadFromStore(K)).done(j=>{W&&(j=S._dataSource.sortLastLevelGroupItems(j,z,B.paths),j=B.skip?j.slice(B.skip):j,j=B.take?j.slice(0,B.take):j),(0,I.__)(B.items,(oe,ee)=>{var Te=j.splice(0,ee.count-(0===oe&&B.skip||0));s(T,B,z.length-1,oe),ee.items=Te}),T.data.resolve(M)}).fail(T.data.reject)}(u,c,m,x)):o(c.data)&&c.data.resolve(x)}var h=function(u,c){var g=new w.cY,m=!(!c.group||!c.group.length),f=(0,y.X)({skip:0,take:1,requireGroupCount:m,requireTotalCount:!m},c,{group:m?c.group:null});return u.load(f).done((x,b)=>{var S=b&&(m?b.groupCount:b.totalCount);isFinite(S)?g.resolve(S):g.reject(an.sO.Error(m?"E4022":"E4021"))}).fail(g.reject.bind(g)),g};return{updateTotalItemsCount(u){var c=0,g=u.extra&&u.extra.totalCount||0,m=u.extra&&u.extra.groupCount||0,f=this._dataSource.pageSize(),x=this._isVirtualPaging();i(this,b=>{b.childrenTotalCount=0}),i(this,(b,S)=>{var T=r(S,x?0:f,c),B=b.count+b.childrenTotalCount;x||(B+=Rs(T,f,B,S.length-1)),S[S.length-2]?S[S.length-2].childrenTotalCount+=B:c+=B}),this.callBase(c-g+m)},_isGroupExpanded(u){var c=this._dataSource.group();return n(c,u)},_updatePagingOptions(u,c){var g=this._isVirtualPaging(),m=this._dataSource.pageSize(),f=[],x=[],b=0,S=0;u.take&&(i(this,T=>{T.childrenTotalCount=0,T.skipChildrenTotalCount=0}),i(this,(T,B)=>{var M,L=0,z=0,H=r(B,g?0:m,S),K=0,W=0,j=T.count+T.childrenTotalCount,oe=j;c&&c(T,H);var ee=u.skip-H;H<=u.skip+u.take&&j&&(M=u.take,g||(j+=(K=Rs(H,m,j,B.length-1))*B.length,oe+=K,m&&ee>=0&&(L=B.length,z=B.length-1,W=Math.floor(ee/m))),ee>=0?(H+j>u.skip&&f.unshift(ee-W*L-T.skipChildrenTotalCount),H+j>=u.skip+M&&x.unshift(M-L-T.childrenTotalCount+T.skipChildrenTotalCount)):H+j>=u.skip+M&&x.unshift(M+ee-T.childrenTotalCount)),H<=u.skip&&(B[B.length-2]?B[B.length-2].skipChildrenTotalCount+=Math.min(oe,ee+1-W*z):b+=Math.min(oe,ee+1)),H<=u.skip+M&&(j=Math.min(oe,ee+M-(W+1)*z),B[B.length-2]?B[B.length-2].childrenTotalCount+=j:S+=j)}),u.skip-=b,u.take-=S-b),u.skips=f,u.takes=x},changeRowExpand(u){var c=this.findGroupInfo(u),g=this._dataSource,m=g.remoteOperations().groupPaging,f=k.normalizeSortingInfo(g.group());return c?(c.isExpanded=!c.isExpanded,m&&c.isExpanded&&u.length<f.length?h(g,{filter:Kt(u,{filter:g.lastLoadOptions().filter,group:g.group()}),group:[f[u.length]],select:g.select()}).done(x=>{c.count=x}):(new w.cY).resolve()):(new w.cY).reject()},handleDataLoading(u){var{storeLoadOptions:c}=u,g=k.normalizeSortingInfo(c.group||u.loadOptions.group);if(!u.isCustomLoading&&g.length){if(u.remoteOperations.grouping){var m=this._dataSource.remoteOperations().paging;c.group=k.normalizeSortingInfo(c.group),c.group.forEach((f,x)=>{f.isExpanded=!(m&&x===c.group.length-1)})}u.group=u.group||g,u.remoteOperations.paging?(u.skip=c.skip,u.take=c.take,c.requireGroupCount=!0,c.group=g.slice(0,1),this._updatePagingOptions(u),c.skip=u.skip,c.take=u.take):(u.skip=u.loadOptions.skip,u.take=u.loadOptions.take,this._updatePagingOptions(u))}},handleDataLoadedCore(u,c){var f,g=k.normalizeSortingInfo(u.storeLoadOptions.group||u.loadOptions.group).length,m=u.group?u.group.length:0,x={};if(u.isCustomLoading)c(u),t(this,u.data,g,x,[],u.isCustomLoading,u.storeLoadOptions.isLoadingAll);else{if(u.remoteOperations.paging||this.foreachGroups(b=>{b.count=0}),(f=a(this,u,u.data,g))<0)return void(u.data=(new w.cY).reject(J.A.Error("E1037")));if(u.remoteOperations.paging||g&&u.extra&&u.loadOptions.requireTotalCount&&(u.extra.totalCount=f,u.extra.groupCount=u.data.length),m&&u.storeLoadOptions.requireGroupCount&&!isFinite(u.extra.groupCount))return void(u.data=(new w.cY).reject(an.sO.Error("E4022")));this.updateTotalItemsCount(u),u.remoteOperations.paging||(this._updatePagingOptions(u),u.lastLoadOptions.skips=u.skips,u.lastLoadOptions.takes=u.takes),c(u),u.remoteOperations.paging||this._processPaging(u,g)}d(this,u,g,x,0,u.data)},_processSkips(u,c,g){if(g){var m=u[0],f=c[0],x=m&&m.items;void 0!==f&&(m.isContinuation=!0,x&&(m.items=x.slice(f),this._processSkips(m.items,c.slice(1),g-1)))}},_processTakes(u,c,g,m,f){if(m&&u){f=f||[];var x=u[u.length-1],b=x&&x.items,S=g[0];x&&(void 0!==S&&(x.count-(x.isContinuation&&c[0]||0)||b.length)>S&&(x.isContinuationOnNextPage=!0,f.forEach(M=>{M.isContinuationOnNextPage=!0}),b&&(b=b.slice(0,S),x.items=b)),f.push(x),this._processTakes(b,c.slice(1),g.slice(1),m-1,f))}},_processPaging(u,c){this._processSkips(u.data,u.skips,c),this._processTakes(u.data,u.skips,u.takes,c)},isLastLevelGroupItemsPagingLocal:()=>!1,sortLastLevelGroupItems:u=>u,refresh(u,c){var S,T,g=this,m=g._dataSource,{storeLoadOptions:f}=u,x=u.group||u.storeLoadOptions.group,b=k.normalizeSortingInfo(g._group);function B(M,L){L.length===T+1&&(M.isExpanded=S)}for(T=0;T<b.length;T++)S=n(x,T),n(g._group,T)!==S&&g.foreachGroups(B);if(g.callBase.apply(this,arguments),x&&u.remoteOperations.paging&&c.reload)return i(g,M=>{var L=h(m,{filter:Kt(M.path,{filter:f.filter,group:x}),group:x.slice(M.path.length),select:f.select}),z=h(m,{filter:Sg(M.path,{filter:f.filter,group:x},!0),group:x.slice(M.path.length-1,M.path.length),select:f.select});return(0,w.z7)(z,L).done((H,K)=>{H=parseInt(H.length?H[0]:H),K=parseInt(K.length?K[0]:K),M.offset=H,M.count!==K&&(M.count=K,g.updateTotalItemsCount(u))})},!0)}}}()),Ds=function(i,t){var e=new w.cY,a=(0,y.X)({skip:0,take:1,requireTotalCount:!0},t);return i.load(a).done((n,r)=>{e.resolve(r&&r.totalCount)}).fail(e.reject.bind(e)),e},Ag=Og.inherit(function(){var i=function(r,s,o){return r.foreachGroups(l=>{if(!l.isExpanded)return s(l)},!1,!1,o,!0)},t=function(r,s){var o=0,l=s||0;return s&&(i(r,d=>{if(d.offset-o>=s)return!1;o+=d.count-1}),l+=o),l},e=function(r,s){if(r.length!==s.length)return!1;for(var o=0;o<r.length;o++)if(!(0,Je.t7)(null,r[o],s[o]))return!1;return!0},a=function r(s,o,l,d,h){if(o){for(var u=0;u<o.length;u++){var c=o[u];if("key"in c&&void 0!==c.items){l.push(c.key),h&&e(h.path,l)&&!c.isContinuation&&(h.offset=d);var g=s.findGroupInfo(l);g&&!c.isContinuation&&(g.offset=d),g&&!g.isExpanded?d+=g.count:d=r(s,c.items,l,d,h),l.pop()}else d++}return d}},n=function r(s,o){var l=s.count||s.items.length;if(!s.count&&o>1){l=0;for(var d=0;d<s.items.length;d++)l+=r(s.items[d],o-1)}return l};return{handleDataLoading(r){var h,{storeLoadOptions:s}=r,o=[],l=0,d=!1,{group:u}=r.loadOptions,c=0;if(function(m,f){if(f.group){var x=k.normalizeSortingInfo(f.group),b=k.normalizeSortingInfo(m.sort);m.sort=$t.A.arrangeSortingInfo(x,b),delete f.group}}(s,r.loadOptions),r.group=r.group||u,!r.isCustomLoading){var g=(0,y.X)({},s);g.skip=t(this,s.skip),g.skip&&g.take&&u&&(g.skip--,g.take++,d=!0),g.take&&u&&(h=g.take,g.take++),i(this,m=>{if(m.offset>=g.skip+g.take+c)return!1;m.offset>=g.skip+c&&m.count&&(c+=m.count-1,o.push(m),l+=m.count)}),(0,I.__)(o,function(){g.filter=function(m,f,x){for(var b=k.normalizeSortingInfo(x||f.group),S=[],T=0;T<m.length;T++){for(var B=[],M=0;M<=T;M++)B.push([b[M].selector,T===M?"<>":"=",m[M]]);S.push(k.combineFilters(B))}return S=k.combineFilters(S,"or"),k.combineFilters([S,f.filter])}(this.path,g,u)}),r.storeLoadOptions=g,r.collapsedGroups=o,r.collapsedItemsCount=l,r.skip=g.skip||0,r.skipFirstItem=d,r.take=h}},handleDataLoaded(r,s){var{collapsedGroups:o}=r,l=k.normalizeSortingInfo(r.group),d=l.length;function h(m,f,x,b,S){if(m&&f.length&&x.length){var T,B,M=(0,q.ao)(f[0],!0);for(B=0;B<m.length&&(T=(0,q.ao)(m[B].key,!0),!(S>=b.offset||M===T));B++)S+=n(m[B],x.length);(!m.length||M!==T)&&m.splice(B,0,{key:f[0],items:[],count:1===f.length?b.count:void 0}),h(m[B].items,f.slice(1),x.slice(1),b,S)}}if(r.collapsedItemsCount&&r.extra&&r.extra.totalCount>=0&&(r.extra._totalCountWasIncreasedByCollapsedItems||(r.extra.totalCount+=r.collapsedItemsCount,r.extra._totalCountWasIncreasedByCollapsedItems=!0)),s(r),d){var{data:u}=r,c=(0,Le.A)(u);if($t.A.multiLevelGroup(c,l).enumerate().done(m=>{u=m}),o)for(var g=0;g<o.length;g++)h(u,o[g].path,l,o[g],r.skip);r.isCustomLoading||function m(f,x,b,S,T,B){for(var M=0,L=!1,z=0;z<x.length;z++){var H=x[z];if(void 0!==H.items){b.push(H.key);var K=f.findGroupInfo(b);if(K&&!K.isExpanded)H.collapsedItems=H.items,H.items=null,S+=K.count,--B<0&&M++,T&&(L=!0);else if(H.items){var W=m(f,H.items,b,S,T,B);T&&(W.offset-S>1?H.isContinuation=!0:L=!0),S=W.offset,(B=W.take)<0&&(H.items.length?H.isContinuationOnNextPage=!0:M++)}b.pop()}else T&&(L=!0),S++,--B<0&&M++;T=!1}return L&&x.splice(0,1),M&&x.splice(-M,M),{offset:S,take:B}}(this,u,[],r.skip,r.skipFirstItem,r.take),r.data=u}},isGroupItemCountable:r=>null===r.items,updateTotalItemsCount(){var r=0;i(this,s=>{s.count&&(r-=s.count-1)}),this.callBase(r)},changeRowExpand(r){var c,s=this,o=s._dataSource,l=o.beginPageIndex?o.beginPageIndex():o.pageIndex(),d=o.items(),h=t(s,l*o.pageSize()),u=s.findGroupInfo(r);return c=u&&!u.isExpanded?(new w.cY).resolve(u.count):Ds(o,{filter:Kt(r,{filter:o.filter(),group:o.group()})}),(0,w.z7)(c).done(g=>{g=parseInt(g.length?g[0]:g),u?(a(s,d,[],h),u.isExpanded=!u.isExpanded,u.count=g):(a(s,d,[],h,u={offset:-1,count:g,path:r,isExpanded:!1}),u.offset>=0&&s.addGroupInfo(u)),s.updateTotalItemsCount()}).fail(function(){o._eventsStrategy.fireEvent("loadError",arguments)})},allowCollapseAll:()=>!1,refresh(r,s){var o=this,{storeLoadOptions:l}=r,d=o._dataSource;if(this.callBase.apply(this,arguments),s.reload)return i(o,h=>{var u=Ds(d,{filter:Kt(h.path,l)}),c=Ds(d,{filter:Sg(h.path,l)});return(0,w.z7)(c,u).done((g,m)=>{g=parseInt(g.length?g[0]:g),m=parseInt(m.length?m[0]:m),h.offset=g,h.count!==m&&(h.count=m,o.updateTotalItemsCount())})},!0)}}}()),Bs="dx-datagrid-group-panel",xn="dx-group-panel-item",Tg="dx-toolbar-label",zI={init(){this.callBase.apply(this,arguments),this._initGroupingHelper()},_initGroupingHelper(i){var t=this._grouping,e=this.option("grouping.autoExpandAll"),a=this.option("focusedRowEnabled"),n=i?i.remoteOperations:this.remoteOperations();!(n.filtering&&n.sorting&&n.paging)||n.grouping||!e&&a?(!t||t instanceof Ag)&&(this._grouping=new Ig(this)):(!t||t instanceof Ig)&&(this._grouping=new Ag(this))},totalItemsCount(){var i=this.callBase();return i>0&&this._dataSource.group()&&this._dataSource.requireTotalCount()?i+this._grouping.totalCountCorrection():i},itemsCount(){return this._dataSource.group()?this._grouping.itemsCount()||0:this.callBase.apply(this,arguments)},allowCollapseAll(){return this._grouping.allowCollapseAll()},isGroupItemCountable(i){return this._grouping.isGroupItemCountable(i)},isRowExpanded(i){var t=this._grouping.findGroupInfo(i);return t?t.isExpanded:!this._grouping.allowCollapseAll()},collapseAll(i){return this._collapseExpandAll(i,!1)},expandAll(i){return this._collapseExpandAll(i,!0)},_collapseExpandAll(i,t){var e=this._dataSource,a=e.group(),n=k.normalizeSortingInfo(a||[]);if(n.length){for(var r=0;r<n.length;r++)void 0===i||i===r?n[r].isExpanded=t:a&&a[r]&&(n[r].isExpanded=a[r].isExpanded);e.group(n),this._grouping.foreachGroups((s,o)=>{(void 0===i||i===o.length-1)&&(s.isExpanded=t)},!1,!0),this.resetPagesCache()}return!0},refresh(){return this.callBase.apply(this,arguments),this._grouping.refresh.apply(this._grouping,arguments)},changeRowExpand(i){var t=this._dataSource;if(t.group())return t.beginLoading(),this._lastLoadOptions&&(this._lastLoadOptions.groupExpand=!0),this._changeRowExpandCore(i).always(()=>{t.endLoading()})},_changeRowExpandCore(i){return this._grouping.changeRowExpand(i)},_hasGroupLevelsExpandState(i,t){if(i&&Array.isArray(i))for(var e=0;e<i.length;e++)if(i[e].isExpanded===t)return!0},_customizeRemoteOperations(i,t){var{remoteOperations:e}=i;i.storeLoadOptions.group?(e.grouping&&!i.isCustomLoading&&(!e.groupPaging||this._hasGroupLevelsExpandState(i.storeLoadOptions.group,!0))&&(e.paging=!1),!e.grouping&&(!e.sorting||!e.filtering||i.isCustomLoading||this._hasGroupLevelsExpandState(i.storeLoadOptions.group,!1))&&(e.paging=!1)):!i.isCustomLoading&&e.paging&&t.grouping&&this.resetCache(),this.callBase.apply(this,arguments)},_handleDataLoading(i){return this.callBase(i),this._initGroupingHelper(i),this._grouping.handleDataLoading(i)},_handleDataLoaded(i){return this._grouping.handleDataLoaded(i,this.callBase.bind(this))},_handleDataLoadedCore(i){return this._grouping.handleDataLoadedCore(i,this.callBase.bind(this))}};da.extend(zI);var KI={init(){this.callBase(),this.createAction("onRowExpanding"),this.createAction("onRowExpanded"),this.createAction("onRowCollapsing"),this.createAction("onRowCollapsed")},_beforeProcessItems(i){var t=this._columnsController.getGroupColumns();return(i=this.callBase(i)).length&&t.length&&(i=this._processGroupItems(i,t.length)),i},_processItem(i,t){return(0,v.O9)(i.groupIndex)&&(0,v.Kg)(i.rowType)&&0===i.rowType.indexOf("group")?(i=this._processGroupItem(i,t),t.dataIndex=0):i=this.callBase.apply(this,arguments),i},_processGroupItem:i=>i,_processGroupItems(i,t,e){var a=this._columnsController.getGroupColumns(),n=a[a.length-t];if(!e){var r=this.option("scrolling.mode");e={collectContinuationItems:"virtual"!==r&&"infinite"!==r,resultItems:[],path:[],values:[]}}var{resultItems:s}=e;if(e.data&&(e.collectContinuationItems||!e.data.isContinuation)&&s.push({rowType:"group",data:e.data,groupIndex:e.path.length-1,isExpanded:!!e.data.items,key:e.path.slice(0),values:e.values.slice(0)}),i)if(0===t)s.push.apply(s,i);else for(var o=0;o<i.length;o++){var l=i[o];l&&"items"in l?(e.data=l,e.path.push(l.key),e.values.push(n&&n.deserializeValue&&!n.calculateDisplayValue?n.deserializeValue(l.key):l.key),this._processGroupItems(l.items,t-1,e),e.data=void 0,e.path.pop(),e.values.pop()):s.push(l)}return s},publicMethods(){return this.callBase().concat(["collapseAll","expandAll","isRowExpanded","expandRow","collapseRow"])},collapseAll(i){var t=this._dataSource;t&&t.collapseAll(i)&&(t.pageIndex(0),t.reload())},expandAll(i){var t=this._dataSource;t&&t.expandAll(i)&&(t.pageIndex(0),t.reload())},changeRowExpand(i){var t=this,e=t.isRowExpanded(i),a={key:i,expanded:e};return t.executeAction(e?"onRowCollapsing":"onRowExpanding",a),a.cancel?(new w.cY).resolve():(0,w.z7)(t._changeRowExpandCore(i)).done(()=>{a.expanded=!e,t.executeAction(e?"onRowCollapsed":"onRowExpanded",a)})},_changeRowExpandCore(i){var t=this,e=this._dataSource,a=new w.cY;return e?(0,w.z7)(e.changeRowExpand(i)).done(()=>{t.load().done(a.resolve).fail(a.reject)}).fail(a.reject):a.resolve(),a},isRowExpanded(i){var t=this._dataSource;return t&&t.isRowExpanded(i)},expandRow(i){return this.isRowExpanded(i)?(new w.cY).resolve():this.changeRowExpand(i)},collapseRow(i){return this.isRowExpanded(i)?this.changeRowExpand(i):(new w.cY).resolve()},optionChanged(i){"grouping"===i.name&&(i.name="dataSource"),this.callBase(i)}},Fs=function(i,t){var e=this._columnsController;switch(t.itemData.value){case"group":var a=e._dataSource.group()||[];e.columnOption(i.dataField,"groupIndex",a.length);break;case"ungroup":e.columnOption(i.dataField,"groupIndex",-1);break;case"ungroupAll":this.component.clearGrouping()}},Rg=i=>{var t=i?.visible;return"auto"===t?"desktop"===ne.A.current().deviceType:!!t},Dg=(i,t)=>Rg(i)&&!(!i?.allowColumnDragging||!t.allowGrouping),WI={_getToolbarItems(){var i=this.callBase();return this._appendGroupingItem(i)},_appendGroupingItem(i){if(this._isGroupPanelVisible()){var t=!1;i.push({template:()=>{var a=(0,_.A)("<div>").addClass(Bs);return this._updateGroupPanelContent(a),Oi("groupPanel",this,a,void 0,this._handleActionKeyDown.bind(this)),a},name:"groupPanel",onItemRendered:()=>{t&&this.renderCompleted.fire(),t=!0},location:"before",locateInMenu:"never",sortIndex:1}),this.updateToolbarDimensions()}return i},_handleActionKeyDown(i){var{event:t}=i,e=(0,_.A)(t.target),a=e.closest(".".concat(xn)).index(),n=this._columnsController.getGroupColumns()[a],r=n&&n.index;e.is(".dx-header-filter")?this.getController("headerFilter").showHeaderFilterMenu(r,!0):this._processGroupItemAction(r),t.preventDefault()},_isGroupPanelVisible(){return Rg(this.option("groupPanel"))},_renderGroupPanelItems(i,t){var e=this;i.empty(),(0,I.__)(t,(a,n)=>{e._createGroupPanelItem(i,n)}),zn(this)},_createGroupPanelItem(i,t){var e=(0,_.A)("<div>").addClass(t.cssClass).addClass(xn).data("columnData",t).appendTo(i).text(t.caption);return function Sv(i,t){i.option("useLegacyKeyboardnavigation")||t.attr("tabindex",i.option("tabindex")||0)}(this,e),e},_columnOptionChanged(i){if(!this._requireReady&&!k.checkChanges(i.optionNames,["width","visibleWidth"])){var t=this.element(),e=t&&t.find(".".concat(Bs));e&&e.length&&(this._updateGroupPanelContent(e),this.updateToolbarDimensions(),this.renderCompleted.fire())}this.callBase()},_updateGroupPanelContent(i){var t=this.getController("columns").getGroupColumns(),e=this.option("groupPanel");this._renderGroupPanelItems(i,t),e.allowColumnDragging&&!t.length&&((0,_.A)("<div>").addClass("dx-group-panel-message").text(e.emptyPanelText).appendTo(i),i.closest(".".concat("dx-toolbar-item")).addClass(Tg),i.closest(".".concat(Tg)).css("maxWidth","none"))},allowDragging(i){var t=this.option("groupPanel");return Dg(t,i)},getColumnElements(){var i=this.element();return i&&i.find(".".concat(xn))},getColumns(){return this.getController("columns").getGroupColumns()},getBoundingRect(){var i=this.element();if(i&&i.find(".".concat(Bs)).length){var t=i.offset();return{top:t.top,bottom:t.top+(0,R.Oq)(i)}}return null},getName:()=>"group",getContextMenuItems(i){var a,t=this.option("grouping.contextMenuEnabled"),e=(0,_.A)(i.targetElement).closest(".".concat(xn));if(e.length&&(i.column=e.data("columnData")),t&&i.column){var{column:n}=i;if(!(0,v.O9)(n.allowGrouping)||n.allowGrouping){var s=(0,v.O9)(n.groupIndex)&&n.groupIndex>-1,o=this.option("grouping.texts"),l=Fs.bind(this,n);a=[{text:o.ungroup,value:"ungroup",disabled:!s,onItemClick:l},{text:o.ungroupAll,value:"ungroupAll",onItemClick:l}]}}return a},isVisible(){return this.callBase()||this._isGroupPanelVisible()},hasGroupedColumns(){return this._isGroupPanelVisible()&&!!this.getColumns().length},optionChanged(i){"groupPanel"===i.name?(this._invalidate(),i.handled=!0):this.callBase(i)}},GI={getContextMenuItems(i){var e;if(this.option("grouping.contextMenuEnabled")&&i.row&&"group"===i.row.rowType){var n=this._columnsController.columnOption("groupIndex:".concat(i.row.groupIndex));if(n&&n.allowGrouping){var r=this.option("grouping.texts"),s=Fs.bind(this,n);(e=[]).push({text:r.ungroup,value:"ungroup",onItemClick:s},{text:r.ungroupAll,value:"ungroupAll",onItemClick:s})}}return e},_rowClick(i){var t=this.option("grouping.expandMode"),a="infinite"!==this.option("scrolling.mode")&&"rowClick"===t&&(0,_.A)(i.event.target).closest(".".concat("dx-group-row")).length,n=(0,_.A)(i.event.target).closest(".".concat("dx-datagrid-expand")).length;(a||n)&&this._changeGroupRowState(i),this.callBase(i)},_changeGroupRowState(i){var t=this.getController("data"),e=t.items()[i.rowIndex],a=this._columnsController.columnOption("groupIndex:".concat(e.groupIndex),"allowCollapsing");("data"===e.rowType||"group"===e.rowType&&!1!==a)&&(t.changeRowExpand(e.key,!0),i.event.preventDefault(),i.handled=!0)}},UI={getContextMenuItems(i){var t=this.option("grouping.contextMenuEnabled"),e=this.callBase(i);if(t&&i.row&&("header"===i.row.rowType||"detailAdaptive"===i.row.rowType)){var{column:a}=i;if(!a.command&&(!(0,v.O9)(a.allowGrouping)||a.allowGrouping)){var n=this.option("grouping.texts"),r=(0,v.O9)(a.groupIndex)&&a.groupIndex>-1,s=Fs.bind(this,a);(e=e||[]).push({text:n.groupByThisColumn,value:"group",beginGroup:!0,disabled:r,onItemClick:s}),a.showWhenGrouped&&e.push({text:n.ungroup,value:"ungroup",disabled:!r,onItemClick:s}),e.push({text:n.ungroupAll,value:"ungroupAll",onItemClick:s})}}return e},allowDragging(i){var t=this.option("groupPanel");return Dg(t,i)||this.callBase(i)}};function Ms(i,t,e,a){var n=0;if(i<t)for(;n<e.items.length;n++)Ms(i+1,t,e.items[n],a);i===t&&a(e)}function bn(i,t){var e;if("map"in i)return i.map(t);var a=new Array(i.length);for(e in i)a[e]=t(i[e],e);return a}function XI(i){return i===Je.zL.count}function Bg(i){var t=(0,q.Hz)(i.selector),e=!("skipEmptyValues"in i)||i.skipEmptyValues,{aggregator:a}=i;if("string"==typeof a&&!(a=Je.zL[a]))throw an.sO.Error("E4001",i.aggregator);return{selector:t,aggregator:a,skipEmptyValues:e}}k.registerModule("grouping",{defaultOptions:()=>({grouping:{autoExpandAll:!0,allowCollapsing:!0,contextMenuEnabled:!1,expandMode:"buttonClick",texts:{groupContinuesMessage:A.A.format("dxDataGrid-groupContinuesMessage"),groupContinuedMessage:A.A.format("dxDataGrid-groupContinuedMessage"),groupByThisColumn:A.A.format("dxDataGrid-groupHeaderText"),ungroup:A.A.format("dxDataGrid-ungroupHeaderText"),ungroupAll:A.A.format("dxDataGrid-ungroupAllText")}},groupPanel:{visible:!1,emptyPanelText:A.A.format("dxDataGrid-groupPanelEmptyText"),allowColumnDragging:!0}}),extenders:{controllers:{data:KI,columns:{_getExpandColumnOptions(){var i=this.callBase.apply(this,arguments);return i.cellTemplate=k.getExpandCellTemplate(),i}},editing:{_isProcessedItem:i=>(0,v.O9)(i.groupIndex)&&(0,v.Kg)(i.rowType)&&0===i.rowType.indexOf("group")}},views:{headerPanel:WI,rowsView:GI,columnHeadersView:UI}}}),k.registerModule("masterDetail",Nd),k.registerModule("editorFactory",Ud),k.registerModule("editing",(0,y.X)(!0,{},vt,{extenders:{controllers:{data:{_changeRowExpandCore(i){var t=this._editingController;return Array.isArray(i)&&t&&t.refresh(),this.callBase.apply(this,arguments)}}}}})),k.registerModule("editingRowBased",dh),k.registerModule("editingFormBased",uh),k.registerModule("editingCellBased",ch),k.registerModule("validating",hi),k.registerModule("virtualScrolling",nt),da.extend(nt.extenders.dataSourceAdapter),k.registerModule("filterRow",jh),k.registerModule("headerFilter",au),k.registerModule("filterSync",Ru),k.registerModule("filterBuilder",Hu),k.registerModule("filterPanel",zu),k.registerModule("search",Nc),k.registerModule("pager",oc),k.registerModule("columnsResizingReordering",xt),k.registerModule("keyboardNavigation",tg);const YI=ut.A.inherit({ctor(i){this._data=i.data,this._groupLevel=i.groupLevel||0,this._totalAggregates=bn(i.totalAggregates||[],Bg),this._groupAggregates=bn(i.groupAggregates||[],Bg),this._totals=[]},calculate(){this._totalAggregates.length&&this._calculateTotals(0,{items:this._data}),this._groupAggregates.length&&this._groupLevel>0&&this._calculateGroups({items:this._data})},totalAggregates(){return this._totals},_aggregate(i,t,e){for(var a=t.items?t.items.length:0,n=0;n<i.length;n++)if(XI(i[n].aggregator))e[n]=(e[n]||0)+a;else for(var r=0;r<a;r++)this._accumulate(n,i[n],e,t.items[r])},_calculateTotals(i,t){if(0===i&&(this._totals=this._seed(this._totalAggregates)),i===this._groupLevel)this._aggregate(this._totalAggregates,t,this._totals);else for(var e=0;e<t.items.length;e++)this._calculateTotals(i+1,t.items[e]);0===i&&(this._totals=this._finalize(this._totalAggregates,this._totals))},_calculateGroups(i){var t=this._groupLevel,e=t+1,a=this._seed.bind(this,this._groupAggregates),n=this._aggregate.bind(this,this._groupAggregates),r=this._finalize.bind(this,this._groupAggregates);function s(o){o.aggregates=a(e-1),e===t?n(o,o.aggregates):Ms(e,t,o,l=>{n(l,o.aggregates)}),o.aggregates=r(o.aggregates)}for(;--e>0;)Ms(0,e,i,s)},_seed:(i,t)=>bn(i,e=>{var{aggregator:a}=e;return"seed"in a?(0,v.Tn)(a.seed)?a.seed(t):a.seed:NaN}),_accumulate(i,t,e,a){var n=t.selector(a),{aggregator:r}=t,{skipEmptyValues:s}=t;s&&function $I(i){return i!=i||""===i||null==i}(n)||(e[i]=e[i]!=e[i]?n:r.step(e[i],n))},_finalize:(i,t)=>bn(i,(e,a)=>{var n=e.aggregator.finalize;return n?n(t[a]):t[a]})});var Vs="groupFooter",Fg="totalFooter",Mg=function(i,t){var e=(0,_.A)(i),{column:a}=t,{summaryItems:n}=t,r=[];if(!a.command&&n){for(var s=0;s<n.length;s++){var o=n[s],l=k.getSummaryText(o,t.summaryTexts);r.push((0,_.A)("<div>").css("textAlign",o.alignment||a.alignment).addClass("dx-datagrid-summary-item").addClass("dx-datagrid-text-content").addClass(o.cssClass).toggleClass("dx-datagrid-group-text-content","group"===t.rowType).text(l).attr("aria-label","".concat(a.caption," ").concat(l)))}e.append(r)}},Vg=function(i,t){var e=i.option("summary.texts")||{};return{totalItem:t.row,summaryItems:t.row.summaryCells[t.columnIndex],summaryTexts:e}},Ps=function(i){return i.summary||i.aggregates||[]},Ls=function(i){return i.option("summary.recalculateWhileEditing")},aA=Ri.inherit({_getRows(){return this._dataController.footerItems()},_getCellOptions(i){return(0,y.X)(this.callBase(i),Vg(this,i))},_renderCellContent(i,t){Mg(i,t),this.callBase.apply(this,arguments)},_renderCore(i){var t=!1,e=this._dataController.footerItems()[0];(!i||!i.columnIndices)&&(this.element().empty().addClass("dx-datagrid-total-footer").toggleClass("dx-datagrid-nowrap",!this.option("wordWrapEnabled")),t=!0),e&&e.summaryCells&&e.summaryCells.length&&(this._updateContent(this._renderTable({change:i}),i),t&&this._updateScrollLeftPosition())},_updateContent(i,t){return t&&"update"===t.changeType&&t.columnIndices?this.waitAsyncTemplates().done(()=>{var e=this.getTableElement().find(".dx-row"),a=i.find(".dx-row");this._updateCells(e,a,t.columnIndices[0])}):this.callBase.apply(this,arguments)},_rowClick(i){var t=this._dataController.footerItems()[i.rowIndex]||{};this.executeAction("onRowClick",(0,y.X)({},i,t))},_columnOptionChanged(i){var{optionNames:t}=i;i.changeTypes.grouping||(t.width||t.visibleWidth)&&this.callBase(i)},_handleDataChanged(i){var{changeType:t}=i;"update"===i.changeType&&i.repaintChangesOnly?i.totalColumnIndices?i.totalColumnIndices.length&&this.render(null,{changeType:"update",columnIndices:[i.totalColumnIndices]}):this.render():("refresh"===t||"append"===t||"prepend"===t)&&this.render()},_createRow(i){var t=this.callBase.apply(this,arguments);return i.rowType===Fg&&(t.addClass("dx-footer-row"),t.addClass("dx-cell-focus-disabled"),t.attr("tabindex",0)),t},getHeight(){return this.getElementHeight()},isVisible(){return!!this._dataController.footerItems().length}}),nA={init(){this.callBase.apply(this,arguments),this._totalAggregates=[],this._summaryGetter=V.lQ},summaryGetter(i){if(!arguments.length)return this._summaryGetter;(0,v.Tn)(i)&&(this._summaryGetter=i)},summary(i){if(!arguments.length)return this._summaryGetter();this._summaryGetter=function(){return i}},totalAggregates(){return this._totalAggregates},isLastLevelGroupItemsPagingLocal(){var i=this.summary(),t=i&&i.sortByGroups();return t&&t.length},sortLastLevelGroupItems(i,t,e){var a=$t.A.multiLevelGroup((0,Le.A)(i),t).toArray(),n=[];return e.forEach(r=>{!function s(o,l,d,h){h=h||[];for(var u=0;u<o.length;u++)h.push(o[u].key),1===l?d(h,o[u].items):s(o[u].items,l-1,d,h),h.pop()}(a,t.length,(s,o)=>{r.toString()===s.toString()&&(n=n.concat(o))})}),n}},rA=function(){var i=function(e,a,n,r){var s;if(Ls(e)){var o=e.getController("editing");if(o){var l=o.getInsertedData();l.length&&(n=function h(u,c,g){return g?h(u,c.map(m=>({items:[m]}),g-1)):u.concat(c)}(n,l,r));var d=o.getRemovedData();d.length&&(n=function h(u,c,g){return g?u.map(m=>{var f={},x=h(m.items||[],c,g-1);return Object.defineProperty(f,"aggregates",{get:()=>m.aggregates,set:b=>{m.aggregates=b}}),(0,y.X)(f,m,{items:x})}):u.filter(m=>c.indexOf(m)<0)}(n,d,r))}}return a&&(s=new YI({totalAggregates:a.totalAggregates,groupAggregates:a.groupAggregates,data:n,groupLevel:r})).calculate(),s?s.totalAggregates():[]},t=function(e,a,n){var r=n&&n.sortByGroups&&n.sortByGroups();return r&&r.length?function s(o,l,d){if(!o||!l.length)return o;var c,u=d[0];return l[0]&&u&&u.length&&(c=(0,Le.A)(o),(0,I.__)(u,function(g){c=0===g?c.sortBy(this.selector,this.desc):c.thenBy(this.selector,this.desc)}),c.enumerate().done(g=>{o=g})),l=l.slice(1),d=d.slice(1),l.length&&d.length&&(0,I.__)(o,function(){this.items=s(this.items,l,d)}),o}(e,a,r):e};return{_customizeRemoteOperations(e){var a=this.summary();a&&(e.remoteOperations.summary?(!e.isCustomLoading||e.storeLoadOptions.isLoadingAll)&&(e.storeLoadOptions.group&&(e.remoteOperations.grouping?e.storeLoadOptions.groupSummary=a.groupAggregates:a.groupAggregates.length&&(e.remoteOperations.paging=!1)),e.storeLoadOptions.totalSummary=a.totalAggregates):(a.totalAggregates.length||a.groupAggregates.length&&e.storeLoadOptions.group)&&(e.remoteOperations.paging=!1)),this.callBase.apply(this,arguments);var n=e.cachedData.extra;n&&n.summary&&!e.isCustomLoading&&(e.storeLoadOptions.totalSummary=void 0)},_handleDataLoadedCore(e){var a,n,r=(0,Je.st)(e.storeLoadOptions.group||e.loadOptions.group||[]),s=e.remoteOperations||{},o=this.summaryGetter()(s);if(!e.isCustomLoading||e.storeLoadOptions.isLoadingAll)if(s.summary)!s.paging&&r.length&&o&&(s.grouping||i(this,{groupAggregates:o.groupAggregates},e.data,r.length),e.data=t(e.data,r,o));else if(!s.paging&&o){var l=e.operationTypes||{};if(!Object.keys(l).some(u=>l[u])||null===(n=null===(a=e.cachedData)||void 0===a?void 0:a.extra)||void 0===n||!n.summary||r.length&&o.groupAggregates.length){var h=i(this,o,e.data,r.length);e.extra=(0,v.Qd)(e.extra)?e.extra:{},e.extra.summary=h,e.cachedData&&(e.cachedData.extra=e.extra)}e.data=t(e.data,r,o)}e.isCustomLoading||(this._totalAggregates=e.extra&&e.extra.summary||this._totalAggregates),this.callBase(e)}}}();da.extend(nA),da.extend(rA),k.registerModule("summary",{defaultOptions:()=>({summary:{groupItems:void 0,totalItems:void 0,calculateCustomSummary:void 0,skipEmptyValues:!0,recalculateWhileEditing:!1,texts:{sum:A.A.format("dxDataGrid-summarySum"),sumOtherColumn:A.A.format("dxDataGrid-summarySumOtherColumn"),min:A.A.format("dxDataGrid-summaryMin"),minOtherColumn:A.A.format("dxDataGrid-summaryMinOtherColumn"),max:A.A.format("dxDataGrid-summaryMax"),maxOtherColumn:A.A.format("dxDataGrid-summaryMaxOtherColumn"),avg:A.A.format("dxDataGrid-summaryAvg"),avgOtherColumn:A.A.format("dxDataGrid-summaryAvgOtherColumn"),count:A.A.format("dxDataGrid-summaryCount")}},sortByGroupSummaryInfo:void 0}),views:{footerView:aA},extenders:{controllers:{data:{_isDataColumn:i=>i&&(!(0,v.O9)(i.groupIndex)||i.showWhenGrouped),_isGroupFooterVisible(){for(var i=this.option("summary.groupItems")||[],t=0;t<i.length;t++){var e=i[t],a=this._columnsController.columnOption(e.showInColumn||e.column);if(e.showInGroupFooter&&this._isDataColumn(a))return!0}return!1},_processGroupItems(i,t,e){var a=e&&e.data,n=this.callBase.apply(this,arguments);return e&&(void 0===e.isGroupFooterVisible&&(e.isGroupFooterVisible=this._isGroupFooterVisible()),a&&a.items&&e.isGroupFooterVisible&&(e.collectContinuationItems||!a.isContinuationOnNextPage)&&n.push({rowType:Vs,key:e.path.slice(),data:a,groupIndex:e.path.length-1,values:[]})),n},_processGroupItem(i,t){var e=this;if(t.summaryGroupItems||(t.summaryGroupItems=e.option("summary.groupItems")||[]),"group"===i.rowType){var a=-1,n=-1;(0,I.__)(t.visibleColumns,function(r){i.groupIndex===this.groupIndex&&(a=this.index),r>0&&"expand"===t.visibleColumns[r-1].command&&"expand"!==this.command&&(n=this.index)}),i.summaryCells=this._calculateSummaryCells(t.summaryGroupItems,Ps(i.data),t.visibleColumns,(r,s)=>r.showInGroupFooter?-1:r.alignByColumn&&s&&!(0,v.O9)(s.groupIndex)&&s.index!==n?s.index:a,!0)}return i.rowType===Vs&&(i.summaryCells=this._calculateSummaryCells(t.summaryGroupItems,Ps(i.data),t.visibleColumns,(r,s)=>r.showInGroupFooter&&e._isDataColumn(s)?s.index:-1)),i},_calculateSummaryCells(i,t,e,a,n){var r=this,s=[],o={};return(0,I.__)(i,(l,d)=>{var h=r._columnsController.columnOption(d.column),u=d.showInColumn&&r._columnsController.columnOption(d.showInColumn)||h,c=a(d,u);if(c>=0){o[c]||(o[c]=[]);var m,g=t[l];g==g&&((0,v.O9)(d.valueFormat)?m=d.valueFormat:"count"!==d.summaryType&&(m=k.getFormatByDataType(h&&h.dataType)),o[c].push((0,y.X)({},d,{value:(0,v.Kg)(g)&&h&&h.deserializeValue?h.deserializeValue(g):g,valueFormat:m,columnCaption:h&&h.index!==c?h.caption:void 0})))}}),(0,v.RI)(o)||e.forEach((l,d)=>{var h=e[d-1];s.push(o[!n||"expand"!==h?.command&&"expand"!==l.command?l.index:h?.index]||[])}),s},_getSummaryCells(i,t){var e=this;return e._calculateSummaryCells(i,t,e._columnsController.getVisibleColumns(),(n,r)=>e._isDataColumn(r)?r.index:-1)},_updateItemsCore(i){var t,e=this._dataSource,a=this._footerItems,n=a&&a[0]&&a[0].summaryCells,r=this.option("summary.totalItems");if(this._footerItems=[],e&&r&&r.length){var s=e.totalAggregates();t=this._getSummaryCells(r,s),i&&i.repaintChangesOnly&&n&&(i.totalColumnIndices=t.map((o,l)=>JSON.stringify(o)!==JSON.stringify(n[l])?l:-1).filter(o=>o>=0)),t.length&&this._footerItems.push({rowType:Fg,summaryCells:t})}this.callBase(i)},_prepareUnsavedDataSelector(i){if(Ls(this)){var t=this.getController("editing");if(t)return function(e){return e=t.getUpdatedData(e),i(e)}}return i},_prepareAggregateSelector(i,t){return i=this._prepareUnsavedDataSelector(i),"avg"===t||"sum"===t?function(e){var a=i(e);return(0,v.O9)(a)?Number(a):a}:i},_getAggregates(i,t){var e=this,a=e.getController("columns"),n=e.option("summary.calculateCustomSummary"),r=e.option("summary.skipEmptyValues");return(0,I.Tj)(i||[],s=>{var o=a.columnOption(s.column),l=o&&o.calculateCellValue?o.calculateCellValue.bind(o):(0,q.Hz)(o?o.dataField:s.column),d=s.summaryType||"count",h=(0,v.O9)(s.skipEmptyValues)?s.skipEmptyValues:r;if(t)return{selector:s.column,summaryType:d};var u=e._prepareAggregateSelector(l,d);if("custom"===d){n||(J.A.log("E1026"),n=function(){});var c={component:e.component,name:s.name};n(c),c.summaryProcess="calculate",d={seed:g=>(c.summaryProcess="start",c.totalValue=void 0,c.groupIndex=g,delete c.value,n(c),c.totalValue),step:(g,m)=>(c.summaryProcess="calculate",c.totalValue=g,c.value=m,n(c),c.totalValue),finalize:g=>(c.summaryProcess="finalize",c.totalValue=g,delete c.value,n(c),c.totalValue)}}return{selector:u,aggregator:d,skipEmptyValues:h}})},_addSortInfo(i,t,e,a){if(t){var{groupIndex:n}=t;a=a||t.sortOrder,(0,v.O9)(n)&&(i[n]=i[n]||[],i[n].push({selector:e,desc:"desc"===a}))}},_findSummaryItem(i,t){var e=-1;return(0,v.O9)(t)&&(0,I.__)(i||[],function(a){if(this.name===t||a===t||this.summaryType===t||this.column===t||function(n){var{summaryType:r}=n,{column:s}=n;return r&&s&&"".concat(r,"_").concat(s)}(this)===t)return e=a,!1}),e},_getSummarySortByGroups(i,t){var e=this,a=e._columnsController,n=a.getGroupColumns(),r=[];if(t&&t.length)return(0,I.__)(i||[],function(){var{sortOrder:s}=this,{groupColumn:o}=this,l=e._findSummaryItem(t,this.summaryItem);if(!(l<0)){var d=function(h){return Ps(h)[l]};(0,v.O9)(o)?(o=a.columnOption(o),e._addSortInfo(r,o,d,s)):(0,I.__)(n,(h,u)=>{e._addSortInfo(r,u,d,s)})}}),r},_createDataSourceAdapterCore(i,t){var e=this,a=this.callBase(i,t);return a.summaryGetter(n=>e._getSummaryOptions(n||t)),a},_getSummaryOptions(i){var t=this,e=t.option("summary.groupItems"),a=t.option("summary.totalItems"),n=t.option("sortByGroupSummaryInfo"),r=t._getAggregates(e,i&&i.grouping&&i.summary),s=t._getAggregates(a,i&&i.summary);if(r.length||s.length)return{groupAggregates:r,totalAggregates:s,sortByGroups:function(){return t._getSummarySortByGroups(n,e)}}},publicMethods(){var i=this.callBase();return i.push("getTotalSummaryValue"),i},getTotalSummaryValue(i){var t=this._findSummaryItem(this.option("summary.totalItems"),i),e=this._dataSource.totalAggregates();if(e.length&&t>-1)return e[t]},optionChanged(i){("summary"===i.name||"sortByGroupSummaryInfo"===i.name)&&(i.name="dataSource"),this.callBase(i)},init(){this._footerItems=[],this.callBase()},footerItems(){return this._footerItems}},editing:{_refreshSummary(){Ls(this)&&!this.isSaving()&&this._dataController.refresh({load:!0,changesOnly:!0})},_addChange(i){var t=this.callBase.apply(this,arguments);return i.type&&this._refreshSummary(),t},_removeChange(){var i=this.callBase.apply(this,arguments);return this._refreshSummary(),i},cancelEditData(){var i=this.callBase.apply(this,arguments);return this._refreshSummary(),i}}},views:{rowsView:{_createRow(i){var t=this.callBase.apply(this,arguments);return i&&t.addClass(i.rowType===Vs?"dx-datagrid-group-footer":""),t},_renderCells(i,t){this.callBase.apply(this,arguments),"group"===t.row.rowType&&t.row.summaryCells&&t.row.summaryCells.length&&this._renderGroupSummaryCells(i,t)},_hasAlignByColumnSummaryItems:(i,t)=>!(0,v.O9)(t.columns[i].groupIndex)&&t.row.summaryCells[i].length,_getAlignByColumnCellCount(i,t){for(var e=0,a=1;a<i;a++)e=this._hasAlignByColumnSummaryItems(t.row.summaryCells.length-a,t)?a:e;return e},_renderGroupSummaryCells(i,t){var e=i.children().last(),a=Number(e.attr("colSpan"))||1,n=this._getAlignByColumnCellCount(a,t);this._renderGroupSummaryCellsCore(e,t,a,n)},_renderGroupSummaryCellsCore(i,t,e,a){if(a>0){i.attr("colSpan",e-a);for(var n=0;n<a;n++){var r=t.columns.length-a+n;this._renderCell(i.parent(),(0,y.X)({column:t.columns[r],columnIndex:this._getSummaryCellIndex(r,t.columns)},t))}}},_getSummaryCellIndex:i=>i,_getCellTemplate(i){return!i.column.command&&!(0,v.O9)(i.column.groupIndex)&&i.summaryItems&&i.summaryItems.length?Mg:this.callBase(i)},_getCellOptions(i){var t=this.callBase(i);return i.row.summaryCells?(0,y.X)(t,Vg(this,i)):t}}}}}),k.registerModule("columnFixing",wc),k.registerModule("adaptivity",Tc),k.registerModule("virtualColumns",ag);var sA=D(3798),ha="dx-buttongroup",oA=ha+"-wrapper",Pg=ha+"-item",lA=ha+"-first-item",dA=ha+"-last-item",Lg=Pg+"-has-width",En={contained:"dx-buttongroup-mode-contained",outlined:"dx-buttongroup-mode-outlined",text:"dx-buttongroup-mode-text"},uA=_a.A.inherit({_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new ga.U((i,t,e)=>{this._prepareItemStyles(i);var a=this.option("buttonTemplate");this._createComponent(i,_e.A,(0,y.X)({},e,t,this._getBasicButtonOptions(),{_templateData:this._hasCustomTemplate(a)?e:{},template:e.template||a}))},["text","type","icon","disabled","visible","hint"],this.option("integrationOptions.watchMethod"))})},_getBasicButtonOptions(){return{focusStateEnabled:!1,onClick:null,hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode")}},_getDefaultOptions:function(){return(0,y.X)(this.callBase(),{itemTemplateProperty:null})},_hasCustomTemplate(i){return(0,v.Tn)(i)||this.option("integrationOptions.templates")[i]},_selectedItemClass:()=>"dx-item-selected dx-state-selected",_prepareItemStyles(i){var t=i.data("dxItemIndex");0===t&&i.addClass(lA);var e=this.option("items");e&&t===e.length-1&&i.addClass(dA),i.addClass("dx-shape-standard")},_renderItemContent(i){return i.container=(0,_.A)(i.container).parent(),this.callBase(i)},_setAriaSelectionAttribute:function(i,t){this.setAria("pressed",t,i)},_renderItemContentByNode:function(i,t){return i.container=(0,_.A)(i.container.children().first()),this.callBase(i,t)},_focusTarget(){return this.$element().parent()},_keyboardEventBindingTarget(){return this._focusTarget()},_refreshContent(){this._prepareContent(),this._renderContent()},_itemClass:()=>Pg,_itemSelectHandler:function(i){"single"===this.option("selectionMode")&&this.isItemSelected(i.currentTarget)||this.callBase(i)}}),kg=Rt.A.inherit({_getDefaultOptions(){return(0,y.X)(this.callBase(),{hoverStateEnabled:!0,focusStateEnabled:!0,selectionMode:"single",selectedItems:[],selectedItemKeys:[],stylingMode:"contained",keyExpr:"text",items:[],buttonTemplate:"content",onSelectionChanged:null,onItemClick:null})},_init(){this.callBase(),this._createItemClickAction()},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initMarkup(){this.setAria("role","group"),this.$element().addClass(ha),this._renderStylingMode(),this._renderButtons(),this._syncSelectionOptions(),this.callBase()},_renderStylingMode(){var i,{stylingMode:t}=this.option();for(var e in En)this.$element().removeClass(En[e]);this.$element().addClass(null!==(i=En[t])&&void 0!==i?i:En.contained)},_fireSelectionChangeEvent:function(i,t){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:i,removedItems:t})},_renderButtons(){var i=(0,_.A)("<div>").addClass(oA).appendTo(this.$element()),t=this.option("selectedItems"),e={selectionMode:this.option("selectionMode"),items:this.option("items"),keyExpr:this.option("keyExpr"),buttonTemplate:this.option("buttonTemplate"),scrollingEnabled:!1,selectedItemKeys:this.option("selectedItemKeys"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode"),accessKey:this.option("accessKey"),tabIndex:this.option("tabIndex"),noDataText:"",selectionRequired:!1,onItemRendered:a=>{var n=this.option("width");(0,v.O9)(n)&&(0,_.A)(a.itemElement).addClass(Lg)},onSelectionChanged:a=>{this._syncSelectionOptions(),this._fireSelectionChangeEvent(a.addedItems,a.removedItems)},onItemClick:a=>{this._itemClickAction(a)}};(0,v.O9)(t)&&t.length&&(e.selectedItems=t),this._buttonsCollection=this._createComponent(i,uA,e)},_syncSelectionOptions(){this._setOptionWithoutOptionChange("selectedItems",this._buttonsCollection.option("selectedItems")),this._setOptionWithoutOptionChange("selectedItemKeys",this._buttonsCollection.option("selectedItemKeys"))},_optionChanged(i){switch(i.name){case"stylingMode":case"selectionMode":case"keyExpr":case"buttonTemplate":case"items":case"activeStateEnabled":case"focusStateEnabled":case"hoverStateEnabled":case"tabIndex":this._invalidate();break;case"selectedItemKeys":case"selectedItems":this._buttonsCollection.option(i.name,i.value);break;case"onItemClick":this._createItemClickAction();break;case"onSelectionChanged":break;case"width":this.callBase(i),this._buttonsCollection.itemElements().toggleClass(Lg,!!i.value);break;default:this.callBase(i)}}});(0,le.A)("dxButtonGroup",kg);const cA=kg;var ks=D(5154),Ng="dx-dropdownbutton",Hg="dx-dropdownbutton-action",zg="dx-dropdownbutton-toggle",xA=Rt.A.inherit({_getDefaultOptions(){return(0,y.X)(this.callBase(),{itemTemplate:"item",keyExpr:"this",displayExpr:void 0,selectedItem:null,selectedItemKey:null,stylingMode:"outlined",deferRendering:!0,noDataText:A.A.format("dxCollectionWidget-noDataText"),useSelectMode:!1,splitButton:!1,showArrowIcon:!0,text:"",type:"normal",icon:void 0,onButtonClick:null,onSelectionChanged:null,onItemClick:null,opened:!1,items:null,dataSource:null,focusStateEnabled:!0,hoverStateEnabled:!0,dropDownOptions:{},dropDownContentTemplate:"content",wrapItemText:!1,useItemTextAsTitle:!0,grouped:!1,groupTemplate:"group",buttonGroupOptions:{}})},_setOptionsByReference(){this.callBase(),(0,y.X)(this._optionsByReference,{selectedItem:!0})},_init(){this.callBase(),this._createItemClickAction(),this._createActionClickAction(),this._createSelectionChangedAction(),this._initDataSource(),this._compileKeyGetter(),this._compileDisplayGetter(),this._itemsToDataSource(this.option("items")),this._options.cache("buttonGroupOptions",this.option("buttonGroupOptions")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_initTemplates(){this._templateManager.addDefaultTemplates({content:new sA.l(i=>{var t=(0,_.A)(i.container),e=(0,_.A)("<div>").appendTo(t);this._list=this._createComponent(e,Ca.A,this._listOptions()),this._list.registerKeyHandler("escape",this._escHandler.bind(this)),this._list.registerKeyHandler("tab",this._escHandler.bind(this)),this._list.registerKeyHandler("leftArrow",this._escHandler.bind(this)),this._list.registerKeyHandler("rightArrow",this._escHandler.bind(this))})}),this.callBase()},_itemsToDataSource:function(i){this._dataSource||(this._dataSource=new Ii.q({store:new Ta.A({key:this._getKey(),data:i}),pageSize:0}))},_getKey:function(){var i,t=this.option("keyExpr"),e=null===(i=this._dataSource)||void 0===i?void 0:i.key();return!(0,v.O9)(e)||(0,v.O9)(t)&&"this"!==t?t:e},_compileKeyGetter(){this._keyGetter=(0,q.Hz)(this._getKey())},_compileDisplayGetter(){this._displayGetter=(0,q.Hz)(this.option("displayExpr"))},_initMarkup(){this.callBase(),this.$element().addClass(Ng),this._renderButtonGroup(),this._updateArrowClass(),(0,v.O9)(this.option("selectedItemKey"))&&this._loadSelectedItem().done(this._updateActionButton.bind(this))},_renderFocusTarget:V.lQ,_render(){(!this.option("deferRendering")||this.option("opened"))&&this._renderPopup(),this.callBase()},_renderContentImpl(){return this._popup&&this._renderPopupContent(),this.callBase()},_loadSelectedItem(){var i;null===(i=this._loadSingleDeferred)||void 0===i||i.reject();var t=new w.cY;if(this._list&&void 0!==this._lastSelectedItemData){var e=this.option("useSelectMode")?this._list.option("selectedItem"):this._lastSelectedItemData;return t.resolve(e)}this._lastSelectedItemData=void 0;var a=this.option("selectedItemKey");return this._loadSingle(this._getKey(),a).done(t.resolve).fail(()=>{t.resolve(null)}),this._loadSingleDeferred=t,t.promise()},_createActionClickAction(){this._actionClickAction=this._createActionByOption("onButtonClick")},_createSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged")},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_fireSelectionChangedAction(i){var{previousValue:t,value:e}=i;this._selectionChangedAction({item:e,previousItem:t})},_fireItemClickAction(i){var{event:t,itemElement:e,itemData:a}=i;return this._itemClickAction({event:t,itemElement:e,itemData:this._actionItem||a})},_actionButtonConfig(){var{icon:i,text:t,type:e}=this.option();return{text:t,icon:i,type:e,elementAttr:{class:Hg}}},_getButtonGroupItems(){var{splitButton:i,type:t}=this.option(),e=[];return e.push(this._actionButtonConfig()),i&&e.push({icon:"spindown",type:t,elementAttr:{class:zg}}),e},_buttonGroupItemClick(i){var{event:t,itemData:e}=i,a=e.elementAttr.class===Hg;e.elementAttr.class===zg?this.toggle():a&&(this._actionClickAction({event:t,selectedItem:this.option("selectedItem")}),this.option("splitButton")||this.toggle())},_buttonGroupOptions(){var{splitButton:i,showArrowIcon:t,focusStateEnabled:e,hoverStateEnabled:a,stylingMode:n,accessKey:r,tabIndex:s}=this.option(),o=i||!t?"content":(l,d)=>{var{text:h,icon:u}=l,c=(0,bt.N)(u),g=h?(0,_.A)("<span>").text(h).addClass("dx-button-text"):void 0,m=(0,bt.N)("spindown").addClass("dx-icon-right");(0,_.A)(d).append(c,g,m)};return(0,y.X)({items:this._getButtonGroupItems(),onItemClick:this._buttonGroupItemClick.bind(this),width:"100%",height:"100%",selectionMode:"none",onKeyboardHandled:l=>this._keyboardHandler(l),buttonTemplate:o,focusStateEnabled:e,hoverStateEnabled:a,stylingMode:n,accessKey:r,tabIndex:s},this._options.cache("buttonGroupOptions"))},_renderPopupContent(){var i=this._popup.$content(),t=this._getTemplateByOption("dropDownContentTemplate");return i.empty(),this._popupContentId="dx-"+new Pe.A,this.setAria("id",this._popupContentId,i),t.render({container:(0,Y.c)(i),model:this.option("items")||this._dataSource})},_popupOptions(){var i=this.option("rtlEnabled")?"right":"left";return(0,y.X)({dragEnabled:!1,focusStateEnabled:!1,deferRendering:this.option("deferRendering"),hideOnOutsideClick:t=>{var e=this.$element();return!(0,_.A)(t.target).closest(".".concat(Ng)).is(e)},showTitle:!1,animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},_ignoreFunctionValueDeprecation:!0,width:()=>(0,ks.v)(this.$element()),height:"auto",shading:!1,position:{of:this.$element(),collision:"flipfit",my:i+" top",at:i+" bottom"},_wrapperClassExternal:"dx-dropdowneditor-overlay"},this._options.cache("dropDownOptions"),{visible:this.option("opened")})},_listOptions(){var i=this.option("selectedItemKey"),t=this.option("useSelectMode");return{selectionMode:t?"single":"none",wrapItemText:this.option("wrapItemText"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:()=>this._fireContentReadyAction(),selectedItemKeys:(0,v.O9)(i)&&t?[i]:[],grouped:this.option("grouped"),groupTemplate:this.option("groupTemplate"),keyExpr:this._getKey(),noDataText:this.option("noDataText"),displayExpr:this.option("displayExpr"),itemTemplate:this.option("itemTemplate"),items:this.option("items"),dataSource:this._dataSource,onItemClick:e=>{this.option("useSelectMode")||(this._lastSelectedItemData=e.itemData),this.option("selectedItemKey",this._keyGetter(e.itemData)),!1!==this._fireItemClickAction(e)&&(this.toggle(!1),this._buttonGroup.focus())}}},_upDownKeyHandler(){return this._popup&&this._popup.option("visible")&&this._list?this._list.focus():this.open(),!0},_escHandler(){return this.close(),this._buttonGroup.focus(),!0},_tabHandler(){return this.close(),!0},_renderPopup(){var i=(0,_.A)("<div>");this.$element().append(i),this._popup=this._createComponent(i,ze.A,this._popupOptions()),this._popup.$content().addClass("dx-dropdownbutton-content"),this._popup.$wrapper().addClass("dx-dropdownbutton-popup-wrapper"),this._popup.on("hiding",this._popupHidingHandler.bind(this)),this._popup.on("showing",this._popupShowingHandler.bind(this)),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_popupHidingHandler(){this.option("opened",!1),this._updateAriaAttributes(!1)},_popupOptionChanged:function(i){var t=Rt.A.getOptionsFromContainer(i);this._setPopupOption(t);var e=Object.keys(t);(-1!==e.indexOf("width")||-1!==e.indexOf("height"))&&this._dimensionChanged()},_dimensionChanged:function(){void 0===(0,ks.b)(this.option("dropDownOptions.width"))&&this._setPopupOption("width",()=>(0,ks.v)(this.$element()))},_setPopupOption:function(i,t){this._setWidgetOption("_popup",arguments)},_popupShowingHandler(){this.option("opened",!0),this._updateAriaAttributes(!0)},_setElementAria(i){this.setAria({owns:i?this._popupContentId:void 0},this.$element())},_setButtonsAria(i){var t={expanded:i,haspopup:"listbox"},e={};this.option("text")||(e.label="dropdownbutton"),this._getButtons().each((a,n)=>{this.setAria(0===a?(0,N.A)({},e,t):t,(0,_.A)(n))})},_updateAriaAttributes(i){this._setElementAria(i),this._setButtonsAria(i)},_getButtons(){return this._buttonGroup.$element().find(".".concat("dx-button"))},_renderButtonGroup(){var i=this._buttonGroup&&this._buttonGroup.$element()||(0,_.A)("<div>");this._buttonGroup||this.$element().append(i),this._buttonGroup=this._createComponent(i,cA,this._buttonGroupOptions()),this._buttonGroup.registerKeyHandler("downArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("tab",this._tabHandler.bind(this)),this._buttonGroup.registerKeyHandler("upArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("escape",this._escHandler.bind(this)),this._bindInnerWidgetOptions(this._buttonGroup,"buttonGroupOptions"),this._updateAriaAttributes(this.option("opened"))},_updateArrowClass(){var i=this.option("splitButton")||this.option("showArrowIcon");this.$element().toggleClass("dx-dropdownbutton-has-arrow",i)},toggle(i){return this._popup||(this._renderPopup(),this._renderContent()),this._popup.toggle(i)},open(){return this.toggle(!0)},close(){return this.toggle(!1)},_setListOption(i,t){this._list&&this._list.option(i,t)},_getDisplayValue(i){var e=(0,v.Qd)(i)?this._displayGetter(i):i;return(0,v.Qd)(e)?"":String((0,V.YD)(e,""))},_updateActionButton(i){this.option("useSelectMode")&&this.option({text:this._getDisplayValue(i),icon:(0,v.Qd)(i)?i.icon:void 0}),this._setOptionWithoutOptionChange("selectedItem",i),this._setOptionWithoutOptionChange("selectedItemKey",this._keyGetter(i))},_clean(){this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove()},_selectedItemKeyChanged(i){this._setListOption("selectedItemKeys",this.option("useSelectMode")&&(0,v.O9)(i)?[i]:[]);var t=this.option("selectedItem");this._loadSelectedItem().done(e=>{this._updateActionButton(e),this._displayGetter(t)!==this._displayGetter(e)&&this._fireSelectionChangedAction({previousValue:t,value:e})})},_updateButtonGroup(i,t){this._buttonGroup.option(i,t),this._updateAriaAttributes(this.option("opened"))},_actionButtonOptionChanged(i){var{name:t,value:e}=i,a={};a[t]=e,this._updateButtonGroup("items[0]",(0,y.X)({},this._actionButtonConfig(),a)),this._popup&&this._popup.repaint()},_selectModeChanged(i){if(i){this._setListOption("selectionMode","single");var t=this.option("selectedItemKey");this._setListOption("selectedItemKeys",(0,v.O9)(t)?[t]:[]),this._selectedItemKeyChanged(this.option("selectedItemKey"))}else this._setListOption("selectionMode","none"),this.option({selectedItemKey:void 0,selectedItem:void 0}),this._actionButtonOptionChanged({text:this.option("text")})},_updateItemCollection(i){var t=this.option("selectedItemKey");this._setListOption("selectedItem",null),this._setWidgetOption("_list",[i]),(0,v.O9)(t)&&this._loadSelectedItem().done(e=>{this._setListOption("selectedItemKeys",[t]),this._setListOption("selectedItem",e)}).fail(e=>{this._setListOption("selectedItemKeys",[])}).always(this._updateActionButton.bind(this))},_updateDataSource:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._dataSource.items();this._dataSource=void 0,this._itemsToDataSource(i),this._updateKeyExpr()},_updateKeyExpr:function(){this._compileKeyGetter(),this._setListOption("keyExpr",this._getKey())},focus:function(){this._buttonGroup.focus()},_optionChanged(i){var t,{name:e,value:a}=i;switch(e){case"useSelectMode":this._selectModeChanged(a);break;case"splitButton":this._updateArrowClass(),this._renderButtonGroup();break;case"displayExpr":this._compileDisplayGetter(),this._setListOption(e,a),this._updateActionButton(this.option("selectedItem"));break;case"keyExpr":this._updateDataSource();break;case"buttonGroupOptions":this._innerWidgetOptionChanged(this._buttonGroup,i);break;case"dropDownOptions":if("dropDownOptions.visible"===i.fullName)break;void 0!==i.value.visible&&delete i.value.visible,this._popupOptionChanged(i),this._innerWidgetOptionChanged(this._popup,i);break;case"opened":this.toggle(a);break;case"focusStateEnabled":case"hoverStateEnabled":this._setListOption(e,a),this._updateButtonGroup(e,a),this.callBase(i);break;case"items":this._updateDataSource(this.option("items")),this._updateItemCollection(e);break;case"dataSource":Array.isArray(a)?this._updateDataSource(this.option("dataSource")):(this._initDataSource(),this._updateKeyExpr()),this._updateItemCollection(e);break;case"icon":case"text":this._actionButtonOptionChanged(i);break;case"showArrowIcon":this._updateArrowClass(),this._renderButtonGroup(),this._popup&&this._popup.repaint();break;case"width":case"height":this.callBase(i),null===(t=this._popup)||void 0===t||t.repaint();break;case"stylingMode":case"tabIndex":this._updateButtonGroup(e,a);break;case"type":this._updateButtonGroup("items",this._getButtonGroupItems());break;case"itemTemplate":case"grouped":case"noDataText":case"groupTemplate":case"wrapItemText":case"useItemTextAsTitle":this._setListOption(e,a);break;case"dropDownContentTemplate":this._renderContent();break;case"selectedItemKey":this._selectedItemKeyChanged(a);break;case"selectedItem":break;case"onItemClick":this._createItemClickAction();break;case"onButtonClick":this._createActionClickAction();break;case"onSelectionChanged":this._createSelectionChangedAction();break;case"deferRendering":this.toggle(this.option("opened"));break;default:this.callBase(i)}}}).include(kl.A);(0,le.A)("dxDropDownButton",xA);var Kg="dx-datagrid-export-button";class IA{constructor(t,e,a){this._exportController=t,this._initialColumnWidthsByColumnIndex=e,this._selectedRowsOnly=a}_getGroupValue(t){var{key:e,data:a,rowType:n,groupIndex:r,summaryCells:s}=t,o=this._options.groupColumns[r],l=k.getDisplayValue(o,o.deserializeValue?o.deserializeValue(e[r]):e[r],a,n),d="".concat(o.caption,": ").concat(k.formatValue(l,o));return s&&s[0]&&s[0].length&&(d+=" ".concat(k.getGroupRowSummaryText(s[0],this._options.summaryTexts))),d}_correctCellIndex(t){return t}_initOptions(){var t=this._exportController,e=t._columnsController.getGroupColumns();this._options={columns:t._getColumns(this._initialColumnWidthsByColumnIndex),groupColumns:e,items:this._selectedRowsOnly||t._selectionOnly?t._getSelectedItems():t._getAllItems(),isHeadersVisible:t.option("showColumnHeaders"),summaryTexts:t.option("summary.texts"),rtlEnabled:t.option("rtlEnabled")}}getHeaderStyles(){return[{bold:!0,alignment:"center"},{bold:!0,alignment:"left"},{bold:!0,alignment:"right"}]}getGroupRowStyle(){return{bold:!0,alignment:(0,se.n)(this._options.rtlEnabled)}}getColumnStyles(){var t=[];return this.getColumns().forEach(e=>{t.push({alignment:e.alignment||"left",format:e.format,dataType:e.dataType})}),t}getStyles(){return[...this.getHeaderStyles(),...this.getColumnStyles(),this.getGroupRowStyle()]}_getTotalCellStyleId(t){var e,a=(null===(e=this.getColumns()[t])||void 0===e?void 0:e.alignment)||"right";return this.getHeaderStyles().map(n=>n.alignment).indexOf(a)}getStyleId(t,e){return t<this.getHeaderRowCount()?0:this.isTotalCell(t-this.getHeaderRowCount(),e)?this._getTotalCellStyleId(e):this.isGroupRow(t-this.getHeaderRowCount())?this.getHeaderStyles().length+this.getColumns().length:e+this.getHeaderStyles().length}getColumns(t){var{columns:e}=this._options;return t?e:e[e.length-1]}getColumnsWidths(){var t=this.getColumns();return(0,v.O9)(t)?t.map(e=>e.width):void 0}getRowsCount(){return this._options.items.length+this.getHeaderRowCount()}getHeaderRowCount(){return this.isHeadersVisible()?this._options.columns.length-1:0}isGroupRow(t){return t<this._options.items.length&&"group"===this._options.items[t].rowType}getGroupLevel(t){var e=this._options.items[t-this.getHeaderRowCount()],a=e&&e.groupIndex;return e&&"totalFooter"===e.rowType?0:(0,v.O9)(a)?a:this._options.groupColumns.length}getCellType(t,e){var a=this.getColumns();if(t<this.getHeaderRowCount())return"string";if(t-=this.getHeaderRowCount(),e<a.length){var n=this._options.items.length&&this._options.items[t],r=a[e];return n&&"data"===n.rowType&&isFinite(n.values[this._correctCellIndex(e)])&&!(0,v.O9)(r.customizeText)?(0,v.O9)(r.lookup)?r.lookup.dataType:r.dataType:"string"}}ready(){this._initOptions();var t=this._options;return(0,w.z7)(t.items).done(e=>{t.items=e}).fail(()=>{t.items=[]})}_convertFromGridGroupSummaryItems(t){if((0,v.O9)(t)&&t.length>0)return t.map(e=>({value:e.value,name:e.name}))}getCellData(t,e,a){var n,r,s={cellSourceData:{},value:n},o=this.getColumns(),l=this._correctCellIndex(e);if(t<this.getHeaderRowCount())r=this.getColumns(!0)[t][e],s.cellSourceData.rowType="header",s.cellSourceData.column=r&&r.gridColumn,s.value=r&&r.caption;else{t-=this.getHeaderRowCount();var h=this._options.items.length&&this._options.items[t];if(h){var u=h.values;switch(s.cellSourceData.rowType=h.rowType,s.cellSourceData.column=o[e]&&o[e].gridColumn,h.rowType){case"groupFooter":case"totalFooter":l<u.length&&((0,v.O9)(n=u[l])?(s.cellSourceData.value=n.value,s.cellSourceData.totalSummaryItemName=n.name,s.value=k.getSummaryText(n,this._options.summaryTexts)):s.cellSourceData.value=void 0);break;case"group":if(s.cellSourceData.groupIndex=h.groupIndex,e<1)s.cellSourceData.column=this._options.groupColumns[h.groupIndex],s.cellSourceData.value=h.key[h.groupIndex],s.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(h.summaryCells[0]),s.value=this._getGroupValue(h);else{var c=h.values[l];if(Array.isArray(c)){s.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(c),n="";for(var g=0;g<c.length;g++)n+=(g>0?a?"\n":" \n ":"")+k.getSummaryText(c[g],this._options.summaryTexts);s.value=n}else s.cellSourceData.value=void 0}break;default:if(r=o[e]){var m=u[l],f=k.getDisplayValue(r,m,h.data,h.rowType);s.value=!isFinite(f)||(0,v.O9)(r.customizeText)?a&&(0,v.O9)(r.customizeText)&&r.customizeText===this._exportController._columnsController.getCustomizeTextByDataType("boolean")?f:k.formatValue(f,r):f,s.cellSourceData.value=m}s.cellSourceData.data=h.data}}}return s}isHeadersVisible(){return this._options.isHeadersVisible}isTotalCell(t,e){var{items:a}=this._options,n=a[t],r=this._correctCellIndex(e);return n&&"groupFooter"===n.rowType||"totalFooter"===n.rowType||n.summaryCells&&n.summaryCells[r]&&n.summaryCells[r].length>0&&n.summaryCells[r][0].alignByColumn}getCellMerging(t,e){var{columns:a}=this._options,n=a[t]&&a[t][e];return n?{colspan:(n.exportColspan||1)-1,rowspan:(n.rowspan||1)-1}:{colspan:0,rowspan:0}}getFrozenArea(){return{x:0,y:this.getHeaderRowCount()}}}k.registerModule("export",{defaultOptions:()=>({export:{enabled:!1,fileName:"DataGrid",formats:["xlsx"],allowExportSelectedData:!1,texts:{exportTo:A.A.format("dxDataGrid-exportTo"),exportAll:A.A.format("dxDataGrid-exportAll"),exportSelectedRows:A.A.format("dxDataGrid-exportSelectedRows")}}}),controllers:{export:class AA extends k.ViewController{_getEmptyCell(){return{caption:"",colspan:1,rowspan:1}}_updateColumnWidth(t,e){t.width=e}_getColumns(t){var a,n,e=[],r=this._columnsController,s=r.getRowCount();for(a=0;a<=s;a++){var o=[];n=r.getVisibleColumns(a,!0);var l=void 0;if(a===s)if(this._updateLockCount)l=t;else{var d=this._getColumnWidths(this._headersView,this._rowsView);if(d&&d.length){l={};for(var h=0;h<n.length;h++)l[n[h].index]=d[h]}}for(var u=0;u<n.length;u++){var c=(0,y.X)({},n[u],{dataType:"datetime"===n[u].dataType?"date":n[u].dataType,gridColumn:n[u]});if(this._needColumnExporting(c)){var g=this._calculateExportColspan(c);(0,v.O9)(g)&&(c.exportColspan=g),l&&this._updateColumnWidth(c,l[c.index]),o.push(c)}}e.push(o)}return n=e[s],e=function bA(i,t){for(var e=h=>h||1,a=[],n=(i[0]||[]).reduce((h,u)=>h+e(u.colspan),0),r=(h=>{var u=0,c=0;return()=>{var g=h[u]||[],m=g[c++];return c>=g.length&&(u++,c=0),m&&(m.colspan=e(m.colspan),m.rowspan=e(m.rowspan)),m}})(i),s=(h,u,c)=>{if((a[h]=a[h]||[])[u]=c,c.colspan>1||c.rowspan>1){for(var m=(0,y.X)({},c,t),f=1;f<c.colspan;f++)s(h,u+f,m);for(var x=1;x<c.rowspan;x++)for(var b=0;b<c.colspan;b++)s(h+x,u+b,m)}},o=r(),l=0;o;){for(var d=0;d<n&&o;d++)a[l]&&a[l][d]||(s(l,d,o),d+=o.colspan-1,o=r());l++}return a}(e.slice(0,-1),this._getEmptyCell()),e.push(n),e}_calculateExportColspan(t){if(t.isBand){var e=this._columnsController.getChildrenByBandColumn(t.index,!0);if((0,v.O9)(e))return e.reduce((a,n)=>this._needColumnExporting(n)?a+(this._calculateExportColspan(n)||1):a,0)}}_needColumnExporting(t){return!t.command&&(t.allowExporting||void 0===t.allowExporting)}_getFooterSummaryItems(t,e){var a=[],n=1,r=0;do{for(var s=[],o=0;o<t.length;o++){var l=t[o],d=l.length;n<d&&(n=d),s.push(l[r])}a.push({values:s,rowType:e?"totalFooter":"groupFooter"})}while(r++<n-1);return a}_hasSummaryGroupFooters(){var t=this.option("summary.groupItems");if((0,v.O9)(t))for(var e=0;e<t.length;e++)if(t[e].showInGroupFooter)return!0;return!1}_getItemsWithSummaryGroupFooters(t){for(var e=[],a=[],n=[],r=0;r<t.length;r++){var s=t[r];"groupFooter"===s.rowType?(n=this._getFooterSummaryItems(s.summaryCells),e=e.concat(a,n),a=[]):a.push(s)}return e.length?e:a}_updateGroupValuesWithSummaryByColumn(t){for(var e=[],a=0;a<t.length;a++){var n=t[a],{summaryCells:r}=n;if("group"===n.rowType&&r&&r.length>1){for(var s=n.values.length,o=1;o<r.length;o++)for(var l=0;l<r[o].length;l++){var d=r[o][l];d&&d.alignByColumn&&(Array.isArray(e[o-s])||(e[o-s]=[]),e[o-s].push(d))}e.length>0&&(n.values.push(...e),e=[])}}}_processUnExportedItems(t){for(var n,r,e=this._columnsController.getVisibleColumns(null,!0),a=this._columnsController.getGroupColumns(),s=0;s<t.length;s++){var o=t[s],l=!1;n=[],r=[];for(var d=0;d<e.length;d++){var h=e[d];if(l||(l=["detailExpand","buttons"].includes(h.type)),this._needColumnExporting(h)&&(o.values&&n.push("group"!==o.rowType||n.length?o.values[d]:o.key[o.groupIndex]),o.summaryCells))if("group"!==o.rowType||r.length)r.push(o.summaryCells[d]);else{var u=d-a.length+o.groupIndex;r.push(o.summaryCells[l?u:u+1])}}n.length&&(o.values=n),r.length&&(o.summaryCells=r)}}_getAllItems(t){var d,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this,n=new w.cY,r=this.getController("data"),s=r.footerItems(),o=s.length&&s[0],l=a.option("summary.totalItems");return(0,w.z7)(t).done(h=>{r.loadAll(h,e).done((u,c)=>{a._updateGroupValuesWithSummaryByColumn(u),a._hasSummaryGroupFooters()&&(u=a._getItemsWithSummaryGroupFooters(u)),d=o&&o.summaryCells,(0,v.O9)(c)&&l&&(d=a._getSummaryCells(l,c));var g=o&&a._getFooterSummaryItems(d,!0);g&&(u=u.concat(g)),a._processUnExportedItems(u),n.resolve(u)}).fail(n.reject)}).fail(n.reject),n}_getSummaryCells(t,e){var a=this.getController("data");return a._calculateSummaryCells(t,e,a._columnsController.getVisibleColumns(null,!0),(r,s)=>a._isDataColumn(s)?s.index:-1)}_getSelectedItems(){var t=this.getController("selection");return this.needLoadItemsOnExportingSelectedItems()?this._getAllItems(t.loadSelectedItemsWithFilter(),!0):this._getAllItems(t.getSelectedRowsData())}_getColumnWidths(t,e){return t&&t.isVisible()?t.getColumnWidths():e.getColumnWidths()}throwWarningIfNoOnExportingEvent(){var t,e,a=null===(e=(t=this.component).hasActionSubscription)||void 0===e?void 0:e.call(t,"onExporting");this.option("export.enabled")&&!a&&J.A.log("W1024")}init(){this.throwWarningIfNoOnExportingEvent(),this._columnsController=this.getController("columns"),this._rowsView=this.getView("rowsView"),this._headersView=this.getView("columnHeadersView"),this.createAction("onExporting",{excludeValidators:["disabled","readOnly"]})}callbackNames(){return["selectionOnlyChanged"]}getDataProvider(t){var a,e=this._getColumnWidths(this._headersView,this._rowsView);if(e&&e.length){a={};for(var n=this._columnsController.getVisibleColumns(this._columnsController.getRowCount(),!0),r=0;r<n.length;r++)a[n[r].index]=e[r]}return new IA(this,a,t)}exportTo(t,e){this._selectionOnly=t;var a=this.getAction("onExporting"),n={rtlEnabled:this.option("rtlEnabled"),selectedRowsOnly:!!t,format:e,fileName:"DataGrid",cancel:!1};(0,v.Tn)(a)&&a(n)}publicMethods(){return["getDataProvider"]}selectionOnly(t){if(!(0,v.O9)(t))return this._isSelectedRows;this._isSelectedRows=t,this.selectionOnlyChanged.fire()}optionChanged(t){super.optionChanged(t),"export"===t.name&&this.throwWarningIfNoOnExportingEvent()}needLoadItemsOnExportingSelectedItems(){var t;return null!==(t=this.option("loadItemsOnExportingSelectedItems"))&&void 0!==t?t:this.getController("data")._dataSource.remoteOperations().filtering}}},extenders:{controllers:{editing:{callbackNames(){var i=this.callBase();return(0,v.O9)(i)?i.push("editingButtonsUpdated"):["editingButtonsUpdated"]},_updateEditButtons(){this.callBase(),this.editingButtonsUpdated.fire()}}},views:{headerPanel:{_getToolbarItems(){var i=this.callBase(),t=this._getExportToolbarButton();return t&&(i.push(t),this._correctItemsPosition(i)),i},_getExportToolbarButton(){var i=this._getExportToolbarItems();if(0===i.length)return null;var t=this._needDisableExportButton(),e={name:"exportButton",location:"after",locateInMenu:"auto",sortIndex:30,options:{items:i},disabled:t};if(1===i.length){var a=(0,N.A)((0,N.A)({},i[0]),{hint:i[0].text,elementAttr:{class:Kg}});e.widget="dxButton",e.showText="inMenu",e.options=a}else{var n={icon:"export",displayExpr:"text",items:i,hint:this.option("export.texts.exportTo"),elementAttr:{class:Kg},dropDownOptions:{width:"auto",_wrapperClassExternal:"dx-datagrid-export-menu"}};e.options=n,e.widget="dxDropDownButton",e.menuItemTemplate=(r,s,o)=>{this._createComponent((0,_.A)(o),Ca.A,{items:i})}}return e},_getExportToolbarItems(){var i,t=this.option("export"),e=this.option("export.texts"),a=null!==(i=this.option("export.formats"))&&void 0!==i?i:[];if(!t.enabled)return[];var n=[];return a.forEach(r=>{var s=r.toUpperCase(),o="export";"xlsx"===r&&(s="Excel",o="xlsxfile"),"pdf"===r&&(o="pdffile"),n.push({text:(0,Ze.GP)(e.exportAll,s),icon:o,onClick:()=>{this._exportController.exportTo(!1,r)}}),t.allowExportSelectedData&&n.push({text:(0,Ze.GP)(e.exportSelectedRows,s),icon:"exportselected",onClick:()=>{this._exportController.exportTo(!0,r)}})}),n},_correctItemsPosition(i){i.sort((t,e)=>t.sortIndex-e.sortIndex)},_isExportButtonVisible(){return this.option("export.enabled")},optionChanged(i){this.callBase(i),"export"===i.name&&(i.handled=!0,this._invalidate())},_needDisableExportButton(){var i=!this._columnsController.hasVisibleDataColumns(),t=this._editingController.hasChanges();return i||t},_columnOptionChanged(i){if(this.callBase(i),k.checkChanges(i.optionNames,["groupIndex","visible","all"])){var e=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",e)}},init(){this.callBase(),this._exportController=this.getController("export"),this._editingController=this.getController("editing"),this._editingController.editingButtonsUpdated.add(()=>{var i=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",i)})},isVisible(){return this.callBase()||this._isExportButtonVisible()}}}}});var TA=Number.MAX_SAFE_INTEGER||9007199254740991;k.registerModule("focus",(0,y.X)(!0,{},ws,{extenders:{controllers:{data:i=>class extends(i.inherit(ws.extenders.controllers.data)){changeRowExpand(t,e){if(this.option("focusedRowEnabled")&&Array.isArray(t)&&this.isRowExpanded(t)){var a=this.getController("keyboardNavigation");(!e||!a.isKeyboardEnabled())&&this._isFocusedRowInsideGroup(t)&&this.option("focusedRowKey",t)}return super.changeRowExpand(t,e)}_isFocusedRowInsideGroup(t){var e=this.getController("columns"),a=this.option("focusedRowKey"),n=this.getRowIndexByKey(a),r=n>=0&&this.getVisibleRows()[n],s=e.getGroupDataSourceParameters(!0);if(r)for(var o=0;o<t.length;++o)if((0,q.Hz)(s[o]&&s[o].selector)(r.data)!==t[o])return!1;return!0}_getGroupPath(t,e){for(var a=[],n=[t];n&&n[0]&&e;){var r=n[0];void 0!==r.key&&a.push(r.key),n=r.items,e--}return a}_expandGroupByPath(t,e,a){var n=new w.cY;return a++,t.expandRow(e.slice(0,a)).done(()=>{a===e.length?n.resolve():t._expandGroupByPath(t,e,a).done(n.resolve).fail(n.reject)}).fail(n.reject),n.promise()}_calculateGlobalRowIndexByGroupedData(t){var e=this,a=e._dataSource,n=e._generateFilterByKey(t),r=new w.cY,s=Array.isArray(t),o=a.group();return s?r.resolve(-1).promise():a._grouping._updatePagingOptions?(a.load({filter:e._concatWithCombinedFilter(n),group:o}).done(l=>{if(!l||0===l.length||!(0,v.O9)(l[0].key)||-1===l[0].key)return r.resolve(-1).promise();var d=e._getGroupPath(l[0],o.length);e._expandGroupByPath(e,d,0).done(()=>{e._calculateExpandedRowGlobalIndex(r,t,d,o)}).fail(r.reject)}).fail(r.reject),r.promise()):(e._calculateGlobalRowIndexByFlatData(t,null,!0).done(r.resolve).fail(r.reject),r)}_calculateExpandedRowGlobalIndex(t,e,a,n){var h,r=Kt(a,{group:n}),s=this._dataSource,o=this.option("scrolling.mode"),l="virtual"===o||"infinite"===o,d=s.pageSize();s._grouping._updatePagingOptions({skip:0,take:TA},(u,c)=>{(0,V.RL)(u.path,a)&&(h=c)}),this._calculateGlobalRowIndexByFlatData(e,r).done(u=>{var c,g;u<0?t.resolve(-1):(c=(h%d||d)+u-a.length,g=l?0:Math.floor(c/(d-a.length))*a.length,t.resolve(c=h+u+g))}).fail(t.reject)}}}}})),k.registerModule("rowDragging",rg);let DA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.nrj,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C._zS,C.U9o,C.hyP,C._RO,C.YC7,C.GIV,C.X1G,C.W6p,C.Pxf,C.BR_,C.uE7,C.$lK,C.aJg,C.GCl,C.Sy5,C.k61,C.POb,C.hUd,C.HKo,C.Ixj,C.a6E,C.YLo,C.YaD,C.eNx,C.Tob,C.$Ql,C.isg,C.uIe,C.L0X,C.MtA,C.yA4,C.oCB,C.tWd,C.zkV,C.Sn2,C.MBy,C.qCh,C.joz,C.FOK,C.x_w,C.s5o,C.Zac,C.ZaD,C.m1r,C.Wnt,C.rER,C.XUe,C.lkr,C.WC8,C.GQ,C.kYc,C.X6g,C.WXx,C.CWj,C.Mru,C.Hl$,C.l4W,E.p_,E.xZ],C.nrj,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C._zS,C.U9o,C.hyP,C._RO,C.YC7,C.GIV,C.X1G,C.W6p,C.Pxf,C.BR_,C.uE7,C.$lK,C.aJg,C.GCl,C.Sy5,C.k61,C.POb,C.hUd,C.HKo,C.Ixj,C.a6E,C.YLo,C.YaD,C.eNx,C.Tob,C.$Ql,C.isg,C.uIe,C.L0X,C.MtA,C.yA4,C.oCB,C.tWd,C.zkV,C.Sn2,C.MBy,C.qCh,C.joz,C.FOK,C.x_w,C.s5o,C.Zac,C.ZaD,C.m1r,C.Wnt,C.rER,C.XUe,C.lkr,C.WC8,C.GQ,C.kYc,C.X6g,C.WXx,C.CWj,C.Mru,C.Hl$,C.l4W,E.xZ]}),i})(),FA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.YLo,C.YaD,C.eNx,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C.Tob,C.$Ql,C.isg,E.p_,E.xZ],C.YLo,C.YaD,C.eNx,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C.Tob,C.$Ql,C.isg,E.xZ]}),i})();var Ns=D(3341),Gg="dx-radiobutton",Ug="dx-radiobutton-icon";class KA extends _a.A{_focusTarget(){return this.$element().parent()}_nullValueSelectionSupported(){return!0}_getDefaultOptions(){var t=super._getDefaultOptions();return(0,y.X)(t,Ns.A._dataExpressionDefaultOptions(),{_itemAttributes:{role:"radio"}})}_initMarkup(){super._initMarkup(),(0,V.zE)(()=>{this.itemElements().addClass(Gg)})}_keyboardEventBindingTarget(){return this._focusTarget()}_postprocessRenderItem(t){var{itemData:{html:e},itemElement:a}=t;if(!e){var n=(0,_.A)("<div>").addClass(Ug);(0,_.A)("<div>").addClass("dx-radiobutton-icon-dot").appendTo(n);var r=(0,_.A)("<div>").append(n).addClass("dx-radio-value-container");(0,_.A)(a).prepend(r)}super._postprocessRenderItem(t)}_processSelectableItem(t,e){super._processSelectableItem(t,e),t.toggleClass("dx-radiobutton-checked",e).find(".".concat(Ug)).first().toggleClass("dx-radiobutton-icon-checked",e),this.setAria("checked",e,t)}_refreshContent(){this._prepareContent(),this._renderContent()}_supportedKeys(){var t=super._supportedKeys();return(0,y.X)({},t,{enter:function(e){return e.preventDefault(),t.enter.apply(this,arguments)},space:function(e){return e.preventDefault(),t.space.apply(this,arguments)}})}_itemElements(){return this._itemContainer().children(this._itemSelector())}_setAriaSelectionAttribute(){}}class Hs extends Qa.A{_dataSourceOptions(){return{paginate:!1}}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:{tablet:!0},options:{layout:"horizontal"}},{device:()=>"desktop"===ne.A.real().deviceType&&!ne.A.isSimulator(),options:{focusStateEnabled:!0}}])}_fireContentReadyAction(t){t&&super._fireContentReadyAction()}_focusTarget(){return this.$element()}_getAriaTarget(){return this.$element()}_getDefaultOptions(){var t=super._getDefaultOptions();return(0,y.X)(t,(0,y.X)(Ns.A._dataExpressionDefaultOptions(),{hoverStateEnabled:!0,activeStateEnabled:!0,layout:"vertical"}))}_getItemValue(t){return this._valueGetter?this._valueGetter(t):t.text}_getSubmitElement(){return this._$submitElement}_init(){super._init(),this._activeStateUnit=".".concat(Gg),this._feedbackHideTimeout=100,this._initDataExpressions()}_initMarkup(){this.$element().addClass("dx-radiogroup"),this._renderSubmitElement(),this.setAria("role","radiogroup"),this._renderRadios(),this._renderLayout(),super._initMarkup()}_itemClickHandler(t){var{itemElement:e,event:a,itemData:n}=t;if(this.itemElements().is(e)){var r=this._getItemValue(n);r!==this.option("value")&&(this._saveValueChangeEvent(a),this.option("value",r))}}_getSelectedItemKeys(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.option("value");return"this"!==this.option("valueExpr")&&null===t||(0,v.O9)(t)?[t]:[]}_setSelection(t){var e=this._unwrappedValue(t);this._setCollectionWidgetOption("selectedItemKeys",this._getSelectedItemKeys(e))}_renderValidationState(){var t;super._renderValidationState(),null===(t=this._validationMessage)||void 0===t||t.$content().attr("role","alert")}_optionChanged(t){var{name:e,value:a}=t;switch(this._dataExpressionOptionChanged(t),e){case"dataSource":this._invalidate();break;case"focusStateEnabled":case"accessKey":case"tabIndex":this._setCollectionWidgetOption(e,a);break;case"disabled":super._optionChanged(t),this._setCollectionWidgetOption(e,a);break;case"valueExpr":this._setCollectionWidgetOption("keyExpr",this._getCollectionKeyExpr());break;case"value":this._setSelection(a),this._setSubmitValue(a),super._optionChanged(t);break;case"items":this._setSelection(this.option("value"));break;case"itemTemplate":case"displayExpr":break;case"layout":this._renderLayout(),this._updateItemsSize();break;default:super._optionChanged(t)}}_render(){super._render(),this._updateItemsSize()}_renderLayout(){var t=this.option("layout"),e=this.$element();e.toggleClass("dx-radiogroup-vertical","vertical"===t),e.toggleClass("dx-radiogroup-horizontal","horizontal"===t)}_renderRadios(){this._areRadiosCreated=new w.cY;var t=(0,_.A)("<div>").appendTo(this.$element()),{displayExpr:e,accessKey:a,focusStateEnabled:n,itemTemplate:r,tabIndex:s}=this.option();this._createComponent(t,KA,{onInitialized:o=>{var{component:l}=o;this._radios=l},onContentReady:o=>{this._fireContentReadyAction(!0)},onItemClick:this._itemClickHandler.bind(this),displayExpr:e,accessKey:a,dataSource:this._dataSource,focusStateEnabled:n,itemTemplate:r,keyExpr:this._getCollectionKeyExpr(),noDataText:"",scrollingEnabled:!1,selectByClick:!1,selectionMode:"single",selectedItemKeys:this._getSelectedItemKeys(),tabIndex:s}),this._areRadiosCreated.resolve()}_renderSubmitElement(){this._$submitElement=(0,_.A)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue()}_setOptionsByReference(){super._setOptionsByReference(),(0,y.X)(this._optionsByReference,{value:!0})}_setSubmitValue(t){var e;t=null!==(e=t)&&void 0!==e?e:this.option("value");var a="this"===this.option("valueExpr")?this._displayGetter(t):t;this._$submitElement.val(a)}_setCollectionWidgetOption(){this._areRadiosCreated.done(this._setWidgetOption.bind(this,"_radios",arguments))}_updateItemsSize(){if("horizontal"===this.option("layout"))this.itemElements().css("height","auto");else{var t=this.option("items").length;this.itemElements().css("height",100/t+"%")}}focus(){var t;null===(t=this._radios)||void 0===t||t.focus()}itemElements(){var t;return null===(t=this._radios)||void 0===t?void 0:t.itemElements()}}Hs.include(Ns.A),(0,le.A)("dxRadioGroup",Hs);const WA=Hs,GA={provide:He.kq,useExisting:(0,p.Rfq)(()=>UA),multi:!0};let UA=(()=>{class i extends E.ic{constructor(e,a,n,r,s,o,l,d){super(e,a,n,r,l,d),this._watcherHelper=r,this._idh=s,this.touched=h=>{},this._createEventEmitters([{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"valueChanged",emit:"onValueChanged"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"dataSourceChange"},{emit:"disabledChange"},{emit:"displayExprChange"},{emit:"elementAttrChange"},{emit:"focusStateEnabledChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"isDirtyChange"},{emit:"isValidChange"},{emit:"itemsChange"},{emit:"itemTemplateChange"},{emit:"layoutChange"},{emit:"nameChange"},{emit:"readOnlyChange"},{emit:"rtlEnabledChange"},{emit:"tabIndexChange"},{emit:"validationErrorChange"},{emit:"validationErrorsChange"},{emit:"validationMessageModeChange"},{emit:"validationMessagePositionChange"},{emit:"validationStatusChange"},{emit:"valueChange"},{emit:"valueExprChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"onBlur"}]),this._idh.setHost(this),o.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(e){this._setOption("accessKey",e)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(e){this._setOption("activeStateEnabled",e)}get dataSource(){return this._getOption("dataSource")}set dataSource(e){this._setOption("dataSource",e)}get disabled(){return this._getOption("disabled")}set disabled(e){this._setOption("disabled",e)}get displayExpr(){return this._getOption("displayExpr")}set displayExpr(e){this._setOption("displayExpr",e)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(e){this._setOption("elementAttr",e)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(e){this._setOption("focusStateEnabled",e)}get height(){return this._getOption("height")}set height(e){this._setOption("height",e)}get hint(){return this._getOption("hint")}set hint(e){this._setOption("hint",e)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(e){this._setOption("hoverStateEnabled",e)}get isDirty(){return this._getOption("isDirty")}set isDirty(e){this._setOption("isDirty",e)}get isValid(){return this._getOption("isValid")}set isValid(e){this._setOption("isValid",e)}get items(){return this._getOption("items")}set items(e){this._setOption("items",e)}get itemTemplate(){return this._getOption("itemTemplate")}set itemTemplate(e){this._setOption("itemTemplate",e)}get layout(){return this._getOption("layout")}set layout(e){this._setOption("layout",e)}get name(){return this._getOption("name")}set name(e){this._setOption("name",e)}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOption("readOnly",e)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(e){this._setOption("rtlEnabled",e)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(e){this._setOption("tabIndex",e)}get validationError(){return this._getOption("validationError")}set validationError(e){this._setOption("validationError",e)}get validationErrors(){return this._getOption("validationErrors")}set validationErrors(e){this._setOption("validationErrors",e)}get validationMessageMode(){return this._getOption("validationMessageMode")}set validationMessageMode(e){this._setOption("validationMessageMode",e)}get validationMessagePosition(){return this._getOption("validationMessagePosition")}set validationMessagePosition(e){this._setOption("validationMessagePosition",e)}get validationStatus(){return this._getOption("validationStatus")}set validationStatus(e){this._setOption("validationStatus",e)}get value(){return this._getOption("value")}set value(e){this._setOption("value",e)}get valueExpr(){return this._getOption("valueExpr")}set valueExpr(e){this._setOption("valueExpr",e)}get visible(){return this._getOption("visible")}set visible(e){this._setOption("visible",e)}get width(){return this._getOption("width")}set width(e){this._setOption("width",e)}change(e){}get itemsChildren(){return this._getOption("items")}set itemsChildren(e){this.setChildren("items",e)}_createInstance(e,a){return new WA(e,a)}writeValue(e){this.eventHelper.lockedValueChangeEvent=!0,this.value=e,this.eventHelper.lockedValueChangeEvent=!1}setDisabledState(e){this.disabled=e}registerOnChange(e){this.change=e}registerOnTouched(e){this.touched=e}_createWidget(e){super._createWidget(e),this.instance.on("focusOut",a=>{this.eventHelper.fireNgEvent("onBlur",[a])})}ngOnDestroy(){this._destroyWidget()}ngOnChanges(e){super.ngOnChanges(e),this.setupChanges("dataSource",e),this.setupChanges("items",e),this.setupChanges("validationErrors",e)}setupChanges(e,a){e in this._optionsToUpdate||this._idh.setup(e,a)}ngDoCheck(){this._idh.doCheck("dataSource"),this._idh.doCheck("items"),this._idh.doCheck("validationErrors"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(e,a){let n=this._idh.setupSingle(e,a),r=null!==this._idh.getChanges(e,a);(n||r)&&super._setOption(e,a)}}return i.\u0275fac=function(e){return new(e||i)(p.rXU(p.aKT),p.rXU(p.SKi),p.rXU(E.zF),p.rXU(E.jS),p.rXU(E.$M),p.rXU(E.fH),p.rXU(he.pJ),p.rXU(p.Agw))},i.\u0275cmp=p.VBU({type:i,selectors:[["dx-radio-group"]],contentQueries:function(e,a,n){if(1&e&&p.wni(n,C.CVf,4),2&e){let r;p.mGM(r=p.lsd())&&(a.itemsChildren=r)}},hostBindings:function(e,a){1&e&&p.bIt("valueChange",function(r){return a.change(r)})("onBlur",function(r){return a.touched(r)})},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",dataSource:"dataSource",disabled:"disabled",displayExpr:"displayExpr",elementAttr:"elementAttr",focusStateEnabled:"focusStateEnabled",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",isDirty:"isDirty",isValid:"isValid",items:"items",itemTemplate:"itemTemplate",layout:"layout",name:"name",readOnly:"readOnly",rtlEnabled:"rtlEnabled",tabIndex:"tabIndex",validationError:"validationError",validationErrors:"validationErrors",validationMessageMode:"validationMessageMode",validationMessagePosition:"validationMessagePosition",validationStatus:"validationStatus",value:"value",valueExpr:"valueExpr",visible:"visible",width:"width"},outputs:{onContentReady:"onContentReady",onDisposing:"onDisposing",onInitialized:"onInitialized",onOptionChanged:"onOptionChanged",onValueChanged:"onValueChanged",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",dataSourceChange:"dataSourceChange",disabledChange:"disabledChange",displayExprChange:"displayExprChange",elementAttrChange:"elementAttrChange",focusStateEnabledChange:"focusStateEnabledChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",isDirtyChange:"isDirtyChange",isValidChange:"isValidChange",itemsChange:"itemsChange",itemTemplateChange:"itemTemplateChange",layoutChange:"layoutChange",nameChange:"nameChange",readOnlyChange:"readOnlyChange",rtlEnabledChange:"rtlEnabledChange",tabIndexChange:"tabIndexChange",validationErrorChange:"validationErrorChange",validationErrorsChange:"validationErrorsChange",validationMessageModeChange:"validationMessageModeChange",validationMessagePositionChange:"validationMessagePositionChange",validationStatusChange:"validationStatusChange",valueChange:"valueChange",valueExprChange:"valueExprChange",visibleChange:"visibleChange",widthChange:"widthChange",onBlur:"onBlur"},features:[p.Jv_([E.zF,E.jS,GA,E.fH,E.$M]),p.Vt3,p.OA$],decls:0,vars:0,template:function(e,a){},encapsulation:2}),i})(),$A=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.POb,E.p_,E.xZ],C.POb,E.xZ]}),i})(),XA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.YLo,C.YaD,C.eNx,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C.Tob,C.$Ql,E.p_,E.xZ],C.YLo,C.YaD,C.eNx,C.Bkf,C.nwt,C.hXw,C.YGc,C.gf0,C.rvW,C.Tob,C.$Ql,E.xZ]}),i})(),YA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.nz1,C.$lK,E.p_,E.xZ],C.nz1,C.$lK,E.xZ]}),i})();D(6970);let QA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.POb,E.p_,E.xZ],C.POb,E.xZ]}),i})();D(9433);let JA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[E.p_,E.xZ],E.xZ]}),i})(),eT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[E.p_,E.xZ],E.xZ]}),i})();const tT={provide:He.kq,useExisting:(0,p.Rfq)(()=>iT),multi:!0};let iT=(()=>{class i extends E.ic{constructor(e,a,n,r,s,o,l,d){super(e,a,n,r,l,d),this._watcherHelper=r,this._idh=s,this.touched=h=>{},this._createEventEmitters([{subscribe:"change",emit:"onChange"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"copy",emit:"onCopy"},{subscribe:"cut",emit:"onCut"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"enterKey",emit:"onEnterKey"},{subscribe:"focusIn",emit:"onFocusIn"},{subscribe:"focusOut",emit:"onFocusOut"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"input",emit:"onInput"},{subscribe:"keyDown",emit:"onKeyDown"},{subscribe:"keyUp",emit:"onKeyUp"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"paste",emit:"onPaste"},{subscribe:"valueChanged",emit:"onValueChanged"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"buttonsChange"},{emit:"disabledChange"},{emit:"elementAttrChange"},{emit:"focusStateEnabledChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"inputAttrChange"},{emit:"isDirtyChange"},{emit:"isValidChange"},{emit:"labelChange"},{emit:"labelModeChange"},{emit:"maskChange"},{emit:"maskCharChange"},{emit:"maskInvalidMessageChange"},{emit:"maskRulesChange"},{emit:"maxLengthChange"},{emit:"modeChange"},{emit:"nameChange"},{emit:"placeholderChange"},{emit:"readOnlyChange"},{emit:"rtlEnabledChange"},{emit:"showClearButtonChange"},{emit:"showMaskModeChange"},{emit:"spellcheckChange"},{emit:"stylingModeChange"},{emit:"tabIndexChange"},{emit:"textChange"},{emit:"useMaskedValueChange"},{emit:"validationErrorChange"},{emit:"validationErrorsChange"},{emit:"validationMessageModeChange"},{emit:"validationMessagePositionChange"},{emit:"validationStatusChange"},{emit:"valueChange"},{emit:"valueChangeEventChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"onBlur"}]),this._idh.setHost(this),o.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(e){this._setOption("accessKey",e)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(e){this._setOption("activeStateEnabled",e)}get buttons(){return this._getOption("buttons")}set buttons(e){this._setOption("buttons",e)}get disabled(){return this._getOption("disabled")}set disabled(e){this._setOption("disabled",e)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(e){this._setOption("elementAttr",e)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(e){this._setOption("focusStateEnabled",e)}get height(){return this._getOption("height")}set height(e){this._setOption("height",e)}get hint(){return this._getOption("hint")}set hint(e){this._setOption("hint",e)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(e){this._setOption("hoverStateEnabled",e)}get inputAttr(){return this._getOption("inputAttr")}set inputAttr(e){this._setOption("inputAttr",e)}get isDirty(){return this._getOption("isDirty")}set isDirty(e){this._setOption("isDirty",e)}get isValid(){return this._getOption("isValid")}set isValid(e){this._setOption("isValid",e)}get label(){return this._getOption("label")}set label(e){this._setOption("label",e)}get labelMode(){return this._getOption("labelMode")}set labelMode(e){this._setOption("labelMode",e)}get mask(){return this._getOption("mask")}set mask(e){this._setOption("mask",e)}get maskChar(){return this._getOption("maskChar")}set maskChar(e){this._setOption("maskChar",e)}get maskInvalidMessage(){return this._getOption("maskInvalidMessage")}set maskInvalidMessage(e){this._setOption("maskInvalidMessage",e)}get maskRules(){return this._getOption("maskRules")}set maskRules(e){this._setOption("maskRules",e)}get maxLength(){return this._getOption("maxLength")}set maxLength(e){this._setOption("maxLength",e)}get mode(){return this._getOption("mode")}set mode(e){this._setOption("mode",e)}get name(){return this._getOption("name")}set name(e){this._setOption("name",e)}get placeholder(){return this._getOption("placeholder")}set placeholder(e){this._setOption("placeholder",e)}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOption("readOnly",e)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(e){this._setOption("rtlEnabled",e)}get showClearButton(){return this._getOption("showClearButton")}set showClearButton(e){this._setOption("showClearButton",e)}get showMaskMode(){return this._getOption("showMaskMode")}set showMaskMode(e){this._setOption("showMaskMode",e)}get spellcheck(){return this._getOption("spellcheck")}set spellcheck(e){this._setOption("spellcheck",e)}get stylingMode(){return this._getOption("stylingMode")}set stylingMode(e){this._setOption("stylingMode",e)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(e){this._setOption("tabIndex",e)}get text(){return this._getOption("text")}set text(e){this._setOption("text",e)}get useMaskedValue(){return this._getOption("useMaskedValue")}set useMaskedValue(e){this._setOption("useMaskedValue",e)}get validationError(){return this._getOption("validationError")}set validationError(e){this._setOption("validationError",e)}get validationErrors(){return this._getOption("validationErrors")}set validationErrors(e){this._setOption("validationErrors",e)}get validationMessageMode(){return this._getOption("validationMessageMode")}set validationMessageMode(e){this._setOption("validationMessageMode",e)}get validationMessagePosition(){return this._getOption("validationMessagePosition")}set validationMessagePosition(e){this._setOption("validationMessagePosition",e)}get validationStatus(){return this._getOption("validationStatus")}set validationStatus(e){this._setOption("validationStatus",e)}get value(){return this._getOption("value")}set value(e){this._setOption("value",e)}get valueChangeEvent(){return this._getOption("valueChangeEvent")}set valueChangeEvent(e){this._setOption("valueChangeEvent",e)}get visible(){return this._getOption("visible")}set visible(e){this._setOption("visible",e)}get width(){return this._getOption("width")}set width(e){this._setOption("width",e)}change(e){}get buttonsChildren(){return this._getOption("buttons")}set buttonsChildren(e){this.setChildren("buttons",e)}_createInstance(e,a){return new xi.A(e,a)}writeValue(e){this.eventHelper.lockedValueChangeEvent=!0,this.value=e,this.eventHelper.lockedValueChangeEvent=!1}setDisabledState(e){this.disabled=e}registerOnChange(e){this.change=e}registerOnTouched(e){this.touched=e}_createWidget(e){super._createWidget(e),this.instance.on("focusOut",a=>{this.eventHelper.fireNgEvent("onBlur",[a])})}ngOnDestroy(){this._destroyWidget()}ngOnChanges(e){super.ngOnChanges(e),this.setupChanges("buttons",e),this.setupChanges("validationErrors",e)}setupChanges(e,a){e in this._optionsToUpdate||this._idh.setup(e,a)}ngDoCheck(){this._idh.doCheck("buttons"),this._idh.doCheck("validationErrors"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(e,a){let n=this._idh.setupSingle(e,a),r=null!==this._idh.getChanges(e,a);(n||r)&&super._setOption(e,a)}}return i.\u0275fac=function(e){return new(e||i)(p.rXU(p.aKT),p.rXU(p.SKi),p.rXU(E.zF),p.rXU(E.jS),p.rXU(E.$M),p.rXU(E.fH),p.rXU(he.pJ),p.rXU(p.Agw))},i.\u0275cmp=p.VBU({type:i,selectors:[["dx-text-box"]],contentQueries:function(e,a,n){if(1&e&&p.wni(n,C.BrI,4),2&e){let r;p.mGM(r=p.lsd())&&(a.buttonsChildren=r)}},hostBindings:function(e,a){1&e&&p.bIt("valueChange",function(r){return a.change(r)})("onBlur",function(r){return a.touched(r)})},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",buttons:"buttons",disabled:"disabled",elementAttr:"elementAttr",focusStateEnabled:"focusStateEnabled",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",inputAttr:"inputAttr",isDirty:"isDirty",isValid:"isValid",label:"label",labelMode:"labelMode",mask:"mask",maskChar:"maskChar",maskInvalidMessage:"maskInvalidMessage",maskRules:"maskRules",maxLength:"maxLength",mode:"mode",name:"name",placeholder:"placeholder",readOnly:"readOnly",rtlEnabled:"rtlEnabled",showClearButton:"showClearButton",showMaskMode:"showMaskMode",spellcheck:"spellcheck",stylingMode:"stylingMode",tabIndex:"tabIndex",text:"text",useMaskedValue:"useMaskedValue",validationError:"validationError",validationErrors:"validationErrors",validationMessageMode:"validationMessageMode",validationMessagePosition:"validationMessagePosition",validationStatus:"validationStatus",value:"value",valueChangeEvent:"valueChangeEvent",visible:"visible",width:"width"},outputs:{onChange:"onChange",onContentReady:"onContentReady",onCopy:"onCopy",onCut:"onCut",onDisposing:"onDisposing",onEnterKey:"onEnterKey",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onInitialized:"onInitialized",onInput:"onInput",onKeyDown:"onKeyDown",onKeyUp:"onKeyUp",onOptionChanged:"onOptionChanged",onPaste:"onPaste",onValueChanged:"onValueChanged",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",buttonsChange:"buttonsChange",disabledChange:"disabledChange",elementAttrChange:"elementAttrChange",focusStateEnabledChange:"focusStateEnabledChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",inputAttrChange:"inputAttrChange",isDirtyChange:"isDirtyChange",isValidChange:"isValidChange",labelChange:"labelChange",labelModeChange:"labelModeChange",maskChange:"maskChange",maskCharChange:"maskCharChange",maskInvalidMessageChange:"maskInvalidMessageChange",maskRulesChange:"maskRulesChange",maxLengthChange:"maxLengthChange",modeChange:"modeChange",nameChange:"nameChange",placeholderChange:"placeholderChange",readOnlyChange:"readOnlyChange",rtlEnabledChange:"rtlEnabledChange",showClearButtonChange:"showClearButtonChange",showMaskModeChange:"showMaskModeChange",spellcheckChange:"spellcheckChange",stylingModeChange:"stylingModeChange",tabIndexChange:"tabIndexChange",textChange:"textChange",useMaskedValueChange:"useMaskedValueChange",validationErrorChange:"validationErrorChange",validationErrorsChange:"validationErrorsChange",validationMessageModeChange:"validationMessageModeChange",validationMessagePositionChange:"validationMessagePositionChange",validationStatusChange:"validationStatusChange",valueChange:"valueChange",valueChangeEventChange:"valueChangeEventChange",visibleChange:"visibleChange",widthChange:"widthChange",onBlur:"onBlur"},features:[p.Jv_([E.zF,E.jS,tT,E.fH,E.$M]),p.Vt3,p.OA$],decls:0,vars:0,template:function(e,a){},encapsulation:2}),i})(),aT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[[C.GIV,C.u4t,E.p_,E.xZ],C.GIV,C.u4t,E.xZ]}),i})(),nT=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275mod=p.$C({type:i});static#i=this.\u0275inj=p.G2t({imports:[Wt.MD,fI,xI.F,wI,RI,DA,lg,sg,og,jg,FA,$A,XA,YA,QA,JA,eT,aT]})}return i})();var rT=D(206),sT=D(6444);let oT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.$C({type:i}),i.\u0275inj=p.G2t({imports:[Wt.MD]}),i})(),lT=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275mod=p.$C({type:i});static#i=this.\u0275inj=p.G2t({providers:[ua,Gs,F0,Wt.vh,$s],imports:[Wt.MD,nT,Zg,Ws.q1,Us.Q_.forRoot(),He.YN,pp,mv,Rp,E.xZ,n_,gv,sg,og,lg,rT.m_,sT.G,oT]})}return i})()}}]);